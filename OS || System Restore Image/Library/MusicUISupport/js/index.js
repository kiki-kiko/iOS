!function t(e,n,i){function a(l,o){if(!n[l]){if(!e[l]){var s="function"==typeof require&&require;if(!o&&s)return s(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+l+"'")}var c=n[l]={exports:{}};e[l][0].call(c.exports,function(t){var n=e[l][1][t];return a(n?n:t)},c,c.exports,t,e,n,i)}return n[l].exports}for(var r="function"==typeof require&&require,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(t,e,n){e.exports={"images/error/background-1024h.jpg":"on-demand/images/error/8a9300dd8c0a2bffe51dacfb8a44abdc/background-1024h.jpg","images/error/background-1024h@2x.jpg":"on-demand/images/error/19d7d2b17e0b2cefcd11cae4e4edb553/background-1024h@2x.jpg","images/error/background-1366h@2x.jpg":"on-demand/images/error/3734a52a62f834eefb98f48867547f61/background-1366h@2x.jpg","images/error/background-480h.jpg":"on-demand/images/error/84cd777b96caa1faf43e2a2567eeb2a2/background-480h.jpg","images/error/background-480h@2x.jpg":"on-demand/images/error/5cc7f0d392463e7eab668f88dd337c9c/background-480h@2x.jpg","images/error/background-568h.jpg":"on-demand/images/error/765f48c3127c76bd17723da7b1f4c149/background-568h.jpg","images/error/background-568h@2x.jpg":"on-demand/images/error/cc0dae8cd5b41c369ac6d60dda628b87/background-568h@2x.jpg","images/error/background-667h@2x.jpg":"on-demand/images/error/a613b25ba9f127c6beb3af1a6644a8ea/background-667h@2x.jpg","images/error/background-667h@3x.jpg":"on-demand/images/error/a613b25ba9f127c6beb3af1a6644a8ea/background-667h@3x.jpg","images/error/background-736h@3x.jpg":"on-demand/images/error/92f6680bbac794ffdce86c8066fbcb4b/background-736h@3x.jpg","images/family/background-1024h.jpg":"on-demand/images/family/82f7e579148e0354aec2fe13a469165c/background-1024h.jpg","images/family/background-1024h@2x.jpg":"on-demand/images/family/79f3dda79f061053d3f516ac94cd4caf/background-1024h@2x.jpg","images/family/background-1366h@2x.jpg":"on-demand/images/family/c5efd2dead29f73171f621eda4769e13/background-1366h@2x.jpg","images/family/background-480h.jpg":"on-demand/images/family/61e3043fa84f5a83411166edac360076/background-480h.jpg","images/family/background-480h@2x.jpg":"on-demand/images/family/761723cbf8623345dd67a60dd5105ef4/background-480h@2x.jpg","images/family/background-568h.jpg":"on-demand/images/family/0d1a4d54b265ef7a5f3ddc5d7286d631/background-568h.jpg","images/family/background-568h@2x.jpg":"on-demand/images/family/befabeb33560663b87b54898e9ea2df3/background-568h@2x.jpg","images/family/background-667h@2x.jpg":"on-demand/images/family/1fe35de17d44fcc23debc67cc7ac7079/background-667h@2x.jpg","images/family/background-667h@3x.jpg":"on-demand/images/family/1fe35de17d44fcc23debc67cc7ac7079/background-667h@3x.jpg","images/family/background-736h@3x.jpg":"on-demand/images/family/76d743447a584964bcae1d82ba854713/background-736h@3x.jpg","images/subscription_autorenew/background-1024h.jpg":"on-demand/images/subscription_autorenew/054b1d49967dd9df1f17dda982eecea2/background-1024h.jpg","images/subscription_autorenew/background-1024h@2x.jpg":"on-demand/images/subscription_autorenew/15a3a41b89d2a7c5c9455cc26fff900b/background-1024h@2x.jpg","images/subscription_autorenew/background-1366h@2x.jpg":"on-demand/images/subscription_autorenew/11dea4e5b45550a8d0cf06ca8620aa00/background-1366h@2x.jpg","images/subscription_autorenew/background-480h.jpg":"on-demand/images/subscription_autorenew/5e3efb10f0edf3dc44c9417812000f43/background-480h.jpg","images/subscription_autorenew/background-480h@2x.jpg":"on-demand/images/subscription_autorenew/b5354bf8d3f57bde390c6f64d384bec0/background-480h@2x.jpg","images/subscription_autorenew/background-568h.jpg":"on-demand/images/subscription_autorenew/457a6a8e40ef90e848ab70add580f39c/background-568h.jpg","images/subscription_autorenew/background-667h@2x.jpg":"on-demand/images/subscription_autorenew/767f09d0f431c99be187328e0569ae14/background-667h@2x.jpg","images/subscription_autorenew/background-667h@3x.jpg":"on-demand/images/subscription_autorenew/767f09d0f431c99be187328e0569ae14/background-667h@3x.jpg","images/subscription_autorenew/background-736h@3x.jpg":"on-demand/images/subscription_autorenew/631b1466d1f97754374adf8fae1ea5e5/background-736h@3x.jpg"}},{}],2:[function(t,e,n){var i=t("./lib"),a=new i;e.exports=a},{"./lib":379}],3:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=i.controller.MultiElementController,o=i.event.Event,s=t("../../../common").traits.EventMap,c=t("../../../common").traits.TabComponent,u=t("../../../base").style,h=t("./style.hbs"),d=t("../../subscribe/style.hbs"),p=t("./template.hbs"),m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.styles.push(new u({styleTemplate:d})),t.events=t.events||[],t.events.push("select"),this.templateData=t.data,this.strings={header:t.data.header,subheader:t.data.subheader,differentUser:r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.UseDifferentId",{firstName:itms.accountInfo.firstName}),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic"),subscriptionDisclosure:t.data.showDiscosureForSignIn},l.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"continue-button":this.authenticate.bind(this),"sign-in-different-user":this.signInAsDifferentUser.bind(this),"about-music-button":this.pushLearnMore})};a.inherit(m,l),a.inherit(m,s,!0),a.inherit(m,c,!0),m.prototype.authenticate=function(){a.account.auth({success:this.linkCarrier.bind(this)})},m.prototype.linkCarrier=function(){this.dispatchEvent(new o("linkCarrier"))},m.prototype.signInAsDifferentUser=function(){this.dispatchEvent(new o("signInAsDifferentUser"))},m.prototype.template=p,e.exports=m},{"../../../../util":391,"../../../base":97,"../../../common":133,"../../subscribe/style.hbs":77,"./style.hbs":5,"./template.hbs":6,itml:435}],4:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=t("./title.hbs"),o=a.pubSub,s=t("./element"),c=t("../../signin/element"),u=i.controller.DocumentController,h=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template");var n=itms.DSID;t.data.showDiscosureForSignIn=r.loc("FUSE.AccountLinking.Disclosure"),0===t.controllers.length&&(n?(this.documentType="panelTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.ConfirmAppleId.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.ConfirmAppleId.Subtitle",{carrierName:Telephony.providerName,AppleId:itms.accountInfo.appleId}),this.controller=new s({data:t.data})):(this.documentType="signInTemplate",t.data.header=t.data.header||r.loc("FUSE.CarrierBilling.LinkToAppleID.Title"),t.data.subheader=t.data.subheader||r.locWithMarkupTokens("FUSE.CarrierBilling.LinkToAppleID.Description",{carrierName:Telephony.providerName}),t.data.showAboutMusicAndPrivacy=!0,this.controller=new c({data:t.data})),t.controllers.push(this.controller)),this.dontUseNativeModal=!0,u.call(this,t,e);var i=this.el.getElementsByTagName("signInTemplate").item(0);i&&i.addEventListener("change",this.handleChange.bind(this));var a=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventListener("render",a.bind(this)),this.controller.addEventListener("signInAsDifferentUser",this.signInAsDifferentUser.bind(this)),this.controller.addEventListener("createAppleId",this.createAppleId.bind(this)),this.controller.addEventListener("linkCarrier",this.linkCarrier.bind(this)),this.addEventDelegates(this.controller,["tabPush","closeIntroPage","replaceNativeModal"]),a.call(this),localStorage.setItem("Music.hasAccountLinkingSheetOpened"+Telephony.phoneNumber,"true")};a.inherit(h,u),h.prototype.signInAsDifferentUser=function(){o.subscribe("serviceChange",function(){if(!itms.DSID){o.unsubscribe("serviceChange");var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}}.bind(this)),itms.signOut()},h.prototype.createAppleId=function(){o.subscribe("serviceChange",function(){if(itms.DSID){o.unsubscribe("serviceChange");var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}}.bind(this))},h.prototype.documentType=itms.DSID?"panelTemplate":"signInTemplate",h.prototype.titleTemplate=l,h.prototype.handleChange=function(t){"success"===t.result&&this.linkCarrier()},h.prototype.handleCancel=function(){a.account.closeAccountModal.call(this),itms.updateServiceEligibility({carrierBundle:"unlinked"}),a.account.getSubscriptionStatus({service:"AppleMusic"},function(t,e){e.isFinal&&"unlinked"===e.carrierBundle?this.handleCancelCallback():e.isFinal&&(a.log.warn('client did not return expected "unlinked" status: ',e.carrierBundle),this.handleUnexpectedData("unlinked",this.handleCancelCallback.bind(this)))}.bind(this))},h.prototype.handleCancelCallback=function(){a.log.warn("Linking Cancelled",itms.eligibilityForService().carrierBundle),o.publish("serviceChange",{}),o.publish("setSelectedTab","new")},h.prototype.linkCarrier=function(){a.account.showTermsIfRequired({successCallback:this.linkCarrierSrv.bind(this),failureCallback:this.termsDeclined.bind(this)})},h.prototype.termsDeclined=function(){if("signInTemplate"===this.documentType&&itms.DSID){var t=this.el.ownerDocument,e=new h({});t.replace(e.el)}},h.prototype.linkCarrierSrv=function(){var t=a.bag().carrierLinkSrv,e={url:t,params:"guid="+Device.guid,method:"POST",success:this.linkCarrierSuccess.bind(this),failure:this.linkCarrierFailed.bind(this)};a.xhr(e)},h.prototype.linkCarrierSuccess=function(t){var e,n=JSON.parse(t);if(a.log.warn("linkCarrierSuccess"),e=n.message?this.showAlreadySubscribedMessage.bind(this,n):this.goToForYou.bind(this),0===n.status)itms.updateServiceEligibility({carrierBundle:"eligible"}),a.account.getSubscriptionStatus({service:"AppleMusic"},function(t,n){n.isFinal&&"eligible"===n.carrierBundle?(a.log.warn("carrier linked successfully",itms.eligibilityForService().carrierBundle,n),e()):n.isFinal&&(a.log.warn('client did not return "eligible" status: ',n.carrierBundle),this.handleUnexpectedData("eligible",e))}.bind(this));else if(n.userPresentableErrorMessage){var i={data:{type:"error",title:n.userPresentableErrorMessage,buttons:[{title:r.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal};o.publish("showModal",{detail:i})}},h.prototype.showAlreadySubscribedMessage=function(t){var e={data:{type:"error",title:t.message,buttons:[{title:r.loc("OK"),className:"comfirm-success",callback:this.goToForYou.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};o.publish("showModal",{detail:e})},h.prototype.goToForYou=function(){a.account.closeAccountModal.call(this),o.publish("setSelectedTab","new"),o.publish("serviceChange",{})},h.prototype.handleUnexpectedData=function(t,e){a.account.getSubscriptionStatus({ignoreCache:!0},function(n,i){a.log.warn("trying to force getSubscriptionStatus. Expected and Returned value ",t,i.carrierBundle),i.carrierBundle===t&&e()})},h.prototype.linkCarrierFailed=function(){a.log.error("Carrier Link XHR Failed")},e.exports=h},{"../../../../util":391,"../../signin/element":63,"./element":3,"./title.hbs":7,itml:435}],5:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}\n\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.continue-button {\n  	border-color: tint-color;\n  	border-width: 1pt;\n    border-radius: 20pt;\n  	color: tint-color;\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-radius: circle-caps;\n    padding: 15 80;\n    margin: 40 0 20 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.icloud-disclosure {\n    color: rgba(0,0,0,.6);\n    itml-text-max-lines: 0;\n    margin: 10 0 30 0;\n    text-align: center;\n    font-size: 14pt;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],6:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<title class="page-title top">'+l(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="page-subtitle middle">'+l(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<button class="middle sign-in-different-user">'+l(r(null!=(a=null!=t?t.strings:t)?a.differentUser:a,t))+'</button>\n<button class="continue-button middle">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.CarrierBilling.ConfirmAppleId.Continue",{name:"loc",hash:{},data:i}))+'</button>\n<text class="bottom caption2 disclosure-text">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t))+'</text>\n<button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" type-key="MusicAndPrivacy" push-type="sheet">'+l(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],7:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.NotNow",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],8:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.pubSub,l=a.loc,o=i.controller.MultiElementController,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=t("../sms_verification"),p=t("../phone_number_entry"),m=t("../account_linking"),f=t("../../signin"),g=function(t,e){this.options=e||{reason:"deepLink",ignoreCache:!0},t=t||{},this.data=t.data||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),this.showCancelButton=this.data.showCancelButton,o.call(this,t,e),s.call(this,t),this.bgImageName=a.image.getBackgroundImageResource("WelcomeBg"),this.render()};a.inherit(g,o),a.inherit(g,s,!0),g.prototype.template=h,g.prototype.appearCallback=function(){""===itms.networkConnectionType?this.verificationErrorMessage(l.loc("FUSE.CarrierBilling.NoConnection")):this.hasRendered?this.hasRendered=!0:a.account.getSubscriptionStatus(this.options,this.handleServiceEligibility.bind(this))},g.prototype.verificationErrorMessage=function(t){var e={data:{type:"error",title:t,buttons:[{title:l.loc("OK"),className:"close-modal",callback:a.account.closeAccountModal.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:e})},g.prototype.handleServiceEligibility=function(t,e){if(!e||e.isFinal){if(a.account.setAlreadySubscribedCheckInProgress(!1),!e)return void this.verificationErrorMessage(l.loc("FUSE.CarrierBilling.NoConnection"));var n,i=this.el.ownerDocument;if(1===t&&e&&"unlinked"===e.carrierBundle)itms.updateServiceEligibility({carrierBundle:"unlinked"}),n=new m;else if(1===t)modal.popDocument(),r.publish("serviceChange",{});else if(e&&"needsVerification"===e.carrierBundle)n=Telephony.phoneNumber?new d({data:e}):new p({data:e});else if(!itms.DSID&&this.data.alreadySubscribed){var o=this.data||{};n=new f({data:o})}else a.log.warn("No subscription found - doing additional check in case cached value was used"),a.account.getSubscriptionStatus({ignoreCache:!0},function(t,e){if(e.isFinal&&1===t)this.handleServiceEligibility(t,e);else if(e.isFinal){var n=l.locWithMarkupTokens("FUSE.CarrierBundling.NoSubscription",{carrier:Telephony.providerName});this.verificationErrorMessage(n)}}.bind(this));if(n){var s={currentDoc:i,newDoc:n};this.addEventDelegates(n,["tabPush"]),a.account.replaceAccountModal.call(this,s)}}},e.exports=g},{"../../../../util":391,"../../../base":97,"../../../common":133,"../../signin":64,"../account_linking":4,"../phone_number_entry":14,"../sms_verification":19,"./style.hbs":10,"./template.hbs":11,itml:435}],9:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t,e),t.controllers.push(n)),this.controller=n,this.dontUseNativeModal=!0,o.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this))};this.addEventDelegates(this.controller,["tabPush","closeIntroPage","replaceNativeModal"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,o),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},e.exports=s},{"../../../../util":391,"./element":8,"./title.hbs":12,itml:435}],10:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.welcome-bg {\n    itml-img-fill: scale-to-fill;\n}\n\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}"},useData:!0})},{"hbsfy/runtime":418}],11:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(c+=a),c+'<background>\n    <img class="welcome-bg top" src="'+s((r=null!=(r=e.bgImageName||(null!=t?t.bgImageName:t))?r:o,typeof r===l?r.call(t,{name:"bgImageName",hash:{},data:i}):r))+'" />\n</background>\n<title class="position-center title">'+s((e.loc||t&&t.loc||o).call(t,"FUSE.CarrierBundling.VerifyingSubscription",{name:"loc",hash:{},data:i}))+'</title>\n<activityIndicator class="position-center"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],12:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],13:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=i.controller.MultiElementController,o=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("./template.hbs"),h=t("../sms_verification"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),this.attributes=t||{},l.call(this,t,e),o.call(this,t),this.strings={header:r.loc("FUSE.PhoneNumberEntry.Title"),subheader:r.loc("FUSE.PhoneNumberEntry.Subtitle")},this.render()};a.inherit(d,l),a.inherit(d,o,!0),d.prototype.template=u,d.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},d.prototype.setPinValue=function(t){if(10===t.length){t=t.slice(1);var e={currentDoc:this.el.ownerDocument,newDoc:new h({data:this.attributes.data,phoneNumber:"+61"+t})};modal.popDocument(),setTimeout(function(){modal.pushDocument(e.newDoc.el)}.bind(this),2e3)}},e.exports=d},{"../../../../util":391,"../../../base":97,"../../../common":133,"../sms_verification":19,"./style.hbs":15,"./template.hbs":16,itml:435}],14:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),this.PhoneNumberEntryController=n,o.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this));var e=this.el.getElementsByTagName("input").item(0);e&&e.addEventListener("change",this.setPinValue.bind(this))};this.controller=n,this.dontUseNativeModal=!0,this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,o),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},s.prototype.setPinValue=function(t){this.PhoneNumberEntryController.setPinValue(t.term||"")},e.exports=s},{"../../../../util":391,"./element":13,"./title.hbs":17,itml:435}],15:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* phone number entry */\n.middle {\n    itml-position: center;\n}\n.pin {\n    itml-text-style: pin;\n    margin: 0 0 18;\n}\n.subtitle {\n    color: rgb(0,0,0);\n    font-size: 18pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 30;\n    itml-text-max-lines: 0;\n}\n.title {\n    color: rgb(0,0,0);\n    font-size: 30pt;\n    font-weight: light;\n    margin: 0 0 10;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n\n@media (width: 320pt) {\n    .title {\n        font-size:24pt;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],16:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(o+=a),o+'<title class="middle title">'+l(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="middle subtitle" maxLines="0">'+l(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<input class="middle pin searchInputField" type="number" maxlength="10"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],17:[function(t,e,n){e.exports=t(12)},{"hbsfy/runtime":418}],18:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=i.controller.MultiElementController,o=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("./model"),h=t("./template.hbs"),d=t("../account_linking"),p=a.pubSub,m=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),l.call(this,t,e),o.call(this,t),a.extend(this.onSelect,{"resend-code-button":this.resendCodeButtonHandler.bind(this)});var n=new u(t);this.model=n,this.model.setEligibilityData(t),this.model.getSMS(),this.model.addEventListener("smsPinVerified",this.handleSendSMSPosted.bind(this)),this.model.addEventListener("smsPinIncorrect",this.handleSendSMSIncorrect.bind(this)),this.model.addEventListener("sendSMSFailed",this.handleSendSMSFailed.bind(this)),this.strings={header:r.loc("FUSE.SMSVerification.Header"),subheader:r.locWithMarkupTokens("FUSE.SMSVerification.EnterSMSCode",{number:t.phoneNumber}),resendCode:r.loc("FUSE.SMSVerification.SendSMSCodeAgain")},this.render()};a.inherit(m,l),a.inherit(m,o,!0),m.prototype.template=h,m.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},m.prototype.setPinValue=function(t){this.pinValue=t,4===this.pinValue.length&&this.model.verifySMSPin(this.pinValue)},m.prototype.resendCodeButtonHandler=function(){this.model.getSMS()},m.prototype.handleSendSMSIncorrect=function(t){var e=this.el.ownerDocument.getElementsByTagName("input").item(),n=e.getFeature("animator");if(n&&n.animate("shake",{erase:1,vibrate:1}),t.detail&&t.detail.dialog){var i={data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};p.publish("showModal",{detail:i})}},m.prototype.handleSendSMSFailed=function(t){if(!this.hasRendered)return void(this.errorToRenderOnAppear=this.handleSendSMSFailed.bind(this,t));var e={};e=t.detail&&t.detail.dialog?{data:{type:"error",title:t.detail.dialog.message,buttons:[{title:r.loc("Cancel")},{title:r.loc("FUSE.SMSVerification.SendSMSCodeAgain"),className:"confirm-failed",callback:this.resendCodeButtonHandler.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}}:{data:{type:"error",title:r.loc("FUSE.Error.AnErrorOccurred"),buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}},p.publish("showModal",{detail:e})},m.prototype.handleSendSMSPosted=function(){itms.updateServiceEligibility({carrierBundle:"unlinked"}),p.publish("serviceChange",{});var t,e,n=this.el.ownerDocument;t=new d({data:{subheader:e}}),this.addEventDelegates(t,["tabPush"]);var i={currentDoc:n,newDoc:t};a.account.replaceAccountModal.call(this,i)},e.exports=m},{"../../../../util":391,"../../../base":97,"../../../common":133,"../account_linking":4,"./model":20,"./style.hbs":21,"./template.hbs":22,itml:435}],19:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],t.data=t.data||{},t.data.phoneNumber=t.phoneNumber||Telephony.phoneNumber;var n;0===t.controllers.length&&(n=new l(t.data),t.controllers.push(n)),this.SMSVerificationController=n,o.call(this,t,e);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.handleCancel.bind(this));var e=this.el.getElementsByTagName("input").item(0);e&&e.addEventListener("change",this.setPinValue.bind(this))};this.controller=n,this.dontUseNativeModal=!0,this.addEventDelegates(this.controller,["tabPush"]),this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(s,o),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.handleCancel=function(){a.account.closeAccountModal.call(this)},s.prototype.setPinValue=function(t){this.SMSVerificationController.setPinValue(t.term||"")},e.exports=s},{"../../../../util":391,"./element":18,"./title.hbs":23,itml:435}],20:[function(t,e,n){function i(t){t=t||{},this.phoneNumber=t.phoneNumber||Telephony.phoneNumber,l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../../base").model,o=t("../../../../util");i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.getSMS=function(){var t=o.urls.fuseSendSmsCode(),e="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(this.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName),n={url:t,params:e,method:"POST",success:this.onGetSMSSuccess.bind(this),failure:this.onGetSMSFailed.bind(this)};o.xhr(n)},i.prototype.onGetSMSSuccess=function(t){var e=JSON.parse(t);if(-1===e.status&&e.userPresentableErrorMessage){var n={dialog:e.dialog};this.dispatchEvent(new r("sendSMSFailed",{detail:n}))}},i.prototype.onGetSMSFailed=function(){o.log.warn("getSMSFailed"),this.dispatchEvent(new r("sendSMSFailed",{detail:{}}))},i.prototype.verifySMSPin=function(t){var e=o.urls.fuseVerifySmsCode(),n="sessionId="+encodeURIComponent(this.getSessionId())+"&phoneNumber="+encodeURIComponent(this.phoneNumber)+"&carrier="+encodeURIComponent(Telephony.providerName)+"&smsCode="+t,i={url:e,params:n,method:"POST",success:this.onVerifySMSPinSuccess.bind(this),failure:this.onVerifySMSPinFailed.bind(this)};o.xhr(i)},i.prototype.onVerifySMSPinSuccess=function(t){var e=JSON.parse(t);if(e.status<0){var n={dialog:e.dialog};this.dispatchEvent(new r("smsPinIncorrect",{detail:n}))}else 1===e.fuseCarrierBundleStatus?this.dispatchEvent(new r("smsPinVerified")):(o.log.warn("No carrier bundling with this phone number"),o.account.closeAccountModal.call(this))},i.prototype.onVerifySMSPinFailed=function(t){o.log.warn("FAIL: ",t)},i.prototype.getSessionId=function(){return this.data&&this.data.sessionId},i.prototype.setEligibilityData=function(t){this.data=t||{}},e.exports=i},{"../../../../util":391,"../../../base":97,itml:435}],21:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.middle {\n    itml-position: center;\n}\n.pin {\n    itml-text-style: pin;\n    margin: 0 0 18;\n}\n.subtitle {\n    color: rgb(0,0,0);\n    font-size: 18pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 30;\n}\n.error {\n    color: rgb(255,0,0);\n    font-size: 14pt;\n    font-weight: light;\n    text-align: center;\n    margin: 0 0 10;\n}\n.title {\n    color: rgb(0,0,0);\n    font-size: 30pt;\n    font-weight: light;\n    margin: 0 0 10;\n}\n.continue-button {\n    itml-item-width: 208pt;\n    font-size: 14pt;\n}\n.resend-code-button {\n	itml-item-width: 208pt;\n	font-size: 14pt;\n}"},useData:!0})},{"hbsfy/runtime":418}],22:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(o+=a),o+'<title class="middle title">'+l(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="middle subtitle" maxLines="0">'+l(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<text class="middle error" id="errorMessage" maxLines="0"></text>\n<input class="middle pin searchInputField" type="number" maxlength="4"/>\n<button class="resend-code-button middle">'+l(r(null!=(a=null!=t?t.strings:t)?a.resendCode:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],23:[function(t,e,n){e.exports=t(12)},{"hbsfy/runtime":418}],24:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=a.pubSub,o=i.controller.MultiElementController,s=t("../../../common").traits.EventMap,c=t("../../../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=t("../account_linking"),p=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],this.data=t.data,t.events.push("select"),this.strings={header:r.loc("FUSE.CarrierBundling.UnlinkedForYou.Header"),subheader:r.loc("FUSE.CarrierBundling.UnlinkedForYou.Subheader"),signIn:r.loc("FUSE.CarrierBundling.UnlinkedForYou.SignIn")},o.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"continue-button":this.authenticate.bind(this)});var n="";Device.pixelRatio>1&&(n="@"+Device.pixelRatio+"x"),this.bgImageName="resource://ForYouUnlinked",this.render()};a.inherit(p,o),a.inherit(p,s,!0),p.prototype.template=h,p.prototype.authenticate=function(){if("eligible"===this.data.carrierBundle)a.account.auth({success:function(){l.publish("serviceChange",{})}});else{var t=new d({});this.addEventDelegates(t,["tabPush"]),modal.pushDocument(t.el)}},e.exports=p},{"../../../../util":391,"../../../base":97,"../../../common":133,"../account_linking":4,"./style.hbs":26,"./template.hbs":27,itml:435}],25:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./element"),l=i.controller.DocumentController,o=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template"),this.controller=new r(t,e),t.controllers.push(this.controller),l.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"]);
};a.inherit(o,l),o.prototype.documentType="panelTemplate",e.exports=o},{"../../../../util":391,"./element":24,itml:435}],26:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* loading */\n.title {\n    font-size: 22pt;\n    color: tint-color;\n}\n\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.continue-button {\n  	border-color: tint-color;\n  	border-width: 1pt;\n    border-radius: 20pt;\n  	color: tint-color;\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-radius: circle-caps;\n    padding: 15 80;\n    margin: 0 0 90 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n\n"},useData:!0})},{"hbsfy/runtime":418}],27:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+'<background>\n    <img class="welcome-bg top" src="'+l(r(null!=t?t.bgImageName:t,t))+'" />\n</background>\n<title class="page-title top">'+l(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+'</title>\n<subtitle class="page-subtitle top">'+l(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+'</subtitle>\n<button class="continue-button bottom">'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.strings:t)?a.signIn:a,{name:"toUpperCase",hash:{},data:i}))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],28:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,l=i.controller.MultiElementController,o=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../base").style,u=t("./style.hbs"),h=t("./model"),d=a.pubSub,p=a.loc,m=t("./template.hbs"),f=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),l.call(this,t,e),o.call(this,t),s.call(this),d.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),d.subscribe("buyFailed",this.handleBuyFailed.bind(this)),this.bag=itms.getBag(),a.extend(this.onSelect,{"migration-continue-button":this.confirmMigration.bind(this),"apple-music-already-subscribed":this.alreadySubscribed.bind(this),"learn-more-link":this.handleLearnMoreLink.bind(this),"about-music-button":this.pushLearnMore.bind(this)}),this.deepLink=t.deepLink;var n=new h({deepLink:this.deepLink});this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush","handleAskToBuy"]);var i,r=itms.eligibilityForService();itms.accountInfo.DSID&&"needsAuthentication"!==r.accountStatus?itms.accountInfo.DSID&&a.account.isOnCarrierBundlingNetwork()&&!a.account.isEligibleForAppleMusic()&&(i=p.locWithMarkupTokens("FUSE.Footer.AlreadyaSubscriber.Carrier",{carrier:Telephony.providerName})):i=p.loc("FUSE.Footer.AlreadyaSubscriber"),this.strings={aboutMusicAndPrivacy:p.loc("FUSE.Footer.aboutAppleMusic"),alreadySubscribed:i,learnMore:p.loc("FUSE.Subscription.LearnMoreButton"),learnMoreUrl:p.loc("FUSE.Subscription.LearnMore.Url")},n.addEventListener("dataReady",function(){if(n.data=n.data||{},0===n.data.status)this.model=n,this.model.subscribed=a.account.isEligibleForAppleMusic(),this.strings.migrationFooterText=n.data.isATT?p.loc("Fuse.Migration.subscribeFooterTextATT"):p.loc("Fuse.Migration.subscribeFooterText"),this.buyParams=n.data.buyParams,this.render();else{var t={data:{type:"error",title:n.data.userPresentableErrorMessage||p.loc("FUSE.Error.AnErrorOccurred"),buttons:[{title:p.loc("OK"),className:"comfirm-button",callback:a.account.closeAccountModal.bind(this)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};this.errorToRenderOnAppear=function(){d.publish("showModal",{detail:t})},this.hasRendered&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)}}.bind(this)),n.get(this.bag.beatsMigrationInfoSrv)};a.inherit(f,l),a.inherit(f,o,!0),a.inherit(f,s,!0),f.prototype.template=m,f.prototype.appearCallback=function(){this.hasRendered=!0,this.errorToRenderOnAppear&&(this.errorToRenderOnAppear(),this.errorToRenderOnAppear=null)},f.prototype.checkAuth=function(){this.dsid=itms.accountInfo.DSID,this.dsid?this.confirmMigration():this.signin()},f.prototype.signin=function(){var t={callback:this.alreadySubscribed.bind(this),showCancelButton:!0,showCreateAppleId:!1},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:e}))},f.prototype.confirmMigration=function(){if(this.deepLink=this.deepLink.slice(this.deepLink.indexOf("?")+1),this.buyParams){var t={offers:[{buyParams:this.buyParams+"&"+this.deepLink+"&isBeatsMigration=true"+a.metrics.createBuyParams(this)}]};itms.buy(t),this.disableActionButtons(!0)}else a.log.error("Buy Failed: Missing buyParams data for selected offer.")},f.prototype.handleBuyConfirmed=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),a.account.isAppleMusicEnabled()||a.account.enableAppleMusic(!0),a.account.closeAccountModal.call(this),this.disableActionButtons(!1),d.publish("serviceChange",{}),a.account.setIsMigrationInProgress(!0),d.publish("importingFavorites",{})},f.prototype.handleBuyFailed=function(t){if(1===t.error){t.document=this.el.ownerDocument,t.controller=this;var e=new r("handleAskToBuy",t);this.dispatchEvent(e)}this.disableActionButtons(!1)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.alreadySubscribed=function(){a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},f.prototype.handleServiceEligibility=function(t,e){if(this.waitingForEligibilityData=!1,1===t)"unlinked"===e.carrierBundle?d.publish("serviceChange",{}):(this.model.subscribed=!0,this.render());else if(!itms.accountInfo.DSID&&e.isFinal)this.signin();else if(e.isFinal){var n={data:{type:"error",title:p.loc("FUSE.NotAlreadySubscribed"),buttons:[{title:p.loc("OK"),className:"comfirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};d.publish("showModal",{detail:n})}},f.prototype.metricsPageData={pageId:"Migration",pageType:"Unknown"},f.prototype.handleLearnMoreLink=function(){openURL(this.strings.learnMoreUrl)},e.exports=f},{"../../../util":391,"../../base":97,"../../common":133,"./model":34,"./style.hbs":35,"./template.hbs":36,itml:435}],29:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,l=t("../../../common").traits.TabComponent,o=t("../../../base").style,s=t("./style.hbs"),c=a.pubSub,u=t("./template.hbs"),h=function(t,e){t=t||{},e=e||{},t.styles=t.styles||[],t.styles.push(new o({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),l.call(this),this.bag=itms.getBag(),this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush"]),this.render(),this.checkMigrationStatus()};a.inherit(h,r),a.inherit(h,l,!0),h.prototype.template=u,h.prototype.checkMigrationStatus=function(){var t=a.urls.migration(),e={url:t,method:"GET",success:this.checkMigrationStatusSuccess.bind(this),failure:this.checkMigrationStatusFailure.bind(this)};a.xhr(e)},h.prototype.checkMigrationStatusSuccess=function(t){var e;try{e=JSON.parse(t)}catch(n){return void a.log.error("error in beatsMigrationStatusSrv response")}if(e&&0===e.status){a.log.warn(e);var i=e.migrationStatus;"finished"===i.TasteProfile?setTimeout(function(){c.publish("migrationComplete",{}),c.publish("serviceChange",{})},2e3):setTimeout(function(){this.checkMigrationStatus()}.bind(this),3e4)}else a.log.warn("beatsMigrationStatusSrv failed, trying again"),setTimeout(this.checkMigrationStatus.bind(this),3e4)},h.prototype.checkMigrationStatusFailure=function(){a.log.warn("Migrating Beats Content Failed")},e.exports=h},{"../../../../util":391,"../../../base":97,"../../../common":133,"./style.hbs":31,"./template.hbs":32,itml:435}],30:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./element"),l=i.controller.DocumentController,o=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new r,t.controllers.push(n)),this.controller=n,l.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};a.inherit(o,l),o.prototype.documentType="panelTemplate",e.exports=o},{"../../../../util":391,"./element":29,itml:435}],31:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    margin: 50 0 0 0;\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    itml-align: center;\n    color: rgb(150, 150, 150);\n}\n.offers-grid {\n    itml-row-height: 65pt;\n    padding: 0;\n}\n.offers-grid-divider {\n    margin: 0;\n}\n.offer-title {\n    itml-text-max-lines: 1;\n    font-size: 18pt;\n}\n.selected {\n    color: tint-color;\n    font-size: 18pt;\n}\n.offer-subtitle {\n    itml-text-max-lines: 1;\n    font-size: 16pt;\n    color: rgb(150, 150, 150)\n}\n\n.refund-blurb {\n	font-size:10px;\n	itml-text-max-lines: 0;\n	text-align: left;\n}\n\n.migration-continue-button {\n    itml-text-max-lines: 1;\n    font-size: 20pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.small-button {\n    font-size: 14pt;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],32:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(o+=a),o+'<title class="page-title top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.title",{name:"loc",hash:{},data:i}))+'</title>\n<subtitle class="page-subtitle top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Loading.forYou.explanation",{name:"loc",hash:{},data:i}))+'</subtitle>\n<activityIndicator class="position-center"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],33:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),l=t("./element"),o=t("../../common").traits.TabComponent,s=i.controller.DocumentController,c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),s.call(this,t,e),o.call(this),this.dontUseNativeModal=!0;var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelMigration.bind(this))};this.controller=n,this.addEventListener("render",i.bind(this)),this.addEventListener("appear",this.controller.appearCallback.bind(this.controller)),i.call(this)};a.inherit(c,s),a.inherit(c,o,!0),c.prototype.documentType="panelTemplate",c.prototype.titleTemplate=r,c.prototype.cancelMigration=function(){a.account.closeAccountModal.call(this)},e.exports=c},{"../../../util":391,"../../common":133,"./element":28,"./title.hbs":37,itml:435}],34:[function(t,e,n){function i(t){t=t||{},this.deepLink=t.deepLink,l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../base").model,o=t("../../../util");i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.get=function(t){if(t&&this.deepLink){var e=this.deepLink.substring(this.deepLink.indexOf("?")),n={url:t+e,method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};o.xhr(n)}else o.log.error("MigrationModel must have url and this.deepLink")},i.prototype.onDataSuccess=function(t){try{this.data=JSON.parse(t)}catch(e){o.log.error("beatsMigrationInfoSrv returned an error")}this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){o.log.warn("FAIL: ",t)},e.exports=i},{"../../../util":391,"../../base":97,itml:435}],35:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* migration */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: thin;\n    font-size: 27pt;\n    text-align: center;\n    margin: 40 0 20 0;\n}\n.page-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 16pt;\n    text-align: center;\n    color: rgb(150, 150, 150);\n    margin: 0 0 10 0;\n}\n.migration-continue-button {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    itml-item-width: 100%;\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 40 0 0 0;\n}\n.migration-button-title {\n  font-weight: bold;\n}\n.migration-button-subtitle {\n  color: rgb(150,150,150);\n  font-size: 12pt;\n}\n.divider {\n    margin: 10 0 0 0;\n    padding: 10;\n}\n.small-button {\n    font-size: 14pt;\n}\n.button-footer-text {\n    margin: 10 0 0 0;\n}\n.about-music-button {\n    margin: 10 0 15 0;\n}\n.refund-blurb {\n    margin: 30 0 0 0;\n    color: rgb(150,150,150);\n    itml-text-max-lines: 0;\n}\n.apple-music-already-subscribed {\n    margin: 20 0 10 0;\n}\n\n.footer-text {\n    itml-text-max-lines: 0;\n    color: rgba(0,0,0,.6);\n    text-align: center;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],36:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='    <title class="page-title">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.AlreadySubscriber_description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <img src="resource://beatsToAppleMusic" class="top" width="128" height="40"/>\n    <button class="migration-continue-button top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Footer.AlreadyaSubscriber.Continue",{name:"loc",hash:{},data:i}))+"</button>\n";return a=e.unless.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.isATT:a,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'    <text class="bottom footer-text">'+l(o(null!=(a=null!=t?t.strings:t)?a.migrationFooterText:a,t))+"</text>\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'	    <text class="refund-blurb top">'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.refundBlurb:a,t))+"</text>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='    <title class="page-title">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.LandingPage.Title",{name:"loc",hash:{},data:i}))+'</title>\n    <subtitle class="page-subtitle">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Migration.Landingpage.Description",{name:"loc",hash:{},data:i}))+'</subtitle>\n    <button class="learn-more-link small-button tint-color" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"LearnMore",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">"+l(o(null!=(a=null!=t?t.strings:t)?a.learnMore:a,t))+'</button>\n    <button class="migration-continue-button top" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueButton",targetType:"button"},data:i}),null!=a&&(s+=a),s+='><span class="buy-button-title">'+l(o(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+' </span><br /><span class="migration-button-subtitle">'+l(o(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.description:a,t))+"</span></button>\n",a=e.unless.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.isATT:a,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'    <text class="bottom footer-text">'+l(o(null!=(a=null!=t?t.strings:t)?a.migrationFooterText:a,t))+"</text>\n"},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'    <button class="small-button tint-color apple-music-already-subscribed bottom" >'+l(r(null!=(a=null!=t?t.strings:t)?a.alreadySubscribed:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.subscribed:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+='<divider class="divider bottom" />\n',a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.alreadySubscribed:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='<button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" about-type="about_music" push-type="sheet" type-key="MusicAndPrivacy" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"AboutMusicAndPrivacy",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+o(l(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],37:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-left cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],38:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../../util"),l=t("./template.hbs"),o=r.pubSub,s=t("../bubble"),c=t("./model"),u=function(t,e){t=t||{},t.events=t.events||[],t.template=l,s.call(this,t,e),this.onSelect["more-artists"]=this.handleMoreArtistsButton.bind(this);var n=function(){this.getNextArtistBatchAfterRender===!0&&(this.getNextArtistBatchAfterRender=!1,this.model.getNextArtistDataBatch())};this.addEventListener("render",n.bind(this)),n.call(this),this.model=new c,this.model.addEventListener("dataReady",function(){this.render(),this.dispatchEvent(new a("updateNav"))}.bind(this)),this.model.addEventListener("artistDataPosted",this.handleArtistDataPosted.bind(this)),this.model.initData(t.data),this.model.getFirstArtistBatch()};r.inherit(u,s),u.prototype.handleMoreArtistsButton=function(){this.model.removeUnselectedArtistsFromData(),this.getNextArtistBatchAfterRender=!0,this.render()},u.prototype.handleArtistDataPosted=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.onboardingFinished.bind(this))},u.prototype.onboardingFinished=function(){o.publish("tasteProfileUpdated",{}),this.dispatchEvent(new a("handleOnboardingDone"))},e.exports=u},{"../../../../util":391,"../bubble":43,"./model":40,"./template.hbs":41,itml:435}],39:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=i.controller.DocumentController,o=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingArtist",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o({data:t.data}),t.controllers.push(n)),this.controller=n;var i=function(){this.navigationBarController&&(this.navigationBarController.disabledSubmitState=this.controller.model.getNeedsMoreSelections(),this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),l.call(this,t,e);var a=function(){this.el.addEventListener("change",this.controller.handleBubbleAction.bind(this.controller))};this.addEventListener("render",a.bind(this)),a.call(this),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var r=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};this.navigationBarController.addEventListener("render",r.bind(this)),r.call(this)};a.inherit(s,l),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleDoneButton=function(){this.controller.model.set()},e.exports=s},{"../../../../util":391,"./element":38,"./title.hbs":42,itml:435}],40:[function(t,e,n){function i(t){t=t||{},l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../../base").model,o=t("../../../../util"),s=o.loc,c=20;i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.set=function(){var t=this.formatArtistDataToPost(),e=this.data.genrePostData,n="artists="+encodeURIComponent(JSON.stringify(t))+"&labels="+encodeURIComponent(JSON.stringify(e));if(o.urls.updateTastePreference()){var i=o.urls.updateTastePreference(),a={url:i,method:"POST",params:n,success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};o.xhr(a)}else o.log.warn("FAIL: ","bag error")},i.prototype.formatArtistDataToPost=function(){var t=[],e=this.data.contentMap,n=0;for(var i in e)e.hasOwnProperty(i)&&e[i].artist&&0!==e[i].artist.userPreference&&(t[n++]=e[i].artist);return t},i.prototype.onSetSuccess=function(){this.dispatchEvent(new r("artistDataPosted"))},i.prototype.onSetFailed=function(t){403===t?o.account.auth({success:this.set.bind(this)}):(modal.popDocument(),o.log.warn("FAIL: ",t))},i.prototype.getFirstArtistBatch=function(t){var e=t&&t.resetArtists===!0,n=this.data.artists?this.data.artists.length:0,i=0,a=n>c?c:n-1;this.metrics={pageData:this.data.metrics},this.parseAndSetPageData(i,a,e)},i.prototype.initData=function(t){this.data=t&&t.artistData||{},this.cacheContent(this.data),this.data.genrePostData=t&&t.genrePostData||{},this.setArtistContentMap(this.data.artists),this.data.orderedArtists=[],this.data.selectedArtists=[],this.data.deletedArtists=[]},i.prototype.setArtistContentMap=function(t){if(this.data.contentMap={},t)for(var e,n,i=0;i<t.length;i++)e=t[i],n=e.id,this.data.contentMap[n]={artist:e}},i.prototype.parseAndSetPageData=function(t,e,n){var i,a,r,l,s=this.data.artists,c=this.getStorePlatformData(this.data),u=[];for(n&&(this.data.orderedArtists=[],this.data.selectedArtists=[],this.data.deletedArtists=[]),i=t;e>i;i++){if(l=s[i],r=l.id,this.data.orderedArtists.push(this.data.contentMap[r]),a=c[r]){var h=o.artwork.getArtworkForContent({content:a,artworkMap:this.artworkMap});h&&(a.image=h.image),this.data.contentMap[r].storeData=a}else this.data.contentMap[r].storeData={adamId:r},u.push(r);n?l.userPreference=0:l.userPreference>0?this.data.selectedArtists.push(l):l.userPreference<0&&this.data.deletedArtists.push(l)}0===t&&(this.data.tuneYourTaste=this.data.selectedArtists.length>0),this.setContentDerivedData(t),this.startIndex=t,this.endIndex=e,u.length>0?this.fetchContent({profile:this.pageProfile,contentIds:u,onSuccess:this.onDataReady.bind(this,this.startIndex,this.endIndex),onFailure:this.onDataFailed.bind(this)}):this.onDataReady(this.startIndex,this.endIndex)},i.prototype.removeUnselectedArtistsFromData=function(){for(var t=[],e=this.getSelectedArtists(),n=0;n<e.length;n++){var i=e[n].id;t[n]=this.data.contentMap[i]}this.data.orderedArtists=t},i.prototype.getNextArtistDataBatch=function(){var t=this.data.artistsDisplayIndexStart,e=this.data.artistsDisplayIndexEnd;t=e+1,e=t+(c-this.getSelectedArtists().length),e>this.data.artists.length&&(e=this.data.artists.length),this.parseAndSetPageData(t,e)},i.prototype.onDataFailed=function(t){o.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataReady=function(t,e,n){if(n){var i=this.data.contentMap;for(var a in i)if(i.hasOwnProperty(a)&&i[a].storeData&&i[a].storeData.adamId){var l=n[i[a].storeData.adamId];if(l){var s=o.artwork.getArtworkForContent({content:l,artworkMap:this.artworkMap});s&&(l.image=s.image),i[a].storeData=l}}}if("undefined"!=typeof t){this.data.artistsDisplayIndexStart=t,this.data.artistsDisplayIndexEnd=e;var c=this.data.artists?this.data.artists.length:0;this.data.noMoreArtistsToShow=e+1>=c,this.setMoreArtistsButtonState()}this.dispatchEvent(new r("dataReady"))},i.prototype.setMoreArtistsButtonState=function(){var t=this.data.selectedArtists.length,e=t>0&&t===this.data.orderedArtists.length;this.data.moreArtistsButtonDisabled=this.data.noMoreArtistsToShow||e},i.prototype.setContentDerivedData=function(t){var e=this.data.selectedArtists.length,n=this.data.deletedArtists.length;if(e>2)this.data.progressValue="1.0";else{var i=.5+.5*e/3;this.data.progressValue=i}var a=t&&t>0,r=e>0,l=n>0;this.data.noUpdates=!(a||r||l),this.data.needsMoreSelections=2>=e,this.setMoreArtistsButtonState();var o=n>0&&n===this.data.orderedArtists.length;this.data.subtitle=o?s.loc("FUSE.Onboarding.AllDeleted.Subheader"):s.loc("FUSE.Onboarding.Artists.Subheader"),o?this.data.title=s.loc("FUSE.Onboarding.AllDeleted.Header"):this.data.tuneYourTaste?this.data.title=s.loc("FUSE.Onboarding.Artists.Header.ChooseYourFavorites"):this.data.title=this.getPageTitle(e)},i.prototype.getSelectedArtists=function(){return this.data&&this.data.selectedArtists||null},i.prototype.getDeletedArtists=function(){return this.data&&this.data.deletedArtists||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.getPageTitle=function(t){var e=[s.loc("FUSE.Onboarding.Artists.Header.GotIt"),s.loc("FUSE.Onboarding.Artists.Header.Choose1"),s.loc("FUSE.Onboarding.Artists.Header.Choose2"),s.loc("FUSE.Onboarding.Artists.Header.Choose3")],n=3-t;return 0>n&&(n=0),e[n]},i.prototype.updateData=function(t,e){var n=this.data.contentMap[t].artist,i=this.getSelectedArtists(),a=this.getDeletedArtists();if(1===e)i.push(n);else if(0===e||-1===e){var r=i.indexOf(n);r>-1&&i.splice(r,1)}-1===e&&a.push(n),n.userPreference=e,this.setContentDerivedData()},i.prototype.resetData=function(){this.getFirstArtistBatch({resetArtists:!0});for(var t in this.data.contentMap)this.data.contentMap.hasOwnProperty(t)&&(this.data.contentMap[t].artist.userPreference=0);this.data.progressValue=.5,this.data.noUpdates=!0,this.data.needsMoreSelections=!0,this.data.title=this.getPageTitle(0)},i.prototype.artworkMap={profile:{xs:[150,150],s:[150,150],m:[150,150],l:[150,150],xl:[150,150],xxl:[150,150]}},e.exports=i},{"../../../../util":391,"../../../base":97,itml:435}],41:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.storeData:t)?a.name:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <circle class="bubble onboarding-image-treatment" data-content-id="'+l(r(null!=(a=null!=t?t.artist:t)?a.id:a,t))+'" size="'+l(r(null!=(a=null!=t?t.artist:t)?a.userPreference:a,t))+'" x="'+l(r(null!=(a=null!=t?t.artist:t)?a.x:a,t))+'" y="'+l(r(null!=(a=null!=t?t.artist:t)?a.y:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"adjust-artist",targetType:"circle"},data:i}),null!=a&&(s+=a),s+'><title id="title">'+l(r(null!=(a=null!=t?t.storeData:t)?a.name:a,t))+'</title><img src="'+l(r(null!=(a=null!=(a=null!=t?t.storeData:t)?a.image:a)?a.url:a,t))+'"/></circle>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+='<title id="pageTitle">'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n<subtitle>"+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.subtitle:a,t))+"</subtitle>\n\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedArtists:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"reset",targetId:"Reset",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">"+l(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+l(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+'</title>\n    </progressIndicator>\n    <button id="moreArtists" class="more-artists" disabled="'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.moreArtistsButtonDisabled:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"more-artists",targetId:"MoreArtists",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=(a=null!=t?t.strings:t)?a.moreArtists:a,t))+"</button>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],42:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'<button id="doneButton" type="done" disabled="'+o((a=null!=(a=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?a:l,typeof a===r?a.call(t,{name:"disabledSubmitState",hash:{},data:i}):a))+'" class="align-right done-button">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],43:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=i.event.Event,o=t("../../base").style,s=t("./style.hbs"),c=i.controller.MultiElementController,u=t("../../common").traits.EventMap,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new o({styleTemplate:s})),t.events=t.events||[],t.events.push("select"),this.template=t.template,this.strings={youLabel:r.loc("FUSE.Onboarding.You.Label"),resetButton:r.loc("FUSE.Onboarding.Reset.Button"),moreArtists:r.loc("FUSE.Onboarding.Artists.MoreArtistsButton")},c.call(this,t,e),u.call(this,t),a.extend(this.onSelect,{bubble:this.handleBubbleAction.bind(this),"reset-button":this.handleResetButton.bind(this)})};a.inherit(h,c),a.inherit(h,u,!0),h.prototype.handleBubbleAction=function(t){var e=t.removed||t.target,n=e.getAttribute("data-content-id"),i=e.getAttribute("size"),a=t.removed?-1:this.calculateNewBubbleSize(i);this.updatePageDataAndRefresh(n,a)},h.prototype.handleResetButton=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performResetAnimation(this.updatePageDataAndRefresh.bind(this))},h.prototype.handleNextButton=function(){this.model.set()},h.prototype.updatePageDataAndRefresh=function(t,e){"undefined"!=typeof t?this.model.updateData(t,e):this.model.resetData(),this.updateNavButtons(),this.render();
},h.prototype.handleOnboardingDone=function(){this.dispatchEvent(new l("handleOnboardingDone"))},h.prototype.updateNavButtons=function(){this.dispatchEvent(new l("updateNav"))},h.prototype.calculateNewBubbleSize=function(t){var e=0;return e=t?(parseInt(t)+1)%3:1},e.exports=h},{"../../../util":391,"../../base":97,"../../common":133,"./style.hbs":49,itml:435}],44:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.event.Event,l=t("./template.hbs"),o=t("./model"),s=t("../bubble"),c=t("../artist"),u=function(t,e){t=t||{},t.template=l,s.call(this,t,e),this.model=new o,this.model.addEventListener("dataReady",function(){this.render(),this.dispatchEvent(new r("updateNav"))}.bind(this)),this.model.addEventListener("artistDataReady",this.handleGenreDataReady.bind(this)),this.model.addEventListener("dataPostInProgress",this.handleDataPostInProgress.bind(this)),this.model.addEventListener("dataPostFailed",this.handleDataPostFailed.bind(this)),this.model.get()};a.inherit(u,s),u.prototype.handleNextButton=function(){this.model.set()},u.prototype.handleDataPostInProgress=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!0}}))},u.prototype.handleDataPostFailed=function(){this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},u.prototype.handleGenreDataReady=function(){var t=this.el.ownerDocument.getElementsByTagName("physicalCirclesTemplate").item(0);t.getFeature("CirclesContainer").performFinishAnimation(this.navigateToArtistPage.bind(this))},u.prototype.navigateToArtistPage=function(){var t={genrePostData:this.model.getGenrePostData(),artistData:this.model.getArtistPageData()},e=new c({data:t});e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),a.metrics.track(e,{tabIdentifier:"onboarding_artist",entityType:TabBar.selectedTab.identifier});var n=this.el.ownerDocument.navigationDocument;n.pushDocument(e.el),this.dispatchEvent(new r("updateNav",{detail:{disableNavButtons:!1}}))},e.exports=u},{"../../../../util":391,"../artist":39,"../bubble":43,"./model":46,"./template.hbs":47,itml:435}],45:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=i.controller.DocumentController,o=t("./element"),s=function(t,e){t=t||{},t.name="OnboardingGenre",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o,t.controllers.push(n)),this.controller=n;var i=function(t){this.navigationBarController&&(t&&t.detail&&t.detail.disableNavButtons||this.controller.model.getNeedsMoreSelections()?this.navigationBarController.disabledSubmitState=!0:this.navigationBarController.disabledSubmitState=!1,this.navigationBarController.render())};this.controller.addEventListener("updateNav",i.bind(this)),l.call(this,t,e);var a=function(){this.el.addEventListener("change",this.controller.handleBubbleAction.bind(this.controller))};this.addEventListener("render",a.bind(this)),a.call(this),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render(),this.addEventDelegates(n,["handleOnboardingDone"]),i.call(this);var r=function(){var t=this.el.getElementById("nextButton");t&&t.addEventListener("select",this.handleNextButton.bind(this))};this.navigationBarController.addEventListener("render",r.bind(this)),r.call(this)};a.inherit(s,l),s.prototype.documentType="physicalCirclesTemplate",s.prototype.titleTemplate=r,s.prototype.handleNextButton=function(){this.controller.handleNextButton()},e.exports=s},{"../../../../util":391,"./element":44,"./title.hbs":48,itml:435}],46:[function(t,e,n){function i(t){t=t||{},l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../../base").model,o=t("../../../../util"),s=o.loc;i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t={url:o.urls.tastePreferenceLabels(),method:"GET",success:this.onGetDataSuccess.bind(this),failure:this.onGetDataFailed.bind(this)};o.xhr(t)},i.prototype.onGetDataSuccess=function(t,e){var n=JSON.parse(t);this.data=this.parsePageData(n),this.metrics={pageData:n.metrics,xhrMetrics:e},this.dispatchEvent(new r("dataReady"))},i.prototype.onGetDataFailed=function(t){403===t?o.account.auth({success:this.get.bind(this)}):(this.dispatchEvent(new r("dataReady")),o.log.warn("FAIL: ",t))},i.prototype.parsePageData=function(t){var e={noUpdates:!0,progressValue:"0",genres:{},orderedGenres:[],selectedGenres:[],deletedGenres:[]};if(t.labels)for(var n=0;n<t.labels.length;n++){var i=t.labels[n];i.id||(i.id=n),i.userPreference?i.userPreference>0?e.selectedGenres.push(i):i.userPreference<0&&e.deletedGenres.push(i):i.userPreference=0,e.genres[i.id]=i,e.orderedGenres.push(e.genres[i.id])}return this.setContentDerivedData(e),e},i.prototype.resetData=function(){this.data.selectedGenres=[],this.data.deletedGenres=[];for(var t in this.data.genres)this.data.genres.hasOwnProperty(t)&&(this.data.genres[t].userPreference=0);this.data.progressValue=0,this.data.noUpdates=!0,this.data.needsMoreSelections=!0},i.prototype.set=function(){this.data.genrePostData=this.formatGenreDataToPost();var t={url:o.urls.tastePreferenceArtists(),method:"POST",params:"labels="+encodeURIComponent(JSON.stringify(this.data.genrePostData)),success:this.onSetSuccess.bind(this),failure:this.onSetFailed.bind(this)};o.xhr(t),this.dispatchEvent(new r("dataPostInProgress"))},i.prototype.formatGenreDataToPost=function(){for(var t,e=this.getSelectedGenres(),n=this.getDeletedGenres(),i=[],a=0;a<e.length;a++)t=e[a],i[a]=t;for(var r=0;r<n.length;r++)t=n[r],i[a++]=t;return i},i.prototype.onSetSuccess=function(t){this.data.artistData=JSON.parse(t),this.dispatchEvent(new r("artistDataReady"))},i.prototype.onSetFailed=function(t){this.dispatchEvent(new r("dataPostFailed")),403===t?(o.log.warn("403 onboarding genre"),o.account.auth({success:this.set.bind(this)})):o.log.warn("FAIL: ",t)},i.prototype.getSelectedGenres=function(){return this.data&&this.data.selectedGenres||null},i.prototype.getDeletedGenres=function(){return this.data&&this.data.deletedGenres||null},i.prototype.getArtistPageData=function(){return this.data&&this.data.artistData||null},i.prototype.getGenrePostData=function(){return this.data&&this.data.genrePostData||null},i.prototype.getNeedsMoreSelections=function(){return this.data&&this.data.needsMoreSelections||!1},i.prototype.updateData=function(t,e){var n=this.data.genres,i=n[t],a=this.getSelectedGenres(),r=this.getDeletedGenres();if(1===e)a.push(i);else if(0===e||-1===e){var l=a.indexOf(i);l>-1&&a.splice(l,1)}-1===e&&r.push(i),i.userPreference=e,this.setContentDerivedData(this.data)},i.prototype.setContentDerivedData=function(t){var e=t.selectedGenres.length>0,n=t.deletedGenres.length>0;t.progressValue=e?"0.5":"0",t.noUpdates=!(e||n),t.needsMoreSelections=t.selectedGenres.length<=0,n&&t.deletedGenres.length===t.orderedGenres.length?(t.title=s.loc("FUSE.Onboarding.AllDeleted.Header"),t.subtitle=s.loc("FUSE.Onboarding.AllDeleted.Subheader")):(t.title=s.loc("FUSE.Onboarding.Labels.Header"),t.subtitle=s.loc("FUSE.Onboarding.Labels.Subheader"))},e.exports=i},{"../../../../util":391,"../../../base":97,itml:435}],47:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <circle class="bubble" data-content-id="'+l(r(null!=t?t.id:t,t))+'" size="'+l(r(null!=t?t.userPreference:t,t))+'" x="'+l(r(null!=t?t.x:t,t))+'" y="'+l(r(null!=t?t.y:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"adjust-genre",targetType:"circle"},data:i}),null!=a&&(s+=a),s+=">\n            <title>"+l(r(null!=t?t.name:t,t))+"</title>\n",a=e["if"].call(t,null!=t?t.imageUri:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </circle>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <img src="'+r(a(null!=t?t.imageUri:t,t))+'" width="116" height="116"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(s+=a),s+="<title>"+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n<subtitle>"+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.subtitle:a,t))+"</subtitle>\n<section ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.orderedGenres:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='</section>\n\n<palette id="palette">\n    <button id="resetButton" class="reset-button" disabled="'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.noUpdates:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"reset",targetId:"Reset",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=(a=null!=t?t.strings:t)?a.resetButton:a,t))+'</button>\n    <progressIndicator id="progress" value="'+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.progressValue:a,t))+'">\n        <title>'+l(r(null!=(a=null!=t?t.strings:t)?a.youLabel:a,t))+"</title>\n    </progressIndicator>\n</palette>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],48:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'<button id="nextButton" type="done" disabled="'+o((a=null!=(a=e.disabledSubmitState||(null!=t?t.disabledSubmitState:t))?a:l,typeof a===r?a.call(t,{name:"disabledSubmitState",hash:{},data:i}):a))+'" class="align-right next-button">'+o((e.loc||t&&t.loc||l).call(t,"FUSE.NextButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],49:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".onboarding-image-treatment {\n    itml-img-treatment: onboarding-saturated;\n}"},useData:!0})},{"hbsfy/runtime":418}],50:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isOnline:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                 srcset="'+r((e["background-image"]||t&&t["background-image"]||a).call(t,null!=t?t.token:t,{name:"background-image",hash:{remote:!0},data:i}))+'"\n'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                 src="'+r(a(null!=t?t.bgImageName:t,t))+'"\n'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'             src="'+r(a(null!=t?t.bgImageName:t,t))+'"\n         '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='<background>\n    <img style="itml-img-fill: '+l(r(null!=t?t.imgFill:t,t))+';" \n         class="top" \n';return a=e["if"].call(t,null!=t?t.remote:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(o+=a),o+" />\n</background>\n"},useData:!0})},{"hbsfy/runtime":418}],51:[function(t,e,n){var i=t("itml").utils.Handlebars,a={background:t("./background.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./background.hbs":50,itml:435}],52:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l=r.loc,o=t("./title.hbs"),s=i.controller.DocumentController,c=t("./element"),u=t("../../common/traits/tab_component"),h=r.pubSub,d=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],t.name=l.loc("FUSE.Account"),this.controller=new c,t.controllers.push(this.controller),s.call(this,t,e),u.call(this),h.subscribe("serviceChange",this.handleServiceChanged.bind(this)),this.setNavigationBarUI(),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.addEventDelegates(this.controller,["handleOnboardingDone"]),this.addEventDelegates(this.controller,["closeSettings"]),this.addEventDelegates(this.controller,["prepareForTabPush"]),this.addEventDelegates(this.controller,["checkLocalManifestVersion"])};r.inherit(d,s),r.inherit(d,u,!0),d.prototype.documentType="settingsTemplate",d.prototype.titleTemplate=o,d.prototype.setNavigationBarUI=function(){this.navigationBarController.buttonName=r.account.getDSID()?l.loc("FUSE.DoneButton"):l.loc("FUSE.CancelButton"),this.navigationBarController.render();var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))},d.prototype.handleServiceChanged=function(){this.setNavigationBarUI()},d.prototype.handleDoneButton=function(){this.dispatchEvent(new a("closeSettings"))},e.exports=d},{"../../../util":391,"../../common/traits/tab_component":154,"./element":53,"./title.hbs":62,itml:435}],53:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l=r.loc,o=r.account,s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=t("../../base").style,p=t("./style.hbs"),m=t("./template.hbs"),f=r.pubSub,g=t("../onboarding/genre"),b=t("../subscribe"),v=t("./profile"),y=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new d({styleTemplate:p})),t.events=t.events||[],t.events.push("select"),this.strings={subscribeLabel:l.loc("FUSE.Settings.Subscribe.Label"),subscribeFooter:l.loc("FUSE.Settings.Subscribe.Footer"),upgradeToFamilyLabel:l.loc("FUSE.UpgradeToFamily.Label"),tuneYourTasteLabel:l.loc("FUSE.Settings.TuneYourTaste.Label"),followingLabel:l.loc("FUSE.Settings.Following.Label"),managedAccountHeader:l.loc("FUSE.Settings.ManagedAccounts.Header"),signOutLabel:l.loc("FUSE.Settings.SignOut.Label"),accountSummaryLabel:l.loc("FUSE.ViewAppleId"),appleIdLabel:l.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:l.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:l.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:l.loc("FUSE.SignIn.RequiredPlaceholder"),signIn:l.loc("FUSE.SignInButton"),forgotAppleId:l.loc("FUSE.SignIn.ForgotAppleId")},this.setTemplateData(),this.setNetworkDependentTemplateData(),s.call(this,t,e),c.call(this,t),u.call(this),f.subscribe("serviceChange",this.handleServiceChanged.bind(this)),f.subscribe("networkChange",this.handleNetworkChange.bind(this)),f.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),f.subscribe("buyFailed",this.handleBuyFailed.bind(this)),r.extend(this.onSelect,{"tune-taste-action":this.handleTuneYourTaste.bind(this),"subscribe-action":this.handleSubscribeAction.bind(this),"upgrade-to-family-action":this.handleUpgradeToFamilyAction.bind(this),"following-action":this.handleFollowingAction.bind(this),"follow-recommendations-action":this.handleFollowRecommendationsAction.bind(this),"profile-action":this.handleProfileAction.bind(this),"managed-accounts-action":this.handleManagedAccountsAction.bind(this),"family-button":this.handleFamilyAction.bind(this),"sign-out-button":this.handleSignOutAction.bind(this),"account-summary-button":this.handleAccountSummaryAction.bind(this),"network-error-action":this.showGenericNetworkWarningDialog.bind(this),"forgot-apple-id-button":this.handleForgotAppleId.bind(this),"redeem-action":this.handleRedeem.bind(this)}),this.model=new h({offlineWarningEnabled:!1}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.getConnectModelData()};r.inherit(y,s),r.inherit(y,c,!0),r.inherit(y,u,!0),y.prototype.template=m,y.prototype.setTemplateData=function(){this.DSID=o.getDSID();var t=o.isAppleMusicEnabledForStorefront(),e=o.isConnectEnabledForStorefront(),n=!1;t&&(n=o.isEligibleForAppleMusic());var i;i="function"==typeof UserInterfaceStatusController.canShowSubscriptionContent?UserInterfaceStatusController.canShowSubscriptionContent():UserInterfaceStatusController.canShowSubscriptionContent,this.showTuneTasteRow=n&&i,this.showSubscriptionUpsellRow=t&&!n,this.showFamilySettingsRow=t,this.showProfileEditingRow=e,this.showFollowersRow=e,this.showManagedArtistsRow=e,this.showFamilyUpgradeBuyButton=n&&t&&!o.isFamilySubscription()&&!o.isCarrierBundleSubscription(),this.familyUpgradeButtonClass="group-button",this.findArtistsToFollowLabel=n?l.loc("FUSE.Settings.FindArtistsToFollow.Label"):l.loc("FUSE.Settings.FindArtistsToFollow.NoSubscription.Label")},y.prototype.getConnectModelData=function(){this.DSID&&o.isConnectEnabledForStorefront()&&(this.getFollowingCount(),this.getProfilePermissions())},y.prototype.setNetworkDependentTemplateData=function(){this.setIsOffline(),"undefined"==typeof this.accountActionClassName&&(this.accountActionClassName={}),this.accountActionClassName.tuneTasteClassAction=this.getRowActionClassName("tune-taste-action"),this.accountActionClassName.subscribeAction=this.getRowActionClassName("subscribe-action"),this.accountActionClassName.profileAction=this.getRowActionClassName("profile-action"),this.accountActionClassName.familyAction=this.getRowActionClassName("family-button"),this.accountActionClassName.accountSummaryAction=this.getRowActionClassName("account-summary-button"),this.accountActionClassName.followingAction=this.getRowActionClassName("following-action"),this.accountActionClassName.followRecommendationsAction=this.getRowActionClassName("follow-recommendations-action"),this.accountActionClassName.upgradeToFamilyAction=this.getRowActionClassName("upgrade-to-family-action")},y.prototype.setIsOffline=function(){this.offline=r.network.isOffline()},y.prototype.getIsOffline=function(){return this.setIsOffline(),this.offline},y.prototype.getRowActionClassName=function(t){return this.getIsOffline()?"network-error-action":t},y.prototype.getFollowingCount=function(){var t=r.urls.build("followingCount",{user:itms.accountInfo.DSID});this.model.fetchData({method:"GET",url:t,success:this.followersCountDataSuccess.bind(this),failure:this.followersCountDataFailure.bind(this)}),this.loadingFollowers=!0},y.prototype.followersCountDataSuccess=function(t){this.loadingFollowers=!1;var e=t;if(e){var n=e.count;(!this.followersData||this.followersData&&n!==this.followersData.count)&&(this.followersData={count:n,isFollowingArtists:n>0},this.render())}},y.prototype.followersCountDataFailure=function(t,e,n){this.loadingFollowers=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.render()},y.prototype.handleAppear=function(){!this.loadingFollowers&&this.DSID&&this.updateFollowOnAppear&&(this.updateFollowOnAppear=!1,this.getFollowingCount("appear")),this.setTemplateData(),this.render()},y.prototype.getProfilePermissions=function(){if(r.network.isOnline()){var t=r.urls.build("profilePermissions",{user:itms.accountInfo.DSID});this.model.fetchData({url:t,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})}},y.prototype.getSubscriptionOffers=function(){var t=r.urls.getSubscriptionOffersSrv();this.model.fetchData({url:t,success:this.subscriptionOffersDataSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},y.prototype.subscriptionOffersDataSuccess=function(t){if(t){for(var e,n=t.offers||[],i=0;i<n.length;i++){var a=n[i];if(a.isFamily){e=a;break}}if(e){var r={shortenedItemName:l.loc("MZCommerce.Fuse.Family"),unitpricePerDuration:e.priceForDisplay},o={data:{hideTitle:!0,subtitle:l.loc("FUSE.UpgradeToFamily.ConfirmationDialog.Explanation",r),buttons:[{title:l.loc("FUSE.CancelButton"),className:"cancel-button",callback:this.upgradeFamilyBuyComplete.bind(this)},{title:l.loc("OK"),className:"ok-button",callback:this.buyFamilyUpgrade.bind(this,e)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};f.publish("showModal",{detail:o})}else this.upgradeFamilyBuyComplete()}},y.prototype.buyFamilyUpgrade=function(t){var e={offers:[{buyParams:t.buyParams+r.metrics.createBuyParams(this)}]};itms.buy(e)},y.prototype.handleBuyConfirmed=function(){this.showFamilyUpgradeBuyButton=!1,this.upgradeFamilyBuyComplete();var t=o.getCachedSubscriptionStatus();t&&t.hasFamily!==!0&&openURL("prefs:root=CASTLE&aaaction=setupFamily")},y.prototype.handleBuyFailed=function(){this.upgradeFamilyBuyComplete()},y.prototype.upgradeFamilyBuyComplete=function(){this.familyBuyInProgress=!1,this.setButtonEnabled(!0,"familyUpgradeButtonLabel")},y.prototype.createView=function(t){this.data=t;var e,n,i=[],a=t.permissions;for(e=0;e<a.length;e++){n=a[e];var r=n.entityId,l=this.model.lookupContent(r,this.processContent.bind(this));i.push(l)}return i},y.prototype.handleFailedFetch=function(t,e){this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},y.prototype.processContent=function(t){var e=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"product"}}),n=t;return n[t.kind]=!0,e&&(n.image=e.image,n.hero=e.hero),n},y.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel={},this.viewModel.managedArtists=t.detail.view),this.render()},y.prototype.handleTuneYourTaste=function(t){var e=new g;r.metrics.track(e,{pageContextOverride:"AccountSettings"});var n=t.target.ownerDocument.navigationDocument;e.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),n.pushDocument(e.el)},y.prototype.handleOnboardingDone=function(){f.publish("setSelectedTab","for_you"),this.dispatchEvent(new a("closeSettings"))},y.prototype.handleSubscribeAction=function(t){var e=new b({showCancelButton:!1});r.metrics.track(e,{pageContextOverride:"AccountSettings"}),this.addEventDelegates(e,["tabPush","checkLocalManifestVersion","handleAskToBuy"]);var n=t.target.ownerDocument.navigationDocument;e.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),n.pushDocument(e.el,{}),e.initManifestVersionCheck()},y.prototype.handleUpgradeToFamilyAction=function(){this.familyBuyInProgress!==!0&&(this.familyBuyInProgress=!0,this.setButtonEnabled(!1,"familyUpgradeButtonLabel"),this.getSubscriptionOffers())},y.prototype.setButtonEnabled=function(t,e){var n=this.el.ownerDocument.getElementById(e);n&&(n["class"]=t?"group-button":"group-button-disabled",this.familyUpgradeButtonClass=n["class"],this.render())},y.prototype.handleSubscriptionSuccess=function(){var t=r.tabs.getTab("for_you");if(t){var e={tab:t};this.dispatchEvent(new a("prepareForTabPush",{detail:e}))}this.dispatchEvent(new a("closeSettings"))},y.prototype.handleFollowingAction=function(){var t=this.el.ownerDocument.navigationDocument,e={data:{viewProfileEnabled:!1},dataType:"connect_following",navigationDocument:t};this.dispatchEvent(new a("tabPush",{detail:e})),this.updateFollowOnAppear=!0},y.prototype.handleFollowRecommendationsAction=function(t){var e=t.target.ownerDocument.navigationDocument,n={data:{viewProfileEnabled:!1},dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new a("tabPush",{detail:n})),this.updateFollowOnAppear=!0},y.prototype.handleProfileAction=function(t){var e=new v,n=t.target.ownerDocument.navigationDocument;n.pushDocument(e.el)},y.prototype.handleManagedAccountsAction=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=r.tabs.getTab("connect")||TabBar.selectedTab,l={data:n,dataType:"profile_page",navigationDocument:i.navigationDocument},o={switchToTab:!0,tab:i};this.dispatchEvent(new a("prepareForTabPush",{detail:o})),this.dispatchEvent(new a("closeSettings")),this.dispatchEvent(new a("tabPush",{detail:l}))}},y.prototype.handleFamilyAction=function(t){var e=t.state;"none"===e?openURL("prefs:root=CASTLE&aaaction=setupFamily"):("empty"===e||"complete"===e)&&openURL("prefs:root=CASTLE")},y.prototype.handleSignOutAction=function(){itms.signOut()},y.prototype.handleAccountSummaryAction=function(){var t=r.urls.modifyAccount();t&&(t=t.replace("https","music"),openURL(t))},y.prototype.handleRedeem=function(){var t=r.urls.redeem();t&&openURL(t)},y.prototype.handleForgotAppleId=function(){openURL(l.loc("FUSE.ForgotAppleId.Url"))},y.prototype.handleServiceChanged=function(){this.setTemplateData(),this.getConnectModelData(),this.render()},y.prototype.handleNetworkChange=function(){this.setNetworkDependentTemplateData(),this.followersData||this.loadingFollowers||this.getConnectModelData(),this.render()},y.prototype.artworkMap={product:{xs:[32,32],s:[32,32],m:[32,32],l:[32,32],xl:[32,32],xxl:[32,32]}},y.prototype.showGenericNetworkWarningDialog=function(){var t={data:{type:"error",title:l.loc("FUSE.Error.YoureOffline"),subtitle:l.loc("FUSE.Error.YoureOffline.Generic"),buttons:[{title:l.loc("OK")}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};f.publish("showModal",{detail:t})},e.exports=y},{"../../../util":391,"../../base":97,"../../common":133,"../onboarding/genre":45,"../subscribe":75,"./profile":57,"./style.hbs":60,"./template.hbs":61,itml:435}],54:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.DocumentController,l=t("../../../connect/recommendations/element"),o=t("../../../common").traits.TabComponent,s=t("../../../connect/following/template.hbs"),c=a.loc,u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("template"),this.controller=new l({api:"follows",params:{user:itms.accountInfo.DSID,limit:200},pullToRefreshEnabled:!1,data:{viewProfileEnabled:!1},hasAutoFollowToggle:!0,batchLoad:!0,template:s,toggled:!0,followText:c.loc("FUSE.Settings.Following.Follow"),followingText:c.loc("FUSE.Settings.Following.Unfollow")}),t.name=c.loc("FUSE.Following.Title"),r.call(this,t,e),o.call(this)};a.inherit(u,r),a.inherit(u,o,!0),u.prototype.documentType="settingsTemplate",e.exports=u},{"../../../../util":391,"../../../common":133,"../../../connect/following/template.hbs":173,"../../../connect/recommendations/element":201,itml:435}],55:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,l=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeSettings.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this))};l.prototype.handleNeedsContent=function(){this.controller=new i,this.controller.addEventListener("closeSettings",this.closeSettings.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("prepareForTabPush",this.eventHandlers.prepareForTabPush),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),this.nativeViewController.navigationDocument.pushDocument(this.controller.el,{animated:!1})},l.prototype.closeSettings=function(){this.nativeViewController.close()},e.exports=l},{"../../../util":391,"./document":52}],56:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=i.controller.MultiElementController,l=t("../../../common").traits.EventMap,o=t("../../../common").traits.TabComponent,s=t("../../../base").style,c=t("./style.hbs"),u=t("./template.hbs"),h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new s({styleTemplate:c})),t.events=t.events||[],t.events.push("select"),r.call(this,t,e),l.call(this,t),o.call(this),this.render()};a.inherit(h,r),a.inherit(h,l,!0),a.inherit(h,o,!0),h.prototype.template=u,e.exports=h},{"../../../../util":391,"../../../base":97,"../../../common":133,"./style.hbs":58,"./template.hbs":59,itml:435}],57:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=i.controller.DocumentController,o=t("../../../common").traits.TabComponent,s=t("./element"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new s,t.controllers.push(n)),t.name=r.loc("FUSE.Account"),l.call(this,t,e),o.call(this)};a.inherit(c,l),a.inherit(c,o,!0),c.prototype.documentType="settingsTemplate",e.exports=c},{"../../../../util":391,"../../../common":133,"./element":56,itml:435}],58:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return""},useData:!0})},{"hbsfy/runtime":418}],59:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<group>\n    <header>\n        <label class="">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.EditNameWarning.U13",{name:"loc",hash:{},data:i}))+"</label>\n    </header>\n	<settingsEditProfile />\n</group>\n"},useData:!0})},{"hbsfy/runtime":418}],60:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".label-sub-title {\n  color: rgb(178,178,178);\n}\n.tune-taste-action-disabled {\n  background-color: rgba(0,0,0,0);\n}"},useData:!0})},{"hbsfy/runtime":418}],61:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <group>\n        <settingsProfile class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.profileAction:a,t))+'" data-content-kind="user_detail_page">\n            <decorationImage/>\n        </settingsProfile>\n    </group>\n\n    <group>\n';return a=e["if"].call(t,null!=t?t.showTuneTasteRow:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.showFollowersRow:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="    </group>\n\n",a=e["if"].call(t,null!=t?t.showSubscriptionUpsellRow:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.showFamilySettingsRow:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.showFamilyUpgradeBuyButton:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.showManagedArtistsRow:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'\n    <group>\n        <lockup class="redeem-action"><label class="group-button">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.Redeem.Button",{name:"loc",hash:{},data:i}))+'</label></lockup>\n    </group>\n\n    <group>\n        <lockup class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.accountSummaryAction:a,t))+'">\n            <label class="group-button">'+l(r(null!=(a=null!=t?t.strings:t)?a.accountSummaryLabel:a,t))+'</label>\n        </lockup>\n        <lockup class="sign-out-button">\n            <label class="group-button">'+l(r(null!=(a=null!=t?t.strings:t)?a.signOutLabel:a,t))+"</label>\n        </lockup>\n    </group>\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <lockup class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.tuneTasteClassAction:a,t))+'" data-content-kind="onboarding_page">\n                <label class="group-label">'+l(r(null!=(a=null!=t?t.strings:t)?a.tuneYourTasteLabel:a,t))+"</label>\n                <decorationImage />\n            </lockup>\n"},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.followersData:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.followersData:t)?a.isFollowingArtists:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                    <lockup class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followingAction:a,t))+'" data-content-kind="settings_following_page" type="tabular">\n                        <label class="group-label align-left">'+l(r(null!=(a=null!=t?t.strings:t)?a.followingLabel:a,t))+'</label>\n                        <label class="group-label align-right label-sub-title">'+l(r(null!=(a=null!=t?t.followersData:t)?a.count:a,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n";
},8:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                    <lockup class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.followRecommendationsAction:a,t))+'" data-content-kind="follow-recommendations_page">\n                        <label class="group-label">'+l(r(null!=t?t.findArtistsToFollowLabel:t,t))+"</label>\n                        <decorationImage/>\n                    </lockup>\n"},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <group>\n            <lockup class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.subscribeAction:a,t))+'"><label class="group-button">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscribeLabel:a,t))+'</label></lockup>\n            <footer class="footer"><label class="group-footer">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscribeFooter:a,t))+"</label></footer>\n        </group>\n"},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <group>\n            <settingsFamily class="'+l(r(null!=(a=null!=t?t.accountActionClassName:t)?a.familyAction:a,t))+'"/>\n        </group>\n'},14:function(t,e,n,i){var a,r,l=this.lambda,o=this.escapeExpression,s="function",c=e.helperMissing;return'        <group>\n            <lockup class="'+o(l(null!=(a=null!=t?t.accountActionClassName:t)?a.upgradeToFamilyAction:a,t))+'"><label class="'+o((r=null!=(r=e.familyUpgradeButtonClass||(null!=t?t.familyUpgradeButtonClass:t))?r:c,typeof r===s?r.call(t,{name:"familyUpgradeButtonClass",hash:{},data:i}):r))+'" id="familyUpgradeButtonLabel">'+o(l(null!=(a=null!=t?t.strings:t)?a.upgradeToFamilyLabel:a,t))+"</label></lockup>\n        </group>\n"},16:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},17:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='            <group>\n                <header>\n                    <label class="group-label">'+l(r(null!=(a=null!=t?t.strings:t)?a.managedAccountHeader:a,t))+"</label>\n                </header>\n";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.managedArtists:a,{name:"each",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"            </group>\n"},18:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                    <lockup class="managed-accounts-action" data-content-id="'+l(r(null!=t?t.id:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'                        <label class="group-label">'+l(r(null!=t?t.name:t,t))+"</label>\n                        <decorationImage />\n                    </lockup>\n"},19:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                            <img width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" src="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" />\n'},21:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'    <group type="signin">\n        <group>\n            <settingsField>\n                <label>'+l(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label>\n                <input type="email" placeholdertext="'+l(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'" />\n            </settingsField>\n            <settingsField>\n                <label>'+l(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label>\n                <input type="password" secure="true" placeholdertext="'+l(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" />\n            </settingsField>\n        </group>\n        <group>\n            <settingsField class="tint-color">\n                <input class="tint-color" type="submit" value="'+l(r(null!=(a=null!=t?t.strings:t)?a.signIn:a,t))+'" />\n            </settingsField>\n            <footer class="tint-color">\n                <button class="forgot-apple-id-button tint-color">'+l(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+'</button>\n            </footer>\n        </group>\n    </group>\n    <group>\n        <lockup class="redeem-action"><label class="group-button">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.Redeem.Button",{name:"loc",hash:{},data:i}))+"</label></lockup>\n    </group>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.DSID:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(21,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],62:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"<title>"+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button action="close" id="doneButton" type="done" class="align-right done-button">'+o((a=null!=(a=e.buttonName||(null!=t?t.buttonName:t))?a:l,typeof a===r?a.call(t,{name:"buttonName",hash:{},data:i}):a))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],63:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=t("./template.hbs"),o=t("../../common").traits.EventMap,s=t("../../base").style,c=t("./style.hbs"),u=t("../subscribe/style.hbs"),h=t("../../common").traits.TabComponent,d=i.event.Event,p=i.controller.MultiElementController,m=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("signin-template"),t.events=t.events||[],t.data=t.data||{},t.events.push("select");var n,i=t.data.inJSModal===!0&&a.screen.getScreenDimensions().width>414;n=i?100:(a.screen.getScreenDimensions().width-330)/2;var l={textFieldMargin:n};t.styles.push(new s({styleTemplate:c,tintInfo:l})),t.styles.push(new s({styleTemplate:u})),this.showCreateAppleId=t.data.showCreateAppleId!==!1,this.showAboutMusicAndPrivacy=t.data.showAboutMusicAndPrivacy,this.strings={header:t.data.header||r.loc("FUSE.SignIn.Header"),subheader:t.data.subheader,appleIdLabel:r.loc("FUSE.SignIn.AppleId.Label"),passwordLabel:r.loc("FUSE.SignIn.Password.Label"),appleIdPlaceholder:r.loc("FUSE.SignIn.AppleIdPlaceholder"),requiredPlaceholder:r.loc("FUSE.SignIn.RequiredPlaceholder"),forgotAppleId:r.loc("FUSE.ForgotAppleId"),createAppleId:r.loc("FUSE.CreateAppleId"),subscriptionDisclosure:t.data.showDiscosureForSignIn,aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic")},p.call(this,t,e),o.call(this,t),a.extend(this.onSelect,{"forgot-apple-id-button":this.handleForgotAppleId.bind(this),"create-apple-id-button":this.handleCreateAppleId.bind(this),"about-music-button":this.pushLearnMore}),this.addEventDelegates(this.el.ownerDocument,["tabPush"])};a.inherit(m,p),a.inherit(m,o,!0),a.inherit(m,h,!0),m.prototype.template=l,m.prototype.handleForgotAppleId=function(){openURL(r.loc("FUSE.ForgotAppleId.Url"))},m.prototype.handleCreateAppleId=function(){var t=a.urls.signup();t&&(t=t.replace("https","music"),openURL(t)),this.dispatchEvent(new d("createAppleId"))},e.exports=m},{"../../../util":391,"../../base":97,"../../common":133,"../subscribe/style.hbs":77,"./style.hbs":65,"./template.hbs":66,itml:435}],64:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),t.event&&t.event.detail&&t.event.detail.navigationDocument===modal&&(t.data.inJSModal=!0),this.callback=t.data.callback,this.controller=new l({data:t.data}),t.controllers.push(this.controller),o.call(this,t,e),this.navigationBarController.showCancelButton=t.data.showCancelButton!==!1,this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render();var n=this.el.getElementsByTagName("signInTemplate").item(0);n&&n.addEventListener("change",this.handleChange.bind(this));var i=this.el.getElementById("cancel");i&&i.addEventListener("select",this.cancel.bind(this,t.data.cancelCallback))};a.inherit(s,o),s.prototype.documentType="signInTemplate",s.prototype.titleTemplate=r,s.prototype.handleChange=function(t){"success"===t.result&&(a.account.closeAccountModal.call(this),this.callback&&this.callback())},s.prototype.cancel=function(t){a.account.closeAccountModal.call(this),t&&t.call()},e.exports=s},{"../../../util":391,"./element":63,"./title.hbs":67,itml:435}],65:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return".page-header {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 27pt;\n    text-align: center;\n    max-width: 300pt;\n    margin: 40 0 15 0;\n}\n.page-subheader {\n	itml-text-max-lines: 0;\n    font-weight: light;\n    color: rgba(0,0,0,0.6);\n    text-align: center;\n    max-width: 300pt;\n    margin: 0 0 15 0;\n}\n.signin-control {\n    margin: 0 "+o((a=null!=(a=e.textFieldMargin||(null!=t?t.textFieldMargin:t))?a:l,typeof a===r?a.call(t,{name:"textFieldMargin",hash:{},data:i}):a))+" 15 "+o((a=null!=(a=e.textFieldMargin||(null!=t?t.textFieldMargin:t))?a:l,typeof a===r?a.call(t,{name:"textFieldMargin",hash:{},data:i}):a))+";\n}\n.create-apple-id-button {\n    margin: 25 0 0 0;\n}\n.bottom-spacer {\n    margin: 0 0 55 0;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],66:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'<text class="page-subheader subhead top">'+l(r(null!=(a=null!=t?t.strings:t)?a.subheader:a,t))+"</text>\n"},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'    <text class="bottom caption2 disclosure-text">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t))+"</text>\n"},5:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'  <button class="tint-color footer-link caption2 create-apple-id-button bottom">'+l(r(null!=(a=null!=t?t.strings:t)?a.createAppleId:a,t))+"</button>\n"},7:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'    <button class="small-button tint-color about-music-button bottom" data-content-kind="learn_more_page" about-type="about_music" push-type="sheet" type-key="MusicAndPrivacy">'+l(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(o+=a),o+='<text class="page-header top">'+l(r(null!=(a=null!=t?t.strings:t)?a.header:a,t))+"</text>\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.subheader:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='<signInControl class="signin-control middle">\n  <label class="caption1-emphasized">'+l(r(null!=(a=null!=t?t.strings:t)?a.appleIdLabel:a,t))+'</label><input type="email" placeholdertext="'+l(r(null!=(a=null!=t?t.strings:t)?a.appleIdPlaceholder:a,t))+'"></input>\n  <label class="caption1-emphasized">'+l(r(null!=(a=null!=t?t.strings:t)?a.passwordLabel:a,t))+'</label><input type="text" placeholdertext="'+l(r(null!=(a=null!=t?t.strings:t)?a.requiredPlaceholder:a,t))+'" secure="true"></input>\n</signInControl>\n',a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='<button class="tint-color footer-link caption2 forgot-apple-id-button bottom">'+l(r(null!=(a=null!=t?t.strings:t)?a.forgotAppleId:a,t))+"</button>\n",a=e["if"].call(t,null!=t?t.showCreateAppleId:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),a=e["if"].call(t,null!=t?t.showAboutMusicAndPrivacy:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'<text class="bottom-spacer bottom"></text>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],67:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancel" type="link" class="align-right">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n\n"},useData:!0})},{"hbsfy/runtime":418}],68:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=i.pubSub,l=t("../subscribe"),o={handleSonosLink:function(t,e){var n=i.query.parse(t),o=n&&"signup"===n.action,s=i.account.getDSID(),c=function(){var t=new l({showCancelButton:!0});t.addEventListener("handleSubscribeDone",function(){modal.popDocument()}),modal.pushDocument(t.el,{}),t.initSubscribeData(),i.metrics.track(t,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Sonos"})},u=function(e){var n={header:a.loc("FUSE.Sonos.SignIn.AddMusic"),callback:this.sonosSignInComplete.bind(this,t),showCancelButton:!0,showCreateAppleId:!1,showAlreadyMemberUI:e},i={data:n,dataType:s?"sonos_signed_in_auth":"signin",navigationDocument:modal};r.publish("showModal",{detail:i})},h=function(t,e){1===t||i.account.isCarrierBundleSubscription(e)?u.call(this,t):c()},d=i.bag(),p=d&&d.sonosAuthAllowedCallers;e&&p&&p.indexOf(e)>-1?o?s?i.account.getSubscriptionStatus({service:"AppleMusic"},h.bind(this)):c():u.call(this):this.showSonosGenericErrorDialog()},showSonosGenericErrorDialog:function(){setTimeout(function(){var t={data:{type:"error",title:a.loc("FUSE.Sonos.Auth.Error"),buttons:[{title:a.loc("OK"),className:"comfirm-success"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:t})}.bind(this),500)},sonosSignInComplete:function(t){i.account.isEligibleForAppleMusic()?this.authenticate(t):setTimeout(function(){var t={data:{mode:"upsell",upsellIdentifier:"Sonos",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!1}};r.publish("showModal",{detail:t})}.bind(this),500)},redirectToCallbackUrl:function(t,e,n){if(t&&e.authToken){var a={authToken:e.authToken};n&&n.encryptedHouseholdId&&(a.appUrlDecrypt="1"),e.nickname&&(a.nickname=e.nickname),t+=i.query.build(a),openURL(t)}},authenticate:function(t){var e=i.query.parse(t,!0),n=e&&e.callbackUrl;n&&(n=decodeURIComponent(n));var l={requests:2},o=function(){setTimeout(function(){var t={data:{type:"error",title:a.loc("FUSE.Sonos.Auth.Error"),buttons:[{title:a.loc("OK"),className:"comfirm-success"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};r.publish("showModal",{detail:t})}.bind(this),500)},s=function(t){var i=JSON.parse(t);l.authToken=i&&i.token,l.requests--,l.authToken&&n||o(),0===l.requests&&this.redirectToCallbackUrl(n,l,e)},c=function(t){var i=JSON.parse(t);i.profile&&(l.nickname=i.profile.handle||i.profile.name),l.requests--,0===l.requests&&this.redirectToCallbackUrl(n,l,e)},u=function(){i.log.error("userProfile sonos/helper.js XHR Failed"),l.requests--,0===l.requests&&this.redirectToCallbackUrl(n,l,e)},h=i.urls.tpToken();if(h){var d="id="+e.householdId+"&sig="+e.encryptedHouseholdId;i.xhr({url:h,method:"POST",params:d,success:s.bind(this),failure:o.bind(this)})}var p=i.urls.userProfile();p?i.xhr({method:"GET",url:p+i.query.build({user:itms.accountInfo.DSID}),success:c.bind(this),failure:u.bind(this)}):u()}};e.exports=o},{"../../../util":391,"../subscribe":75}],69:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=a.loc,l=t("./template.hbs"),o=t("../../../common").traits.EventMap,s=t("../../../base").style,c=t("./style.hbs"),u=t("../../../common").traits.TabComponent,h=a.pubSub,d=i.controller.MultiElementController,p=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("signed-in-auth"),t.events=t.events||[],t.data=t.data||{},this.callback=t.data.callback,t.events.push("select"),t.styles.push(new s({styleTemplate:c})),this.bodyText=r.loc("FUSE.Sonos.SignIn.AppleIdUsed",{appleID:itms.accountInfo.appleId}),d.call(this,t,e),o.call(this,t),a.extend(this.onSelect,{"continue-button":this.handleContinueButton.bind(this)}),this.addEventDelegates(this.el.ownerDocument,["tabPush"]),t.data.showAlreadyMemberUI&&setTimeout(function(){this.showAlreadySubscribedDialog()}.bind(this),500)};a.inherit(p,d),a.inherit(p,o,!0),a.inherit(p,u,!0),p.prototype.template=l,p.prototype.handleContinueButton=function(){a.account.auth({success:this.authenticateSuccess.bind(this),failure:this.authenticateFailure.bind(this)})},p.prototype.authenticateSuccess=function(){modal.popDocument(),this.callback&&this.callback()},p.prototype.authenticateFailure=function(){this.failureCallback&&this.failureCallback()},p.prototype.showAlreadySubscribedDialog=function(){var t={data:{type:"error",title:r.loc("FUSE.Sonos.AlreadyMusicMember"),buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal};h.publish("showModal",{detail:t})},e.exports=p},{"../../../../util":391,"../../../base":97,"../../../common":133,"./style.hbs":71,"./template.hbs":72,itml:435}],70:[function(t,e,n){var i=t("itml"),a=t("../../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),this.controller=new l({data:t.data}),t.controllers.push(this.controller),o.call(this,t,e);var n=this.el.getElementById("cancel");n&&n.addEventListener("select",this.cancel)};a.inherit(s,o),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=r,s.prototype.cancel=function(){modal.popDocument()},e.exports=s},{"../../../../util":391,"./element":69,"./title.hbs":73,itml:435}],71:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".page-text {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 22pt;\n    text-align: center;\n    max-width: 300pt;\n}\n\n.continue-button {\n    margin: 50 0 0 0;\n}"},useData:!0})},{"hbsfy/runtime":418}],72:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,l=e.helperMissing;return'<text class="page-text middle">'+r(a(null!=t?t.bodyText:t,t))+'</text>\n<button class="continue-button action-button-solid caption2-emphasized middle">'+r((e.loc||t&&t.loc||l).call(t,"FUSE.Continue.Uppercase",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],73:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancel" type="link" class="align-right">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n\n"},useData:!0})},{"hbsfy/runtime":418}],74:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=i.event.Event,o=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=t("./style.hbs"),d=t("./model"),p=t("./template.hbs"),m=a.pubSub,f=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.events=t.events||[],t.events.push("select"),this.data=t.data,o.call(this,t,e),s.call(this,t),c.call(this),this.buyConfirmedUnsubscribeToken=m.subscribe("buyConfirmed",this.handleBuyConfirmed.bind(this)),this.buyFailedUnsubscribeToken=m.subscribe("buyFailed",this.handleBuyFailed.bind(this))};a.inherit(f,o),a.inherit(f,s,!0),a.inherit(f,c,!0),f.prototype.template=p,f.prototype.initManifestVersionCheck=function(){this.updating=!0,this.render();var t={callback:this.initSubscribeData.bind(this)},e=new l("checkLocalManifestVersion",{detail:t});this.dispatchEvent(e)},f.prototype.initSubscribeData=function(){this.updating=!1,a.network.isOffline()?(this.errorData={errorMessage:r.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:r.loc("FUSE.Error.YoureOffline")},this.render()):(UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0),a.extend(this.onSelect,{"open-family-url":this.handleFamilyLink.bind(this),"subscribe-buy-button":this.buySubscription.bind(this),"learn-more-link":this.handleLearnMoreLink.bind(this),"about-music-button":this.pushLearnMore}),this.strings={subscriptionHeader:r.loc("FUSE.Subscription.Header"),subscriptionSubheader:r.loc("FUSE.Subscription.Subheader"),learnMore:r.loc("FUSE.Subscription.LearnMoreButton"),learnMoreUrl:r.loc("FUSE.Subscription.LearnMore.Url"),familySharingLinkName:r.loc("FUSE.Subscription.FamilySharing.FamilySharingLink.Name"),familySharingLinkUrl:r.loc("FUSE.Subscription.FamilySharing.FamilySharingLink.Url"),subscriptionDisclosure:r.loc("FUSE.Subscription.Disclosure"),aboutMusicAndPrivacy:r.loc("FUSE.Footer.aboutAppleMusic")},this.model=new d,this.currentDoc=this.el.ownerDocument,this.addEventDelegates(this.currentDoc,["tabPush","handleAskToBuy"]),this.data&&this.data.offers?this.model.setData(this.data):(this.model.addEventListener("dataReady",function(){this.loading=!1,this.render()}.bind(this)),this.loading=!0,this.model.get()),this.render())},f.prototype.handleFamilyLink=function(){openURL(this.strings.familySharingLinkUrl)},f.prototype.handleLearnMoreLink=function(){openURL(this.strings.learnMoreUrl)},f.prototype.disableActionButtons=function(t){var e,n=this.el.ownerDocument.getElementsByTagName("button"),i=0,a=n.length;for(i=0;a>i;i++)e=n.item(i),e.setAttribute("disabled",t)},f.prototype.buySubscription=function(t){var e,n=this.model.data.offersById,i=t.target.getAttribute("data-content-index");if(i&&n)if(e=n[i]&&n[i].buyParams){var r={offers:[{buyParams:e+a.metrics.createBuyParams(this)}]};itms.buy(r),this.disableActionButtons(!0)}else a.log.warn("Buy Failed: Missing buyParams data for selected offer.");else a.log.warn("Buy Failed: Missing contentId or offers data.")},f.prototype.handleBuyConfirmed=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),a.account.isAppleMusicEnabled()||a.account.enableAppleMusic(!0),this.dispatchEvent(new l("handleSubscribeDone")),this.disableActionButtons(!1)},f.prototype.handleBuyFailed=function(t){var e=t.buyInfo;1===e.error&&(e.document=this.el.ownerDocument,e.controller=this,this.handleAskToBuy(e)),a.account.isEligibleForAppleMusic()&&this.dispatchEvent(new l("handleSubscribeDone")),this.disableActionButtons(!1)},f.prototype.metricsPageData={pageId:"Subscribe",pageType:"Picker"},e.exports=f},{"../../../util":391,"../../base":97,"../../common":133,"./model":76,"./style.hbs":77,"./template.hbs":78,itml:435}],75:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),l=a.pubSub,o=t("./element"),s=t("../../common").traits.TabComponent,c=i.controller.DocumentController,u=function(t,e){t=t||{},t.name="Subscribe",t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new o(t),t.controllers.push(n)),c.call(this,t,e),s.call(this),this.navigationBarController.showCancelButton=t.showCancelButton!==!1,this.navigationBarController.render(),this.controller=n,this.el.addEventListener("unload",function(){l.unsubscribe(n.buyConfirmedUnsubscribeToken),l.unsubscribe(n.buyFailedUnsubscribeToken)}),this.addEventDelegates(this.controller,["handleSubscribeDone","checkLocalManifestVersion"]);var i=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelSubscribe.bind(this))};this.addEventListener("render",i.bind(this)),i.call(this)};a.inherit(u,c),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=r,u.prototype.metricsPageData={pageId:"Subscribe",pageType:"Picker"},u.prototype.cancelSubscribe=function(){a.account.closeAccountModal.call(this)},u.prototype.initManifestVersionCheck=function(){this.controller.initManifestVersionCheck()},u.prototype.initSubscribeData=function(){this.controller.initSubscribeData()},e.exports=u},{"../../../util":391,"../../common":133,"./element":74,"./title.hbs":79,itml:435}],76:[function(t,e,n){function i(t){t=t||{},l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../base").model,o=t("../../../util");i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.setData=function(t){this.data=this.parsePageData(t)},i.prototype.get=function(){var t={url:o.urls.getSubscriptionOffersSrv(),method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};o.xhr(t)},i.prototype.onDataSuccess=function(t){this.data=this.parsePageData(JSON.parse(t)),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){o.log.warn("FAIL: ",t)},i.prototype.parsePageData=function(t){for(var e={monthlyOffers:[],yearlyOffers:[],offersById:{}},n=function(t,e){return t.price-e.price},i=t.offers&&t.offers.slice(0).sort(n)||[],a=0,r=0,l=0;l<i.length;l++){var o=i[l];o.dataIndex=l,o.isFamily?o.isYearly?e.yearlyOffers[r++]=o:e.monthlyOffers[a++]=o:o.isYearly?e.yearlyOffers[r++]=o:e.monthlyOffers[a++]=o,e.offersById[l]=o}return e.monthlyOffers.length&&(e.monthlyOffers[0].selected=!0),e},e.exports=i},{"../../../util":391,"../../base":97,itml:435}],77:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* subscribe */\n.page-title {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n}\n.title-footnote {\n    itml-text-max-lines: 0;\n    text-align: center;\n    color: rgba(0, 0, 0, 0.6);\n    margin: 0 0 0 0;\n}\n.learn-more-link {\n    margin: 3 0 10 0;\n}\n.open-family-url {\n    margin: 13 0 15 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.subscribe-buy-button {\n    itml-text-max-lines: 0;\n    text-align: center;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: rgb(0,0,0);\n    border-radius: circle-caps;\n    padding: 15;\n    margin: 0;\n}\n.subscribe-button-spacer {\n    margin: 40 0 0 0;\n}\n.buy-button-title {\n  font-weight: bold;\n}\n.buy-button-subtitle {\n  color: rgba(0,0,0,0.6);\n}\n.disclosure-text {\n    color: rgba(0,0,0,0.6);\n    margin: 0 0 18 0;\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n.about-music-button {\n    itml-text-max-lines: 0;\n    margin: 20 0 15 0;\n}\n.error-title-text {\n    margin: 0 0 10 0;\n    font-size: 28pt;\n    font-weight: light;\n    max-width: 290pt;\n    text-align: center;\n}\n.error-message-text {\n    color: rgba(0,0,0,0.6);\n    margin: 25 0 50 0;\n    max-width: 290pt;\n    text-align: center;\n}\n@media all and (max-width: 767pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 25 0 15 0;\n    }\n}\n@media all and (width: 320pt) {\n    .max-width {\n        max-width: 88%;\n    }\n    .subscribe-buy-button {\n        itml-item-width: 100%;\n    }\n    .page-title {\n        margin: 18 0 15 0;\n    }\n    .subscribe-button-spacer {\n        margin: 15 0 0 0;\n    }\n    .disclosure-text {\n        margin: 0 0 8 0;\n    }\n}\n@media all and (width: 768pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 80 0 20 0;\n    }\n}\n@media all and (width: 1024pt) {\n    .max-width {\n        max-width: 240pt;\n    }\n    .subscribe-buy-button {\n        padding: 10 88 10 88;\n    }\n    .page-title {\n        margin: 60 0 20 0;\n    }\n}"},useData:!0})},{"hbsfy/runtime":418}],78:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	\n";return a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'	    <title maxLines="0" class="error-title-text middle">'+l(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'	    <subtitle maxLines="0" class="error-message-text subhead middle">'+l(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=t?t.updating:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+"\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		<activityIndicator class="middle">\n		    <title>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Updating",{name:"loc",hash:{},data:i}))+"</title>\n		</activityIndicator>\n"},9:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='		<title class="page-title max-width top">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscriptionHeader:a,t))+'</title>\n		<subtitle class="title-footnote footnote max-width top">'+l(r(null!=(a=null!=t?t.strings:t)?a.subscriptionSubheader:a,t))+'</subtitle>\n		<button class="learn-more-link footnote top tint-color max-width" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"LearnMore",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">"+l(r(null!=(a=null!=t?t.strings:t)?a.learnMore:a,t))+"</button>\n\n",a=e.each.call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.monthlyOffers:a,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        <button class="open-family-url caption1 max-width middle" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"FamilySharingLink",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">"+l(r(null!=(a=null!=t?t.strings:t)?a.familySharingLinkName:a,t))+'</button>\n\n        <text class="caption2 disclosure-text max-width bottom">',a=r(null!=(a=null!=t?t.strings:t)?a.subscriptionDisclosure:a,t),null!=a&&(s+=a),s+='</text>\n\n		<divider class="divider bottom" />\n		<button class="caption2 tint-color about-music-button max-width bottom" data-content-kind="learn_more_page" type-key="MusicAndPrivacy" push-type="sheet" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"AboutMusicAndPrivacy",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+"</button>\n"},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='		  <button class="';return a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' subscribe-buy-button subhead-emphasized middle" data-content-id="'+l(r(null!=t?t.id:t,t))+'" data-content-index="',a=r(null!=t?t.dataIndex:t,t),null!=a&&(s+=a),s+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"buy",targetType:"button"},data:i}),null!=a&&(s+=a),s+'><span class="buy-button-title">'+l(r(null!=t?t.title:t,t))+' </span><br /><span class="buy-button-subtitle caption1">'+l(r(null!=t?t.priceForDisplay:t,t))+"</span></button>\n"},11:function(t,e,n,i){return"subscribe-button-spacer"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){
var a,r="";return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],79:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button id="cancelSheetButton" type="link" class="align-right cancel-button">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.showCancelButton:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},useData:!0})},{"hbsfy/runtime":418}],80:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=i.controller.MultiElementController,o=t("../../common").traits.EventMap,s=t("../../common").traits.TabComponent,c=t("../../common").traits.DataProvider,u=t("../../base").style,h=t("./style.hbs"),d=t("../../account/subscribe"),p=t("./template.hbs"),m=a.pubSub,f=function(t,e){t=t||{},t.styles=t.styles||[];var n=a.screen.getScreenDimensions().width>414,i={logoTopInset:a.image.getBgImageSafeZoneYOffset({isInOverlay:n})};t.styles.push(new u({styleTemplate:h,styleData:i})),t.events=t.events||[],t.events.push("select");var r=t.data&&t.data.url;if(r){var d=a.query.parse(r);"email"===d.from&&(this.oneClickAutoRenew=!0)}this.logoImageName=a.image.getAppleMusicLogoImageResource({isLight:!0}),this.loading=!0,l.call(this,t,e),o.call(this,t),s.call(this),a.extend(this.onSelect,{"autorenew-button":this.setAutoRenewOn.bind(this),"renew-subscription-button":this.handleRenewSubscription.bind(this),"try-again-button":this.handleTryAgain.bind(this),"authenticate-button":this.authenticate.bind(this),"not-now-button":this.closeSheet,"ok-button":this.closeSheet}),this.model=new c,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.getAutoRenewData()};a.inherit(f,l),a.inherit(f,o,!0),a.inherit(f,s,!0),f.prototype.template=p,f.prototype.getAutoRenewData=function(){this.model.fetchData({url:a.urls.getSubscriptionInfoSrv()+"?detail=lite&subscriptionType=music",success:this.handleDataFetchSuccess.bind(this),failure:this.showErrorUI.bind(this),authFailure:this.showErrorUI.bind(this,"auth"),retries:1})},f.prototype.handleDataFetchSuccess=function(t){return t},f.prototype.handleDataReady=function(t){if(this.viewModel=a.keypath(t,"detail.view"),this.oneClickAutoRenew&&this.viewModel&&this.viewModel.isActive&&!this.viewModel.isAutoRenewEnabled)this.setAutoRenewOn();else{if(this.loading=!1,this.viewModel){this.viewModel.isSubscriptionExpired=!this.viewModel.isActive,this.viewModel.autoRenewDescription=r.loc("FUSE.Subscription.AutoRenew.Description",{date:this.viewModel.expireDate});var e=this.viewModel.priceForDisplay,n=this.viewModel.isYearly?r.loc("FUSE.year"):r.loc("FUSE.month");this.viewModel.pricePerPeriod=r.loc("FUSE.AutoRenew.PricePerPeriod",{price:e,period:n})}else this.showErrorUI();this.render()}},f.prototype.setAutoRenewOn=function(){var t=a.urls.updateAutoRenewStateSrv(),e={url:t,params:"subscriptionType=music&enableAutoRenew=true",method:"POST",success:this.handleAutoRenewSuccess.bind(this),failure:this.handleAutoRenewFailure.bind(this)};a.xhr(e)},f.prototype.handleAutoRenewSuccess=function(t){var e=JSON.parse(t);e&&0!==e.status?this.showErrorUI():(this.autoRenewEnabledSucceeded=!0,this.closeSheet())},f.prototype.handleAutoRenewFailure=function(t){this.autoRenewEnabledSucceeded=!1,403===t?a.account.auth({success:this.setAutoRenewOn.bind(this),failure:this.showErrorUI.bind(this,"auth")}):this.showErrorUI()},f.prototype.handleRenewSubscription=function(t){var e=t.target.ownerDocument,n=new d;this.addEventDelegates(n,["tabPush","checkLocalManifestVersion","handleAskToBuy"]);var i=e.navigationDocument;n.addEventListener("handleSubscribeDone",this.closeSheet),i.replaceDocument(n.el,e,{}),n.initManifestVersionCheck()},f.prototype.showErrorUI=function(t){this.loading=!1,this.authError="auth"===t,this.errorData={errorMessage:this.authError?r.loc("FUSE.Error.AuthenticateError"):r.loc("FUSE.Error.GenericDataError")},this.render()},f.prototype.handleTryAgain=function(){this.loading=!0,this.errorData=void 0,this.render(),this.getAutoRenewData()},f.prototype.authenticate=function(){a.account.auth({success:this.handleTryAgain.bind(this),failure:this.showErrorUI.bind(this,"auth")})},f.prototype.closeSheet=function(){modal.popDocument()},f.prototype.disappearCallback=function(){if(this.autoRenewEnabledSucceeded){var t={data:{title:r.loc("FUSE.AutoRenew.Success.Title"),subtitle:r.loc("FUSE.AutoRenew.Success.Subtitle"),buttons:[{title:r.loc("OK")}]},dataType:"dialog",navigationDocument:modal};m.publish("showModal",{detail:t})}},f.prototype.metricsPageData={pageId:"SubscriptionAutoRenew",pageType:"Picker"},e.exports=f},{"../../../util":391,"../../account/subscribe":75,"../../base":97,"../../common":133,"./style.hbs":82,"./template.hbs":83,itml:435}],81:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),l=t("../../common").traits.TabComponent,o=i.controller.DocumentController,s=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],0===t.controllers.length&&(this.controller=new r(t),t.controllers.push(this.controller)),o.call(this,t,e),l.call(this),this.addEventDelegates(this.controller,["checkLocalManifestVersion"]),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="hidden",this.navigationBarController.render(),this.addEventListener("disappear",this.controller.disappearCallback.bind(this.controller))};a.inherit(s,o),a.inherit(s,l,!0),s.prototype.documentType="panelTemplate",s.prototype.metricsPageData={pageId:"SubscriptionAutoRenew",pageType:"Picker"},e.exports=s},{"../../../util":391,"../../common":133,"./element":80,itml:435}],82:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"/* subscribe */\n.template {\n    background-color: rgb(3,3,3);\n    color: rgb(255,255,255);\n}\n\n.logo-header {\n    margin: "+o((a=null!=(a=e.logoTopInset||(null!=t?t.logoTopInset:t))?a:l,typeof a===r?a.call(t,{name:"logoTopInset",hash:{},data:i}):a))+" 0 0 0;\n}\n\n.auto-renew-description {\n    margin: 40 0 0 0;\n}\n\n.primary-text {\n    margin: 40 0 0 0;\n}\n\n.error-title-text {\n    margin: 40 0 10 0;\n    max-width: 290pt;\n}\n\n.primary-button {\n    margin: 32 0 0 0;\n}\n\n.button-sub-text {\n    margin: 15 0 0 0;\n    color: rgba(255,255,255,0.4);\n}\n\n.not-now-button {\n    margin: 21 0 10 0;\n}\n\n.ok-button {\n    padding: 10 100 10 100;\n}\n\n.footer-text {\n    margin: 0 0 18 0;\n    color: rgba(255,255,255,0.4);\n}\n\n.max-width-small {\n    max-width: 240pt;\n}\n\n.max-width {\n    max-width: 290pt;\n}\n\n/* less space between items for smaller screens */\n@media all and (max-width: 320pt) {\n    .error-title-text {\n	    margin: 30 0 10 0;\n	}\n    .auto-renew-description {\n	    margin: 28 0 0 0;\n	}\n	.primary-button {\n	    margin: 18 0 0 0;\n	}\n	.footer-text {\n	    margin: 0 0 10 0;\n	}\n}\n"},useData:!0})},{"hbsfy/runtime":418}],83:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <activityIndicator class="button-loading-indicator middle" />\n'},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <title class="error-title-text footnote-emphasized multi-centered top">'+l(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</title>\n";return a=e["if"].call(t,null!=t?t.authError:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),s+'        <button class="not-now-button caption2-emphasized top">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.NotNow.Uppercase",{name:"loc",hash:{},data:i}))+"</button>\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'          <button class="action-button-solid caption2-emphasized authenticate-button top">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{},data:i}))+"</button>\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'          <button class="action-button-solid caption2-emphasized try-again-button top">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Error.TryAgain",{name:"loc",hash:{},data:i}))+"</button>\n"},9:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.isSubscriptionExpired:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(r+=a),r},10:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='            <text class="primary-text multi-centered footnote-emphasized max-width top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.AutoRenew.SubscriptionExpired",{name:"loc",hash:{},data:i}))+'</text>\n            <button class="renew-subscription-button primary-button action-button-solid caption2-emphasized top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+">"+l((e.loc||t&&t.loc||r).call(t,"FUSE.AutoRenew.Subscribe.Button",{name:"loc",hash:{},data:i}))+'</button>\n            <button class="not-now-button caption2-emphasized top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.NotNow.Uppercase",{name:"loc",hash:{},data:i}))+"</button>\n"},12:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.isAutoRenewEnabled:a,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                <text class="primary-text multi-centered footnote-emphasized max-width top">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.AutoRenew.AlreadyOn",{name:"loc",hash:{},data:i}))+'</text>\n                <button class="ok-button primary-button action-button-solid caption2-emphasized top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+">"+l((e.loc||t&&t.loc||r).call(t,"OK",{name:"loc",hash:{},data:i}))+"</button>\n"},15:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <text class="auto-renew-description multi-centered footnote-emphasized max-width top">'+l(r(null!=(a=null!=t?t.viewModel:t)?a.autoRenewDescription:a,t))+'</text>\n                <button class="autorenew-button primary-button action-button-solid caption2-emphasized top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueButton",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l((e.loc||t&&t.loc||o).call(t,"FUSE.AutoRenew.Button",{name:"loc",hash:{},data:i}))+'</button>\n                <text class="button-sub-text multi-centered caption2 max-width top">'+l(r(null!=(a=null!=t?t.viewModel:t)?a.pricePerPeriod:a,t))+'</text>\n                <button class="not-now-button caption2-emphasized top">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.NotNow.Uppercase",{name:"loc",hash:{},data:i}))+'</button>\n                <text class="caption2 footer-text multi-centered max-width-small bottom">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.AutoRenew.RenewFromAccount",{name:"loc",hash:{},data:i}))+"</text>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l=e.helperMissing,o=this.escapeExpression,s="function",c='<background>\n    <img class="welcome-bg top" srcset="'+o((e["background-image"]||t&&t["background-image"]||l).call(t,"subscription_autorenew",{name:"background-image",hash:{remote:!0},data:i}))+'" />\n</background>\n<img class="logo-header top" src="'+o((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:l,typeof r===s?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" alt="'+o((e.loc||t&&t.loc||l).call(t,"FUSE.AppleMusic",{name:"loc",hash:{},data:i}))+'" />\n';return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":418}],84:[function(t,e,n){var i=t("../../../util"),a=t("./title.hbs"),r=t("../../base/document"),l=t("./element"),o=t("../../common").traits.TabComponent,s=function(t,e){if(i.log.warn("WelcomeDocumentController -- document.js"),itms.log("WelcomeDocumentController -- document.js"),t=t||{},t.data){this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType;var n=t.data.mode;this.inIntroMode?n+="_"+t.data.sheetType:t.data.upsellIdentifier&&(n+="_"+t.data.upsellIdentifier),this.metricsPageData&&(this.metricsPageData.pageDetails=n)}t.classes=t.classes||[],t.classes.push("template");var a=this.inIntroMode||this.inUpsellMode&&this.inJSModal;t.navigationBarVisible=!a,t.controllers=t.controllers||[];var s;0===t.controllers.length&&(s=new l(t),t.controllers.push(s)),r.call(this,t,e),o.call(this),this.controller=s,a&&(this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="hidden",this.navigationBarController.render());var c=function(){var t=this.el.getElementById("cancelSheetButton");t&&t.addEventListener("select",this.cancelWelcomePage.bind(this))};this.addEventListener("render",c.bind(this)),c.call(this),this.addEventDelegates(this.controller,["closeIntroPage","prepareForTabPush","replaceNativeModal","checkLocalManifestVersion"])};i.inherit(s,r),i.inherit(s,o,!0),s.prototype.documentType="panelTemplate",s.prototype.titleTemplate=a,s.prototype.metricsPageData={pageId:"Welcome",pageType:"Picker"},s.prototype.cancelWelcomePage=function(){this.inJSModal&&(this.inUpsellMode?i.account.closePlayUpsell():modal.popDocument())},e.exports=s},{"../../../util":391,"../../base/document":96,"../../common":133,"./element":85,"./title.hbs":93}],85:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=t("../../base").style,o=t("./style.hbs"),s=t("./template.hbs"),c=a.pubSub,u=t("./model"),h=t("../../account/subscribe"),d=i.event.Event,p=t("../../account/carrier_bundling/carrier_verification"),m=t("../../base/controller"),f=t("../partials"),g=function(t,e){a.log.warn("WelcomeDocumentController -- element.js"),itms.log("WelcomeDocumentController -- document.js"),t=t||{},t.data&&(this.inIntroMode="intro"===t.data.mode,this.inUpsellMode="upsell"===t.data.mode,this.inJSModal="js"===t.data.sheetType,this.inNativeModal="native"===t.data.sheetType,this.upsellIdentifier=t.data.upsellIdentifier,this.eligibilityData=t.eligibilityData),this.bgImageName=a.image.getBackgroundImageResource("WelcomeBg"),this.setImgFillStyle();var n=a.screen.getScreenDimensions().width>414&&(this.inJSModal||this.inNativeModal),i=a.image.getBgImageSafeZoneYOffset({isInOverlay:n,hasNavBar:t.navigationBarVisible}),s={logoTopInset:i-10};t.styles=t.styles||[],t.styles.push(new l({styleTemplate:o,styleData:s})),t.events=t.events||[],this.welcomePageIsInModal=this.inNativeModal||this.inJSModal,this.initTemplateData(),f(),m.call(this,t,e),c.subscribe("serviceChange",this.handleServiceChange.bind(this)),c.subscribe("locUpate",this.handleLocUpdate.bind(this)),c.subscribe("networkChange",this.handleNetworkChange.bind(this)),a.extend(this.onSelect,{"continue-button":this.openSubscriptionSheet.bind(this),"already-subscribed":this.handleAlreadySubscribed.bind(this),"not-now-button":this.handleNotNow.bind(this),"hide-apple-music":this.classicModeConfirmationDialog.bind(this),"error-retry-button":this.handleErrorRetryButton.bind(this),"error-ok-button":this.handleErrorOkButton.bind(this)}),"ForYou"===this.upsellIdentifier&&(this.retryMode=!0),this.model=new u,this.model.addEventListener("dataReady",function(){if(this.model.data.userPresentableError?this.errorData={errorTitle:this.model.data.userPresentableErrorTitle,errorMessage:this.model.data.userPresentableError}:this.errorData=null,this.inIntroMode){var t=this.model.data&&this.model.data.userInfo,e=!t||t&&t.isEligibleForFreeTrial,n=e?".FreeTrial":".NonTrial";this.strings.welcomeDescriptionHeader=r.loc("FUSE.Welcome.Description.Header"+n),e&&(this.strings.welcomeDescriptionHeader2=r.loc("FUSE.Welcome.Description.Header2"+n)),this.strings.welcomeDescription=r.loc("FUSE.Welcome.Description"+n)}this.render()}.bind(this)),this.model.addEventListener("dataFailed",function(t){this.loading=!1,t.detail?this.errorData={errorTitle:t.detail.errorTitle,errorMessage:t.detail.errorMessage}:this.errorData=null,this.render()}.bind(this)),this.model.get()};a.inherit(g,m),g.prototype.template=s,g.prototype.handleLocUpdate=function(){this.initTemplateData(),this.render()},g.prototype.initTemplateData=function(){if(this.bgImageName=a.image.getBackgroundImageResource("WelcomeBg"),this.logoImageName=a.image.getAppleMusicLogoImageResource({isLight:!0}),this.strings={appleMusic:r.loc("FUSE.AppleMusic")},this.upsellIdentifier){var t="FUSE.Upsell."+this.upsellIdentifier+".Description.Header",e="FUSE.Upsell."+this.upsellIdentifier+".Description",n=r.loc(t),i=r.loc(e);this.strings.welcomeDescriptionHeader=t===n?null:n,this.strings.welcomeDescription=e===i?null:i}this.musicMode={},this.inIntroMode?(this.musicMode.linkName=r.loc("FUSE.Welcome.NotNow.Button"),this.musicMode.linkIdentifier="not-now-button",this.musicMode.buttonStyle="action-button-borderless",this.musicMode.metricsActionIdentifier="GoToMyMusic"):"ForYou"===this.upsellIdentifier?(this.musicMode.linkName=r.loc("FUSE.Upsell.HideAppleMusic.Button"),this.musicMode.linkIdentifier="hide-apple-music",this.musicMode.buttonStyle="action-button-borderless",this.musicMode.metricsActionIdentifier="NoThanks"):(this.musicMode.linkName=r.loc("FUSE.NotNow.Uppercase"),this.musicMode.linkIdentifier="not-now-button",this.musicMode.buttonStyle="action-button-borderless",this.musicMode.metricsActionIdentifier="NotNow");var l=[],o=itms.eligibilityForService({service:"AppleMusic"});!itms.accountInfo.DSID||o&&"needsAuthentication"===o.accountStatus?l.push({linkName:r.loc("FUSE.Footer.AlreadyaSubscriber"),linkIdentifier:"already-subscribed"}):itms.accountInfo.DSID&&"iPhone"===Device.model&&a.account.isOnCarrierBundlingNetwork()&&l.push({linkName:r.locWithMarkupTokens("FUSE.Footer.AlreadyaSubscriber.Carrier",{carrier:Telephony.providerName}),linkIdentifier:"already-subscribed"}),l.length>0&&(this.footerLinks=l),this.isOnline=a.network.isOnline()},g.prototype.handleServiceChange=function(){a.account.isEligibleForAppleMusic()&&(this.inJSModal||this.inNativeModal)&&this.closeWelcomeModal(!0)},g.prototype.openSubscriptionSheet=function(t){localStorage.setItem("Music.hasUserOpenedSubscriptionOffers","true");var e=new h({data:this.model.data,showCancelButton:!this.welcomePageIsInModal});this.addEventDelegates(e,["tabPush","handleAskToBuy","checkLocalManifestVersion"]),e.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),this.getNavigationObject(t).pushDocument(e.el,{}),e.initManifestVersionCheck(),a.metrics.track(e,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Main"})},g.prototype.handleSubscriptionSuccess=function(){this.welcomePageIsInModal?this.closeWelcomeModal(!0):modal.popDocument()},g.prototype.handleAskToBuy=function(t){var e=this.el.ownerDocument,n={buyInfo:t,document:e},i=new d("handleAskToBuy",{detail:n});this.dispatchEvent(i)},g.prototype.getNavigationObject=function(t){return this.welcomePageIsInModal?t.target.ownerDocument.navigationDocument:modal},g.prototype.handleSignInSuccess=function(){a.account.isEligibleForAppleMusic()&&a.account.notifyServiceChange({from:"signInSheet"})},g.prototype.handleAlreadySubscribed=function(t){var e,n={callback:this.handleSignInSuccess.bind(this),showCreateAppleId:!1};if(a.account.isOnCarrierBundlingNetwork()){n.showCancelButton=!0,n.inJSModal=!0,a.account.setAlreadySubscribedCheckInProgress(!0),n.alreadySubscribed=!0;var i=new p({data:n});a.account.replaceAccountModal.call(this,{newDoc:i,currentDoc:t.target.ownerDocument})}else{n.showCancelButton=!this.welcomePageIsInModal,n.inJSModal=this.inJSModal,e="signin";var r={data:n,dataType:e,navigationDocument:this.getNavigationObject(t)};this.dispatchEvent(new d("tabPush",{detail:r}))}},g.prototype.closeWelcomeModal=function(t){if(t){var e=a.tabs.getTab("for_you");if(e){var n={tab:e};this.dispatchEvent(new d("prepareForTabPush",{detail:n}))}}this.inNativeModal?this.dispatchEvent(new d("closeIntroPage")):this.inUpsellMode&&this.inJSModal?a.account.closePlayUpsell():this.inJSModal&&modal.popDocument()},g.prototype.handleNotNow=function(){this.closeWelcomeModal(),this.inNativeModal?this.userAcknowledgedWelcomeScreen():this.inIntroMode&&c.publish("setSelectedTab","my_music")},g.prototype.hideAppleMusic=function(){a.account.enableAppleMusic(!1)},g.prototype.handleErrorRetryButton=function(){this.model.retry()},g.prototype.handleErrorOkButton=function(){this.inNativeModal&&this.userAcknowledgedWelcomeScreen(),this.closeWelcomeModal()},g.prototype.userAcknowledgedWelcomeScreen=function(){UserInterfaceStatusController.setHasUserAcknowledgedWelcomeScreen(!0)},g.prototype.classicModeConfirmationDialog=function(){var t={data:{title:r.loc("FUSE.Dialog.HideAppleMusic.Message"),subtitle:r.loc("FUSE.Dialog.HideAppleMusic.Explanation"),buttons:[{title:r.loc("FUSE.CancelButton"),className:"cancel-button"},{title:r.loc("Yes"),className:"ok-button",callback:this.hideAppleMusic}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};c.publish("showModal",{detail:t})},g.prototype.handleNetworkChange=function(){this.isOnline=a.network.isOnline(),this.model&&this.isOnline?this.model.retry():(this.errorData={errorMessage:r.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:r.loc("FUSE.Error.YoureOffline")},this.render())},g.prototype.handleRotation=function(){this.setImgFillStyle(),this.render()},g.prototype.setImgFillStyle=function(){this.imgFill="landscape"===a.screen.getCurrentOrientation()?"0":"1"},e.exports=g},{"../../../util":391,"../../account/carrier_bundling/carrier_verification":9,"../../account/subscribe":75,"../../base":97,"../../base/controller":95,"../partials":51,"./model":90,"./style.hbs":91,"./template.hbs":92,itml:435}],86:[function(t,e,n){var i=t("../../../../util"),a=i.loc,r=t("../../../base").style,l=t("../style.hbs"),o=t("./template.hbs"),s=t("../../../base/controller"),c=t("../../partials"),u=function(t,e){t=t||{},t.styles=t.styles||[],this.welcomeBgImage=i.image.getBackgroundImageResource("WelcomeBg"),this.setImgFillStyle();var n=i.image.getBgImageSafeZoneYOffset({hasNavBar:!0}),a={logoTopInset:n-10};t.styles=t.styles||[],t.styles.push(new r({styleTemplate:l,styleData:a})),t.events=t.events||[],c(),this.initTemplateData(),s.call(this,t,e),i.extend(this.onSelect,{"continue-button":this.handleContinueButton.bind(this),"not-now-family-button":this.handleNotNowButton.bind(this),"about-privacy":this.handleAboutMusicAndPrivacy.bind(this)}),this.render()};i.inherit(u,s),u.prototype.template=o,u.prototype.initTemplateData=function(){this.logoImageName=i.image.getAppleMusicLogoImageResource({isLight:!0}),this.strings={familyWelcomeDescription:a.loc("FUSE.FamilyWelcome.Description"),familyWelcomeDescriptionHeader:a.loc("FUSE.FamilyWelcome.Description.Header"),continueFamilyButton:a.loc("FUSE.FamilyWelcome.Confirm.Button"),aboutMusicAndPrivacy:a.loc("FUSE.Footer.aboutAppleMusic"),notNowButton:a.loc("FUSE.NotNow.Uppercase")},this.isOnline=i.network.isOnline()},u.prototype.handleAboutMusicAndPrivacy=function(){openURL(a.loc("FUSE.Footer.aboutAppleMusic.Url"))},u.prototype.handleContinueButton=function(){itms.isCloudLibraryEnabled()||itms.setCloudLibraryEnabled(!0,!0,function(){}),this.userAcknowledgedFamilyWelcome()},u.prototype.handleNotNowButton=function(){this.userAcknowledgedFamilyWelcome()},u.prototype.userAcknowledgedFamilyWelcome=function(){i.account.showTermsIfRequired({successCallback:this.userAcknoledgedTerms.bind(this)})},u.prototype.userAcknoledgedTerms=function(){i.account.setShownFamilyWelcomePage(!0),i.account.notifyServiceChange()},u.prototype.handleRotation=function(){this.setImgFillStyle(),this.render()},u.prototype.setImgFillStyle=function(){this.imgFill="landscape"===i.screen.getCurrentOrientation()?"0":"1"},e.exports=u},{"../../../../util":391,"../../../base":97,"../../../base/controller":95,"../../partials":51,"../style.hbs":91,"./template.hbs":88}],87:[function(t,e,n){var i=t("../../../../util"),a=t("../../../base/document"),r=t("./element"),l=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new r(t),t.controllers.push(n)),a.call(this,t,e),this.controller=n};i.inherit(l,a),l.prototype.documentType="panelTemplate",l.prototype.metricsPageData={pageId:"Welcome",pageType:"Picker",pageDetails:"Family"},e.exports=l},{"../../../../util":391,"../../../base/document":96,"./element":86}],88:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c=this.lambda,u="";return a=this.invokePartial(n.background,"","background",t,{token:"family",remote:!0},e,n,i),null!=a&&(u+=a),u+='<img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:o,typeof r===l?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" alt="'+s(c(null!=(a=null!=t?t.strings:t)?a.appleMusic:a,t))+'" />\n<text class="description-header-text multi-centered max-width callout-emphasized top">'+s(c(null!=(a=null!=t?t.strings:t)?a.familyWelcomeDescriptionHeader:a,t))+'</text>\n<text class="description-text multi-centered subhead max-width top">'+s(c(null!=(a=null!=t?t.strings:t)?a.familyWelcomeDescription:a,t))+'</text>\n<button class="continue-button action-button-solid action-button-primary caption2-emphasized top" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueFamily",targetType:"button"},data:i}),null!=a&&(u+=a),u+=">"+s(c(null!=(a=null!=t?t.strings:t)?a.continueFamilyButton:a,t))+'</button>\n<button class="not-now-family-button action-button-borderless caption2-emphasized top" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"NotNowFamily",targetType:"button"},data:i}),null!=a&&(u+=a),u+=">"+s(c(null!=(a=null!=t?t.strings:t)?a.notNowButton:a,t))+'</button>\n<button class="about-privacy footer caption2 bottom" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"AboutPrivacy",targetType:"button"},data:i}),null!=a&&(u+=a),u+">"+s(c(null!=(a=null!=t?t.strings:t)?a.aboutMusicAndPrivacy:a,t))+'</button>\n<text class="links-spacer-bottom bottom"></text>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],89:[function(t,e,n){var i=t("./document"),a=t("../../../util"),r=a.pubSub,l=function(t,e){a.log.warn("WelcomeController -- index.js"),this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);r.subscribe("appRefresh",this.closeIntroPage.bind(this)),this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),r.subscribe("replaceNativeModal",this.replaceNativeModal.bind(this))};l.prototype.handleNeedsContent=function(){a.log.warn("handleNeedsContent event received in WelcomeDocumentController index.js"),itms.log("handleNeedsContent event received in WelcomeDocumentController index.js"),a.account.setIsIntroSheetOpen.call(this,!0),this.controller=new i({data:{mode:"intro",sheetType:"native"}}),a.metrics.track(this.controller,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Main"}),this.controller.addEventListener("closeIntroPage",this.closeIntroPage.bind(this)),this.controller.addEventListener("tabPush",this.eventHandlers.tabPush),this.controller.addEventListener("prepareForTabPush",this.eventHandlers.prepareForTabPush),this.controller.addEventListener("replaceNativeModal",this.replaceNativeModal.bind(this)),this.controller.addEventListener("checkLocalManifestVersion",this.eventHandlers.checkLocalManifestVersion),a.log.warn("setWelcomeDocument on nativeViewController in WelcomeDocumentController index.js"),itms.log("setWelcomeDocument on nativeViewController in WelcomeDocumentController index.js"),this.nativeViewController.setWelcomeDocument(this.controller.el)},l.prototype.replaceNativeModal=function(t){var e=t.detail.newDoc;e.dontUseNativeModal?(this.closeIntroPage(),setTimeout(function(){this.controller.addEventDelegates(e,["tabPush","handleAskToBuy"]),modal.pushDocument(e.el)}.bind(this),1200)):(e.addEventListener("closeIntroPage",this.closeIntroPage.bind(this)),e.addEventListener("tabPush",this.eventHandlers.tabPush),e.addEventListener("replaceNativeModal",this.replaceNativeModal.bind(this)),this.controller.el.replace(e.el),e.el=this.controller.el,this.controller=e)},l.prototype.closeIntroPage=function(){a.account.setIsIntroSheetOpen(!1),this.nativeViewController.close()},e.exports=l},{"../../../util":391,"./document":84}],90:[function(t,e,n){function i(t){t=t||{},l.call(this,t)}var a=t("itml"),r=a.event.Event,l=t("../../base").model,o=t("../../../util"),s=o.loc;i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.prototype.get=function(){var t=o.urls.getSubscriptionOffersSrv(),e={url:t,method:"GET",success:this.onDataSuccess.bind(this),failure:this.onDataFailed.bind(this)};o.xhr(e)},i.prototype.onDataSuccess=function(t){this.data=JSON.parse(t),this.dispatchEvent(new r("dataReady"))},i.prototype.onDataFailed=function(t){this.data={},418===t||0===t&&o.network.isOffline()?this.dispatchIsOffline():this.dispatchEvent(new r("dataFailed",{detail:{errorTitle:s.loc("FUSE.Error.GenericDataError")}}))},i.prototype.dispatchIsOffline=function(){this.dispatchEvent(new r("dataFailed",{detail:{errorMessage:s.loc("FUSE.Error.YoureOffline.Reconnect"),errorTitle:s.loc("FUSE.Error.YoureOffline")}}))},i.prototype.retry=function(){o.network.isOnline()?this.get():this.dispatchIsOffline()},e.exports=i},{"../../../util":391,"../../base":97,itml:435}],91:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return".template {\n    background-color: rgb(0,0,0);\n    color: rgb(255,255,255);\n}\n.error-title-text {\n    margin: 0 0 10 0;\n}\n.error-message-text {\n    margin: 25 0 50 0;\n}\n.error-retry-button,\n.error-ok-button {\n    padding: 10 100 10 100;\n    margin: 29 0 0 0;\n}\n/* welcome */\n.welcome-bg {\n    itml-img-fill: 1;\n}\n.max-width {\n    max-width: 295pt;\n}\n.logo-header {\n    margin: "+o((a=null!=(a=e.logoTopInset||(null!=t?t.logoTopInset:t))?a:l,typeof a===r?a.call(t,{name:"logoTopInset",hash:{},data:i}):a))+" 0 0 0;\n}\n.description-header-text1 {\n  margin: 35 0 0 0;\n}\n.description-header-text2 {\n    margin: 3 0 15 0;\n}\n.header-spacer {\n    margin: 0 0 3 0;\n}\n.description-header-text,\n.description-header-error-text {\n    margin: 35 0 15 0;\n}\n.description-text,\n.description-error-text {\n    margin: 0;\n}\n.action-button-primary {\n    margin: 29 0 0 0;\n}\n.action-button-outline {\n    margin: 15 0 0 0;\n}\n.action-button-borderless {\n    margin: 25 0 0 0;\n}\n.footer {\n    color: rgba(255,255,255, 0.5);\n}\n.link-spacer {\n    margin: 20 0 0 0;\n}\n.links-spacer-bottom {\n    margin: 0 0 8 0;\n}\n.spacer-b-14 {\n    margin: 0 0 14 0;\n}\n.no-links-spacer {\n    margin: 0 0 40 0;\n}\n@media all and (max-width: 320pt) {\n    .max-width {\n	    max-width: 290pt;\n	}\n    .description-header-text {\n	    margin: 20 0 10 0;\n	}\n    .description-header-text1 {\n	  margin: 20 0 0 0;\n	}\n	.description-header-text2 {\n	    margin: 3 0 10 0;\n	}\n    .header-spacer {\n	    margin: 0 0 0 0;\n	}\n    .action-button-primary {\n	    margin: 15 0 0 0;\n	}\n	.action-button-borderless {\n	    margin: 15 0 5 0;\n	}\n    .link-spacer {\n        margin: 10 0 0 0;\n    }\n}\n@media all and (width: 768pt) {\n    .max-width {\n	    max-width: 310pt;\n	}\n}\n\n@media all and (min-width: 1024pt) {\n    .max-width {\n	    max-width: 310pt;\n	}\n}\n";
},useData:!0})},{"hbsfy/runtime":418}],92:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"    ","background",t,{token:"error",remote:!0},e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.retryMode:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r+'    <text class="spacer-b-14 bottom"></text>\n'},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <title maxLines="0" class="description-header-error-text max-width multi-centered callout-emphasized top">'+l(r(null!=(a=null!=t?t.errorData:t)?a.errorTitle:a,t))+"</title>\n"},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <subtitle maxLines="0" class="description-error-text max-width multi-centered subhead top">'+l(r(null!=(a=null!=t?t.errorData:t)?a.errorMessage:a,t))+"</subtitle>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <button class="caption2-emphasized error-retry-button action-button-solid top">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Error.TryAgain",{name:"loc",hash:{},data:i}))+"</button>\n"},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <button class="caption2-emphasized error-ok-button action-button-solid top">'+r((e.loc||t&&t.loc||a).call(t,"OK",{name:"loc",hash:{},data:i}))+"</button>\n"},10:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"    ","background",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.program(27,i),data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.footerLinks:t,{name:"if",hash:{},fn:this.program(29,i),inverse:this.program(33,i),data:i}),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='        <text class="multi-centered max-width top description-header-text1 ';return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader2:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(14,i),data:i}),null!=a&&(o+=a),o+='">'+l(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader:a,t))+"</text>\n",a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader2:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.program(18,i),data:i}),null!=a&&(o+=a),o},12:function(t,e,n,i){return"callout"},14:function(t,e,n,i){return"callout-emphasized"},16:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <text class="multi-centered max-width top description-header-text2 callout-emphasized">'+l(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescriptionHeader2:a,t))+"</text>\n"},18:function(t,e,n,i){return'            <text class="header-spacer top"></text>\n'},20:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <text class="description-text multi-centered max-width subhead top">'+l(r(null!=(a=null!=t?t.strings:t)?a.welcomeDescription:a,t))+"</text>\n"},22:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='        <button class="continue-button action-button-solid action-button-primary caption2-emphasized top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ContinueButton",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">"+o(l(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.buttonText:a,t))+"</button>\n",a=e["if"].call(t,null!=t?t.musicMode:t,{name:"if",hash:{},fn:this.program(23,i),inverse:this.program(25,i),data:i}),null!=a&&(s+=a),s},23:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <button class="'+l(r(null!=(a=null!=t?t.musicMode:t)?a.linkIdentifier:a,t))+" "+l(r(null!=(a=null!=t?t.musicMode:t)?a.buttonStyle:a,t))+' action-button-secondary caption2-emphasized top" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{actionSubtype:null!=(a=null!=t?t.musicMode:t)?a.metricsActionIdentifier:a,click:!0,actionType:"dialog",targetId:"SecondaryButton",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=(a=null!=t?t.musicMode:t)?a.linkName:a,t))+"</button>\n"},25:function(t,e,n,i){return'            <text class="spacer-b-14 top"></text>\n'},27:function(t,e,n,i){return'        <activityIndicator class="button-loading-indicator middle" />\n'},29:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.footerLinks:t,{name:"each",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'        <text class="links-spacer-bottom bottom"></text>\n'},30:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <button class="'+l(r(null!=t?t.linkIdentifier:t,t))+" caption2 ";return a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' footer bottom" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,actionType:"navigate",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=t?t.linkName:t,t))+"</button>\n"},31:function(t,e,n,i){return"link-spacer"},33:function(t,e,n,i){return'        <text class="no-links-spacer bottom"></text>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='<img class="logo-header top" src="'+s((r=null!=(r=e.logoImageName||(null!=t?t.logoImageName:t))?r:o,typeof r===l?r.call(t,{name:"logoImageName",hash:{},data:i}):r))+'" alt="'+s(c(null!=(a=null!=t?t.strings:t)?a.appleMusic:a,t))+'" />\n';return a=e["if"].call(t,null!=t?t.errorData:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(10,i),data:i}),null!=a&&(u+=a),u},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],93:[function(t,e,n){e.exports=t(79)},{"hbsfy/runtime":418}],94:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".template {\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n.title,\n.lockup-title,\n.list-title {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.title-disabled,\n.lockup-title-disabled,\n.list-title-disabled {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.3,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.subtitle,\n.lockup-subtitle,\n.lockup-subtitle-2,\n.lockup-subtitle-3,\n.lockup-line-1,\n.lockup-line-2,\n.lockup-line-3 {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}\n.grid,\n.track-list,\n.track-list-ordered,\n.divider {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.2",{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.action-color {\n    itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor2:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.explict-badge {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    itml-img-treatment: tint;\n}\n.explict-badge-disabled {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.4,{name:"hexToRgb",hash:{},data:i}))+";\n    itml-img-treatment: tint;\n}\n"},3:function(t,e,n,i){return".title-disabled,\n.lockup-title-disabled,\n.list-title-disabled {\n    color: rgba(0,0,0,0.4);\n}\n.lockup-subtitle {\n    color: rgb(142,142,147);\n}\n.explict-badge {\n    color: rgb(255, 44, 85);\n    itml-img-treatment: tint;\n}\n.explict-badge-disabled {\n    color: rgba(255, 44, 85, 0.4);\n    itml-img-treatment: tint;\n}\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},7:function(t,e,n,i){return"        color: rgba(0, 0, 0, 0.8);\n"},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},11:function(t,e,n,i){return"        itml-img-mask-color: rgb(0, 0, 0);\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="/* uber styles */\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="/* common styles */\n.divider-full {\n    itml-divider-type: full;\n}\n\n.light-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n}\n.dark-art {\n    itml-img-treatment: product;\n    itml-img-fill: 1;\n    border-color: rgba(255,255,255,0.15);\n}\n.radio-art {\n    itml-img-treatment: product;\n}\n\n.artist-art {\n    itml-img-treatment: artist-circle;\n    border-color: rgba(0,0,0,0.2);\n    border-width: 1px;\n}\n\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.cover-button {\n    background-color: blurred;\n}\n\n.brick {\n    itml-img-treatment: brick;\n    border-color: rgba(0, 0, 0, 0.2);\n    padding: 16.0, 16.0, 8.0, 16.0;\n}\n\n.more-link {\n    color: tint-color;\n}\n\n.tint-color {\n    color: tint-color;\n}\n\n.product-divider {\n    itml-divider-type: full;\n    margin: 0;\n    itml-padding: 0pt 0pt 0pt 0pt;\n}\n\n.bottom-right {\n    itml-position: bottom-right;\n    itml-align: right;\n}\n\n.top-left {\n    itml-position: top-left;\n}\n\n.top {\n    itml-position: top;\n}\n\n.middle {\n    itml-position: center;\n}\n\n.bottom {\n    itml-position: bottom;\n}\n\n.center {\n    text-align: center;\n}\n\n.align-center {\n    itml-align: center;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.align-left {\n    itml-align: left;\n}\n\n.align-right {\n    itml-align: right;\n}\n\n.position-center {\n    itml-position: center;\n}\n\n.position-right {\n    itml-position: right;\n}\n\n.one-line {\n    itml-text-max-lines: 1;\n}\n\n.two-line {\n    itml-text-max-lines: 2;\n}\n\n.full-width {\n    itml-item-width: 100%;\n}\n\n.white {\n    color: rgb(255,255,255);\n}\n\n.black {\n    color: rgb(0,0,0);\n}\n\n.headline {\n    itml-text-style: headline;\n}\n\n.body {\n    itml-text-style: body;\n}\n\n.callout {\n    itml-text-style: callout;\n}\n\n.callout-emphasized {\n    itml-text-style: callout;\n    font-weight: bold;\n}\n\n.subhead {\n    itml-text-style: subhead;\n}\n\n.subhead-emphasized {\n    itml-text-style: subhead;\n    font-weight: bold;\n}\n\n.footnote {\n    itml-text-style: footnote;\n}\n\n.footnote-emphasized {\n    itml-text-style: footnote;\n    font-weight: bold;\n}\n\n.caption1 {\n    itml-text-style: caption1;\n}\n\n.caption1-emphasized {\n    itml-text-style: caption1;\n    font-weight: bold;\n}\n\n.caption2 {\n    itml-text-style: caption2;\n}\n\n.caption2-emphasized {\n    itml-text-style: caption2;\n    font-weight: bold;\n}\n\n.multi-centered {\n    itml-text-max-lines: 0;\n    text-align: center;\n}\n\n.hidden {\n    visibility: hidden;\n}\n\n.shelf-lockup {\n    itml-padding: 0 0pt 16pt 0pt;\n    text-align: center;\n}\n\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 16.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.grid-section-title {\n    color: rgb(102,102,102);\n    font-size: 13pt;\n}\n\n.hidden-bar {\n    background-color: rgba(0,0,0,0);\n    visibility: hidden;\n}\n\n.transparent-bar {\n    background-color: rgba(0,0,0,0);\n}\n\n.edge-grid-portrait {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;\n}\n\n.edge-grid-landscape{\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;\n}\n\n.edge-2col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 2;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 5pt 0pt 5pt;\n    itml-align: center;\n}\n\n.edge-3col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 3;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n.edge-4col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 4;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n/* ipad 5col portrait */\n.edge-5col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 5;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n/* ipad 6col grid landscape */\n.edge-6col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 6;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n/* ipad 7col grid landscape */\n.edge-7col-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 7;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: left;\n}\n\n.show-more-grid {\n    padding: 8pt 0 8pt 0;\n    border-color: rgba(0,0,0,0);\n    itml-item-width: 100%;\n    column-count: 1;\n    text-align: center;\n}\n\n.border-button {\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n}\n\n.action-button-solid {\n    padding: 10 35 10 35;\n    background-color: tint-color;\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    color: rgb(255,255,255);\n}\n\n.action-button-outline {\n    padding: 10 25 10 25;\n    border-width: 1pt;\n    border-color: tint-color;\n    border-radius: circle-caps;\n    color: tint-color;\n}\n\n.text-shadow {\n    text-shadow: 0pt 1pt 2pt rgb(0,0,0);\n}\n\n.group-label {\n    color: rgb(0, 0, 0);\n    font-size: 16pt;\n}\n\n.group-label-disabled {\n    color: rgb(142, 142, 147);\n    font-size: 16pt;\n}\n\n.group-button {\n    color: tint-color;\n    font-size: 18pt;\n}\n\n.group-button-disabled {\n    color: rgb(142, 142, 147);\n    font-size: 18pt;\n}\n\n.group-footer {\n    itml-padding: 4pt 0pt 20pt 20pt;\n    color: rgb(131, 131, 134);\n    itml-text-max-lines: 0;\n}\n\n.bold {\n    font-weight: bold;\n}\n\n.album-grid {\n    itml-position: bottom;\n    itml-padding: 0 0 0 0;\n    itml-item-width: 100%;\n    column-count: 2;\n    border-width: 1pt;\n    background-color: rgb(255,255,255);\n}\n\n.lockup-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size: 11pt;\n    font-weight: regular;\n}\n\n.lockup-title-margin {\n    margin:0pt 3pt 0pt 3pt;\n}\n\n.lockup-subtitle {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: caption2; */\n    font-size:11pt;\n    font-weight:regular;\n}\n\n.list-title {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.recommended-text {\n    font-size:14pt;\n    font-weight:regular;\n}\n\n.spacer {\n    border-color: rgba(0,0,0,0);\n    font-size: 24pt;\n}\n\n.inset {\n    itml-divider-type:inset;\n}\n\n.borderless {\n    itml-position:bottom;\n    itml-divider-type:borderless;\n    itml-item-height: 15pt;\n    border-color: rgba(0,0,0,0.0);\n    color:rgba(0,0,0,0.0);\n}\n\n.selector {\n    font-size: 17pt;\n    font-weight: medium;\n    color: tint-color;\n    itml-align: center;\n}\n\n.edge-header {\n    padding: 15pt 0pt 0pt 15pt;\n    itml-align: left;\n}\n\n.edge-title {\n    font-weight: medium;\n    itml-align: left;\n    padding: 0 0 0 0;\n    font-size: 11pt;\n    itml-item-width: 100%;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+="}\n\n.edge-chevron {\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+"}\n\n.selector-chevron {\n    margin: 2pt 0pt 0pt 3pt;\n    itml-align: center;\n}\n\n.playlist-hero-title {\n    itml-font-style: headline;\n    font-weight: regular;\n    font-size: 17pt;\n    padding: 0 0 16pt 0;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt 0pt 10pt 0pt;\n}\n\n.hero-description {\n    itml-font-style: caption1;\n}\n\n.four-up-subtitle {\n    font-size: 9pt;\n    font-weight: medium;\n}\n\n.four-up-grid {\n    column-count: 2;\n    padding: 0pt;\n}\n\n.shelf-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    padding: 7pt 0 0 0;\n}\n\n.banner-text {\n    itml-text-max-lines: 0;\n    itml-position: top;\n    text-align: center;\n    color: rgb(150,150,150);\n    font-size:14pt;\n    margin: 15 0 0 0;\n}\n\n.banner-link {\n    font-size:14pt;\n    color: tint-color;\n}\n\n.signin-button {\n    font-size: 13pt;\n    border-width: 1pt;\n    border-color: tint-color;\n    color: tint-color;\n    padding: 10 35 10 35;\n    border-radius: circle-caps;\n}\n\n.img-fill {\n    itml-img-fill: 1;\n}\n\n.playlist-title {\n    color: rgb(255, 255, 255);\n    font-size: 30pt;\n    font-weight: ultra-light;\n    itml-text-max-lines: 1;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 13pt;\n    itml-text-max-lines: 2;\n}\n\n.playlist-description {\n    itml-font-style: caption2;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 12pt;\n    itml-text-max-lines: 2;\n}\n\n.playlist-card {\n    padding: 0pt 0pt 0pt 0pt;\n}\n\n.playlist-row {\n    padding: 20pt 20pt 20pt;\n}\n\n.playlist-row-margin-helper {\n    itml-item-height: 0;\n}\n\n.playlist-column {\n    padding: 0 20pt 0 20pt;\n}\n\n.subtitle-1 {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 11pt;\n}\n\n.subtitle-2 {\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 10pt;\n}\n\n.margin-helper {\n    itml-divider-type:borderless;\n}\n\n.lockup-disabled {\n    background-color: rgba(0,0,0,0);\n}\n\n.upsell-banner-container {\n    padding: 10pt 0 26pt 0;\n}\n\n.upsell-banner-text {\n    itml-text-max-lines: 0;\n    color: rgb(0,0,0);\n}\n\n@media all and (width: 768pt) {\n    .shelf-grid {\n        column-count: 5;\n    }\n}\n\n@media all and (width: 1024pt) {\n    .shelf-grid {\n        column-count: 6;\n    }\n}\n\n@media all and (min-height: 1366pt) {\n    .shelf-grid-portrait {\n        column-count: 6;\n    }\n\n    .shelf-grid-landscape {\n        column-count: 8;\n    }\n}\n\n@media all and (min-width: 1366pt) {\n    .shelf-grid-portrait {\n        column-count: 8;\n    }\n\n    .shelf-grid-landscape {\n        column-count: 8;\n    }\n}\n\n"},useData:!0})},{"hbsfy/runtime":418}],95:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),l=t("./style"),o=i.controller.MultiElementController,s=t("../common").traits.EventMap,c=t("../common").traits.TabComponent,u=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.styleTemplate=t.styleTemplate,t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.events.push("holdselect"),t.styles.push(new l(t)),this.loading=!0,this.documentDimensions=Settings.Screen,o.call(this,t,e),s.call(this,t),c.call(this),this.isOnline=r.network.isOnline(),this.recoId=t.recoId};r.inherit(u,o),r.inherit(u,s,!0),r.inherit(u,c,!0),u.prototype.artworkMap={},u.prototype.handleAppear=function(){},u.prototype.handleNeedsMore=function(){},u.prototype.handleRotation=function(){},u.prototype.updateView=function(){this.dispatchEvent(new a("updateScreenSize"))},u.prototype.updateScreenSize=function(t){this.documentDimensions=t},u.prototype.getDocumentDimensions=function(){return this.updateView(),this.documentDimensions},u.prototype.processContent=function(t,e){e=e||{},e.documentDimensions=this.documentDimensions;var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e}),i=r.lockup.setArtworks(t,n,this.artworkMap,e.type);return i.line1=r.lockup.line1(t),i.isExplicit=r.lockup.isExplicit(t),i},u.prototype.handleNetworkChange=function(){this.isOnline=r.network.isOnline(),this.handleAppear()},e.exports=u},{"../../util":391,"../common":133,"./style":99,itml:435}],96:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,l=i.controller.DocumentController,o=function(t,e){this.dimensions={width:0,height:0},this.setDocumentDimensions(Settings.Screen),t.dimensions=this.dimensions,l.call(this,t,e),this.el.onViewAttributesChange=this.handleViewAttributesChange.bind(this),this.addEventListener("appear",this.handleOnAppear.bind(this),!1),r.subscribe("RestrictionsChange",this.handleRestrictionsChange.bind(this));var n=0;for(n=0;n<this.controllers.length;n++)this.controllers[n].addEventListener("updateScreenSize",this.handleUpdateScreenSize.bind(this),!1),this.controllers[n].documentDimensions=this.dimensions};a.inherit(o,l),o.prototype.handleUpdateScreenSize=function(){this.callDelegatesOnChildren("updateScreenSize",this.getDocumentDimensions())},o.prototype.handleViewAttributesChange=function(t){this.setDocumentDimensions({width:t.width,height:t.height}),this.handleRotation(),this.callDelegatesOnChildren("updateScreenSize",this.getDocumentDimensions()),this.callDelegatesOnChildren("handleRotation",t)},o.prototype.handleOnAppear=function(t){this.callDelegatesOnChildren("handleAppear",t)},o.prototype.handleRestrictionsChange=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].render()},o.prototype.callDelegatesOnChildren=function(t,e){if(this.controllers&&this.controllers.length){var n=0;for(n=0;n<this.controllers.length;n++)this.controllers[n][t]&&"function"==typeof this.controllers[n][t]&&this.controllers[n][t](e)}},o.prototype.handleRotation=function(){},o.prototype.setDocumentDimensions=function(t){t&&t.width&&t.height&&(this.dimensions.width=t.width,this.dimensions.height=t.height)},o.prototype.getDocumentDimensions=function(){return this.dimensions||this.setDocumentDimensions(Settings.Screen),this.dimensions},e.exports=o},{"../../util":391,itml:435}],97:[function(t,e,n){var i={document:t("./document"),model:t("./model"),controller:t("./controller"),style:t("./style")};e.exports=i},{"./controller":95,"./document":96,"./model":98,"./style":99}],98:[function(t,e,n){function i(t){t=t||{},r.call(this,t),o.call(this,t)}var a=t("itml"),r=a.model.BaseModel,l=t("../../util"),o=t("store-platform"),s=l.screen;l.inherit(i,r,!0),l.inherit(i,o,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype._pageCache={},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.cacheContent=function(t){var e=this.getStorePlatformData(t);Object.keys(e).length?this.cacheData(t.storePlatformData[this.pageProfile],this.pageProfile):l.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.getStorePlatformData=function(t){return l.keypath(t,"storePlatformData."+this.pageProfile+".results")||{}},i.prototype.setDataForSection=function(t,e){return this._pageCache=this._pageCache||{},this._pageCache[e]=t,e},i.prototype.gridMaxItems=function(){var t=s.sizeForScreenDimension(),e={xs:6,s:6,m:6,l:5,xl:6,xxl:7};return e[t]},i.prototype.getDataForSectionId=function(t){return this._pageCache&&this._pageCache[t]?this._pageCache[t]:void 0},i.prototype.lookupContent=function(t){return this.lookup(t)},e.exports=i},{"../../util":391,itml:435,"store-platform":538}],99:[function(t,e,n){function i(t){t=t||{};var e=t.tintInfo,n=t.styleData||{},i=t.styleTemplate,r=a;if(r||(a=o(),r=a),e){var c=new s.color(e.bgColor);e.isDark=c.isDark(),n=n||{},s.extend(n,e)}r=o(n),i&&(r+=i(n)),l.call(this,{style:r})}var a,r=t("itml"),l=r.model.Style,o=t("./baseStyle.hbs"),s=t("../../util");s.inherit(i,l),e.exports=i},{"../../util":391,"./baseStyle.hbs":94,itml:435}],100:[function(t,e,n){function i(t){t=t||{},l.call(this),o.call(this),this.tab=t.tab,this.name=t.name,this.navigationDocument=this.tab.navigationDocument,this.addEventListener("replaceDocument",this.replaceDocument.bind(this)),this.controller||(this.controller=this.getDocumentController()),this.controller&&(this.setDocumentTraits(),this.addEventDelegates(this.controller,this.eventDelegates),this.pushDocument(this.controller))}var a=t("itml"),r=t("../../util"),l=a.controller.BaseController,o=a.event.EventDelegate,s=t("../loading");r.inherit(i,l),i.prototype.getDocumentController=function(){},i.prototype.eventDelegates=["tabPush","replaceDocument","handleAskToBuy","checkLocalManifestVersion"],i.prototype.pushDocument=function(t){t=t||this.controller,t&&this.navigationDocument.pushDocument(t.el)},i.prototype.replaceDocument=function(t){var e=t.detail.document||this.getDocumentController();e&&(this.controller.addEventDelegates(e,this.eventDelegates),this.navigationDocument.replaceDocument(e.el,this.controller.el,{animated:!1}),this.controller=e,this.setDocumentTraits())},i.prototype.setDocumentTraits=function(){this.controller.el.documentElement.setAttribute("impressionsViewableThreshold",1e3),r.metrics.track(this.controller,{tabIdentifier:this.tab.identifier,entityType:"Main"})},i.prototype.getLoadingController=function(){return new s({name:this.name})},i.prototype.handleDeepLink=function(t){this.controller.handleDeepLink&&this.controller.handleDeepLink.call(this.controller,t)},e.exports=i},{"../../util":391,"../loading":281,itml:435}],101:[function(t,e,n){var i=t("../../../util"),a=function(t){return t.isSubscribe&&this.isSubscribed?!1:!0},r=function(t){var e=[],n=t.children instanceof Array?t.children:[];return i.extend(t,{align:t.align||"left",labelSize:t.labelSize||"m",labelWeight:t.labelWeight||"normal",orientation:t.orientation||"horizontal"}),n.forEach(function(t){t.label&&(t.isSubscribe||t.url)&&a.call(this,t)&&(t.target=t.target||"_self",e.push(t))},this),t.isHorizontal="horizontal"===t.orientation,t.children=e,t.isButtonListBlock=!0,t};e.exports=r},{"../../../util":391}],102:[function(t,e,n){var i=t("../../../util"),a=t("./util"),r=function(t){t.title&&i.extend(t,{titleSize:t.titleSize||"m",titleWeight:t.titleWeight||"normal",titleMaxLines:t.titleMaxLines||"0"})},l=function(t){var e=["xs","s","m"];t.body&&(i.extend(t,{bodySize:t.bodySize||"m",bodyWeight:t.bodyWeight||"normal",bodyMaxLines:t.bodyMaxLines||"0"}),a.contains(e,this.screenSize)&&parseInt(t.bodyMaxLines)>0&&!t.isNotStandAlone?t.bodyMaxLinesNotZero=!0:t.bodyMaxLines=0)},o=function(t){var e=t.links instanceof Array?t.links:[];e.length&&(t.linkOrientation=t.linkOrientation||"horizontal",t.linkOrientationHorizontal="horizontal"===t.linkOrientation),e.forEach(function(t){t.target=t.target||"self"},this)},s=function(t){return r(t),l(t),o(t),t.align=t.align||"left",t.isEditorialBlock=!0,t};e.exports=s},{"../../../util":391,"./util":128}],103:[function(t,e,n){var i=t("../../../util"),a=t("./util"),r=["v0","v1","v3"],l={productHorizontal:{xs:1,s:1,m:1,l:2,xl:1,xxl:1},productNoEditorial:{xs:2,s:2,m:2,l:2,xl:2,xxl:2},productVertical:{xs:2,s:2,m:2,l:2,xl:2,xxl:2},mediaHorizontal:{xs:1,s:1,m:1,l:2,xl:1,xxl:1},"default":{xs:2,s:2,m:2,l:3,xl:4,xxl:4}},o=function(t){var e=[],n="default",o=!1,s=!1,c=a.contains(r,t.lockupStyle.orientation),u=a.contains(["xs","s","m"],this.screenSize),h=t.children instanceof Array?t.children:[];h.forEach(function(e){i.extend(e,{kind:e.kind||t.subType,align:e.align||t.lockupStyle.align||"left",fields:e.fields||t.lockupStyle.fields||[],orientation:e.orientation||t.lockupStyle.orientation,artworkProfile:e.artworkProfile||t.lockupStyle.artworkProfile,parentIsGrid:!0}),e.useLockupTitle||t.lockupStyle.useLockupTitle===!1&&(e.useLockupTitle=!1),"[object Object]"===Object.prototype.toString.call(e.editorial)&&(e.editorial.isNotStandAlone=!0,s=!0),a.contains(["v2","v4"],e.orientation)&&(o=!0)},this),o&&(n="productHorizontal"),u&&(c?n="productVertical":s||(n="productNoEditorial")),t.maxColumns||0===t.maxColumns||(t.gridColumns=l[n][this.screenSize]),e.length&&(t.children=e)},s=function(t){var e=[],n=["v2","v4","v5"],r=["v2","v4"],o=t.children instanceof Array?t.children:[];o.forEach(function(o){switch(i.extend(o,{kind:o.kind||t.subType,subType:o.subType||t.childSubType,align:o.align||t.lockupStyle.align||"left",orientation:o.orientation||t.lockupStyle.orientation,artworkProfile:o.artworkProfile||t.lockupStyle.artworkProfile,parentIsGrid:!0,isNotStandAlone:!0}),"[object Object]"===Object.prototype.toString.call(o.editorial)&&(o.editorial.isNotStandAlone=!0),o.subType){case"video":a.contains(n,o.orientation)&&(o.orientation="v0"),t.maxColumns||(t.gridColumns=l.mediaHorizontal[this.screenSize]);break;case"image":a.contains(r,o.orientation)&&("[object Object]"!==Object.prototype.toString.call(o.editorial)?o.orientation="v0":t.maxColumns||(t.gridColumns=l.mediaHorizontal[this.screenSize]));break;case"audio":break;default:o={}}e.push(o)},this),e.length&&(t.children=e)},c=function(t){if(!a.contains(["product","media"],t.subType))return{};switch(t.lockupStyle=t.lockupStyle||{},t.lockupStyle.orientation=t.lockupStyle.orientation||"v2",t.gridColumns=0===t.maxColumns?"0":t.maxColumns||l["default"][this.screenSize],t.orientation=t.lockupStyle.orientation,t.subType){case"product":t.isProductType=!0,o.call(this,t);break;case"media":t.isMediaType=!0,s.call(this,t)}return t.children=this.processBlockModels(t.children),t.isGridBlock=!0,delete t.lockupStyle,t};e.exports=c},{"../../../util":391,"./util":128}],104:[function(t,e,n){var i=t("../../../util"),a=t("./util"),r=t("./partials"),l=t("./spacer"),o=t("./editorial"),s=t("./row"),c=t("./product"),u=t("./grid"),h=t("./socialFooter"),d=t("./media"),p=t("./buttonList"),m=t("./styles.hbs"),f=function(t){t=t||{},this.blocks=[],this.contentIds=[],this.viewModel=[],this.isSubscribed=i.account.isEligibleForAppleMusic(),this.blockKinds={editorial:"editorialBlock",spacer:"spacerBlock",socialFooter:"socialFooterBlock",media:"mediaBlock",row:"rowBlock",grid:"gridBlock",product:"productBlock",buttonList:"buttonListBlock"},this.setScreenSize(),r(),this.model=t.model,t.data instanceof Array&&this.processBlocks(t.data)};f.styleTemplate=m,f.prototype.createView=function(){var t=i.deepClone(this.blocks);return this.setScreenSize(),this.viewModel=this.processBlockModels(t),this.viewModel},f.prototype.processBlocks=function(t){t.forEach(function(t){this.isValidBlock(t)&&this.blocks.push(t)},this)},f.prototype.isValidBlock=function(t){function e(t){return t&&"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.valueOf())}function n(t){
var e=[];return t.forEach(function(t){e.push(a.get2CharCountryCode(t))}),e}var i,r,l=!0,o=t.kind,s=Date.now(),c=a.getCountryCode(),u=a.countryGrouping(),h=this.screenSize,d=[],p=[];return o&&this.blockKinds[o]||(l=!1),t.validation&&(i=new Date(t.validation.startTime),r=new Date(t.validation.endTime),t.validation.startTime&&e(i)&&s<i.getTime()&&(l=!1),t.validation.endTime&&e(r)&&s>r.getTime()&&(l=!1),t.validation.includedStorefronts instanceof Array&&(d=n(t.validation.includedStorefronts),a.contains(d,c)||a.contains(d,u)||(l=!1)),t.validation.excludedStorefronts instanceof Array&&(p=n(t.validation.excludedStorefronts),a.contains(p,c)&&(l=!1)),t.validation.includedScreenSizes instanceof Array&&a.contains(t.validation.includedScreenSizes,h)&&(l=!1),t.validation.excludedScreenSizes instanceof Array&&a.contains(t.validation.excludedScreenSizes,h)&&(l=!1)),l},f.prototype.setScreenSize=function(){var t=["l","xl","xxl"];this.screenSize=i.screen.sizeForScreenDimension(),this.isWideLayout=a.contains(t,this.screenSize),this.isNarrowLayout=!this.isWideLayout},f.prototype.processBlockModels=function(t){var e,n,a=[];return t.forEach(function(t){var r=i.clone(t);e=this.blockKinds[r.kind],n=e?this[e](r):r,n=n instanceof Array?n:[n],n.forEach(function(t){this.setCommonBlockKeys(t)},this),a=a.concat(n)},this),a},f.prototype.setCommonBlockKeys=function(t){t._screenSize=this.screenSize,this.isWideLayout?t._isWideLayout=!0:t._isNarrowLayout=!0},f.prototype.processArtwork=function(t){var e,n,a={};return n=t.artworkMap[t.artworkName],e=n?n[this.screenSize]:null,t.artwork instanceof Array?a=t.artwork:t.artworkUrl&&e instanceof Array&&2===e.length&&(a={url:t.artworkUrl,width:e[0],height:e[1]}),i.artwork.bestArtwork(t.artworkName,a,t.artworkMap)},f.prototype.setCustomArtwork=function(t){var e=t.artworkCustomProfile,n=!!i.keypath(e,"map"),a=i.keypath(e,"type")&&"string"==typeof e.type;return n&&a?(this.artworkMap[e.type]=e.map,e.type):""},f.prototype.handleEditorialOrientation=function(t){if(t instanceof Object)switch(t.orientation){case"v0":t.editorial instanceof Object&&t.editorial.title&&(t.editorialTitle={title:t.editorial.title,titleWeight:t.editorial.titleWeight||"normal",titleSize:t.editorial.titleSize||"m"},t.editorial.titleColor&&(t.editorialTitle.titleColor=t.editorial.titleColor),delete t.editorial.title,delete t.editorial.titleSize,delete t.editorial.titleWeight,delete t.editorial.titleColor)}},f.prototype.spacerBlock=l,f.prototype.editorialBlock=o,f.prototype.rowBlock=s,f.prototype.productBlock=c,f.prototype.gridBlock=u,f.prototype.socialFooterBlock=h,f.prototype.mediaBlock=d,f.prototype.buttonListBlock=p,f.prototype.artworkMap={squareGrid:{crop:"cc",xs:[126,126],s:[156,156],m:[178,178],l:[216,216],xl:[224,224],xxl:[224,224]},horizontalGrid:{crop:"h",xs:[130,73],s:[160,90],m:[178,100],l:[246,138],xl:[249,140],xxl:[249,140]},squareGridWithCopy:{crop:"cc",xs:[100,100],s:[125,125],m:[142,142],l:[130,130],xl:[200,200],xxl:[200,200]},horizontalGridWithCopy:{crop:"h",xs:[100,56],s:[125,70],m:[142,80],l:[130,73],xl:[200,113],xxl:[200,113]},horizontalImageGrid:{crop:"h",xs:[130,73],s:[160,90],m:[178,100],l:[246,138],xl:[249,140],xxl:[249,140]},horizontalVideoGrid:{crop:"h",xs:[290,163],s:[344,193],m:[386,217],l:[384,216],xl:[497,280],xxl:[497,280]},horizontalMediaGridWithCopy:{crop:"h",xs:[100,56],s:[125,70],m:[142,80],l:[130,73],xl:[200,113],xxl:[200,113]},smallSquareWithCopy:{crop:"cc",xs:[96,96],s:[113,113],m:[123,123],l:[216,216],xl:[224,224],xxl:[224,224]},smallHorizontalWithCopy:{crop:"h",xs:[96,54],s:[113,63],m:[123,69],l:[246,138],xl:[331,186],xxl:[331,186]},square25:{crop:"cc",xs:[48,48],s:[60,60],m:[72,72],l:[160,160],xl:[224,224],xxl:[224,224]},square33:{crop:"cc",xs:[74,74],s:[88,88],m:[88,88],l:[216,216],xl:[224,224],xxl:[224,224]},square50:{crop:"cc",xs:[126,126],s:[156,156],m:[178,178],l:[178,178],xl:[224,224],xxl:[224,224]},square66:{crop:"cc",xs:[194,194],s:[230,230],m:[266,266],l:[266,266],xl:[266,266],xxl:[266,266]},square75:{crop:"cc",xs:[219,219],s:[258,258],m:[266,266],l:[266,266],xl:[266,266],xxl:[266,266]},square100:{crop:"cc",xs:[178,178],s:[190,190],m:[200,200],l:[266,266],xl:[266,266],xxl:[266,266]},square0:{crop:"cc",xs:[80,80],s:[80,80],m:[80,80],l:[80,80],xl:[80,80],xxl:[80,80]},square1:{crop:"cc",xs:[80,80],s:[110,110],m:[110,110],l:[136,136],xl:[136,136],xxl:[136,136]},square2:{crop:"cc",xs:[130,130],s:[156,156],m:[156,156],l:[162,162],xl:[162,162],xxl:[162,162]},square3:{crop:"cc",xs:[156,156],s:[200,200],m:[220,220],l:[220,220],xl:[220,220],xxl:[220,220]},square4:{crop:"cc",xs:[240,240],s:[266,266],m:[266,266],l:[266,266],xl:[266,266],xxl:[266,266]},horizontal25:{crop:"h",xs:[48,27],s:[60,34],m:[72,41],l:[160,90],xl:[224,126],xxl:[224,126]},horizontal33:{crop:"h",xs:[74,42],s:[88,50],m:[88,50],l:[246,138],xl:[331,186],xxl:[331,186]},horizontal50:{crop:"h",xs:[130,73],s:[160,90],m:[178,100],l:[316,178],xl:[398,224],xxl:[497,280]},horizontal66:{crop:"h",xs:[194,109],s:[230,129],m:[266,149],l:[512,287],xl:[663,373],xxl:[663,373]},horizontal75:{crop:"h",xs:[219,123],s:[258,145],m:[300,169],l:[576,324],xl:[746,420],xxl:[746,420]},horizontal100:{crop:"h",xs:[290,163],s:[344,193],m:[386,217],l:[738,415],xl:[994,560],xxl:[994,560]},horizontal0:{xs:[80,45],s:[80,45],m:[80,45],l:[80,45],xl:[80,45],xxl:[80,45]},horizontal1:{xs:[80,45],s:[110,62],m:[110,62],l:[136,77],xl:[136,77],xxl:[136,77]},horizontal2:{xs:[130,73],s:[156,88],m:[156,88],l:[162,91],xl:[162,91],xxl:[162,91]},horizontal3:{xs:[170,96],s:[196,110],m:[220,124],l:[226,127],xl:[298,168],xxl:[298,168]},horizontal4:{xs:[290,163],s:[345,194],m:[384,216],l:[352,198],xl:[352,198],xxl:[352,198]},featuredHero:{xs:[290,125],s:[345,140],m:[385,134],l:[770,209],xl:[994,270],xxl:[994,270]},socialFooter:{xs:[30,25],s:[36,30],m:[43,35],l:[49,40],xl:[58,48],xxl:[58,48]}},e.exports=f},{"../../../util":391,"./buttonList":101,"./editorial":102,"./grid":103,"./media":105,"./partials":110,"./product":119,"./row":120,"./socialFooter":121,"./spacer":122,"./styles.hbs":123,"./util":128}],105:[function(t,e,n){var i=t("../../../util"),a=t("./util"),r=function(t){var e,n=a.contains(["v2","v4"],t.orientation)&&t.editorial instanceof Object;if(t.parentIsGrid)switch(t.subType){case"image":e=n?"horizontalMediaGridWithCopy":"horizontalImageGrid";break;case"video":e=n?"horizontalMediaGridWithCopy":"horizontalVideoGrid";break;case"audio":}else e=t.parentIsRow?"horizontal"+(t.columnPercentage||"100"):"horizontal100";return t.artworkProfile||e},l=function(t){var e,n=this.artworkMap,i=t.artworkCustomProfile instanceof Object,a=i&&t.artworkCustomProfile.map instanceof Object,l=i&&"string"==typeof t.artworkCustomProfile.type;i&&a&&l?(e=t.artworkCustomProfile.type,n[e]=t.artworkCustomProfile.map):e=r.call(this,t),t.image=this.processArtwork({artworkUrl:t.artworkUrl,artworkName:e,artworkMap:n})},o=function(t){var e=a.contains(["v2","v4"],t.orientation)&&t.editorial instanceof Object;return i.extend(t,{subType:t.subType||"image",align:t.align||"left",videoUrl:t.videoUrl||"",imageLink:t.imageLink||{},orientation:t.orientation||"v0",span:t.span||1,isNotStandAlone:t.isNotStandAlone||!1}),t.parentIsRow&&e&&"video"===t.subType&&(t.orientation="v0"),l.call(this,t),t.editorial instanceof Object&&(t.editorial.isNotStandAlone=!0,t.editorial=this.editorialBlock(t.editorial)),t["isOrientation_"+t.orientation]=!0,t.imageLink instanceof Object&&!t.imageLink.url&&!t.videoUrl&&(t.isDisabled=!0),t.isMediaBlock=!0,t};e.exports=o},{"../../../util":391,"./util":128}],106:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isMediaBlock:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isEditorialBlock:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isSpacerBlock:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isRowBlock:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isGridBlock:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isButtonListBlock:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isSocialFooterBlock:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.mediaBlock,"        ","mediaBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"        ","editorialBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.spacerBlock,"        ","spacerBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.rowBlock,"        ","rowBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},10:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.gridBlock,"        ","gridBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.buttonListBlock,"        ","buttonListBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.socialFooterBlock,"        ","socialFooterBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.blocks:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],107:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='    <list class="body-size-'+o(l(null!=t?t.labelSize:t,t))+" body-weight-"+o(l(null!=t?t.labelWeight:t,t))+'">\n';return r=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"    </list>\n"},2:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='            <button class="button-list-link\n                           caption2-emphasized\n                           bottom\n                           horizontal\n                           ';return r=e["if"].call(t,null!=t?t.isSubscribe:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(s+=r),s+='"\n                    style="',r=e["if"].call(t,null!=a[1]?a[1].tintColor:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'"\n                    data-link-url="'+o(l(null!=t?t.url:t,t))+'"\n                    data-page-target="'+o(l(null!=t?t.target:t,t))+'">\n                <text>'+o(l(null!=t?t.label:t,t))+"</text>\n            </button>\n"},3:function(t,e,n,i){return"link-subscribe"},5:function(t,e,n,i){var a,r=e.helperMissing,l="\n                           link";return a=(e.equal||t&&t.equal||r).call(t,null!=t?t.target:t,"external",{name:"equal",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},6:function(t,e,n,i){return"-external"},8:function(t,e,n,i,a){var r=e.helperMissing,l=this.escapeExpression;return"color: "+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=a[2]?a[2].tintColor:a[2],{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=a[2]?a[2].tintColor:a[2],{name:"hexToRgb",hash:{},data:i}))+";"},10:function(t,e,n,i,a){var r,l='    <section class="';return r=e["if"].call(t,null!=t?t.labelSize:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=e["if"].call(t,null!=t?t.labelWeight:t,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='">\n',r=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(15,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"    </section>\n"},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"body-size-"+r(a(null!=t?t.labelSize:t,t))},13:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"body-weight-"+r(a(null!=t?t.labelWeight:t,t))},15:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='            <button class="button-list-link\n                           caption2-emphasized\n                           bottom\n                           vertical\n                           ';return r=e["if"].call(t,null!=t?t.isSubscribe:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(s+=r),s+='"\n                    style="',r=e["if"].call(t,null!=a[1]?a[1].tintColor:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'"\n                    data-link-url="'+o(l(null!=t?t.url:t,t))+'"\n                    data-page-target="'+o(l(null!=t?t.target:t,t))+'">\n                <text>'+o(l(null!=t?t.label:t,t))+"</text>\n            </button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='<section class="align-'+o(l(null!=t?t.align:t,t))+'">\n\n';return r=e["if"].call(t,null!=t?t.isHorizontal:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(10,i,a),data:i}),null!=r&&(s+=r),s+"\n</section>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],108:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s="\n";return r=e.unless.call(t,null!=t?t.isNotStandAlone:t,{name:"unless",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+='                        <section class="align-'+o(l(null!=t?t.align:t,t))+'">\n',r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+="\n",r=e["if"].call(t,null!=t?t.body:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+="\n",r=e["if"].call(t,null!=t?t.links:t,{name:"if",hash:{},fn:this.program(17,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+="                        </section>\n\n",r=e.unless.call(t,null!=t?t.isNotStandAlone:t,{name:"unless",hash:{},fn:this.program(34,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"\n"},2:function(t,e,n,i){var a,r="    <section>\n";return a=e.unless.call(t,null!=t?t.bodyMaxLinesNotZero:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){return'        <row class="grid-1-col">\n            <column>\n                <card class="editorial-lockup-card">\n                    <lockup>\n'},5:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                                <title class="position-'+l(r(null!=t?t.align:t,t))+" title-size-"+l(r(null!=t?t.titleSize:t,t))+" title-weight-"+l(r(null!=t?t.titleWeight:t,t))+' editorial-title-color"\n                                       style="';return a=e["if"].call(t,null!=t?t.titleColor:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='"\n                                       maxLines="'+l(r(null!=t?t.titleMaxLines:t,t))+'">\n                                    <text>'+l(r(null!=t?t.title:t,t))+"</text>\n                                </title>\n",a=e["if"].call(t,null!=t?t.body:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.titleColor:t,{name:"hexToRgb",hash:{},data:i}))},8:function(t,e,n,i){var a,r="                                    ";return a=e.unless.call(t,null!=t?t.bodyMaxLinesNotZero:t,{name:"unless",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},9:function(t,e,n,i){return'<text class="editorial-spacer"><br/></text>'},11:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                                    <text class="body-size-'+l(r(null!=t?t.bodySize:t,t))+" body-weight-"+l(r(null!=t?t.bodyWeight:t,t))+' editorial-body-color" style="';return a=e["if"].call(t,null!=t?t.bodyColor:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" maxLines="'+l(r(null!=t?t.bodyMaxLines:t,t))+'">',a=r(null!=t?t.body:t,t),null!=a&&(o+=a),o+="</text>\n",a=e["if"].call(t,null!=t?t.links:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},12:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bodyColor:t,{name:"hexToRgb",hash:{},data:i}))},14:function(t,e,n,i){var a,r="                                    ";return a=e.unless.call(t,null!=t?t.bodyMaxLinesNotZero:t,{name:"unless",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},15:function(t,e,n,i){return'<text class="editorial-spacer-large"><br/></text>'},17:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.linkOrientationHorizontal:t,{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.program(30,i,a),data:i}),null!=r&&(l+=r),l},18:function(t,e,n,i,a){var r,l='                                    <list class="';return r=e["if"].call(t,null!=t?t.bodySize:t,{name:"if",hash:{},fn:this.program(19,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=e["if"].call(t,null!=t?t.bodyWeight:t,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='">\n',r=e.each.call(t,null!=t?t.links:t,{name:"each",hash:{},fn:this.program(23,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"                                    </list>\n"},19:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"body-size-"+r(a(null!=t?t.bodySize:t,t))},21:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"body-weight-"+r(a(null!=t?t.bodyWeight:t,t))},23:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.lambda,s=this.escapeExpression,c='                                            <button disabled="false"\n                                                    type="link"\n                                                    class="link';return r=(e.equal||t&&t.equal||l).call(t,null!=t?t.target:t,"external",{name:"equal",hash:{},fn:this.program(24,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=e.unless.call(t,null!=a[1]?a[1].linkColor:a[1],{name:"unless",hash:{},fn:this.program(26,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' horizontal"\n                                                    data-link-url="'+s(o(null!=t?t.url:t,t))+'"\n                                                    data-page-target="'+s(o(null!=t?t.target:t,t))+'"\n                                                    ',r=e["if"].call(t,null!=a[1]?a[1].linkColor:a[1],{name:"if",hash:{},fn:this.program(28,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+">\n                                                <text>"+s(o(null!=t?t.label:t,t))+"</text>\n                                            </button>\n"},24:function(t,e,n,i){return"-external"},26:function(t,e,n,i){return"link-color"},28:function(t,e,n,i,a){var r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=a[2]?a[2].linkColor:a[2],{name:"hexToRgb",hash:{},data:i}))+'"'},30:function(t,e,n,i,a){var r,l='                                    <section class="';return r=e["if"].call(t,null!=t?t.bodySize:t,{name:"if",hash:{},fn:this.program(19,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+=" ",r=e["if"].call(t,null!=t?t.bodyWeight:t,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='">\n',r=e.each.call(t,null!=t?t.links:t,{name:"each",hash:{},fn:this.program(31,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"                                    </section>\n"},31:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.lambda,s=this.escapeExpression,c='                                            <button disabled="false"\n                                                    type="link"\n                                                    class="link';return r=(e.equal||t&&t.equal||l).call(t,null!=t?t.target:t,"external",{name:"equal",hash:{},fn:this.program(24,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=e.unless.call(t,null!=a[1]?a[1].linkColor:a[1],{name:"unless",hash:{},fn:this.program(26,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' vertical"\n                                                    data-link-url="'+s(o(null!=t?t.url:t,t))+'"\n                                                    data-page-target="'+s(o(null!=t?t.target:t,t))+'"\n                                                    ',r=e["if"].call(t,null!=a[1]?a[1].linkColor:a[1],{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+">\n                                                <text>"+s(o(null!=t?t.label:t,t))+"</text>\n                                            </button>\n"},32:function(t,e,n,i,a){var r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=a[2]?a[2].linkColor:a[2],{name:"hexToRgb",hash:{},data:i}))+'"'},34:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.bodyMaxLinesNotZero:t,{name:"unless",hash:{},fn:this.program(35,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </section>\n"},35:function(t,e,n,i){return"                    </lockup>\n                </card>\n            </column>\n        </row>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.isEditorialBlock:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],109:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'style="column-count: '+r(a(null!=t?t.maxColumns:t,t))+';"'},3:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.productBlock,"            ","productBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.mediaBlock,"            ","mediaBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='<grid class="no-borders-grid grid-lockup-orientation-'+l(r(null!=t?t.orientation:t,t))+" grid-column-"+l(r(null!=t?t.gridColumns:t,t))+'" ';return a=e["if"].call(t,null!=t?t.maxColumns:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n",a=e["if"].call(t,null!=t?t.isProductType:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n",a=e["if"].call(t,null!=t?t.isMediaType:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"</grid>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],110:[function(t,e,n){var i=t("itml").utils.Handlebars,a={blocks:t("./blocks.hbs"),editorialBlock:t("./editorial.hbs"),spacerBlock:t("./spacer.hbs"),mediaBlock:t("./media.hbs"),mediaImageVideoBlock:t("./mediaImageVideoBlock.hbs"),rowBlock:t("./row.hbs"),gridBlock:t("./grid.hbs"),productBlock:t("./product.hbs"),productDetailsBlock:t("./productDetails.hbs"),productArtworkBlock:t("./productArtwork.hbs"),buttonListBlock:t("./buttonList.hbs"),socialFooterBlock:t("./socialFooter.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./blocks.hbs":106,"./buttonList.hbs":107,"./editorial.hbs":108,"./grid.hbs":109,"./media.hbs":111,"./mediaImageVideoBlock.hbs":112,"./product.hbs":113,"./productArtwork.hbs":114,"./productDetails.hbs":115,"./row.hbs":116,"./socialFooter.hbs":117,"./spacer.hbs":118,itml:435}],111:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<grid class="no-borders-grid grid-lockup-orientation-'+r(a(null!=t?t.orientation:t,t))+' grid-1-col">\n'},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <lockup disabled="'+l(r(null!=t?t.isDisabled:t,t))+'" class="lockup-orientation-'+l(r(null!=t?t.orientation:t,t))+" align-"+l(r(null!=t?t.align:t,t))+" ";return a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n",a=e["if"].call(t,null!=t?t.editorialTitle:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.mediaImageVideoBlock,"        ","mediaImageVideoBlock",t,void 0,e,n,i),null!=a&&(o+=a),o+="\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </lockup>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,l="link";return a=(e.equal||t&&t.equal||r).call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,"external",{name:"equal",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},5:function(t,e,n,i){return"-external"},7:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'data-link-url="'+l(r(null!=(a=null!=t?t.imageLink:t)?a.url:a,t))+'"'},9:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'data-page-target="'+l(r(null!=(a=null!=t?t.imageLink:t)?a.target:a,t))+'"'},11:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <title class="title-size-'+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.titleSize:a,t))+" title-weight-"+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.titleWeight:a,t))+' uber-title-color" maxLines="0">'+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.title:a,t))+'</title>\n            <text class="editorial-spacer"><br/></text>\n'},13:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"            ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r},15:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <lockup disabled="'+l(r(null!=t?t.isDisabled:t,t))+'" class="lockup-orientation-'+l(r(null!=t?t.orientation:t,t))+" align-"+l(r(null!=t?t.align:t,t))+" ";return a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n",a=this.invokePartial(n.mediaImageVideoBlock,"        ","mediaImageVideoBlock",t,void 0,e,n,i),null!=a&&(o+=a),o+"    </lockup>\n"},16:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"            ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r+'            <text class="editorial-spacer"><br/></text>\n            <text class="editorial-spacer"><br/></text>\n            <text class="editorial-spacer"><br/></text>\n'},18:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <card disabled="'+l(r(null!=t?t.isDisabled:t,t))+'" class="align-'+l(r(null!=t?t.align:t,t))+" ";return a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=' editorial-lockup-card" ',a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n        <lockup>\n",a=this.invokePartial(n.mediaImageVideoBlock,"            ","mediaImageVideoBlock",t,void 0,e,n,i),null!=a&&(o+=a),o+="        </lockup>\n        <lockup>\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </lockup>\n    </card>\n"},19:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"                ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r},21:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <lockup disabled="'+l(r(null!=t?t.isDisabled:t,t))+'" class="lockup-orientation-'+l(r(null!=t?t.orientation:t,t))+" align-"+l(r(null!=t?t.align:t,t))+" ";return a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='" ',a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n",a=this.invokePartial(n.mediaImageVideoBlock,"        ","mediaImageVideoBlock",t,void 0,e,n,i),null!=a&&(o+=a),o+="\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </lockup>\n"},23:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <card disabled="'+l(r(null!=t?t.isDisabled:t,t))+'" class="align-'+l(r(null!=t?t.align:t,t))+" ";return a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=' editorial-lockup-card" ',a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.url:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=" ",a=e["if"].call(t,null!=(a=null!=t?t.imageLink:t)?a.target:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+=">\n        <lockup>\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="        </lockup>\n        <lockup>\n",a=this.invokePartial(n.mediaImageVideoBlock,"            ","mediaImageVideoBlock",t,void 0,e,n,i),null!=a&&(o+=a),o+"        </lockup>\n    </card>\n"},25:function(t,e,n,i){return"</grid>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.isNotStandAlone:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v0:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v1:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v2:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v3:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v4:t,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,
data:i}),null!=a&&(r+=a),r+="\n",a=e.unless.call(t,null!=t?t.isNotStandAlone:t,{name:"unless",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],112:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='    <video class="editorial-lockup-image"';return a=e["if"].call(t,null!=t?t.adamId:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+">\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return' data-content-id="'+r(a(null!=t?t.adamId:t,t))+'"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'        <asset src="'+r(a(null!=t?t.videoUrl:t,t))+'" keyDelivery="itunes"/>\n    </video>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s="";return a=(e.equal||t&&t.equal||r).call(t,null!=t?t.subType:t,"video",{name:"equal",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n<img class="editorial-lockup-image" width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o(l(null!=(a=null!=t?t.imageLink:t)?a.alt:a,t))+'" type=""/>\n\n',a=(e.equal||t&&t.equal||r).call(t,null!=t?t.subType:t,"video",{name:"equal",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s},useData:!0})},{"hbsfy/runtime":418}],113:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=t?t.isOrientation_v0:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v1:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v2:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v3:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v4:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isOrientation_v5:t,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <lockup class="action-lockup lockup-orientation-v0 align-'+l(r(null!=t?t.align:t,t))+'" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.editorialTitle:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=this.invokePartial(n.productArtworkBlock,"        ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"        ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </lockup>\n"},3:function(t,e,n,i){return'disabled="true"'},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.editorialTitle:t)?a.title:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                <title class="title-size-'+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.titleSize:a,t))+" title-weight-"+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.titleWeight:a,t))+' uber-title-color" style="';return a=e["if"].call(t,null!=(a=null!=t?t.editorialTitle:t)?a.titleColor:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'" maxLines="0">'+l(r(null!=(a=null!=t?t.editorialTitle:t)?a.title:a,t))+'</title>\n                <text class="editorial-spacer"><br/></text>\n'},7:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"color: "+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.editorialTitle:t)?a.titleColor:a,{name:"hexToRgb",hash:{},data:i}))},9:function(t,e,n,i){var a,r='            <text class="editorial-spacer"><br/></text>\n            <text class="editorial-spacer"><br/></text>\n';return a=this.invokePartial(n.editorialBlock,"            ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <lockup class="action-lockup lockup-orientation-v1 align-'+l(r(null!=t?t.align:t,t))+'" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=this.invokePartial(n.productArtworkBlock,"        ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"        ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+"    </lockup>\n"},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"            ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r+'            <text class="editorial-spacer"><br/></text>\n            <text class="editorial-spacer"><br/></text>\n            <text class="editorial-spacer"><br/></text>\n'},14:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <card class="action-lockup lockup-orientation-v2 editorial-lockup-card" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='>\n        <lockup class="align-'+l(r(null!=t?t.align:t,t))+'">\n',a=this.invokePartial(n.productArtworkBlock,"            ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"            ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+="            ",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        </lockup>\n        <lockup>\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </lockup>\n    </card>\n"},15:function(t,e,n,i){return'<text class="editorial-spacer"><br/></text>'},17:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"                ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r+'                <text class="editorial-spacer"><br/></text>\n'},19:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <lockup class="action-lockup lockup-orientation-v3 align-'+l(r(null!=t?t.align:t,t))+'" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=this.invokePartial(n.productArtworkBlock,"        ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"        ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </lockup>\n"},21:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <card class="action-lockup lockup-orientation-v4 editorial-lockup-card" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='>\n        <lockup class="align-'+l(r(null!=t?t.align:t,t))+'">\n',a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="        </lockup>\n        <lockup>\n",a=this.invokePartial(n.productArtworkBlock,"            ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"            ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+="            ",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"\n        </lockup>\n    </card>\n"},23:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t._isWideLayout:t,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t._isNarrowLayout:t,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},24:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <lockup class="action-lockup lockup-orientation-v5-ipad align-'+l(r(null!=t?t.align:t,t))+'" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=this.invokePartial(n.productArtworkBlock,"            ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"            ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+"            <text/>\n        </lockup>\n"},25:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialBlock,"                ","editorialBlock",null!=t?t.editorial:t,void 0,e,n,i),null!=a&&(r+=a),r},27:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <lockup disabled="true">\n';return a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        </lockup>\n        <lockup class="action-lockup align-'+l(r(null!=t?t.align:t,t))+'" data-content-id="'+l(r(null!=(a=null!=t?t.product:t)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=t?t.product:t)?a.kind:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=this.invokePartial(n.productArtworkBlock,"            ","productArtworkBlock",t,void 0,e,n,i),null!=a&&(s+=a),a=this.invokePartial(n.productDetailsBlock,"            ","productDetailsBlock",t,void 0,e,n,i),null!=a&&(s+=a),s+"            <text/>\n        </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.product:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],114:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,null!=t?t.product:t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,null!=t?t.product:t,{name:"productArtwork",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.product:t)?a.hasPlayButton:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],115:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o="";return a=e["if"].call(t,null!=(a=null!=t?t.product:t)?a.isExplicit:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(5,i),data:i}),null!=a&&(o+=a),o+'        <subtitle maxLines="1">'+l(r(null!=(a=null!=t?t.product:t)?a.artistName:a,t))+"</subtitle>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='            <title maxLines="2" class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='">'+o(l(null!=(a=null!=t?t.product:t)?a.name:a,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},3:function(t,e,n,i){return"-disabled"},5:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <title maxLines="2" class="lockup-title">'+l(r(null!=(a=null!=t?t.product:t)?a.name:a,t))+"</title>\n"},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.product:t)?a.isExplicit:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='            <subtitle class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+o(l(null!=(a=null!=t?t.product:t)?a.artistName:a,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,null!=t?t.product:t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></subtitle>\n'},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <subtitle maxLines="1">'+l(r(null!=(a=null!=t?t.product:t)?a.artistName:a,t))+"</subtitle>\n"},12:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=(e.equal||t&&t.equal||r).call(t,t,"genre",{name:"equal",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},13:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.product:t)?a.genre:a,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},14:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <subtitle maxLines="1">'+l(r(null!=(a=null!=t?t.product:t)?a.genre:a,t))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<section class="editorial-lockup-details">\n';return a=e.unless.call(t,null!=t?t.useLockupTitle:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.useLockupTitle:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=t?t.fields:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</section>\n"},useData:!0})},{"hbsfy/runtime":418}],116:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <column span="'+l(r(null!=t?t.span:t,t))+'">\n            ';return a=(e.equal||t&&t.equal||o).call(t,null!=t?t.kind:t,"media",{name:"equal",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n            ",a=(e.equal||t&&t.equal||o).call(t,null!=t?t.kind:t,"product",{name:"equal",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n            ",a=(e.equal||t&&t.equal||o).call(t,null!=t?t.kind:t,"spacer",{name:"equal",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=(e.equal||t&&t.equal||o).call(t,null!=t?t.kind:t,"editorial",{name:"equal",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </column>\n"},2:function(t,e,n,i){var a;return a=this.invokePartial(n.mediaBlock,"","mediaBlock",t,void 0,e,n,i),null!=a?a:""},4:function(t,e,n,i){var a;return a=this.invokePartial(n.productBlock,"","productBlock",t,void 0,e,n,i),null!=a?a:""},6:function(t,e,n,i){var a;return a=this.invokePartial(n.spacerBlock,"","spacerBlock",t,void 0,e,n,i),null!=a?a:""},8:function(t,e,n,i){var a,r="                <lockup>";return a=this.invokePartial(n.editorialBlock,"","editorialBlock",t,void 0,e,n,i),null!=a&&(r+=a),r+"</lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="<row>\n";return a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</row>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],117:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},2:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='           <button type="image" class="link-external" data-link-url="'+o(l(null!=t?t.url:t,t))+'">\n               <img class="social-footer-item"\n                    srcset="'+o(l(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+o(l(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'"\n                    width="'+o(l(null!=(r=null!=t?t.image:t)?r.width:r,t))+'"\n                    height="'+o(l(null!=(r=null!=t?t.image:t)?r.height:r,t))+'"\n                    alt="'+o(l(null!=t?t.altText:t,t))+'"\n                    style="';return r=e["if"].call(t,null!=a[2]?a[2].tintColor:a[2],{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'"/>\n           </button>\n'},3:function(t,e,n,i,a){var r=e.helperMissing,l=this.escapeExpression;return"itml-img-mask-color:"+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=a[3]?a[3].tintColor:a[3],{name:"hexToRgb",hash:{},data:i}))+";"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l='<list class="align-center">\n';return r=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"</list>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],118:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return""},3:function(t,e,n,i){var a,r='    <divider class="divider';return a=e.unless.call(t,null!=t?t.showDivider:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" ',a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},4:function(t,e,n,i){return"-no-border divider"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="border-color:'+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.dividerColor:t,{name:"hexToRgb",hash:{},data:i}))+';"'},8:function(t,e,n,i){var a,r='    <divider class="divider-no-border"/>\n    <divider class="divider';return a=e.unless.call(t,null!=t?t.showDivider:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" ',a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'/>\n    <divider class="divider-no-border"/>\n'},10:function(t,e,n,i){var a,r='    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n    <divider class="divider';return a=e.unless.call(t,null!=t?t.showDivider:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" ',a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'/>\n    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n'},12:function(t,e,n,i){var a,r='    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n    <divider class="divider';return a=e.unless.call(t,null!=t?t.showDivider:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='" ',a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'/>\n    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n    <divider class="divider-no-border"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"xs",{name:"equal",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n\n",a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"s",{name:"equal",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"m",{name:"equal",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"l",{name:"equal",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"xl",{name:"equal",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n",a=(e.equal||t&&t.equal||r).call(t,null!=t?t.size:t,"xxl",{name:"equal",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},useData:!0})},{"hbsfy/runtime":418}],119:[function(t,e,n){var i=t("../../../util"),a=t("./util"),r=function(t,e){var n,a,r,l=this.setCustomArtwork(e),o=l||e.artworkProfile,s=i.clone(this.artworkMap);r={content:t,artworkMap:s},r.params={type:o},a=i.artwork.getArtworkForContent(r),n=i.lockup.setArtworks(t,a,s,o),t.image=n.image},l=function(t,e){var n="square",i=a.contains(["musicVideo","uploadedVideo"],t.kind),r=a.contains(["v2","v4"],e.orientation)&&e.editorial instanceof Object,l=a.contains(["xs","s","m"],this.screenSize);if(i&&(n="horizontal"),!e.parentIsRow||!e.artworkCustomProfile&&l||(e.orientation="v0",e["isOrientation_"+e.orientation]=!0),e.artworkProfile)return e.artworkProfile;if(e.parentIsGrid){switch(n){case"square":n="squareGrid";break;case"horizontal":n="horizontalGrid"}r&&(n+="WithCopy")}if(e.parentIsRow)switch(n){case"square":n=l&&r?"smallSquareWithCopy":"square"+(e.columnPercentage||"100");break;case"horizontal":n=l&&r?"smallHorizontalWithCopy":"horizontal"+(e.columnPercentage||"100")}return n},o=function(t,e){var n=["iTunesBrand","brand","activity","song","uploadedAudio"];return t.isExplicit=i.lockup.isExplicit(t),t.hasPlayButton=a.contains(n,t.kind)?!1:!0,e.artworkProfile=l.call(this,t,e),r.call(this,t,e),e.product=i.deepClone(t),e.editorial instanceof Object&&(e.useLockupTitle!==!1&&(e.useLockupTitle=!0,e.editorial.title=e.product.name||""),e.useLockupNotes&&e.product.itunesNotes instanceof Object&&"string"==typeof e.product.itunesNotes["short"]&&(e.editorial.body=e.product.itunesNotes["short"]),e.editorial=this.editorialBlock(e.editorial)),this.handleEditorialOrientation(e),t},s=function(t){return i.extend(t,{align:t.align||"left",orientation:t.orientation||"v2",fields:t.fields||[]}),t.adamId&&(t.content=[this.model.lookupContent({id:t.adamId},function(e){return o.call(this,e,t)}.bind(this))]),t["isOrientation_"+t.orientation]=!0,t.isProductBlock=!0,t};e.exports=s},{"../../../util":391,"./util":128}],120:[function(t,e,n){var i=t("./util"),a=function(t){var e=0;return t instanceof Array&&t.forEach(function(t){e+=t.span||1},this),e},r=function(t){var e=[];return t instanceof Array&&t.forEach(function(t){var n=t.span?100*t.span:100;e.push(n)},this),e},l=function(t){var e=[],n=100,i=t.children instanceof Array?t.children:[];return i.forEach(function(t){switch(t.kind){case"media":case"editorial":t.isNotStandAlone=!0,"media"===t.kind&&(t.artworkProfile=t.artworkProfile||"horizontal"+n);break;case"product":t.editorial instanceof Object&&(t.editorial.isNotStandAlone=!0)}t.parentIsRow=!0,t.columnPercentage=n,e.push({isRowBlock:!0,kind:"row",children:this.processBlockModels([t])})},this),e},o=function(t){var e=a(t.children),n=r(t.children),i=t.children instanceof Array?t.children:[];return i.forEach(function(t,i){switch(t.kind){case"media":case"editorial":t.isNotStandAlone=!0;break;case"product":t.editorial instanceof Object&&(t.editorial.isNotStandAlone=!0)}t.columnPercentage=Math.floor(n[i]/e),t.parentIsRow=!0},this),t.children=this.processBlockModels(t.children),t.isRowBlock=!0,t},s=function(t){var e=["xs","s","m"];return t=i.contains(e,this.screenSize)?l.call(this,t):o.call(this,t)};e.exports=s},{"./util":128}],121:[function(t,e,n){var i=t("../../../util"),a=function(t){var e=t.children instanceof Array?t.children:[],n={facebook:{artworkUrl:"https://uic.itunes.apple.com/projects/assets/img/social/facebook-{w}x{h}.png",altText:"Facebook",url:"http://www.facebook.com/itunes"},twitter:{artworkUrl:"https://uic.itunes.apple.com/projects/assets/img/social/twitter-{w}x{h}.png",altText:"Twitter",url:"http://www.twitter.com/itunes"},instagram:{artworkUrl:"https://uic.itunes.apple.com/projects/assets/img/social/instagram-{w}x{h}.png",altText:"Instagram",url:"http://www.instagram.com/itunes"}};return e.forEach(function(t){var e,a=n[t.type];i.extend(t,{altText:t.altText||a.altText||"",url:t.url||a.url}),e=this.processArtwork({artworkName:"socialFooter",artworkUrl:t.artworkUrl||a.artworkUrl,artworkMap:this.artworkMap}),e&&(t.image=e)},this),t.isSocialFooterBlock=!0,t};e.exports=a},{"../../../util":391}],122:[function(t,e,n){var i=function(t){return t.size=t.size||"s",t.isSpacerBlock=!0,t};e.exports=i},{}],123:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    .button-list-link {\n        border-width: 1pt;\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n        border-radius: circle-caps;\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n        padding: 10 25 10 25;\n        margin: 15 0 40 0;\n    }\n\n    .social-footer-item {\n        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="\n.grid-column-0 {\n    column-count: 0;\n}\n\n.grid-column-1 {\n    column-count: 1;\n}\n\n.grid-column-2 {\n    column-count: 2;\n}\n\n.grid-column-3 {\n    column-count: 3;\n}\n\n.grid-column-4 {\n    column-count: 4;\n}\n\n.grid-lockup-orientation-v0 {\n    itml-lockup-type: shelf;\n}\n\n.grid-lockup-orientation-v1 {\n    itml-lockup-type: shelf;\n}\n\n.grid-lockup-orientation-v2 {\n    itml-lockup-type: shelf;\n}\n\n.grid-lockup-orientation-v3 {\n    itml-lockup-type: shelf;\n}\n\n.grid-lockup-orientation-v4 {\n    itml-lockup-type: shelf;\n}\n\n.grid-lockup-orientation-v5-ipad {\n    itml-lockup-type: shelf;\n}\n\n.no-borders-grid {\n    border-color: rgba(0,0,0,0);\n    itml-divider-type: none;\n}\n\n\n.editorial-lockup-image {\n    itml-position: top-left;\n}\n\n.editorial-lockup-card {\n    itml-card-type: editorial;\n}\n\n.title-size-s {\n    font-size: 13pt;\n}\n\n.title-size-m {\n    font-size: 16pt;\n}\n\n.title-size-l {\n    font-size: 22pt;\n}\n\n.title-size-xl {\n    font-size: 28pt;\n}\n\n.title-weight-normal {\n    font-weight: normal;\n}\n\n.title-weight-bold {\n    font-weight: bold;\n}\n\n.body-size-s {\n    font-size: 10pt;\n}\n\n.body-size-m {\n    font-size: 13pt;\n}\n\n.body-size-l {\n    font-size: 18pt;\n}\n\n.body-size-xl {\n    font-size: 22pt;\n    font-weight: normal;\n}\n\n.body-weight-normal {\n    font-weight: normal;\n}\n\n.body-weight-bold {\n    font-weight: bold;\n}\n\n\n.editorial-spacer {\n    font-size: 2pt;\n}\n\n.editorial-spacer-large {\n    font-size: 4pt;\n}\n\n\n.divider-no-border {\n    border-color: rgba(0,0,0,0);\n}\n\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],124:[function(t,e,n){var i=function(t,e){return t instanceof Array?t.indexOf(e)>-1:!1};e.exports=i},{}],125:[function(t,e,n){var i=function(){var t,e=this.getCountryCode(),n={paneu:["pt","gr","bg","cy","cz","ee","hu","lv","lt","mt","pl","ro","sk","si"],panlat:["ar","bo","cl","co","cr","do","ec","sv","gt","hn","ni","pa","py","pe","ve"],panasia:["hk","tw","sg","mo","my","ph","id","th","vn","kh","la","bn","lk"],nordics:["dk","fi","no","se"],panarab:["sa","bh","jo","om","qa","ye","eg","lb","ae"],belu:["be","lu"],nonexplicit:["in","bf","np","by","uz","eg","jo","lb","om","sa","ae","my","sg"],world:["ai","ag","am","az","bs","by","bz","bm","bw","cv","ky","dm","fj","gm","gh","gd","gw","il","mu","fm","md","mn","mz","na","ne","kn","za","sz","tj","tt","tm","ug","ua","vg","zw","bb","bf","kz","ke","kg","np","ng","pg","uz"]};for(var i in n)"string"==typeof n[i]?n[i]===e&&(t=i):n[i]instanceof Array&&this.contains(n[i],e)&&(t=i);return t||e};e.exports=i},{}],126:[function(t,e,n){var i=function(t){var e={alb:"al",dza:"dz",ago:"ao",aia:"ai",atg:"ag",arg:"ar",arm:"am",aus:"au",aut:"at",aze:"az",bhs:"bs",bhr:"bh",brb:"bb",blr:"by",bel:"be",blz:"bz",ben:"bj",bmu:"bm",btn:"bt",bol:"bo",bwa:"bw",bra:"br",vgb:"vg",brn:"bn",bgr:"bg",bfa:"bf",khm:"kh",can:"ca",cpv:"cv",cym:"ky",tcd:"td",chl:"cl",chn:"cn",col:"co",cog:"cg",cri:"cr",hrv:"hr",cyp:"cy",cze:"cz",dnk:"dk",dma:"dm",dom:"do",ecu:"ec",egy:"eg",slv:"sv",est:"ee",fji:"fj",fin:"fi",fra:"fr",gmb:"gm",deu:"de",gha:"gh",grc:"gr",grd:"gd",gtm:"gt",gnb:"gw",guy:"gy",hnd:"hn",hkg:"hk",hun:"hu",isl:"is",ind:"in",idn:"id",irl:"ie",isr:"il",ita:"it",jam:"jm",jpn:"jp",jor:"jo",kaz:"kz",ken:"ke",kor:"kr",kwt:"kw",kgz:"kg",lao:"la",
lva:"lv",lbn:"lb",lbr:"lr",ltu:"lt",lux:"lu",mac:"mo",mkd:"mk",mdg:"mg",mwi:"mw",mys:"my",mli:"ml",mlt:"mt",mrt:"mr",mus:"mu",mex:"mx",fsm:"fm",mda:"md",mng:"mn",msr:"ms",moz:"mz",nam:"na",npl:"np",nld:"nl",nzl:"nz",nic:"ni",ner:"ne",nga:"ng",nor:"no",omn:"om",pak:"pk",plw:"pw",pan:"pa",png:"pg",pry:"py",per:"pe",phl:"ph",pol:"pl",prt:"pt",qat:"qa",rou:"ro",rus:"ru",stp:"st",sau:"sa",sen:"sn",syc:"sc",sle:"sl",sgp:"sg",svk:"sk",svn:"si",slb:"sb",zaf:"za",esp:"es",lka:"lk",kna:"kn",lca:"lc",vct:"vc",sur:"sr",swz:"sz",swe:"se",che:"ch",twn:"tw",tjk:"tj",tza:"tz",tha:"th",tto:"tt",tun:"tn",tur:"tr",tkm:"tm",tca:"tc",uga:"ug",gbr:"gb",ukr:"ua",are:"ae",ury:"uy",usa:"us",uzb:"uz",ven:"ve",vnm:"vn",yem:"ye",zwe:"zw"};return e[t]||t};e.exports=i},{}],127:[function(t,e,n){var i=t("../../../../util"),a=function(){var t,e=["al","dz","ao","ai","ag","ar","am","au","at","az","bs","bh","bb","by","be","bz","bj","bm","bt","bo","bw","br","vg","bn","bg","bf","kh","ca","cv","ky","td","cl","cn","co","cg","cr","hr","cy","cz","dk","dm","do","ec","eg","sv","ee","fj","fi","fr","gm","de","gh","gr","gd","gt","gw","gy","hn","hk","hu","is","in","id","ie","il","it","jm","jp","jo","kz","ke","kr","kw","kg","la","lv","lb","lr","lt","lu","mo","mk","mg","mw","my","ml","mt","mr","mu","mx","fm","md","mn","ms","mz","na","np","nl","nz","ni","ne","ng","no","om","pk","pw","pa","pg","py","pe","ph","pl","pt","qa","ro","ru","st","sa","sn","sc","sl","sg","sk","si","sb","za","es","lk","kn","lc","vc","sr","sz","se","ch","tw","tj","tz","th","tt","tn","tr","tm","tc","ug","gb","ua","ae","uy","us","uz","ve","vn","ye","zw"],n=/(.{2})\/store/,a=i.bag().storeFront;return"string"==typeof a&&(t=a.match(n),t=t instanceof Array?t.pop():null),this.contains(e,t)?t:"us"};e.exports=a},{"../../../../util":391}],128:[function(t,e,n){var i=t("./contains"),a=t("./getCountryCode"),r=t("./countryGrouping"),l=t("./get2CharCountryCode");e.exports={contains:i,getCountryCode:a,countryGrouping:r,get2CharCountryCode:l}},{"./contains":124,"./countryGrouping":125,"./get2CharCountryCode":126,"./getCountryCode":127}],129:[function(t,e,n){var i=t("../../util"),a=t("../loading"),r=t("../product/document"),l=t("../profile/document"),o=t("../profile/all/see_all"),s=t("../account/signin"),c=t("../radio/recents"),u=t("../room"),h=t("../festival"),d=t("../festival/event_details"),p=t("../more"),m=t("../search/resultsDocument"),f=t("../search/details"),g=t("../music_video"),b=t("../grouping"),v=t("../radio/live_station"),y=t("../learn_more"),k=t("../connect/detail"),w=t("../connect/create"),x=t("../connect/following"),S=t("../connect/recommendations"),D=t("../account/onboarding/genre"),C=t("../account/settings/following"),A=t("../account/settings/profile"),T=t("../common/dialog"),M=t("../account/subscribe"),E=t("../account/welcome/document"),I=t("../account/welcome/family"),F=t("../account/carrier_bundling/carrier_verification"),P=t("../account/carrier_bundling/sms_verification"),L=t("../account/carrier_bundling/account_linking"),R=t("../top_charts"),_=t("../sharing"),B=t("../for_you/document"),U=t("../radio/document"),N=t("../common/menu"),O=t("../common/reportconcern"),H=t("../common/traits/data_provider"),z=t("../account/subscription_autorenew"),V=t("../account/sonos/signed_in_auth"),G={getControllerDocument:function(t){t=t||{};var e,n,i,r=t.detail||{},l=this.getDataType(r),o=r.data||{};if(l&&""!==l){n=this.getDocumentForType(l),i={data:o,dataType:l,stations:r.stations,event:t};for(var s in i)i[s]||delete i[s];e=new n(i)}else e=new a({data:o});return this.controller=e,e},onPageResponse:function(t){var e,n=t.detail.callerDocument,a=t.detail.response;this.model||(this.model=new H);try{e=JSON.parse(a.responseText)}catch(r){this.model.handleParseError(a.responseText,null,this.handleRetry.bind(this,t))}if(e){var l=i.keypath(e,"pageData.componentName"),o=i.keypath(e,"pageData.pageTitle"),s=n.getElementsByTagName("loadingTemplate").item(0).getAttribute("loadUrl");l||(l=this.getDataType({url:s}));var c=this.getDocumentForType(l),u=new c({name:o,dataType:l,data:e,queryParams:i.query.parse(s)});u?(this.controller.addEventDelegates(u,["tabPush","handleAskToBuy"]),n.navigationDocument.replaceDocument(u.el,n,{animated:!1})):i.log.error("no document for type: ",l,e)}},getDocumentForType:function(t){var e={festival:h,festival_event:d,recents:c,signin:s,album_page:r,product_page:r,playlist_page:r,artist_page:l,brand_page:l,itunes_brand_page:l,profile_page:l,see_all_page:o,room_page:u,more_page:p,search_results_page:m,search_details_page:f,music_video_page:g,grouping_page:b,radio_live_station:v,learn_more_page:y,connect_detail:k,connect_create_post:w,connect_following:x,connect_recommendations:S,onboarding_page:D,settings_following_page:C,user_detail_page:A,dialog:T,subscribe:M,welcome_page:E,welcome_family_page:I,carrier_verification:F,sms_verification:P,account_linking:L,top_charts_page:R,sharing:_,for_you_page:B,menu:N,activity_page:l,radio_page:U,report_concern:O,subscription_autorenew:z,sonos_signed_in_auth:V},n={product_page:["album","song","playlist","video","music-video","uploadedVideo"],music_video_page:["musicVideo"],artist_page:["artist","iTunesBrand","brand","activity"],room_page:["room_page","multi_room_page","banner_room_page"],radio_page:["station"],connect_detail:["viewPost"]},i=e[t];if(!i)for(var a in n)n[a].indexOf(t)>-1&&(i=e[a]);return i},handleRetry:function(t,e){this.model||(this.model=new H),e&&this.model.fetchData({url:e,success:function(e){t.response=JSON.stringify(e),this.onPageResponse(t)}.bind(this)})},getDataType:function(t){var e=t.dataType||t.entityType;if(!e&&t.url){var n=t.url.match(/album|playlist|artist|brand|curator|music-video|viewPost|activity|station|post/g);e=n?n[0]:null}return e}};e.exports=G},{"../../util":391,"../account/carrier_bundling/account_linking":4,"../account/carrier_bundling/carrier_verification":9,"../account/carrier_bundling/sms_verification":19,"../account/onboarding/genre":45,"../account/settings/following":54,"../account/settings/profile":57,"../account/signin":64,"../account/sonos/signed_in_auth":70,"../account/subscribe":75,"../account/subscription_autorenew":81,"../account/welcome/document":84,"../account/welcome/family":87,"../common/dialog":131,"../common/menu":135,"../common/reportconcern":144,"../common/traits/data_provider":149,"../connect/create":163,"../connect/detail":166,"../connect/following":171,"../connect/recommendations":202,"../festival":228,"../festival/event_details":213,"../for_you/document":247,"../grouping":257,"../learn_more":276,"../loading":281,"../more":284,"../music_video":287,"../product/document":296,"../profile/all/see_all":305,"../profile/document":313,"../radio/document":325,"../radio/live_station":328,"../radio/recents":338,"../room":342,"../search/details":356,"../search/resultsDocument":360,"../sharing":366,"../top_charts":371}],130:[function(t,e,n){var i=t("itml"),a=t("./template.hbs"),r=i.controller.MultiElementController,l=t("../../../util"),o=l.loc,s=t("../traits").EventMap,c=t("../traits").TabComponent,u=function(t){t=t||{},t.data=t.data||{},t.events=t.events||[],t.events.push("select"),r.call(this,t),s.call(this,t),c.call(this,t),l.extend(this.onSelect,{"ok-button":this.handleOk,"subscribe-button":this.handleSubscribe,"reload-button":this.handleReload}),this.type=t.type,this.data=t.data||{};var e=this.data.buttons||[];if(e.length)for(var n=0;n<e.length;n++){var i=e[n];i.className&&i.callback&&(this.onSelect[i.className]=i.callback)}this.viewModel=this.createViewModel(),this.render()};l.inherit(u,r),l.inherit(u,s,!0),l.inherit(u,c,!0),u.prototype.template=a,u.prototype.createViewModel=function(){var t={};switch(this.type){default:t.title=this.data.title||"Error",t.subtitle=this.data.subtitle,t.buttons=this.data.buttons||this.createDefaultButtons()}return t},u.prototype.createDefaultButtons=function(){var t=[];return t.push({title:o.loc("OK"),className:"ok-button"}),t},u.prototype.handleSubscribe=function(t){setTimeout(function(){var e={dataType:"subscribe",modalType:"sheet"};this.pushModal(t,e)}.bind(this),800)},u.prototype.handleOk=function(){modal.popDocument()},u.prototype.handleReload=function(){for(var t=0;t<TabBar.tabs.length;t++)TabBar.tabs[t].navigationDocument.popToRootDocument(),TabBar.tabs[t].navigationDocument.popDocument();l["native"].application.reload()},e.exports=u},{"../../../util":391,"../traits":151,"./template.hbs":132,itml:435}],131:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("./controller"),l=t("../../../util"),o=function(t,e){t=t||{},t.suppressNavigationController=!0,t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.data=t.data||{},t.type=t.data.type||"error",t.controllers=t.controllers||[],t.controllers.length||(this.controller=new r({type:t.type,data:t.data}),t.controllers.push(this.controller)),a.call(this,t,e)};l.inherit(o,a),o.prototype.documentType="dialogTemplate",e.exports=o},{"../../../util":391,"./controller":130,itml:435}],132:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return"<title>"+l(r(null!=(a=null!=t?t.viewModel:t)?a.title:a,t))+"</title>"},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return"<description>"+l(r(null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,t))+"</description>"},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'    <button class="'+r(a(null!=t?t.className:t,t))+'">'+r(a(null!=t?t.title:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=(a=null!=t?t.data:t)?a.hideTitle:a,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.buttons:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],133:[function(t,e,n){e.exports={traits:t("./traits"),valueStore:t("./value_store")}},{"./traits":151,"./value_store":158}],134:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.MultiElementController,l=function(t,e){t=t||{},this.buttons=t.buttons,r.call(this,t,e)};a.inherit(l,r),l.prototype.template=t("./template.hbs"),e.exports=l},{"../../../util":391,"./template.hbs":136,itml:435}],135:[function(t,e,n){var i=t("itml"),a=i.controller.DocumentController,r=t("./element.js"),l=t("../../../util"),o=function(t,e){t=t||{},t.buttons=t.buttons||[],t.controllers=t.controllers||[],t.suppressNavigationController=!0,t.data.buttons&&(t.buttons=t.data.buttons),0===t.controllers.length&&t.controllers.push(new r({buttons:t.buttons})),a.call(this,t,e)};l.inherit(o,a),o.prototype.documentType="productActionsTemplate",e.exports=o},{"../../../util":391,"./element.js":134,itml:435}],136:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"    <button>"+r(a(null!=t?t.key:t,t))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.buttons:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],137:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],138:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="	<contentUnavailable>\n\n		";return a=e["if"].call(t,null!=t?t.errorTitle:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.needsAuth:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n	</contentUnavailable>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<title maxLines="0">'+r(a(null!=t?t.errorTitle:t,t))+"</title>"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<description maxLines="0">'+r(a(null!=t?t.errorMessage:t,t))+"</description>"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'		    <button class="sign-in-button full-width">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.unless.call(t,null!=t?t.viewModel:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],139:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a?a:""},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'post-url="'+r(a(null!=t?t.postUrl:t,t))+'"'},6:function(t,e,n,i){return'disabled="true"'},8:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <title class="'+s((r=null!=(r=e.titleClass||(null!=t?t.titleClass:t))?r:o,typeof r===l?r.call(t,{name:"titleClass",hash:{},data:i}):r))+" list-title";return a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===l?r.call(t,{name:"title",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},9:function(t,e,n,i){return"-disabled"},11:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'        <title class="'+o((a=null!=(a=e.titleClass||(null!=t?t.titleClass:t))?a:l,typeof a===r?a.call(t,{name:"titleClass",hash:{},data:i}):a))+' list-title">'+o((a=null!=(a=e.title||(null!=t?t.title:t))?a:l,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},13:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-1">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line1:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},15:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-2">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line2:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},17:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <subtitle class="lockup-line-3">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.line3:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},19:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.empty:t,{name:"unless",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},20:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.pickerMode,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(27,i),data:i}),null!=a&&(r+=a),r},21:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <button type="image" class="add-button" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"add",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.unless.call(t,null!=t?t.unpickable:t,{name:"unless",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"                </button>\n"},22:function(t,e,n,i){var a,r="";return a=e["if"].call(t,e.lookup.call(t,(a=i&&i.root)&&a.pickedMedia,null!=t?t.id:t,{name:"lookup",hash:{},data:i}),{name:"if",hash:{},fn:this.program(23,i),inverse:this.program(25,i),data:i}),null!=a&&(r+=a),r},23:function(t,e,n,i){return'                            <img src="resource://checkmark" />\n'},25:function(t,e,n,i){return'                            <img src="resource://MediaPickerAddControl" />\n'},27:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <button type="image" class="action-button" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,targetType:"button"},data:i}),null!=a&&(s+=a),s+'>\n                    <img class="action-color" src="resource://UniversalActionControl"/>\n                </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<lockup class="'+l(r(null!=t?t.kind:t,t))+' action-lockup" ';return a=e.unless.call(t,(a=i&&i.root)&&a.pickerMode,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+l(r(null!=t?t.id:t,t))+'" ',a=e["if"].call(t,null!=t?t.postUrl:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n    "+l((e.productArtwork||t&&t.productArtwork||o).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>\n"},useData:!0})},{"hbsfy/runtime":418}],140:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<activityIndicator id="loading">\n    <title>'+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n</activityIndicator>"},useData:!0})},{"hbsfy/runtime":418}],141:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='    <row class="playlist-row';return a=e["if"].call(t,null!=t?t.showBorder:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" type="modern" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"row"},data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.isOdd:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        <column class="playlist-column" span="1" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"column"},data:i}),null!=a&&(s+=a),s+='>\n            <card class="playlist-card" data-content-id="'+l(o(null!=t?t.id:t,t))+'" style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+=">\n                <lockup ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n                    <img src="" width="0" height="210" />\n                    <title style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="playlist-hero-title">'+l(o(null!=t?t.name:t,t))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="                </lockup>\n                <lockup ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                    <button class="play-button playlist-play-button cover-button" data-content-id="'+l(o(null!=t?t.id:t,t))+"\" type='play' ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"play",targetType:"card"},data:i}),null!=a&&(s+=a),s+=">\n                        <title>"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+'</title>\n                    </button>\n                </lockup>\n                <divider class="margin-helper playlist-row-margin-helper" />\n            </card>\n        </column>\n',a=e["if"].call(t,null!=t?t.isEven:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </row>\n"},2:function(t,e,n,i){return" show-border"},4:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='            <column class="playlist-column" span="2" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"column"},data:i}),null!=a&&(s+=a),s+='>\n                <card class="playlist-card" style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" data-content-id="'+l(o(null!=t?t.id:t,t))+'" data-content-kind="'+l(o(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,click:!0,impressions:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+">\n                    "+l((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,null!=t?t.fromHeroCover:t,{name:"heroArtwork",hash:{},data:i}))+"\n                </card>\n            </column>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+='\n                        <description style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="4" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+"</description>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,l="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(l+=a),l},9:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                            <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                            <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},13:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='            <column class="playlist-column" span="2">\n                <card class="playlist-card" style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" data-content-id="'+l(o(null!=t?t.id:t,t))+'" data-content-kind="'+l(o(null!=t?t.kind:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+">\n                    "+l((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,null!=t?t.fromHeroCover:t,{name:"heroArtwork",hash:{},data:i}))+"\n                </card>\n            </column>\n"},15:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='    <card style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" class="playlist-card';return a=e["if"].call(t,null!=t?t.showBorder:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isActionLockup:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" ',a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+l(o(null!=t?t.id:t,t))+'" data-content-kind="'+l(o(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+=">\n        "+l((e.heroArtwork||t&&t.heroArtwork||r).call(t,t,null!=t?t.fromHeroCover:t,{name:"heroArtwork",hash:{},data:i}))+'\n        <lockup class="hero-lockup"',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n            <title style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="playlist-hero-title">'+l(o(null!=t?t.name:t,t))+"</title>\n",a=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="            ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.artistName:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.program(24,i),data:i}),null!=a&&(s+=a),s+='            <button class="play-button playlist-play-button cover-button" data-content-id="'+l(o(null!=t?t.id:t,t))+"\" type='play' ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"play",targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                <title>"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n            </button>\n        </lockup>\n    </card>\n"},16:function(t,e,n,i){return" action-lockup "},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},20:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+='\n                <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="2" class="hero-description subtitle-1">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.description:t,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+"</subtitle>\n"},22:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.artistName:t,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},24:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.cardColor:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" maxLines="1" class="subtitle-2">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,"Playlist by Apple Music",{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.columns:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],142:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},3:function(t,e,n,i){return'disabled="true"'},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},7:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.artist:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},10:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},12:function(t,e,n,i){var a,r,l=e.helperMissing,o="function",s=this.escapeExpression,c='        <title maxLines="2" class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:l,typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,
data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},13:function(t,e,n,i){return"-disabled"},15:function(t,e,n,i){var a,r,l=e.helperMissing,o="function",s=this.escapeExpression,c='        <title maxLines="2" class="lockup-title';return a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'">'+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:l,typeof r===o?r.call(t,{name:"title",hash:{},data:i}):r))+"</title>\n"},17:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'        <subtitle class="lockup-subtitle">'+o((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:l,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},19:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'        <subtitle class="lockup-subtitle-2">'+o((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:l,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},21:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'        <subtitle class="lockup-subtitle-3">'+o((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:l,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<lockup type="shelf" class="action-lockup shelf-lockup" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+l(r(null!=t?t.id:t,t))+'" data-content-kind="'+l(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"navigate",targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(15,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>\n"},useData:!0})},{"hbsfy/runtime":418}],143:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=t("./template.hbs"),o=t("../../common").traits.EventMap,s=t("../../base").style,c=t("./style.hbs"),u=i.controller.MultiElementController,h=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.classes.push("reportconcern-template"),t.events=t.events||[],t.data=t.data||{},t.events.push("select"),t.styles.push(new s({styleTemplate:c})),this.strings={description:r.loc(t.data["description-loc-key"]),title:r.loc("FUSE.ReportConcern.Action")},u.call(this,t,e),o.call(this,t),a.extend(this.onSelect,{})};a.inherit(h,u),a.inherit(h,o,!0),h.prototype.template=l,e.exports=h},{"../../../util":391,"../../base":97,"../../common":133,"./style.hbs":145,"./template.hbs":146,itml:435}],144:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./title.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.data=t.data||{},t.classes.push("template"),t.classes.push("report-a-concern"),this.cancelButton=t.data.cancel||!0,this.callback=t.data.callback,this.controller=new l({data:t.data}),t.controllers.push(this.controller),o.call(this,t,e),this.navigationBarController.showCancelButton=t.data.isModal,this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController["class"]="transparent-bar",this.navigationBarController.render();var n=this.el.getElementsByTagName("reportAConcernTemplate").item(0);n&&(t.data&&t.data["concern-type"]&&n.setAttribute("concern-type",t.data["concern-type"]),n.addEventListener("change",this.handleChange.bind(this)),n.addEventListener("submit",t.data["submit-callback"].bind(this)));var i=this.el.getElementById("cancel");i&&i.addEventListener("select",this.cancel.bind(this,t.data.cancelCallback))};a.inherit(s,o),s.prototype.documentType="reportAConcernTemplate",s.prototype.titleTemplate=r,s.prototype.handleChange=function(t){"success"===t.result&&(modal.documents.length>0&&modal.popDocument(),this.callback&&this.callback())},s.prototype.cancel=function(t){modal.popDocument(),t&&t.call()},e.exports=s},{"../../../util":391,"./element":143,"./title.hbs":147,itml:435}],145:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".cancel-button {\ncolor: rgb(255, 45, 85);\nitml-align: left;\n}\n.done-button {\ncolor: rgb(255, 45, 85);\nitml-align: right;\n}\n\n.report-a-concern {\nbackground-color: rgb(239, 239, 244);\ncolor: rgb(0, 0, 0);\nfont-size: 18pt;\n}\n.report-a-concern-desc {\ncolor: rgb(96, 96, 96);\nfont-size: 15pt;\nmaxLines: 0;\n}\n.report-a-concern-title {\ncolor: rgb(96, 96, 96);\nfont-size: 15pt;\nmaxLines: 0;\n}"},useData:!0})},{"hbsfy/runtime":418}],146:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'<description class="report-a-concern-desc">'+l(r(null!=(a=null!=t?t.strings:t)?a.description:a,t))+'</description>\n<title class="report-a-concern-title">'+l(r(null!=(a=null!=t?t.strings:t)?a.title:a,t))+"</title>\n"},useData:!0})},{"hbsfy/runtime":418}],147:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<button class="cancel-button" action="cancel">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.CancelButton",{name:"loc",hash:{},data:i}))+"</button>\n<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.ReportConcern.Title",{name:"loc",hash:{},data:i}))+'</title>\n<button class="done-button" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],148:[function(t,e,n){var i=function(){Object.defineProperty(this,"controllerCache",{value:{},configurable:!1,enumerable:!1,writable:!0})};i.prototype.setCachedControllerForKey=function(t,e){this.controllerCache[t]=e},i.prototype.bustCacheForKey=function(t){this.controllerCache[t]=void 0},i.prototype.getCachedControllerForKey=function(t){return this.controllerCache[t]},i.prototype.resetControllerCache=function(){this.controllerCache={}},e.exports=i},{}],149:[function(t,e,n){function i(t){t=t||{},t.pageProfile&&(this.pageProfile=t.pageProfile),this.offlineWarningEnabled=t.offlineWarningEnabled!==!1,this._pageCache={},this.requestInFlight={},t.requireSubscription=!0,this.suppressDialogs=t.suppressDialogs||!1,o.call(this,t),h.call(this,t),t.data&&(this.data=t.data,this.data.storePlatformData&&this.cacheContent(this.data.storePlatformData)),this.retryRequests={},u.subscribe("networkChange",this.handleNetworkChange.bind(this))}var a=t("itml"),r=a.utils.keypath,l=a.event.Event,o=a.model.BaseModel,s=t("../../../util"),c=s.loc,u=s.pubSub,h=t("store-platform");s.inherit(i,o,!0),s.inherit(i,h,!0),i.prototype.constructor=i,i.prototype.pageProfile="lockup",i.prototype.fetchData=function(t){this.config=t||this.config,this.config.url&&!this.requestInFlight[this.config.url]?(this.requestInFlight[this.config.url]=!0,this.data&&s.log.warn("fetchData: preloaded page data provided with a url and data.  loading url."),s.xhr({method:this.config.method||"GET",url:this.config.url,success:this.xhrSuccess(this.config).bind(this),failure:this.xhrFailed(this.config).bind(this)})):this.data?this.dataSuccess(this.data,this.config):(s.log.warn("fetchData: no data or url"),s.xhr({method:this.config.method||"GET",url:null,success:this.xhrSuccess(this.config).bind(this),failure:this.xhrFailed(this.config).bind(this)}))},i.prototype.retry=function(){r(this,"config.retries")>0?(this.fetchData(),this.config.retries--):this.config.failure.call(this,null,c.loc("FUSE.Error.AnErrorOccurred"))},i.prototype.xhrFailed=function(t){var e=function(e,n){if(this.requestInFlight.hasOwnProperty(t.url)&&delete this.requestInFlight[t.url],e&&400===e)t.failure.call(this,e,n);else if(e&&403===e)s.account.auth({success:this.retry.bind(this),failure:t.authFailure?t.authFailure.bind(this):t.failure.bind(this)});else if(e&&418===e)t.retries=0,this.retryRequests[t.url]=function(){this.fetchData(t)}.bind(this),t.failure.call(this,e,c.loc("FUSE.Error.YoureOffline.Reconnect"),c.loc("FUSE.Error.YoureOffline"));else if(t&&t.retries>0){var i=t.waitTime||1e3;setTimeout(function(){this.retry()}.bind(this),i)}else t&&t.failure.call(this,e,n)};return e},i.prototype.xhrSuccess=function(t){var e=function(e,n){this.requestInFlight.hasOwnProperty(t.url)&&delete this.requestInFlight[t.url];var i;try{i=JSON.parse(e)}catch(a){var l=this;this.handleParseError(e,function(){t.failure.call(l,200,c.loc("FUSE.Error.AnErrorOccurred"))})}i&&(this.metrics={pageData:r(i,"metrics")||r(i,"pageData"),xhrMetrics:n},this.dataSuccess(i,t))}.bind(this);return e},i.prototype.handleParseError=function(t,e,n){var i=this;e=e||function(){},"string"==typeof t&&-1===t.indexOf("plist")&&e();var a=new DOMParser,r=a.parseFromString(t,"text/xml");if("plist"!==r.documentElement.nodeName)return null;var l=s.doc.parsePlistXML(r.documentElement);if(1===l.length&&(l=l[0]),l.action&&l.action.signout&&itms.signOut(),l.dialog&&!this.suppressDialogs){var o=l.dialog,c=[];if(o.cancelButtonString&&c.push({title:o.cancelButtonString,className:"cancel-button",callback:e}),o.okButtonString){var h={title:o.okButtonString,className:"ok-button",callback:e};o.okButtonAction&&o.okButtonAction.url&&(h.callback=function(){i.config?(i.config.url=o.okButtonAction.url,i.retries=1,i.retry()):n&&n.call(i,o.okButtonAction.url)}),c.push(h)}var d={data:{type:"error",title:s.keypath(o,"message"),subtitle:s.keypath(o,"explanation"),buttons:c},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};u.publish("showModal",{detail:d})}},i.prototype.dataSuccess=function(t,e){s.keypath(t,"storePlatformData")&&this.cacheContent(t.storePlatformData),this.contentIds=[],this.colorFetches=[],this.viewModel=e.success.call(this,t,e),this.contentIds.length>0?this.fetchContent({profile:this.pageProfile,contentIds:this.contentIds,onSuccess:this.handleFetchSuccess.bind(this),onFailure:this.handleFetchFailed.bind(this)}):this.handleFetchSuccess()},i.prototype.handleFetchFailed=function(t){s.log.warn("content fetch from store platform failed: ",t),this.dispatchEvent(new l("dataFailed"))},i.prototype.handleFetchSuccess=function(t){if(this.viewModel){if(t){var e=this,n=function(t){if(t=t instanceof Array?t:t.content||t.children)for(var i=t.length;i--;){var a=t[i].id,r=t[i].content||t[i].children;if(r)n(r);else if(a){var l=t[i].profile||e.pageProfile,o=e.lookup(a,l);t[i].empty&&(o?t[i]="function"==typeof t[i].cb?t[i].cb(o,t[i].params):o:t.splice(i,1))}}};n(this.viewModel)}this.dispatchEvent(new l("dataReady",{detail:{view:this.viewModel}}))}},i.prototype.fetchContent=function(t){this.fetch(t)},i.prototype.lookupContent=function(t,e){var n,i,a,r=t.profile||this.pageProfile;return"object"==typeof t?(i=t.id,a=t.params,n=this.lookup(i,r)):(i=t,n=this.lookup(i,r)),n?(e&&(n=e(n,a)),n):(this.contentIds.push(i),{empty:!0,id:i,cb:e,params:a,profile:r})},i.prototype.cacheContent=function(t){var e=Object.keys(t);if(e.length)for(var n=0;n<e.length;n++){var i=e[n];this.cacheData(t[i],i)}else s.log.warn("No [results] in storePlatformData profile: ",this.pageProfile,t)},i.prototype.setData=function(t,e){this._pageCache[t]=e},i.prototype.getData=function(t){return this._pageCache[t]},i.prototype.handleNetworkChange=function(){if(localStorage.setItem("Music.hasWarnedAboutConnection","0"),s.network.isOnline()&&Object.keys(this.retryRequests).length>0)for(var t=Object.keys(this.retryRequests),e=0;e<t.length;e++){var n=this.retryRequests[t[e]];n.call(this)}},e.exports=i},{"../../../util":391,itml:435,"store-platform":538}],150:[function(t,e,n){function i(t,e){e.addEventListener(t,this.handleEvent.bind(this))}var a=t("itml"),r=a.event.Event,l=t("../../../util"),o=l.audio,s=l.loc,c=function(t){t=t||{};var e=t.events||[],n=function(){var t=this.elementsWithoutEventListeners;t||(t=this.elementArray),t||(t=[this.el]),e.forEach(function(e){t.forEach(function(t){t.addEventListener&&i.call(this,e,t)},this)},this),this.elementsWithoutEventListeners=null}.bind(this);this.addEventListener("render",n),n.call(this),this.onSelect={"action-button":this.showActionMenu,"action-lockup":this.handleLockup},this.onHoldSelect={"action-lockup":this.showActionMenu},this.onChange={}};c.prototype.handleEvent=function(t){var e,n=t.target.getAttribute("class").split(" ");"select"===t.type||"disabledButSelectedEvent"===t.type?e=this.onSelect:"holdselect"===t.type?e=this.onHoldSelect:"change"===t.type&&(e=this.onChange),e&&n.forEach(function(n){var i=e[n];"function"==typeof i&&i.call(this,t)}.bind(this))},c.prototype.handleLockup=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=e.getAttribute("post-url")||"",a=this.model.lookup(n);if(a){var l=a.kind||"product_page",o=l.match(/song|uploadedAudio|uploadedVideo|radioStation/i),s=l.match(/uploadedAudio|uploadedVideo/i);if(o)if(i&&""!==i&&s){var c={dataType:"connect_detail",navigationDocument:e.ownerDocument.navigationDocument,data:{}};c.data.url=decodeURIComponent(i),this.dispatchEvent(new r("tabPush",{detail:c}))}else this.playMedia(t);else this.pushProduct(t)}},c.prototype.showActionMenu=function(t){var e=t.target.getAttribute("data-content-id"),n=this.model.lookup(e);if(n){var i=n.releaseDate||"",a=i.substring(0,i.indexOf("-")),o=[];if(n.artwork&&n.artwork.url){var c=l.artwork.getArtworkForContent({content:n});o.push(c.image)}var u={artwork:o,kind:n.kind,metadata:n};switch(n.kind){case"song":var h=n.offers[0].assets.length>0?n.offers[0].assets[0].duration:null;u.artistName=n.artistName,u.collectionName=n.collectionName,u.artistStoreID=""+n.artistId,u.collectionStoreID=n.collectionId,u.trackNumber=n.trackNumber,u.trackName=n.name,u.trackStoreID=""+n.id,u.trackDuration=h;break;default:u.albumStoreID=""+n.id,u.albumName=n.name,u.albumYear=a,u.albumGenre=n.genres&&n.genres[0]&&n.genres[0].name,u.albumItemsCount=n.trackCount,u.albumArtistName=n.artistName,u.albumArtistStoreID=""+n.artistId}var d={options:{productData:u,sourceElement:t.target},navigationDocument:modal,dataType:"menu"},p=this.el.ownerDocument.getElementsByTagName("stackTemplate");p.length>0&&"fu-page"===p.item(0).getAttribute("class")&&(d.data={buttons:[{key:s.loc("FUSE.ForYou.RecommendLess")}]}),this.dispatchEvent(new r("tabPush",{detail:d}))}},c.prototype.authAndPlay=function(t,e,n){var i={header:s.loc("FUSE.SignIn.Header"),callback:this._playMedia.bind(this,t,e,n,!0),showCancelButton:!0},a={data:i,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:a}))},c.prototype._playMedia=function(t,e,n,i){if(t&&t.length>0){for(var a=!1,r={recoId:e,items:[],selectedFilter:this.selectedFilter,controllerName:this.controllerName,tabName:this.tabName,containerType:this.containerType||0},s=0;s<t.length;s++){var c=t[s],u=this.model.lookup(c),h={};if(u){if(0===s){var d=u.kind||"product_page",p=d.match(/station/i);if(p&&!itms.accountInfo.DSID){if(!i){this.authAndPlay(t,e,n),a=!0;break}l.log.error("_playMedia: requires an auth, but we already tried for id",c)}}h={playbackId:c,productData:u},s===n&&(r.selectedTrackIndex=r.items.length),r.items.push(h)}else h={playbackId:c},l.log.error("_playMedia: playback media missing data for id",c)}!a&&r.items.length>0&&o.play(r)}else l.log.error("_playMedia: playback media missing data for ids")},c.prototype.playMediaID=function(t){this._playMedia([t])},c.prototype._findFirstLockup=function(t){for(var e=t;;){var n=e.previousSibling;if(!n||"lockup"!==n.nodeName)break;e=n}return e},c.prototype.playMedia=function(t){var e;if(t&&t.target){var n=[],i=0;e=t.target.getAttribute("data-content-id"),t.recoId=t.recoId||this.recoId;var a=this.model.lookup(e);if(a){var r=a&&a.kind&&-1!==a.kind.indexOf("radio"),o=a&&a.kind&&-1!==a.kind.indexOf("album"),s=a&&a.kind&&-1!==a.kind.indexOf("playlist");if(!r&&!o&&!s){for(var c=t.target,u=e;c&&"lockup"!==c.nodeName;)c=c.parentNode;if(c&&(u=c.getAttribute("data-content-id"),u&&(c=this._findFirstLockup(c))),c||(c=t.target,u=e),c&&"lockup"===c.nodeName&&u)for(;c&&"lockup"===c.nodeName;){var h=c.getAttribute("data-content-id");h&&(h===u&&(i=n.length),n.push(h)),c=c.nextSibling}}}0===n.length&&e&&n.push(e),n&&n.length>0?this._playMedia(n,t.recoId,i,!1):l.log.error("playMediaEvent: missing event data-content-id")}else l.log.error("playMediaEvent: missing event target")},e.exports=c},{"../../../util":391,itml:435}],151:[function(t,e,n){var i=t("itml"),a={ControllerCache:t("./controller_cache"),DataProvider:t("./data_provider"),TabComponent:t("./tab_component"),MediaPicker:t("./media_picker"),EventMap:t("./event_map"),ReportConcern:t("./report_concern")};e.exports=i.utils.extend(a,i.traits)},{"./controller_cache":148,"./data_provider":149,"./event_map":150,"./media_picker":152,"./report_concern":153,"./tab_component":154,itml:435}],152:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l=[],o=[],s=function(){this.pickerMode&&(this.handleLockup=this.handleLockupInPickerMode,this.originalRender=this.render,this.render=this._render)};s.register=function(t){var e=l.length;return l.push(t),o[e]={},e},s.prototype.handleLockupInPickerMode=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookupContent(n);this.pickMedia(i)},s.prototype._render=function(){this.pickedMedia=o[this.mediaPickerId],this.originalRender()},s.prototype.pickMedia=function(t){void 0!==this.mediaPickerId&&l[this.mediaPickerId]!==this&&"function"==typeof r.keypath(l[this.mediaPickerId],"pickMedia")?l[this.mediaPickerId].pickMedia(t):this.dispatchEvent(new a("selectMediaPickerItem",{detail:{productData:t}})),o[this.mediaPickerId]&&!r.keypath(o[this.mediaPickerId],t.id)&&(o[this.mediaPickerId][t.id]=!0),"function"==typeof this.render&&this.render()},e.exports=s},{"../../../util":391,itml:435}],153:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.event.Event,l=function(){};l.prototype._isAUCType=function(t){return"uploadedAudio"===t||"uploadedVideo"===t},l.prototype._sendReport=function(t){function e(t,e){var n=JSON.parse(e)||{};if("error"!==n.status&&t){var i={data:{type:"error",title:a.loc.loc("FUSE.ReportConcern.Success.Title"),subtitle:a.loc.loc("FUSE.ReportConcern.Success.Dialog"),buttons:[{title:a.loc.loc("OK"),className:"confirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};setTimeout(function(){a.pubSub.publish("showModal",{detail:i})},500)}else{a.log.error("Report A Concern FAILURE: "+e);var r={data:{type:"error",title:a.loc.loc("FUSE.ReportConcern.Failure.Title"),subtitle:a.loc.loc("FUSE.ReportConcern.Failure.Dialog"),buttons:[{title:a.loc.loc("OK"),className:"confirm-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};setTimeout(function(){a.pubSub.publish("showModal",{detail:r})},500)}}if(a.urls.reportConcern()){var n=a.urls.build("reportConcern",t);a.xhr({method:"POST",url:n,failure:e.bind(this,!1),success:e.bind(this,!0)})}},l.prototype._showReportAConcernSheet=function(t,e,n,i,a){var l={data:{"concern-type":e,"concern-key":n,"description-loc-key":i,"submit-callback":function(){return function(t){"cancelButton"!==t.buttonIdentifier&&(a.concernTypeId=t.result,a.concernItemType=n,this._sendReport(a))}}().bind(this)},dataType:"report_concern",navigationDocument:modal};this.dispatchEvent(new r("tabPush",{detail:l}))},l.prototype.reportPostSheetCallback=function(t){var e=t.target.getAttribute("data-connect-id"),n=t.target.getAttribute("data-target-id"),i=t.target.getAttribute("data-target-type"),a={activity:e};this._isAUCType(i)&&(a.concernItemId=n,a.concernItemAUCType=i),this._showReportAConcernSheet(t,"artist-post","ARTIST_POST","FUSE.ReportConcern.ArtistPost.Description",a)},l.prototype.reportCommentSheetCallback=function(t){var e=t.target.getAttribute("data-comment-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"user-comment","USER_COMMENT","FUSE.ReportConcern.UserComment.Description",n)},l.prototype.reportArtistCommentSheetCallback=function(t){var e=t.target.getAttribute("data-comment-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"artist-comment","ARTIST_COMMENT","FUSE.ReportConcern.ArtistComment.Description",n)},l.prototype.reportSharedPlaylistSheetCallback=function(t){var e=t.target.getAttribute("data-playlist-id"),n={concernItemId:e};this._showReportAConcernSheet(t,"shared-playlist","PUBLIC_PLAYLIST","FUSE.ReportConcern.SharedPlaylist.Description",n)},e.exports=l},{"../../../util":391,itml:435}],154:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=["tabPush","handleAskToBuy"],l=t("../../../util").pubSub,o=function(){this.controllers&&(this.addEventListener("addController",function(t){var e=t.detail.controller;this.addEventDelegates(e,r)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;this.removeEventDelegates(e,r)}.bind(this)),this.controllers.forEach(function(t){this.addEventDelegates(t,r)},this))};o.prototype.pushProduct=function(t){var e=t.target,n=e.getAttribute("data-content-id"),i=this.model.lookup(n),r=t.recoId;if(i){var l=i.kind||"album_page",o={data:i,dataType:l,recoId:r,navigationDocument:e.ownerDocument.navigationDocument,tabName:this.tabName,selectedFilter:this.selectedFilter||"",controllerName:this.controllerName};this.dispatchEvent(new a("tabPush",{detail:o}))}},o.prototype.pushUrl=function(t){var e,n=t.target,i=n.getAttribute("data-link-url"),r=n.getAttribute("data-container-id"),l=n.getAttribute("data-link-title"),o=n.getAttribute("data-content-kind"),s=n.artworkData;e="https://itunes.apple.com/festival"===i?{data:{},dataType:"festival",navigationDocument:n.ownerDocument.navigationDocument}:{data:{artworkData:s,id:r,url:decodeURIComponent(i),title:l},dataType:o,navigationDocument:n.ownerDocument.navigationDocument},this.dispatchEvent(new a("tabPush",{detail:e}))},o.prototype.openUrl=function(t){var e=t.target,n=e.getAttribute("data-link-url");n&&openURL(n)},o.prototype.pushMorePage=function(t){var e,n=t.target,i=n.getAttribute("data-section-id");if(e=this.model.getData?this.model.getData(i):this.model.getDataForSectionId(i)){var r={data:e,dataType:"more_page",navigationDocument:n.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:r}))}},o.prototype.pushModal=function(t,e){if(e){var n={data:e,dataType:e.dataType,navigationDocument:modal,options:{type:e.modalType}};l.publish("showModal",{detail:n})}},o.prototype.pushLearnMore=function(t){var e=t.target,n=e.getAttribute("type-key"),i=null,r=e.getAttribute("push-type");i="sheet"===r?modal:e.ownerDocument.navigationDocument;var l={data:{typeKey:n},dataType:"learn_more_page",navigationDocument:i};this.dispatchEvent(new a("tabPush",{detail:l}))},o.prototype.handleAskToBuy=function(t){var e={buyInfo:t,document:this.el.ownerDocument},n=new a("handleAskToBuy",{detail:e});this.dispatchEvent(n)},o.prototype.tabDelegatedEvents=r,e.exports=o},{"../../../util":391,itml:435}],155:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=t("../../base/controller"),l=t("../../common").traits.DataProvider,o=t("../../base").style,s=t("./style.hbs"),c=t("./template.hbs"),u=i.pubSub,h=t("../../account/subscribe"),d=function(t,e){t=t||{},t.events=t.events||[],t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=s,t.styles.push(new o(t)),this.controllerName="upsellBanner",this.model=new l({offlineWarningEnabled:!1}),this.displayBanner="NONE",this.updateBannerUIData(),this.metricsIgnoreController=!0,r.call(this,t,e),u.subscribe("serviceChange",this.handleServiceChange.bind(this)),i.extend(this.onSelect,{"free-trial-close-button":this.handleFreeTrialCloseButton.bind(this),"autorenew-close-button":this.handleAutoRenewCloseButton.bind(this),"start-free-trial":this.handleStartFreeTrial.bind(this),"turn-on-autorenew":this.handleTurnOnAutorenew.bind(this)});var n=localStorage.getItem("Music.Banners.inTestMode");this.delayFreeTrialBannerInMillis=n?3e5:2592e5,this.delayT7BannerInMillis=n?12e5:6048e5,this.delayT3BannerInMillis=n?6e5:2592e5};i.inherit(d,r),d.prototype.template=c,d.prototype.updateBannerUIData=function(){if(!this.isFreeTrialBannerShowing()&&this.canShowFreeTrialBanner())i.account.getDSID()?this.hasDataForNewTrialBanner||this.getSubsriptionOffersInProgress?this.isEligibleForFreeTrial&&this.showFreeTrialBanner():(this.model.addEventListener("dataReady",this.handleSubscriptionOffersDataReady.bind(this)),this.getSubscriptionOffers()):this.showFreeTrialBanner();else if(!this.isAutoRenewBannerShowing()&&this.canShowAutoRenewBanner())if(this.hasAutoRenewData){if(this.isActiveInFreeTrial){var t=this.viewModel&&this.viewModel.expireDateInMillis,e=this.getAutoRenewTimePeriod(t);("T3"===e&&!this.hasDataForT3Banner||"T7"===e&&!this.hasDataForT7Banner)&&(this.getSubscriptionInfoInProgress||this.getSubscriptionInfo())}}else this.getSubscriptionInfoInProgress||(this.model.addEventListener("dataReady",this.handleSubscriptionInfoDataReady.bind(this)),this.getSubscriptionInfo())},d.prototype.isFreeTrialBannerShowing=function(){return"FreeTrial"===this.displayBanner},d.prototype.isAutoRenewBannerShowing=function(){return"AutoRenew"===this.displayBanner},d.prototype.showFreeTrialBanner=function(){this.displayBanner="FreeTrial"},d.prototype.showAutoRenewBanner=function(){this.displayBanner="AutoRenew"},d.prototype.hideBanner=function(){this.displayBanner="NONE"},d.prototype.canShowFreeTrialBanner=function(){if(i.account.isEligibleForAppleMusic()||this.hasClosedFreeTrialBanner())return!1;var t=Date.now(),e=localStorage.getItem("Music.AppStartDateMillis");if(e){var n=parseInt(e),a=n+this.delayFreeTrialBannerInMillis;return t>a}return localStorage.setItem("Music.AppStartDateMillis",t),!1},d.prototype.canShowAutoRenewBanner=function(){return i.account.isEligibleForAppleMusic()&&!this.hasClosedT3Banner()},d.prototype.handleDataFetchSuccess=function(t){return t},d.prototype.handleDataFetchFailure=function(){this.getSubscriptionInfoInProgress=!1,this.getSubsriptionOffersInProgress=!1},d.prototype.getSubscriptionOffers=function(){this.getSubsriptionOffersInProgress=!0;var t=i.urls.getSubscriptionOffersSrv()+"?mode=banner";this.model.fetchData({url:t,success:this.handleDataFetchSuccess.bind(this),failure:this.handleDataFetchFailure.bind(this)})},d.prototype.handleSubscriptionOffersDataReady=function(t){if(this.getSubsriptionOffersInProgress=!1,i.keypath(t,"detail.view")){if(this.viewModel=t.detail.view,this.viewModel.isBannerDisabled)return;var e=this.viewModel.userInfo||{};e.isEligibleForFreeTrial?this.showFreeTrialBanner():this.hideBanner(),this.hasDataForNewTrialBanner=!0}this.render()},d.prototype.getSubscriptionInfo=function(){this.getSubscriptionInfoInProgress=!0,this.model.fetchData({url:i.urls.getSubscriptionInfoSrv()+"?detail=lite&subscriptionType=music&mode=banner",success:this.handleDataFetchSuccess.bind(this),failure:this.handleDataFetchFailure.bind(this),authFailure:this.handleDataFetchFailure.bind(this),retries:1})},d.prototype.handleSubscriptionInfoDataReady=function(t){if(this.getSubscriptionInfoInProgress=!1,i.keypath(t,"detail.view")){if(this.viewModel=t.detail.view,this.viewModel.isBannerDisabled)return;if(this.hasAutoRenewData=!0,this.isActiveInFreeTrial=this.viewModel.isInFreeTrial&&this.viewModel.isActive,this.isActiveInFreeTrial&&!this.viewModel.isAutoRenewEnabled){var e=this.getAutoRenewTimePeriod(this.viewModel.expireDateInMillis);"NONE"!==e?"T3"===e?(this.hasDataForT3Banner=!0,this.hasClosedT3Banner()||this.showAutoRenewBanner()):"T7"===e&&(this.hasDataForT7Banner=!0,this.hasClosedT7Banner()||this.showAutoRenewBanner()):this.hideBanner(),this.render()}}},d.prototype.getAutoRenewTimePeriod=function(t){if(t){var e=Date.now();if(t>e){var n=t-this.delayT3BannerInMillis,i=t-this.delayT7BannerInMillis;if(e>=n)return"T3";if(e>=i)return"T7"}}return"NONE"},d.prototype.getBannerLocalData=function(t){var e,n="Music.Banner."+t+"."+i.account.getDSID(),a=localStorage.getItem(n);return a&&(e=JSON.parse(a)),e},d.prototype.setBannerLocalData=function(t,e){var n="Music.Banner."+t+"."+i.account.getDSID(),a=JSON.stringify(e);localStorage.setItem(n,a)},d.prototype.hasClosedFreeTrialBanner=function(){var t=this.getBannerLocalData("FreeTrial");return t&&t.closed},d.prototype.setClosedFreeTrialBanner=function(){var t=this.getBannerLocalData("FreeTrial")||{};t.closed=!0,this.setBannerLocalData("FreeTrial",t)},d.prototype.handleFreeTrialCloseButton=function(){this.setClosedFreeTrialBanner(),this.hideBanner(),this.render()},d.prototype.hasClosedT3Banner=function(){var t=this.getBannerLocalData("AutoRenew");return t&&t.closedT3},d.prototype.hasClosedT7Banner=function(){var t=this.getBannerLocalData("AutoRenew");return t&&t.closedT7},d.prototype.setClosedAutoRenewBanner=function(){var t=this.getBannerLocalData("AutoRenew")||{},e=this.getAutoRenewTimePeriod(this.viewModel.expireDateInMillis);"T3"===e?t.closedT3=!0:t.closedT7=!0,this.setBannerLocalData("AutoRenew",t)},d.prototype.handleAutoRenewCloseButton=function(){this.setClosedAutoRenewBanner(),this.hideBanner(),this.render()},d.prototype.handleStartFreeTrial=function(){var t=new h({data:this.viewModel,showCancelButton:!0});this.addEventDelegates(t,["tabPush","handleAskToBuy","checkLocalManifestVersion"]),t.addEventListener("handleSubscribeDone",this.handleSubscriptionSuccess.bind(this)),modal.pushDocument(t.el,{}),t.initSubscribeData(),i.metrics.track(t,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"Picker"})},d.prototype.handleSubscriptionSuccess=function(){this.hideBanner(),this.render(),modal.popDocument()},d.prototype.handleTurnOnAutorenew=function(){this.setAutoRenewOn()},d.prototype.setAutoRenewOn=function(){var t=i.urls.updateAutoRenewStateSrv(),e={url:t,params:"subscriptionType=music&enableAutoRenew=true",method:"POST",success:this.handleAutoRenewSuccess.bind(this),failure:this.handleAutoRenewFailure.bind(this)};i.xhr(e)},d.prototype.handleAutoRenewSuccess=function(t){var e=JSON.parse(t);if(e&&0!==e.status)this.showErrorUI(e.errorNumber,e.userPresentableErrorMessage);else{this.hideBanner(),this.render();var n={data:{title:a.loc("FUSE.AutoRenew.Success.Title"),subtitle:a.loc("FUSE.AutoRenew.Success.Subtitle"),buttons:[{title:a.loc("OK")}]},dataType:"dialog",navigationDocument:modal};u.publish("showModal",{detail:n})}},d.prototype.handleAutoRenewFailure=function(t){403===t?i.account.auth({success:this.setAutoRenewOn.bind(this)}):this.showErrorUI()},d.prototype.showErrorUI=function(t,e){var n;n=3566===t?{title:a.loc("FUSE.AutoRenew.SubscriptionExpired"),buttons:[{title:a.loc("FUSE.AutoRenew.Subscribe.Button"),className:"view-plans-button",callback:this.handleStartFreeTrial.bind(this)},{title:a.loc("FUSE.NotNow.Uppercase")}]}:{title:e||a.loc("FUSE.Error.GenericDataError"),buttons:[{title:a.loc("OK")}]};var i={data:n,dataType:"dialog",navigationDocument:modal};u.publish("showModal",{detail:i})},d.prototype.handleServiceChange=function(){this.hideBanner(),this.getSubsriptionOffersInProgress=!1,this.getSubsriptionInfoInProgress=!1,this.hasDataForNewTrialBanner=!1,this.isActiveInFreeTrial=!1,this.hasAutoRenewData=!1,this.hasDataForT3Banner=!1,this.hasDataForT7Banner=!1,this.updateBannerUIData(),this.render()},d.prototype.handleBannerAppear=function(t){
if("stackTemplate"===t.target.nodeName){var e=this.displayBanner;this.updateBannerUIData(),e!==this.displayBanner&&this.render()}},e.exports=d},{"../../../util":391,"../../account/subscribe":75,"../../base":97,"../../base/controller":95,"../../common":133,"./style.hbs":156,"./template.hbs":157}],156:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".empty-container {\n  padding: 0pt 0pt 0pt 0pt;\n  margin: 0pt 0pt 0pt 0pt;\n}"},useData:!0})},{"hbsfy/runtime":418}],157:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <grid class="empty-container"></grid>    \n'},3:function(t,e,n,i){var a,r=e.helperMissing,l="    <section>\n";return a=(e.equal||t&&t.equal||r).call(t,null!=t?t.displayBanner:t,"AutoRenew",{name:"equal",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),a=(e.equal||t&&t.equal||r).call(t,null!=t?t.displayBanner:t,"FreeTrial",{name:"equal",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"    </section>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <card id="upsell-banner" type="billboard" class="upsell-banner-container" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"navigate",targetType:"AutoRenewBanner"},data:i}),null!=a&&(o+=a),o+='>\n	        <button big-hit="true" class="top-left autorenew-close-button" type="imagetext" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"CloseBannerAutoRenewButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+='><img style="itml-img-mask-color:rgb(0,0,0);" src="resource://UniversalSmallClose" width="8" height="8"/></button>\n	        <img src="resource://AppleMusic-32h.png" alt="Apple Music" width="138" height="32" />\n	        <text class="spacer"></text>\n	        <text class="center upsell-banner-text"><span class="callout-emphasized">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Banner.AutoRenew.Header",{name:"loc",hash:{},data:i}))+'</span></text>\n	        <text class="spacer"></text>\n	        <button class="turn-on-autorenew action-button-outline caption2-emphasized center" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"BannerAutoRenewButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+">"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Banner.AutoRenew.RenewalButton",{name:"loc",hash:{},data:i}))+"</button>\n	  </card>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='          <card id="upsell-banner" type="billboard" class="upsell-banner-container" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"navigate",targetType:"FreeTrialBanner"},data:i}),null!=a&&(o+=a),o+='>\n            <button big-hit="true" class="top-left free-trial-close-button" type="imagetext" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"CloseBannerStartFreeTrialButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+='><img style="itml-img-mask-color:rgb(0,0,0);" src="resource://UniversalSmallClose" width="8" height="8"/></button>\n            <img src="resource://AppleMusic-32h.png" alt="Apple Music" width="138" height="32" />\n            <text class="spacer"></text>\n            <text class="center upsell-banner-text"><span class="callout">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Banner.FreeTrial.Header",{name:"loc",hash:{},data:i}))+'</span><br /><span class="callout-emphasized">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Banner.FreeTrial.Header2",{name:"loc",hash:{},data:i}))+'</span></text>\n            <text class="spacer"></text>\n            <button class="start-free-trial action-button-outline caption2-emphasized center" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"BannerStartFreeTrialButton",targetType:"button"},data:i}),null!=a&&(o+=a),o+">"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Banner.FreeTrial.StartTrialButton",{name:"loc",hash:{},data:i}))+"</button>\n          </card>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=(e.equal||t&&t.equal||r).call(t,null!=t?t.displayBanner:t,"NONE",{name:"equal",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(l+=a),l},useData:!0})},{"hbsfy/runtime":418}],158:[function(t,e,n){e.exports={}},{}],159:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("../../common").traits.TabComponent,l=i.loc,o=t("../helpers.js"),s=t("./signIn"),c=t("../recommendations/element"),u=t("../partials/nav_title.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||l.loc("FUSE.NavBar.Connect");var n,u=t.data||{},d=i.screen.getCurrentOrientation();n="landscape"===d?i.screen.getScreenDimensions().width:i.screen.getScreenDimensions().height,u.bgImageName=i.image.getBackgroundImageResource("ConnectBg"),u.screenSize=i.screen.sizeForScreenDimension(),this.isSignedIn()?(this.controller=new c({data:u,template:h}),this.setupPostPermissions()):(u.signedOut=!0,this.controller=new s({data:u,template:h})),t.controllers.push(this.controller),a.call(this,t,e),r.call(this),o.call(this)};i.inherit(d,a),i.inherit(d,r,!0),i.inherit(d,o,!0),d.prototype.documentType="stackTemplate",d.prototype.titleTemplate=u,e.exports=d},{"../../../util":391,"../../base/document":96,"../../common":133,"../helpers.js":174,"../partials/nav_title.hbs":187,"../recommendations/element":201,"./signIn":160,"./template.hbs":161}],160:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l=r.loc,o=t("../../base").style,s=t("../../common").traits.EventMap,c=i.controller.MultiElementController,u=t("../../common").traits.TabComponent,h=t("../style.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styleTemplate=h,t.styles.push(new o(t)),t.events=t.events||[],t.events.push("select"),this.data=t.data,c.call(this,t,e),s.call(this,t),u.call(this,t),r.extend(this.onSelect,{"signin-button":this.signIn}),this.render()};r.inherit(d,c),r.inherit(d,s,!0),r.inherit(d,u,!0),d.prototype.signIn=function(){var t={button:l.loc("FUSE.SignInButton"),header:l.loc("FUSE.Connect.SignIn.Header"),subheader:l.loc("FUSE.Connect.SignIn.SubHeader"),showCancelButton:!0},e={data:t,dataType:"signin",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:e}))},e.exports=d},{"../../../util":391,"../../base":97,"../../common":133,"../style.hbs":205,itml:435}],161:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <section id="coldstart-statusbar-section"></section>\n\n    <card>\n        <background>\n            <img src="'+l(r(null!=(a=null!=t?t.data:t)?a.bgImageName:a,t))+'" />\n        </background>\n        ';return a=(e.margin||t&&t.margin||o).call(t,"10pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n\n        <title class="coldstart-title">'+l((e.loc||t&&t.loc||o).call(t,"FUSE.Connect.ColdStart.Title",{name:"loc",hash:{},data:i}))+'</title>\n\n        <divider class="coldstart-spacer-'+l(r(null!=(a=null!=t?t.data:t)?a.screenSize:a,t))+'"/>\n\n',a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.signedOut:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+"    </card>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'            <subtitle class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.SubTitle",{name:"loc",hash:{},data:i}))+'</subtitle>\n\n            <list class="coldstart-button-list">\n                <button class="signin-button">\n                    <text>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.SignInButton",{name:"loc",hash:{params:'{"toUpperCase": true}'},data:i}))+"</text>\n                </button>\n            </list>\n"},4:function(t,e,n,i){var a,r="\n";return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.hasFollows:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+"\n"},5:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                <subtitle maxLines="2" class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SubTitleLine1",{name:"loc",hash:{},data:i}))+'</subtitle>\n                <button big-hit="true" maxLines="2" class="coldstart-subtitle-link view-following">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.LowSignal.SeeWhoYouAreFollowing",{name:"loc",hash:{},data:i}))+"</button>\n"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                <subtitle class="coldstart-subtitle">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.SubTitle",{name:"loc",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r="    <grid>\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"            ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.data:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r+="\n\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],162:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),l=i.controller.MultiElementController,o=function(t,e){t=t||{},t.data=t.data||{},t.data.id&&(this.data=t.data),l.call(this,t,e)};a.inherit(o,l),o.prototype.template=r,e.exports=o},{"../../../util":391,"./template.hbs":164,itml:435}],163:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),l=t("./element"),o=i.controller.DocumentController,s=function(t,e){if(t=t||{},t.classes=t.classes||[],t.controllers=t.controllers||[],t.classes.push("template"),!t.controllers.length){var n=new l({data:t.data,template:r});t.controllers.push(n)}o.call(this,t,e)};a.inherit(s,o),s.prototype.documentType="socialPostTemplate",e.exports=s},{"../../../util":391,"./element":162,"./template.hbs":164,itml:435}],164:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='    <lockup data-content-id="'+l(r(null!=(a=null!=t?t.data:t)?a.id:a,t))+'" data-content-type="'+l(r(null!=(a=null!=t?t.data:t)?a.type:a,t))+'">\n        ';return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.image:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.title:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+="\n        ",a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"\n    </lockup>\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'<img style="itml-img-treatment: artist-circle;" src="'+l(r(null!=(a=null!=t?t.data:t)?a.image:a,t))+'"></img>'},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return"<title>"+l(r(null!=(a=null!=t?t.data:t)?a.title:a,t))+"</title>"},6:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<subtitle>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.data:t)?a.subtitle:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</subtitle>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.data:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],165:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=a.pubSub,o=t("./template.hbs"),s=i.event.Event,c=t("../../base").style,u=t("../../base/controller"),h=t("../../common").traits.DataProvider,d=t("../helpers.js"),p=t("../../common").traits.ReportConcern,m=t("../style.hbs"),f=t("../partials/comment.hbs"),g=t("../partials/comment_count.hbs"),b=t("../partials/divider.hbs"),v=function(t,e){t=t||{},t.data=t.data||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new c(t)),t.events=t.events||[],t.events.push("change"),this.postViewModel=[],this.commentsViewModel=[],this.postDetail=!0,this.isLargeScreen=!!a.screen.sizeForScreenDimension().match(/l|xl/g),this.post=t.data.post,this.post&&(this.tintInfo=this.post.heroImage),t.styles.push(new c({styleTemplate:m,tintInfo:this.tintInfo})),this.url=t.data.url,this.id=t.data.id,this.likesData=t.data.likes||{},this.viewPost=a.urls.post()+this.id,this.controllerName="connect-detail",this.model=new h,this.model.addEventListener("dataReady",this.commentsDataReady.bind(this)),this.hasConnectRestrictions=a.enablers.hasConnectRestrictions,u.call(this,t,e),d.call(this,t),a.extend(this.onSelect,{"open-url":this.openURL,"more-comments":this.loadMoreComments,"view-mention":this.viewProfile,"view-profile":this.viewProfile,"view-product":this.pushProduct,"delete-comment":this.deleteComment,"share-button":this.share,"like-button":this.like,"delete-post":this.deletePost,"report-concern":this.reportPostSheetCallback,"report-comment":this.reportCommentSheetCallback,"play-media":this.playMedia,"play-button":this.playMedia}),this.url?this.fetchPost():this.id?(this.url=this.viewPost,this.fetchPost()):this.post&&(this.setPostData(this.post),this.getComments(),a.keypath(this,"post._originalHeroImage.url")||(this.noHeroUber=!0)),a.account.getProfile({success:this.handleProfile.bind(this),failure:this.handleProfile.bind(this)}),this.handleRenderAttempt()};a.inherit(v,u),a.inherit(v,d,!0),a.inherit(v,p,!0),v.prototype.template=o,v.prototype.handleProfile=function(t){this.userProfile=t||{}},v.prototype.loadMoreComments=function(){this.getComments("next")},v.prototype.getComments=function(t){if(!this.hasConnectRestrictions){var e=this.remainingCount||this.totalComments,n=a.serverConstants.defaultCommentFetchCount(),i=e&&e-n===1?n+1:n,r={activity:this.post.id,limit:i},l=a.urls.comments();if(l){if("next"===t&&!this.offsetId||"next"===t&&this.lastOffSet===this.offsetId)return void(this.loading=!1);"next"===t&&this.offsetId&&(r.offsetId=this.offsetId,this.lastOffSet=this.offsetId),this.model.fetchData({method:"GET",url:l+a.query.build(r),success:this.commentsSuccess.bind(this),failure:this.commentsFailure.bind(this),eventType:t,retries:1})}else this.commentsDataReady()}},v.prototype.commentsSuccess=function(t,e){var n,i=this.createViewForComments(t);return"next"===e.eventType?this.commentsViewModel=a.prune(this.commentsViewModel.concat(i),function(t){return t.id}):this.commentsViewModel=i,this.remainingCount=this.totalComments-this.commentsViewModel.length,n="FUSE.Connect.Detail.RemainingComments",n+=this.remainingCount>1?"":".Singular",this.remainingCountText=r.loc(n,{count:this.remainingCount}),t.comments&&0===t.comments.length&&(this.remainingCount=0),this.showCount=this.remainingCount>0,this._renderCommentsChange(i),this.commentsViewModel},v.prototype.commentsFailure=function(t,e){a.log.warn("comments Request Failure: ",t),this.errorMessage=e||t.error||t.serviceError,this.commentsDataReady()},v.prototype.createViewForComments=function(t){for(var e,n=[],i=t.comments||[],a=0;a<i.length;++a)e=this.processCommentNode(i[a]),n.push(e);return n},v.prototype.processCommentNode=function(t){var e=t.ownerEntityId,n=t.admin&&t.admin.entityId,i=itms.accountInfo.DSID;return e&&e===i&&(t.isOwner=!0,t.hasDeletePower=!0),n&&n===i&&(t.hasDeletePower=!0),t.dateCreated&&(t.timeSincePost=a.loc.date.timeSince(t.dateCreated)),this.model.setData(t.id,t),t.reportCommentEnabled=a.enablers.reportAConcern,t=this.setCommentAttribution(t)},v.prototype.setCommentAttribution=function(t){var e=t.isAttributed&&t.admin,n=t.owner&&t.owner.name,i={admin:!1,name:"<b>"+n+"</b>",fullName:"<b>"+n+"</b>",handle:t.owner.handle};return e&&(i.admin=!0,i.name="<b>"+e.name+"</b>",i.handle=e.handle,i.fromBand=r.loc("FUSE.Connect.Feed.FromBand",{band:"<b>"+n+"</b>"}),i.fullName=r.loc("FUSE.Connect.Feed.AdminFromBand",{admin:e.name,band:"<b>"+n+"</b>"})),t.author=i,t},v.prototype.commentsDataReady=function(t){var e=a.keypath(t,"detail.view")||[],n=e.length&&e[e.length-1];this.offsetId=n&&n.id},v.prototype._renderCommentsChange=function(t){var e,n=this.el.ownerDocument.createDocumentFragment(),i=this.el.ownerDocument.getElementById("comment-section"),r=this.el.ownerDocument.getElementById("more-comments-section"),l=this.el.ownerDocument.getElementById("comments-loading-indicator");if(i){l&&l.parentNode.removeChild(l);for(var o=0;o<t.length;o++)t[o].post=this.postViewModel[0],e=a.parser.parse(f(t[o]),this.el.ownerDocument),e&&n.appendChild(e);i.appendChild(n);var s=this.el.ownerDocument.getElementById("more-comments");s&&s.parentNode.removeChild(s);var c=this.el.ownerDocument.getElementById("more-divider");if(c&&c.parentNode.removeChild(c),this.showCount){var u=a.parser.parse(b({className:"more-divider",post:this.post}),this.el.ownerDocument);r.parentNode.insertBefore(u,r);var h=a.parser.parse(g({remainingCountText:this.remainingCountText}),this.el.ownerDocument);r.appendChild(h)}}},v.prototype.fetchPost=function(){this.postModel=new h,this.postModel.addEventListener("dataReady",this.postDataReady.bind(this)),this.url&&this.postModel.fetchData({method:"GET",url:this.url,success:this.postSuccess.bind(this),failure:this.postFailure.bind(this),retries:1})},v.prototype.postSuccess=function(t){var e=this.createViewForPosts(t);return e},v.prototype.postFailure=function(t,e){a.log.warn("Fetching post failed: ",t),this.errorMessage=e||t.error||t.serviceError,this.renderView()},v.prototype.ownerProfileSuccess=function(t){var e=t||{};this.insertOwnerProfile(e,this.postViewModel),this.ownerIds=[],this.postDataReady()},v.prototype.postDataReady=function(t){var e=a.keypath(t,"detail.view");e.length&&(e[0].content&&(e=e[0].content),this.postViewModel=e,this.post=e[0],this.getComments()),this.ownerIds.length?this.postModel.fetchContent({contentIds:this.ownerIds,profile:this.postModel.pageProfile,onSuccess:this.ownerProfileSuccess.bind(this),onFailure:this.ownerProfileSuccess.bind(this)}):(this.setPostData(this.postViewModel),this.handleRenderAttempt())},v.prototype.setPostData=function(t){var e=t instanceof Array?t:[t],n=e[0];n&&(this.post=n,this.postViewModel=e,this.totalComments=parseInt(n.commentCount,10)||0,this.hasComments=this.totalComments>0,this.hasOwnerProfile=!0,this.postActions=null,a.enablers.reportAConcern&&(this.postActions={id:n.id,targetId:n.targetId,targetType:n.targetType,admin:!1,text:r.loc("FUSE.Connect.Detail.ReportConcern"),className:"report-concern"}),this.handlePermissions(n),this.model.setData(n.id,n))},v.prototype.handleRenderAttempt=function(){this.postViewModel&&this.hasOwnerProfile&&(!this.tintInfo&&this.post&&this.post.heroImage&&this.dispatchEvent(new s("updateDocumentStyles",{detail:{style:new c({styleTemplate:m,tintInfo:this.post.heroImage})}})),this.renderView())},v.prototype.renderView=function(){this.loading=!1,this.render()},v.prototype.handlePermissions=function(t){for(var e=a.account.profilePermissions(),n=a.keypath(t,"owner.entityId"),i=0;i<e.length;i++){var l=e[i].entityId,o=e[i].dsId;if(n===l||n===o){this.postActions={id:t.id,admin:!0,text:r.loc("FUSE.Connect.Detail.DeletePost"),className:"delete-post"};break}}},v.prototype.comment=function(t){a.account.showTermsIfRequired({successCallback:this.submitComment.bind(this,t)})},v.prototype.submitComment=function(t){function e(t){if(t.post=c,u=a.parser.parse(f(t),this.el.ownerDocument),d){var e=d.firstChild;e?d.insertBefore(u,e):d.appendChild(u),getActiveDocument().scrollToTop()}}function n(t,n){var i=JSON.parse(n)||{};if("error"!==i.status&&t){if(i.comment){var a=this.processCommentNode(i.comment);0===parseInt(a.dateCreated,10)&&(a.dateCreated=Date.now()),u||e.call(this,a);var r=u.getElementsByTagName("button")||[];this.commentsViewModel.push(a),u.setAttribute("id",a.id);for(var l=0;l<r.length;l++){var o=r.item(l);o.setAttribute("data-comment-id",a.id)}}}else d&&u&&d.removeChild(u)}var i=a.keypath(t,"target.tagName"),r=a.keypath(t,"comment")||"",l=a.keypath(t,"commenter")||this.userProfile.entityId,o=a.keypath(t,"isAttributed"),s=a.keypath(t,"authorType")||"user",c=this.postViewModel[0];if("commentTemplate"===i&&""!==r.trim()){var u,h={isAttributed:o,commentText:r,target:{id:c.id,type:"activity"},owner:{id:l,type:s}},d=this.el.ownerDocument.getElementById("comment-section");a.xhr({method:"POST",data:h,headers:{"Content-Type":"application/json; charset=utf-8"},url:a.urls.comment(),failure:n.bind(this,!1),success:n.bind(this,!0)})}},v.prototype.deleteComment=function(t){var e=t.target.getAttribute("data-comment-id"),n={data:{title:r.loc("FUSE.Connect.Detail.DeleteCommentDialogTitle"),subtitle:r.loc("FUSE.Connect.Detail.DeleteCommentDialogMessage"),buttons:[{title:r.loc("FUSE.CancelButton"),className:"cancel-button"},{title:r.loc("FUSE.DeleteButton"),className:"delete-button",callback:this.handleDeleteCommentConfirm.bind(this,e)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};l.publish("showModal",{detail:n})},v.prototype.handleDeleteCommentConfirm=function(t){var e=a.urls.build("deleteComment",{commentId:t}),n=this.el.ownerDocument,i=n.getElementById(t);e&&(i.parentNode.removeChild(i),a.xhr({method:"GET",url:e,failure:function(t){a.log.error("deleteComment failed: ",t)},success:function(){}}))},v.prototype.deletePost=function(t){var e=a.urls.deleteSocialPost(),n=t.target.getAttribute("data-connect-id");if(e&&n){var i={data:{title:r.loc("FUSE.Connect.Detail.DeletePostDialogTitle"),subtitle:r.loc("FUSE.Connect.Detail.DeletePostDialogMessage"),buttons:[{title:r.loc("FUSE.CancelButton"),className:"cancel-button"},{title:r.loc("FUSE.DeleteButton"),className:"delete-button",callback:this.handleDeletePostConfirm.bind(this,e,n)}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};l.publish("showModal",{detail:i})}},v.prototype.handleDeletePostConfirm=function(t,e){var n={activity:e.replace("sa.","")};a.xhr({method:"POST",url:t+a.query.build(n),success:function(){l.publish("postDeleted",{id:e}),getActiveDocument().navigationDocument.popDocument()},failure:function(t){a.log.error("Connect Post Delete Failure: ",t)}})},v.prototype.handleRotation=function(){this.loading=!1,this.render();var t=this.el.ownerDocument.getElementById("comments-loading-indicator");t&&t.parentNode.removeChild(t)},e.exports=v},{"../../../util":391,"../../base":97,"../../base/controller":95,"../../common":133,"../helpers.js":174,"../partials/comment.hbs":180,"../partials/comment_count.hbs":181,"../partials/divider.hbs":183,"../style.hbs":205,"./template.hbs":167,itml:435}],166:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../common").traits.TabComponent,l=t("../../base/document"),o=t("../helpers.js"),s=t("../partials/nav_title.hbs"),c=i.loc,u=function(t,e){t=t||{},t.data=t.data||{},t.controllers=t.controllers||[],t.name=c.loc("FUSE.NavBar.Connect"),t.watchedAttributes=["postButtonText","postPlaceholderText","scrollNewCommentToView","showKeyboard","commentAsText","myselfText","asText","class"],t.scrollNewCommentToView="false",t.postButtonText=c.loc("FUSE.Connect.Detail.Post"),t.postPlaceholderText=c.loc("FUSE.Connect.Detail.Comment"),t.commentAsText=c.loc("FUSE.Connect.Detail.CommentAs"),t.myselfText=c.loc("FUSE.Connect.Detail.Myself"),t.asText=c.loc("FUSE.Connect.Detail.As"),t.showKeyboard=t.data.showKeyboard,t["class"]="post-detail",t.controllers.length||(this.controller=new a({data:t.data}),t.controllers.push(this.controller)),l.call(this,t,e),r.call(this),o.call(this),this.controller&&(this.el.addEventListener("change",this.controller.comment.bind(this.controller)),this.controller.addEventListener("updateDocumentStyles",this.updateDocumentStyles.bind(this))),this.setupPostPermissions()};i.inherit(u,l),i.inherit(u,r,!0),i.inherit(u,o,!0),u.prototype.updateDocumentStyles=function(t){t&&t.detail&&(this.stylesController.addStyle(t.detail.style),this.render())},u.prototype.documentType=i.enablers.hasConnectRestrictions?"stackTemplate":"commentTemplate",u.prototype.titleTemplate=s,e.exports=u},{"../../../util":391,"../../base/document":96,"../../common":133,"../helpers.js":174,"../partials/nav_title.hbs":187,"./element":165}],167:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'<stackTemplate class="post-detail">\n'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"        ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i,a){var r,l="\n";return r=e.unless.call(t,null!=t?t.postViewModel:t,{name:"unless",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=t?t.postViewModel:t,{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n"},6:function(t,e,n,i){return"            <spacer />\n"},8:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,(r=i&&i.root)&&r.isLargeScreen,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),r=e.each.call(t,null!=t?t.postViewModel:t,{name:"each",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,(r=i&&i.root)&&r.isLargeScreen,{name:"if",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e.unless.call(t,null!=t?t.hasConnectRestrictions:t,{name:"unless",hash:{},fn:this.program(24,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=t?t.postActions:t,{name:"if",hash:{},fn:this.program(33,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n"},9:function(t,e,n,i){var a,r=e.helperMissing,l='            <grid style="column-count:0;itml-item-width:420;border-color:rgba(255,255,255,0)" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+">\n"},11:function(t,e,n,i,a){var r,l,o="function",s=e.helperMissing,c=this.escapeExpression,u='                <card\n                    data-connect-id="'+c((l=null!=(l=e.id||(null!=t?t.id:t))?l:s,typeof l===o?l.call(t,{name:"id",hash:{},data:i}):l))+'"\n                    class="view-detail ';return r=e["if"].call(t,null!=a[1]?a[1].noHeroUber:a[1],{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='"\n                    ',r=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="\n                    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=r&&(u+=r),u+=">\n\n",r=e["if"].call(t,null!=(r=null!=t?t.heroImage:t)?r.url:r,{name:"if",hash:{},fn:this.program(16,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(u+=r),u+='                </card>\n                <card\n                    data-connect-id="'+c((l=null!=(l=e.id||(null!=t?t.id:t))?l:s,typeof l===o?l.call(t,{name:"id",hash:{},data:i}):l))+'"\n                    class="view-detail connect-bottom ',r=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(20,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='"\n                    ',r=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="\n                    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=r&&(u+=r),u+=">\n\n",r=this.invokePartial(n.post,"                    ","post",t,void 0,e,n,i),null!=r&&(u+=r),u+"                </card>\n"},12:function(t,e,n,i){return"connect-top"},14:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},16:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                        ","background",t,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(r+=a),r},18:function(t,e,n,i){var a,r=e.helperMissing,l="                        ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(l+=a),l+="                        ",a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+"\n"},20:function(t,e,n,i){return"connect-last"},22:function(t,e,n,i){return"            </grid>\n"},24:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.hasComments:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,(a=i&&i.root)&&a.isLargeScreen,{name:"if",hash:{},fn:this.program(27,i),inverse:this.program(29,i),data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=t?t.commentsViewModel:t,{name:"each",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'                </grid>\n\n                <section id="more-comments-section"/>\n'},25:function(t,e,n,i){return'                    <activityIndicator id="comments-loading-indicator" class="bottom-loader"></activityIndicator>\n'},27:function(t,e,n,i){return'                <grid class="comments-grid large-screen-grid" id="comment-section">\n'},29:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                <grid class="comments-grid" id="comment-section" style="border-color:'+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.25,{name:"getHighContrastColor",hash:{},data:i}))+';">\n'},31:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.comment,"                        ","comment",t,void 0,e,n,i),null!=a&&(r+=a),r},33:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                <divider style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.25,{name:"getHighContrastColor",hash:{},data:i}))+';"/>\n';return a=this.invokePartial(n.postActions,"                ","postActions",t,void 0,e,n,i),null!=a&&(o+=a),o},35:function(t,e,n,i){return"</stackTemplate>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.unless.call(t,null!=t?t.hasConnectRestrictions:t,{name:"unless",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),r=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(l+=r),r=e.unless.call(t,null!=t?t.hasConnectRestrictions:t,{name:"unless",hash:{},fn:this.program(35,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],168:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.pubSub,l=i.event.Event,o=t("./template.hbs"),s=t("../../base").style,c=t("../../common").traits.EventMap,u=i.controller.MultiElementController,h=t("../../common").traits.TabComponent,d=t("../../common").traits.DataProvider,p=t("../helpers.js"),m=t("../style.hbs"),f=t("../partials/connectFeedSection.hbs"),g=function(t,e){
t=t||{},t.styleTemplate=m,t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new s(t)),t.events=t.events||[],t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.events.push("change"),this.loading=!0,u.call(this,t,e),c.call(this,t),h.call(this,t),p.call(this),this.tintInfo=t.tintInfo,this.controllerName="connect-feed",this.containerType=t.containerType||0,this.viewModel=[],this.data=t.data,this.connectIds=[],this.params=t.params,this.api=t.api||"activityFeed",this.isProfilePage="activities"===this.api,this.isLargeScreen=!!a.screen.sizeForScreenDimension().match(/l|xl/g),this.isDefinitelyLast=!1,this.ownerIds=[],this.likesData={},this.requestCount=0,this.isOnline=""!==itms.networkConnectionType,this.model=new d({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataReady.bind(this)),this.lastAppearSuccess=Date.now(),this.doRefresh=!1,this.doMore=!1,this.showWelcomePanel=this.shouldShowWelcomePanel(),this.hasConnectRestrictions=a.enablers.hasConnectRestrictions,this.appearTTL=48e4,a.extend(this.onChange,{refresh:this.handleRefresh}),a.extend(this.onSelect,{"open-url":this.openURL,"view-mention":this.viewProfile,"view-profile":this.viewProfile,"view-product":this.pushProduct,"share-button":this.shareFromFeed,"comment-button":this.viewDetailPage,"like-button":this.like,"view-detail":this.viewDetailPage,"play-media":this.playMedia,"play-button":this.playMedia,"close-start-panel":this.closeStartPanel,"view-following":this.viewFollowing,"view-recommendations":this.viewRecommendations,"more-activities":this.handleNeedsMore}),r.subscribe("networkChange",this.handleNetworkChange.bind(this)),r.subscribe("postDeleted",this.handlePostDeleted.bind(this)),this.data?(this.model.dataSuccess(this.data,{success:this.activitiesSuccess.bind(this),failure:this.activitiesSuccess.bind(this)}),this.model.data&&delete this.model.data):this.getActivities()};a.inherit(g,u),a.inherit(g,c,!0),a.inherit(g,h,!0),a.inherit(g,p,!0),g.prototype.shouldShowWelcomePanel=function(){return"true"!==localStorage.getItem("Music.hasDismissedConnectFeedWelcomPanel")},g.prototype.template=o,g.prototype.handleRefresh=function(t){var e=a.keypath(t,"target.tagName");"pullToRefresh"===e&&(this.requestInFlight?this.doRefresh=!0:this.getActivities("refresh"))},g.prototype.handleNeedsMore=function(t){var e=t.target.tagName,n=!1;this.isProfilePage?"button"===e&&(n=!0):this.isLargeScreen?"grid"===e&&(n=!0):"stackTemplate"===e&&(n=!0),this.model&&n&&(this.requestInFlight?this.doMore=!0:(this.isProfilePage&&(this.spinner=a.parser.parse("<activityIndicator/>",t.target.ownerDocument),t.target.parentNode.insertBefore(this.spinner,t.target),t.target.removeChild(t.target.firstChild)),this.getActivities("next")))},g.prototype.handleNetworkChange=function(){this.isOnline=""!==itms.networkConnectionType,this.isOnline&&this.handleAppear(),this.render()},g.prototype.handlePostDeleted=function(){this.getActivities("appear")},g.prototype.handleAppear=function(t){var e=a.keypath(t,"target.tagName");!this.requestInFlight&&"stackTemplate"===e&&Date.now()-this.lastAppearSuccess>this.appearTTL&&this.getActivities("appear")},g.prototype.shareFromFeed=function(t){this.isProfilePage||(t.includeTargetDueToRdar21529443=!0),this.share(t)},g.prototype.getLastOffsetId=function(t){var e=null;if(t.activities&&t.activities.length>0){var n=t.activities.length-1,i=t.activities[n].id;i&&(e=i)}return e},g.prototype.getFirstOffsetId=function(t){var e=null;if(t.activities&&t.activities.length>0){var n=t.activities[0].id;n&&(e=n)}return e},g.prototype.getActivities=function(t){var e=this.params||{},n=a.urls[this.api](),i=!1;("next"!==t||this.lastId)&&(this.requestInFlight=!0,i=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),this.limit=10,e.limit=this.limit,this.model.fetchData({retries:1,method:"GET",eventType:t,url:n+a.query.build(e),success:this.activitiesSuccess.bind(this),failure:this.activitiesFailure.bind(this)}))},g.prototype.activitiesSuccess=function(t,e){if(this.resetLoading(),this.errorTitle=null,this.errorMessage=null,t.recommendedEntities)return[];"appear"===e.eventType&&(this.lastAppearSuccess=Date.now());var n=this.createViewForPosts(t);this.isDefinitelyLast=this.isProfilePage&&n.length>0&&n[0].content.length<this.limit;var i=this.getFirstOffsetId(t);return this.viewModel&&this.viewModel.length?"refresh"===e.eventType||"appear"===e.eventType?(this.firstId&&this.firstId!==i&&this.dispatchEvent(new l("resetScrollState")),this.likesData={},this.firstId=i,this.viewModel=n,this.sectionViewModel=null,this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId):"next"===e.eventType&&(this.isProfilePage&&n.length>0?this.viewModel[0].content=this.viewModel[0].content.concat(n[0].content):(this.viewModel=this.viewModel.concat(n),this.sectionViewModel=n),this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId):(this.likesData={},this.firstId=i,this.viewModel=n,this.sectionViewModel=null,this.lastId=this.getLastOffsetId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new l("resetScrollState"))),this.isProfilePage&&(this.getLikesData(),this.spinner&&this.spinner.parentNode.removeChild(this.spinner)),t.likesData&&(this.likesData=a.extend(this.likesData,t.likesData)),this.viewModel||null},g.prototype.activitiesFailure=function(t,e,n){this.resetLoading(),a.log.error(this.api+" Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.renderView()},g.prototype.getLikesData=function(){if(this.connectIds&&0!==this.connectIds.length){var t={activities:this.connectIds.join(",")},e=a.urls.build("likesData",t);a.xhr({method:"GET",url:e,success:this.likesDataSuccess.bind(this),failure:this.likesDataFailure.bind(this)})}},g.prototype.likesDataSuccess=function(t){var e=JSON.parse(t);e.likesData&&(this.likesData=a.extend(this.likesData,e.likesData)),this.connectIds=[],this.handleRender()},g.prototype.likesDataFailure=function(t){a.log.warn("likesData Request Failure: ",t),this.connectIds=[],this.handleRender()},g.prototype.handleAdditionalFetch=function(t){t=t||{},this.insertOwnerProfile(t,this.viewModel),this.ownerIds=[],this.handleDataReady()},g.prototype.handleDataReady=function(){this.ownerIds.length?this.model.fetchContent({contentIds:this.ownerIds,profile:this.model.pageProfile,onSuccess:this.handleAdditionalFetch.bind(this),onFailure:this.handleAdditionalFetch.bind(this)}):(this.hasConnectFeed=!0,this.handleRender())},g.prototype.handleRender=function(){(this.isProfilePage&&this.hasConnectFeed||!this.isProfilePage)&&(this.hasConnectFeed=!1,this.renderView())},g.prototype.closeStartPanel=function(){var t=this.el.ownerDocument.getElementById("feed-start-panel");t&&t.parentNode.removeChild(t),localStorage.setItem("Music.hasDismissedConnectFeedWelcomPanel","true"),this.showWelcomePanel=!1},g.prototype.renderView=function(){this.sectionViewModel&&this.viewModel!==this.sectionViewModel?this.renderSection():this.render()},g.prototype.renderSection=function(){var t=Object.create(this);this.sectionViewModel&&(t.viewModel=this.sectionViewModel);var e=a.parser.parse(f(t),this.el.ownerDocument),n=this.el.ownerDocument.getElementsByTagName("stackTemplate").item(0),i=this.el.ownerDocument.getElementById("loadMore");n.insertBefore(e,i),this.lastId||n.removeChild(i),this.elementsWithoutEventListeners=this.elementsWithoutEventListeners||[],this.elementsWithoutEventListeners.push(e),this.elementArray.push(e),this.dispatchEvent(new l("render"))},g.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doRefresh?(this.doRefresh=!1,this.getActivities("refresh")):this.doMore&&(this.doMore=!1,this.getActivities("next"))},g.prototype.viewFollowing=function(){var t={dataType:"connect_following",navigationDocument:modal,isModal:!0};this.dispatchEvent(new l("tabPush",{detail:t}))},g.prototype.viewDetailPage=function(t){this.lastAppearSuccess=Date.now(),this.viewDetail(t)},g.prototype.viewRecommendations=function(){var t={dataType:"connect_recommendations",navigationDocument:modal,isModal:!0};this.dispatchEvent(new l("tabPush",{detail:t}))},g.prototype.handleRotation=function(){this.setProperArtwork(),this.renderView()},g.prototype.setProperArtwork=function(){for(var t,e=this.viewModel[0].content,n=0;n<e.length;n++)e[n].heroImage&&e[n].heroImage.url&&e[n]._originalHeroImage&&(t=this.getArtwork({kind:"postHero",artwork:e[n]._originalHeroImage}).image,t&&(e[n].heroImage=t))},e.exports=g},{"../../../util":391,"../../base":97,"../../common":133,"../helpers.js":174,"../partials/connectFeedSection.hbs":182,"../style.hbs":205,"./template.hbs":170,itml:435}],169:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../base/document"),l=t("../../common").traits.TabComponent,o=t("../../common").traits.DataProvider,s=i.loc,c=t("../partials/nav_title.hbs"),u=t("../helpers.js"),h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||s.loc("FUSE.NavBar.Connect"),t.classes=t.classes||[],t.controllers.length||(this.controller=new a({data:t.data}),t.controllers.push(this.controller)),r.call(this,t,e),l.call(this),u.call(this),this.model=new o,this.controller&&(this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.controller.addEventListener("resetScrollState",this.resetScrollState.bind(this))),this.setupPostPermissions()};i.inherit(h,r),i.inherit(h,l,!0),i.inherit(h,u,!0),h.prototype.documentType="stackTemplate",h.prototype.titleTemplate=c,h.prototype.resetScrollState=function(){this.el.scrollToTop(),itms.resetStateForActiveDocument()},e.exports=h},{"../../../util":391,"../../base/document":96,"../../common":133,"../helpers.js":174,"../partials/nav_title.hbs":187,"./element":168}],170:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'        <pullToRefresh class="refresh"/>\n'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"    ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <section>\n            <card id="feed-start-panel" type="billboard" class="feed-start-card" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"card"},data:i}),null!=a&&(o+=a),o+='>\n                <list class="feed-start-close-button">\n                    <button big-hit="true" class="close-start-panel" type="imagetext" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,targetId:"CloseStartPanel",targetType:"button"},data:i}),null!=a&&(o+=a),o+='><img style="itml-img-mask-color:rgb(150,150,150);" src="resource://UniversalSmallClose" width="8" height="8"/></button>\n                </list>\n                <title class="feed-start-title">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.TitleLine1",{name:"loc",hash:{},data:i}))+"<br/>"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.TitleLine2",{name:"loc",hash:{},data:i}))+"</title>\n                ",a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+='\n                <button type="thin" maxLines="2" class="feed-start-recommendations-button view-recommendations" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,targetId:"MoreArtistRecommendations",targetType:"button"},data:i}),null!=a&&(o+=a),o+=">"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{params:'{"toUpperCase": true}'},data:i}))+"</button>\n                ",a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+='\n                <subtitle maxLines="2" class="feed-start-subtitle">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.SubTitleLine1",{name:"loc",hash:{},data:i}))+'</subtitle>\n                <button maxLines="2" class="feed-start-following-button view-following" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,targetId:"SeeWhoYouAreFollowing",targetType:"button"},data:i}),null!=a&&(o+=a),o+=">"+l((e.loc||t&&t.loc||r).call(t,"FUSE.Connect.LowSignal.SeeWhoYouAreFollowing",{name:"loc",hash:{},data:i}))+"</button>\n                ",a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(o+=a),o+'\n            </card>\n            <divider class="divider-full feed-start-divider"/>\n        </section>\n'},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isLargeScreen,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.connectFeedSection,"    ","connectFeedSection",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.lastId:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,(a=i&&i.root)&&a.isLargeScreen,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=e.helperMissing,l='            <grid class="large-screen-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,impressions:!0,location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+">\n"},15:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isOnline:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},16:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(20,i),data:i}),null!=a&&(r+=a),r},17:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.isDefinitelyLast:t,{name:"unless",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},18:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                    <button id="loadMore" class="more-activities" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"more",targetId:"MoreActivities",targetType:"button"},data:i}),null!=a&&(o+=a),o+">"+l((e.loc||t&&t.loc||r).call(t,"More",{name:"loc",hash:{},data:i}))+"</button>\n"},20:function(t,e,n,i){var a,r=e.helperMissing,l='                <section id="loadMore">\n                    ';return a=(e.margin||t&&t.margin||r).call(t,"1pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+'\n                    <activityIndicator class="bottom-loader"></activityIndicator>\n                </section>\n'},22:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},23:function(t,e,n,i){return"            </grid>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.showWelcomePanel:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n<spacer />\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],171:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=i.event.Event,o=t("../../base/document"),s=t("../../common").traits.TabComponent,c=t("../../common").traits.DataProvider,u=t("../recommendations/element"),h=t("../helpers.js"),d=t("./template.hbs"),p=function(e,n){e=e||{},e.controllers=e.controllers||[],e.classes=e.classes||[],e.name=r.loc("FUSE.Following.Title");var i=a.keypath(e,"event.detail.isModal");this.model=new c,this.controller=new u({api:"follows",params:{user:itms.accountInfo.DSID,limit:200},data:e.data,pullToRefreshEnabled:!1,hasAutoFollowToggle:!0,batchLoad:!0,template:d,toggled:!0,followText:r.loc("FUSE.Settings.Following.Follow"),followingText:r.loc("FUSE.Settings.Following.Unfollow")}),e.controllers.push(this.controller),i&&(this.titleTemplate=t("./nav_title.hbs")),o.call(this,e,n),s.call(this,e,n),h.call(this);var l=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};i&&(this.navigationBarController.addEventListener("render",l.bind(this)),l.call(this)),this.el.addEventListener("change",this.handleChange.bind(this))};a.inherit(p,o),a.inherit(p,s,!0),a.inherit(p,h,!0),p.prototype.documentType="settingsTemplate",p.prototype.handleDoneButton=function(){this.controller.model.set()},p.prototype.handleDoneButton=function(){modal.popDocument()},p.prototype.viewRecommended=function(t){var e=t.target.ownerDocument.navigationDocument,n={dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new l("tabPush",{detail:n}))},p.prototype.handleChange=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&a.log.warn("follow request error: ",e),this.controller.fetchRecommendations()}if(t.target&&"auto-follow-toggle"===t.target.getAttribute("id")){var n=!!t.selected,i=a.urls.enableAutoFollow(),r={enable:n.toString()};a.xhr({method:"GET",url:i+a.query.build(r),failure:e.bind(this,!1),success:e.bind(this,!0)})}},e.exports=p},{"../../../util":391,"../../base/document":96,"../../common":133,"../helpers.js":174,"../recommendations/element":201,"./nav_title.hbs":172,"./template.hbs":173,itml:435}],172:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Following.Title",{name:"loc",hash:{},data:i}))+'</title>\n<button id="doneButton" class="hide-sheet align-right" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>"},useData:!0})},{"hbsfy/runtime":418}],173:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    <activityIndicator>\n        <title>"+r((e.loc||t&&t.loc||a).call(t,"Fuse.Loading",{name:"loc",hash:{},data:i}))+"</title>\n    </activityIndicator>\n"},3:function(t,e,n,i){var a,r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c="function",u="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='    <group>\n        <settingsField class="'+o(l(null!=(a=null!=t?t.accountActionClassName:t)?a.accountSummaryAction:a,t))+'">\n            <label class="group-label">'+o((e.loc||t&&t.loc||s).call(t,"FUSE.Settings.Following.AutoFollowArtists.Label",{name:"loc",hash:{},data:i}))+'</label>\n            <input type="checkbox" id="auto-follow-toggle" selected="'+o((r=null!=(r=e.autoFollowEnabled||(null!=t?t.autoFollowEnabled:t))?r:s,typeof r===c?r.call(t,{name:"autoFollowEnabled",hash:{},data:i}):r))+'" />\n        </settingsField>\n        <footer>\n            <label>'+o((e.loc||t&&t.loc||s).call(t,"FUSE.Settings.Following.AutoFollowArtists.Message",{name:"loc",hash:{},data:i}))+"</label>\n        </footer>\n    </group>\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(u+=a),u},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'        <title class="multi-line">'+r(a(null!=t?t.errorMessage:t,t))+"</title>\n"},6:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <group>\n            <lockup class="view-recommended">\n                <title class="recommended-text one-lines">\n                    <text>'+l((e.loc||t&&t.loc||r).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{},data:i}))+"</text>\n                </title>\n                <decorationImage />\n            </lockup>\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"        </group>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <group>\n            <lockup class="view-recommended">\n                <title class="recommended-text one-lines">\n                    <text>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Settings.Following.MoreArtists",{name:"loc",hash:{},data:i}))+"</text>\n                </title>\n                <decorationImage />\n            </lockup>\n        </group>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],174:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),l=r.loc,o=t("./partials"),s=function(){o()};s.prototype.isSignedIn=function(){return void 0!==itms.accountInfo.DSID},s.prototype.setupPostPermissions=function(){r.account.getSubscriptionStatus({service:"AppleMusic"},function(){this.navigationBarController.hasPostPermission=r.account.hasPostPermission(),this.navigationBarController.render(),r.account.hasAdminPermission()&&r.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)});var t=this.el.getElementById("post");t&&t.addEventListener("select",this.createPost.bind(this))}.bind(this))},s.prototype.handlePermissions=function(t){this.permissions=t||[]},s.prototype.showSignIn=function(){var t={dataType:"signin",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:t}))},s.prototype.like=function(t){function e(t,e){var n=JSON.parse(e);(n&&"error"===n.status||!t)&&(this.likesData[o]=!i)}var n=t.target,i=!t.toggled,a=r.urls.like(),l=r.urls.unlike(),o=n.getAttribute("data-connect-id"),s=i?a:l,c={activity:o};this.likesData[o]=i,r.xhr({method:"GET",url:s+r.query.build(c),failure:e.bind(this,!1),success:e.bind(this,!0)})},s.prototype.share=function(t){var e=this.isSignedIn();e?r.account.hasPostPermission()?this.sharePost(t,"artist"):this.sharePost(t,"user"):this.showSignIn()},s.prototype.showAdminActionMenu=function(t){var e=t.target.getAttribute("data-connect-id"),n=this.model.getData(e);if(n){var i={data:{type:"actionSheet",hideTitle:!0,buttons:[{title:l.loc("FUSE.Connect.ActionMenu.Share"),className:"share-post",callback:this.sharePost.bind(this,t,"artist")},{title:l.loc("FUSE.Connect.ActionMenu.Post"),className:"create-post",callback:this.createPost.bind(this,t)},{title:l.loc("FUSE.CancelButton"),className:"cancel-post",callback:this.cancelPost.bind(this)}]},dataType:"dialog",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:i}))}},s.prototype.cancelPost=function(){modal.popDocument()},s.prototype.sharePost=function(t){function e(e){if(e){var n={data:{content:e,shareType:"connect-post"},options:{},dataType:"sharing",navigationDocument:modal};i&&(n.options.sourceElement=t.target),this.dispatchEvent(new a("tabPush",{detail:n}))}}var n=t.target.getAttribute("data-connect-id"),i=t.includeTargetDueToRdar21529443,r=this.model.getData(n);e.call(this,r)},s.prototype.createPost=function(t){r.account.showTermsIfRequired({successCallback:this.pushToPostPage.bind(this,t)})},s.prototype.pushToPostPage=function(){var t={dataType:"connect_create_post",navigationDocument:modal};this.dispatchEvent(new a("tabPush",{detail:t}))},s.prototype.getPostDataFromPost=function(t){var e=t.message,n=t.owner&&t.owner.name,i=t.isAttributed&&t.admin,a=r.keypath(t,"author.image.url"),o=l.loc("FUSE.Connect.CreatePost.PostByArtist",{artist:n});i&&(o=l.loc("FUSE.Connect.CreatePost.PostByAdminFromBand",{admin:i.name,band:n}));var s={id:t.id,image:a,title:o,type:"viewPost",subtitle:e};return s},s.prototype.insertOwnerProfile=function(t,e){for(var n,i,a,l,o=e||this.viewModel||[],s=t||{},c=0;c<o.length;c++)n=o[c],l=r.keypath(n,"ownerProfile.empty"),l&&(i=n.owner&&n.owner.entityId,a=s[i],a?(a=this.getArtwork(a,"social"),n.ownerProfile=a.uber||a.hero):delete n.ownerProfile,this.model.setData(n.id,n))},s.prototype.viewDetail=function(t){var e=t.target.ownerDocument.navigationDocument,n=t.target.getAttribute("data-connect-id"),i=t.target.getAttribute("data-show-keyboard"),r="true"===i,l=this.model.getData(n);if(l){var o={data:{post:l,likes:this.likesData,showKeyboard:r},dataType:"connect_detail",navigationDocument:e};this.dispatchEvent(new a("tabPush",{detail:o}))}},s.prototype.openURL=function(t){var e=t.target.getAttribute("data-url");e&&openURL(e)},s.prototype.viewProfile=function(t){function e(e){this.model.lookup(e)&&this.pushProduct(t)}var n=t.target.getAttribute("data-content-id"),i=this.model.lookup(n);i?this.pushProduct(t):this.model.fetchContent({contentIds:[n],profile:this.model.pageProfile,onSuccess:e.bind(this,n),onFailure:e.bind(this,n)})},s.prototype.createViewForPosts=function(t){function e(t){var e=!0;return t.target&&!t.targetId&&(e=!1),"activity"===t.targetType&&(e=!1),e}var n,i,a=[],l=t.activities||[];if(this.connectIds=[],t.activity&&l.push(t.activity),l.length){for(var o=[],s=l.length,c=0;s>c;c++){var u=l[c]||{};if(e.call(this,u)){var h=this.lookupPost(u);!h||!r.enablers.allowsExplicit()&&h.isExplicit||(n=h.ownerEntityId,i&&n!==i&&(a.push({content:o}),o=[]),o.push(h),i=n,this.connectIds.push(h.id))}else r.log.error("Connect: invalid postData for activity with id: "+u.id)}o.length&&a.push({content:o})}return a},s.prototype.lookupPost=function(t){var e,n=t.target&&t.target.id;return e=n?this.model.lookupContent(n,this.processPost.bind(this,t)):this.processPost(t)},s.prototype.processPost=function(t,e){t.message=t.message.replace(/(?:\r\r|\r|\n)/g,"\r"),t.message=t.message.trim();var n,i=t;this.ownerIds=[];var a,o,s=t.ownerEntityType,c=t.owner,u=c&&c.name,h=c&&c.entityId,d=this.model.lookup(h),p=t.isAttributed&&t.admin,m=t.dateCreated;if(d){m&&(i.timeSincePost=r.loc.date.timeSince(m));var f="artist"===s,g=s.match(/^(iTunesBrand|brand|activityCurator)$/);if(!u&&d&&d.name&&(u=d.name),i.author={id:h,name:"<b>"+u+"</b>",admin:!1,fullName:"<b>"+u+"</b>"},p&&(i.author.admin=!0,i.author.name="<b>"+p.name+"</b>",i.author.fromBand=l.loc("FUSE.Connect.Feed.FromBand",{band:"<b>"+u+"</b>"}),i.author.fullName=l.loc("FUSE.Connect.Feed.AdminFromBand",{admin:p.name,band:"<b>"+u+"</b>"}),p.profileImage&&p.profileImage.url&&(i.author.avatar=this.getArtwork({kind:"avatar",artwork:p.profileImage}).image)),f?o=d&&d.editorialArtwork&&d.editorialArtwork.bannerUber:g&&(o=d&&d.editorialArtwork&&d.editorialArtwork.subscriptionCover),!o&&d.artwork?o=r.deepClone(d.artwork):!o&&d.latestAlbumArtwork&&(o=r.deepClone(d.latestAlbumArtwork),o.url=null),o&&(i._originalHeroImage=o,o=this.getArtwork({kind:"postHero",artwork:o}).image),d||this.ownerIds.push(h),o&&o.bgColor&&o.isDark){var b=new r.color(o.bgColor);o.bgColor=b.darken(.006)}if(!o)if(this.isProfilePage)o=this.tintInfo;else{var v=new r.color("f4f4f4");o={bgColor:v,bgColorComplement:v.darken(.1)}}if(i.heroImage=o,i.postType=i.targetType||"default","default"===i.postType&&i.artwork&&i.artwork.url&&(i.photo=this.getArtwork({artwork:i.artwork},"photo")),i.targetId?i.previewId=i.targetId:i.previewId=i.id,e){switch(n=this.getArtwork(e),a=n.artistName||n.curatorName||n.brandName||l.loc("FUSE.AppleMusic"),r.lockup.isExplicit(e)&&(e.showExplicitBadge=!0,i.isExplicit=!0),n.kind){case"uploadedAudio":"SoundBite"===n.aucType?(i.postType="soundbite",n.name=l.loc("FUSE.Connect.Feed.SoundbiteBadge")):n.aucType?i.badge=n.aucType:i.badge=l.loc("FUSE.Connect.Feed.FromTheArtistBadge");break;case"uploadedVideo":i.badge=l.loc("FUSE.Connect.Feed.FromTheArtistBadge");break;case"playlist":n.playlistBy=l.loc("FUSE.Connect.Feed.PlayListBy",{creator:a});break;case"album":n.albumBy=l.loc("FUSE.Connect.Feed.AlbumBy",{creator:a});break;case"default":}i.content=[n]}return i[i.postType]=!0,parseInt(i.commentCount,10)>0&&(i.hasComments=!0),this.model.setData(i.id,i),i}},s.prototype.getArtwork=function(t,e){t=t||{};var n={content:t},i=t;e&&(n.params={type:e}),this.artworkMap&&(n.artworkMap=this.artworkMap),this.artworkKeys&&(n.artworkKeys=this.artworkKeys);var a=r.artwork.getArtworkForContent(n);return i=r.lockup.setArtworks(t,a,this.artworkMap,e)},s.prototype.artworkKeys={aucVideo:["video","uploadedVideo","musicVideo"]},s.prototype.artworkMap={track:{xs:[60,60],s:[60,60],m:[60,60],l:[60,60],xl:[60,60],xxl:[60,60]},avatar:{xs:[40,40],s:[40,40],m:[40,40],l:[40,40],xl:[40,40],xxl:[40,40]},product:{xs:[88,88],s:[125,125],m:[125,125],l:[125,125],xl:[144,144],xxl:[144,144]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[125,125],xl:[125,125],xxl:[125,125]},productChild:{xs:[163,163],s:[200,200],m:[206,206],l:[256,256],xl:[256,256],xxl:[256,256]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[144,144],xl:[150,150],xxl:[150,150]},photo:{crop:"bb",xs:[288,512],s:[343,609],m:[382,679],l:[420,565],xl:[420,565],xxl:[420,565]},postHero:{crop:"sr",xs:[320,240],s:[375,240],m:[414,240],l:[768,288],xl:[1024,288],xxl:[1366,384]},aucVideo:{crop:"sr",xs:[320,193],s:[375,200],m:[414,240],l:[420,224],xl:[420,224],xxl:[420,224]},follower:{xs:[55,55],s:[55,55],m:[65,65],l:[65,65],xl:[65,65],xxl:[65,65]}},e.exports=s},{"../../util":391,"./partials":184,itml:435}],175:[function(t,e,n){var i=t("../base/tab"),a=t("../common").traits.DataProvider,r=t("../../util"),l=r.loc,o=r.pubSub,s=t("./helpers.js"),c=t("./coldstart"),u=t("./feed"),h=function(t){t=t||{},this.model=new a,this.retries=2,this.retryTTL=3600,this.name=t.name||l.loc("FUSE.NavBar.Connect"),this.controller=this.getLoadingController(),i.call(this,t),s.call(this,t),o.subscribe("refreshConnectTab",this.init.bind(this)),o.subscribe("serviceChange",this.init.bind(this)),this.init()};r.inherit(h,i),r.inherit(h,s,!0),h.prototype.init=function(t){var e;this.isSignedIn()?(t&&(e=this.getLoadingController(),this.replaceDocument({detail:{document:e}})),this.getActivites()):(localStorage.removeItem("Music.hasDismissedConnectFeedWelcomPanel"),e=this.getColdstartController(),this.replaceDocument({detail:{document:e}}))},h.prototype.getColdstartController=function(t){return new c({name:this.name,data:t})},h.prototype.getConnectFeedController=function(t){return new u({name:this.name,data:t})},h.prototype.getActivites=function(){this.model.fetchData({url:r.urls.build("activityFeed",{limit:10}),success:this.getActivitiesSuccess.bind(this),failure:this.getActivitiesFailure.bind(this),retries:this.retries})},h.prototype.getActivitiesSuccess=function(t){this.errorTitle=null,this.errorMessage=null;var e,n=t||{};return n.activities?(e=this.getConnectFeedController(n),this.replaceDocument({detail:{document:e}})):this.getFollowingCount(),[]},h.prototype.getActivitiesFailure=function(t,e,n){r.log.error("Connect Activity Request Failure: ",t),
this.controller.loading=!1,this.controller.errorTitle=n,this.controller.errorMessage=e||t.error||t.serviceError,this.controller.render()},h.prototype.getFollowingCount=function(){this.model.fetchData({url:r.urls.build("followingCount",{user:itms.accountInfo.DSID}),success:this.getFollowingCountSuccess.bind(this),failure:this.getFollowingCountFailure.bind(this),retries:1})},h.prototype.getFollowingCountSuccess=function(t){var e=t.count||0,n=parseInt(e,10)>0?!0:!1,i=this.getColdstartController({hasFollows:n});return this.replaceDocument({detail:{document:i}}),[]},h.prototype.getFollowingCountFailure=function(t,e,n){r.log.error("Connect Follows Request Failure: ",t),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.controller.render()},e.exports=h},{"../../util":391,"../base/tab":100,"../common":133,"./coldstart":159,"./feed":169,"./helpers.js":174}],176:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <img\n            disabled="true"\n            class="curator-avatar"\n            width="'+l(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.width:a,t))+'"\n            height="'+l(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.height:a,t))+'"\n            srcset="'+l(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.url:a,t))+" "+l(r(null!=(a=null!=(a=null!=t?t.author:t)?a.avatar:a)?a.dpr:a,t))+'" />\n'},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <title\n            class="author-text owner-name"\n            data-content-id="'+l(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n            data-preview-id="'+l(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n            maxLines="',a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(s+=a),s+='"\n            >',a=(e.escapeText||t&&t.escapeText||o).call(t,null!=(a=null!=t?t.author:t)?a.name:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</title>\n"},4:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i){return"2"},8:function(t,e,n,i){return"1"},10:function(t,e,n,i){var a,r=e.helperMissing,l="<br/>";return a=(e.colorAuthorName||t&&t.colorAuthorName||r).call(t,null!=(a=null!=t?t.author:t)?a.fromBand:a,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"colorAuthorName",hash:{},data:i}),null!=a&&(l+=a),l},12:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <button><text\n            class="author-text time-since-post"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >",a=e["if"].call(t,null!=t?t.viewCount:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+s((r=null!=(r=e.timeSincePost||(null!=t?t.timeSincePost:t))?r:o,typeof r===l?r.call(t,{name:"timeSincePost",hash:{},data:i}):r))+"</text></button>\n"},13:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.4,{name:"getHighContrastColor",hash:{},data:i}))+';"'},15:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return o((a=null!=(a=e.viewCount||(null!=t?t.viewCount:t))?a:l,typeof a===r?a.call(t,{name:"viewCount",hash:{},data:i}):a))+" "+o((e.loc||t&&t.loc||l).call(t,"FUSE.Connect.Feed.PostViews",{name:"loc",hash:{},data:i}))+" &#8226; "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<lockup\n    selectable="true"\n    class="view-profile author-lockup"\n    data-content-id="'+l(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n    data-preview-id="'+l(r(null!=(a=null!=t?t.author:t)?a.id:a,t))+'"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.avatar:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.author:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.timeSincePost:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":418}],177:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda;return'<background>\n    <img\n        class="gradient"\n        style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n        srcset="'+l(o(null!=(a=null!=t?t.heroImage:t)?a.url:a,t))+" "+l(o(null!=(a=null!=t?t.heroImage:t)?a.dpr:a,t))+'"\n        width="'+l(o(null!=(a=null!=t?t.heroImage:t)?a.width:a,t))+'"\n        height="'+l(o(null!=(a=null!=t?t.heroImage:t)?a.height:a,t))+'"/>\n</background>'},useData:!0})},{"hbsfy/runtime":418}],178:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='<badge\n    class="badge"\n    text="'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+">\n</badge>\n"},useData:!0})},{"hbsfy/runtime":418}],179:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'<filterBar class="follow-bar" pin="1">\n    <text class="align-left" maxLines="0">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.Status",{name:"loc",hash:{},data:i}))+'</text>\n    <button bit-hit="true" class="done-following align-right tint-color"><b>'+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.ColdStart.DoneButton",{name:"loc",hash:{},data:i}))+"</b></button>\n</filterBar>"},useData:!0})},{"hbsfy/runtime":418}],180:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=e.helperMissing,l=" ";return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.author:t)?a.fromBand:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l},5:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda;return'<span style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.3,{name:"getHighContrastColor",hash:{},data:i}))+'"> @'+l(o(null!=(a=null!=t?t.author:t)?a.handle:a,t))+"</span>"},7:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,(a=(a=(a=i&&i.root)&&a.post)&&a.heroImage)&&a.isDark,.7,{name:"getHighContrastColor",hash:{},data:i}))+';"'},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,l=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="delete-comment"\n                >'+r((e.loc||t&&t.loc||l).call(t,"FUSE.Connect.Detail.DeleteSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.reportCommentEnabled:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression,l=e.helperMissing;return'        <actions>\n            <button\n                data-comment-id="'+r(a(null!=t?t.id:t,t))+'"\n                class="report-comment"\n                >'+r((e.loc||t&&t.loc||l).call(t,"FUSE.Connect.Detail.ReportSwipe",{name:"loc",hash:{},data:i}))+"</button>\n        </actions>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<lockup id="'+l(r(null!=t?t.id:t,t))+'" class="comment-lockup">\n    <spacer/>\n    <spacer/>\n    ';return a=(e.margin||t&&t.margin||o).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <title\n        data-content-id="'+l(r(null!=(a=null!=t?t.owner:t)?a.entityId:a,t))+'"\n        class="comment-title view-profile"\n        maxLines="2"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >",a=(e.escapeText||t&&t.escapeText||o).call(t,null!=(a=null!=t?t.author:t)?a.name:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.admin:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=(a=null!=t?t.author:t)?a.handle:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="</title>\n    ",a=(e.margin||t&&t.margin||o).call(t,"3pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n    <text\n        maxLines="20"\n        class="comment-text"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+l(r(null!=t?t.message:t,t))+'</text>\n\n    <spacer />\n    <label\n        class="comment-time"\n        ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.post)&&a.heroImage,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n        >"+l(r(null!=t?t.timeSincePost:t,t))+"</label>\n\n",a=e["if"].call(t,null!=t?t.hasDeletePower:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),s+="    ",a=(e.margin||t&&t.margin||o).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n</lockup>\n\n"},useData:!0})},{"hbsfy/runtime":418}],181:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'<lockup id="more-comments" class="more-comments">\n    <header>\n        <title class="comment-count">\n            <text id="count">'+o((a=null!=(a=e.remainingCountText||(null!=t?t.remainingCountText:t))?a:l,typeof a===r?a.call(t,{name:"remainingCountText",hash:{},data:i}):a))+"</text>\n        </title>\n    </header>\n</lockup>"},useData:!0})},{"hbsfy/runtime":418}],182:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isProfilePage,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <card\n            data-connect-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n            class="view-detail connect-top"\n            ';return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n            ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.url:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(s+=a),s+"        </card>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="padding: 0 0 0 0;background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.background,"                ","background",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r=e.helperMissing,l="                ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+="\n",a=this.invokePartial(n.author,"                ","author",null!=(a=null!=t?t.content:t)?a[0]:a,void 0,e,n,i),null!=a&&(l+=a),l+="                ",a=(e.margin||t&&t.margin||r).call(t,"0pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+"\n"},9:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='            <card\n                data-preview-id="'+s((r=null!=(r=e.previewId||(null!=t?t.previewId:t))?r:o,typeof r===l?r.call(t,{name:"previewId",hash:{},data:i}):r))+'"\n                data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n                class="view-detail connect-bottom ';return a=e["if"].call(t,i&&i.last,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='"\n                ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n                ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"card"},data:i}),null!=a&&(c+=a),c+=">\n\n",a=e.unless.call(t,i&&i.first,{name:"unless",hash:{},fn:this.program(14,i),inverse:this.program(16,i),data:i}),null!=a&&(c+=a),a=this.invokePartial(n.post,"                ","post",t,void 0,e,n,i),null!=a&&(c+=a),c+="            </card>\n\n",a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(19,i),inverse:this.program(26,i),data:i}),null!=a&&(c+=a),c},10:function(t,e,n,i){return"connect-last"},12:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},14:function(t,e,n,i){var a,r=e.helperMissing,l="                    ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+="\n",a=this.invokePartial(n.author,"                    ","author",t,void 0,e,n,i),null!=a&&(l+=a),l},16:function(t,e,n,i){var a,r="";return a=e["if"].call(t,(a=i&&i.root)&&a.isProfilePage,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},17:function(t,e,n,i){var a,r=e.helperMissing,l="                        ";return a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+="\n",a=this.invokePartial(n.author,"                        ","author",t,void 0,e,n,i),null!=a&&(l+=a),l},19:function(t,e,n,i){var a,r="";return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(20,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r},20:function(t,e,n,i){var a,r='                    <divider class="post-divider" ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},21:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color:"+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"'},23:function(t,e,n,i){var a,r="";return a=e.unless.call(t,(a=i&&i.root)&&a.isDefinitelyLast,{name:"unless",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},24:function(t,e,n,i){var a,r='                        <divider class="post-divider" ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"/>\n"},26:function(t,e,n,i){var a,r="";return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="<section>\n\n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n</section>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],183:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression;return'<divider id="'+s((r=null!=(r=e.className||(null!=t?t.className:t))?r:o,typeof r===l?r.call(t,{name:"className",hash:{},data:i}):r))+'" style="background-color:'+s((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; border-color: "+s((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,"0.3",{name:"getHighContrastColor",hash:{},data:i}))+';"/>'},useData:!0})},{"hbsfy/runtime":418}],184:[function(t,e,n){var i=t("itml").utils.Handlebars,a={background:t("./background.hbs"),coldstartStatus:t("./coldstart_status.hbs"),comment:t("./comment.hbs"),post:t("./post.hbs"),author:t("./author.hbs"),badge:t("./badge.hbs"),message:t("./message.hbs"),social:t("./social.hbs"),track:t("./track.hbs"),playlist:t("./playlist.hbs"),product:t("./product.hbs"),profile:t("./profile.hbs"),video:t("./video.hbs"),photo:t("./photo.hbs"),postActions:t("./post_actions.hbs"),soundbite:t("./soundbite.hbs"),uploadedAudio:t("./uploaded_audio.hbs"),uploadedVideo:t("./uploaded_video.hbs"),commentCount:t("./comment_count.hbs"),editorialLockup:t("./lockup-editorial.hbs"),recommendation:t("./recommendation.hbs"),connectFeedSection:t("./connectFeedSection.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./author.hbs":176,"./background.hbs":177,"./badge.hbs":178,"./coldstart_status.hbs":179,"./comment.hbs":180,"./comment_count.hbs":181,"./connectFeedSection.hbs":182,"./lockup-editorial.hbs":185,"./message.hbs":186,"./photo.hbs":188,"./playlist.hbs":189,"./post.hbs":190,"./post_actions.hbs":191,"./product.hbs":192,"./profile.hbs":193,"./recommendation.hbs":194,"./social.hbs":195,"./soundbite.hbs":196,"./track.hbs":197,"./uploaded_audio.hbs":198,"./uploaded_video.hbs":199,"./video.hbs":200,itml:435}],185:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"view-profile"},3:function(t,e,n,i){return"action-lockup"},5:function(t,e,n,i){return"align-center"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},9:function(t,e,n,i){return'selectable="true"'},11:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColorComplement:a,{name:"hexToRgb",hash:{},data:i}))+';"'},13:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'data-connect-id="'+o((a=null!=(a=e.connectId||(null!=t?t.connectId:t))?a:l,typeof a===r?a.call(t,{name:"connectId",hash:{},data:i}):a))+'"'},15:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"","curator-avatar",{name:"productArtwork",hash:{},data:i}))+"\n"},17:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(r+=a),r},18:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},20:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"            "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},22:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <title\n            class="editorial-title"\n            ';return a=e["if"].call(t,null!=t?t.titleMaxLines:t,{name:"if",hash:{},fn:this.program(23,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            ",a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >"+s((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===l?r.call(t,{name:"title",hash:{},data:i}):r)),a=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</title>\n"},23:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'maxLines="'+o((a=null!=(a=e.titleMaxLines||(null!=t?t.titleMaxLines:t))?a:l,typeof a===r?a.call(t,{name:"titleMaxLines",hash:{},data:i}):a))+'"'},25:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"'},27:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'<badge style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" class="explicit-badge" src="resource://explicit"/>'},29:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line1||(null!=t?t.line1:t))?r:o,typeof r===l?r.call(t,{name:"line1",hash:{},data:i}):r))+"</subtitle>\n"},30:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},32:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line2||(null!=t?t.line2:t))?r:o,typeof r===l?r.call(t,{name:"line2",hash:{},data:i}):r))+"</subtitle>\n"},34:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"\n            >"+s((r=null!=(r=e.line3||(null!=t?t.line3:t))?r:o,typeof r===l?r.call(t,{name:"line3",hash:{},data:i}):r))+"</subtitle>\n"},36:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"\n            >"+l((e.getYearFromDate||t&&t.getYearFromDate||r).call(t,null!=t?t.date:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},38:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <subtitle\n            class="editorial-subtitle lockup-subtitle"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(30,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"\n            >"+l((e.first||t&&t.first||r).call(t,null!=t?t.list:t,{name:"first",hash:{},data:i}))+"</subtitle>\n"},40:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='        <badge class="badge"\n            text="'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.badge:t,{name:"toUpperCase",hash:{},data:i}))+'"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(41,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+">\n        </badge>\n"},41:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+"; background-color: "+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.9,{name:"getHighContrastColor",hash:{},data:i}))+';"'},43:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <button\n            type="image"\n            selectable="true"\n            big-hit="true"\n            data-content-id="'+l(r(null!=t?t.id:t,t))+'"\n            class="editorial-button action-button"\n            ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"button"},data:i}),null!=a&&(s+=a),s+='>\n            <img\n                class="editorial-button-image"\n                ',a=e["if"].call(t,null!=(a=null!=t?t.background:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(44,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'\n                src="resource://UniversalActionControl">\n            </img>\n        </button>\n'},44:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="itml-img-mask-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.background:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},46:function(t,e,n,i,a){var r,l=e.helperMissing,o='        <button\n            type="image"\n            big-hit="true"\n            class="editorial-button view-profile"\n            ';return r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"button"},data:i}),null!=r&&(o+=r),o+='>\n            <img\n                class="editorial-button-image"\n                ',r=e["if"].call(t,null!=t?t.background:t,{name:"if",hash:{},fn:this.program(47,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+'\n                src="resource://chevronRight">\n            </img>\n        </button>\n'},47:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="itml-img-mask-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[1]?a[1].background:a[1])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='<lockup\n    type="editorial"\n    class="editorial-lockup ';return r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(3,i,a),data:i}),null!=r&&(c+=r),c+=" ",r=e["if"].call(t,null!=t?t.product:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='"\n    data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n    ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=t?t.selectable:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=(r=null!=t?t.background:t)?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=e["if"].call(t,null!=t?t.connectId:t,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n    ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(c+=r),c+="\n\n",r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(29,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(32,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(34,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.date:t,{name:"if",hash:{},fn:this.program(36,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(38,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.badge:t,{name:"if",hash:{},fn:this.program(40,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(43,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n",r=e["if"].call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(46,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"\n</lockup>\n"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],186:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<description\n    maxLines="0"\n    class="message-text"\n    ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n    >",a=(e.formatMentionsAndUrls||t&&t.formatMentionsAndUrls||r).call(t,null!=t?t.message:t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,{
name:"formatMentionsAndUrls",hash:{},data:i}),null!=a&&(l+=a),l+="</description>\n",a=(e.margin||t&&t.margin||r).call(t,"5pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l},useData:!0})},{"hbsfy/runtime":418}],187:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <button type="imageText" id="post" class="post-button align-right"><img class="social-icon" src="resource://post" width="13" height="19" /></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c="<title>"+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:o,typeof r===l?r.call(t,{name:"name",hash:{},data:i}):r))+"</title>\n";return a=e["if"].call(t,null!=t?t.hasPostPermission:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":418}],188:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='<lockup\n    type="editorial"\n    selectable="true"\n    data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n    class="view-detail"\n    ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(u+=a),u+'>\n\n    <img\n        class="view-detail align-center"\n        data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        width="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.width:a,t))+'"\n        height="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.height:a,t))+'"\n        srcset="'+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.url:a,t))+" "+s(c(null!=(a=null!=(a=null!=t?t.photo:t)?a.image:a)?a.dpr:a,t))+'">\n    </img>\n</lockup>\n'},useData:!0})},{"hbsfy/runtime":418}],189:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        class="action-lockup"\n        selectable="true"\n        data-content-id="'+o(l(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        data-preview-id="'+o(l(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=">\n        "+o((e.heroArtwork||t&&t.heroArtwork||s).call(t,t,!1,(r=i&&i.root)&&r.artworkMap,{name:"heroArtwork",hash:{},data:i}))+'\n    </lockup>\n    <lockup\n        type="caption"\n        selectable="true"\n        class="action-lockup"\n        data-content-id="'+o(l(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        data-preview-id="'+o(l(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=">\n        ",r=e["if"].call(t,null!=(r=null!=a[1]?a[1].heroImage:a[1])?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n        <title\n            class="playlist-hero-title lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+o(l(null!=t?t.name:t,t))+"</title>\n        ",r=(e.margin||t&&t.margin||s).call(t,"2pt",{name:"margin",hash:{},data:i}),null!=r&&(c+=r),c+='\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle playlist-subtitle lockup-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+o((e.toUpperCase||t&&t.toUpperCase||s).call(t,null!=t?t.playlistBy:t,{name:"toUpperCase",hash:{},data:i}))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-button cover-button editorial-button"\n            data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n            ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"play",targetType:"button"},data:i}),null!=r&&(c+=r),c+">\n            <title>"+o((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n"},2:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},4:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],190:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.message,"","message",t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a;return a=this.invokePartial(n.photo,"","photo",t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a;return a=this.invokePartial(n.track,"","track",t,void 0,e,n,i),null!=a?a:""},7:function(t,e,n,i){var a;return a=this.invokePartial(n.product,"","product",t,void 0,e,n,i),null!=a?a:""},9:function(t,e,n,i){var a;return a=this.invokePartial(n.playlist,"","playlist",t,void 0,e,n,i),null!=a?a:""},11:function(t,e,n,i){var a;return a=this.invokePartial(n.profile,"","profile",t,void 0,e,n,i),null!=a?a:""},13:function(t,e,n,i){var a;return a=this.invokePartial(n.video,"","video",t,void 0,e,n,i),null!=a?a:""},15:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedVideo,"","uploadedVideo",t,void 0,e,n,i),null!=a?a:""},17:function(t,e,n,i){var a;return a=this.invokePartial(n.uploadedAudio,"","uploadedAudio",t,void 0,e,n,i),null!=a?a:""},19:function(t,e,n,i){var a;return a=this.invokePartial(n.soundbite,"","soundbite",t,void 0,e,n,i),null!=a?a:""},21:function(t,e,n,i){var a,r=e.helperMissing,l="    ";return a=(e.margin||t&&t.margin||r).call(t,"2",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+"\n"},23:function(t,e,n,i){var a,r=e.helperMissing,l="    ";return a=(e.margin||t&&t.margin||r).call(t,"20pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.message:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.photo:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.track:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.album:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.radio:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.brand:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.curator:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.artist:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.genre:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.video:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.musicVideo:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedVideo:t,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.uploadedAudio:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.soundbite:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.social,"","social",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],191:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.post:t)?a.heroImage:a)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='<button big-hit="true"\n        data-connect-id="'+l(r(null!=(a=null!=t?t.postActions:t)?a.id:a,t))+'"\n        data-target-id="'+l(r(null!=(a=null!=t?t.postActions:t)?a.targetId:a,t))+'"\n        data-target-type="'+l(r(null!=(a=null!=t?t.postActions:t)?a.targetType:a,t))+'"\n    ';return a=e["if"].call(t,null!=(a=null!=t?t.post:t)?a.heroImage:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'\n    class="message-text '+l(r(null!=(a=null!=t?t.postActions:t)?a.className:a,t))+' post-action-text">'+l(r(null!=(a=null!=t?t.postActions:t)?a.text:a,t))+"</button>"},useData:!0})},{"hbsfy/runtime":418}],192:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(4,i,a),data:i}),null!=r&&(l+=r),l},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        "+r((e.heroArtwork||t&&t.heroArtwork||a).call(t,t,{name:"heroArtwork",hash:{},data:i}))+"\n"},4:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.editorialLockup,"        ","editorialLockup",t,{product:"true",date:null!=t?t.releaseDate:t,line1:null!=t?t.albumBy:t,titleMaxLines:2,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[2]?a[2].heroImage:a[2],selectable:"true"},e,n,i),null!=r&&(l+=r),l},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],193:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{profile:"true",list:null!=t?t.genreNames:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(l+=r),l+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],194:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return" lockup-disabled"},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        <img\n            class="view-profile curator-avatar"\n            data-content-id="'+l(r(null!=t?t.entityId:t,t))+'"\n            width="'+l(r(null!=(a=null!=t?t.avatarImage:t)?a.width:a,t))+'"\n            height="'+l(r(null!=(a=null!=t?t.avatarImage:t)?a.height:a,t))+'"\n            srcset="'+l(r(null!=(a=null!=t?t.avatarImage:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.avatarImage:t)?a.dpr:a,t))+'">\n        </img>\n'},5:function(t,e,n,i){return'toggled="true"'},7:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return l(r((a=i&&i.root)&&a.followingText,t))},9:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return l(r((a=i&&i.root)&&a.followText,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='<lockup\n    class="view-profile recommended-lockup ';return a=e["if"].call(t,(a=i&&i.root)&&a.lockupPressStateDisabled,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='"\n    data-content-id="'+l(r(null!=t?t.entityId:t,t))+'">\n\n',a=e["if"].call(t,null!=t?t.avatarImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n    <title maxLines="0" class="recommended-text view-profile" data-content-id="'+l(r(null!=t?t.entityId:t,t))+'">\n        <text>'+l(r(null!=t?t.name:t,t))+'</text>\n    </title>\n\n    <button\n        type="thin"\n        sub-type="toggle"\n        class="follow-button"\n        toggled-text="'+l(r((a=i&&i.root)&&a.followingText,t))+'"\n        non-toggled-text="'+l(r((a=i&&i.root)&&a.followText,t))+'"\n        ',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='\n        toggle-id="'+l(r(null!=t?t.entityId:t,t))+'"\n        data-entity-id="'+l(r(null!=t?t.entityId:t,t))+'"\n        data-entity-type="'+l(r(null!=t?t.entityType:t,t))+'">\n        <title>',a=e["if"].call(t,(a=i&&i.root)&&a.toggled,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(o+=a),o+"</title>\n    </button>\n</lockup>\n"},useData:!0})},{"hbsfy/runtime":418}],195:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="itml-img-mask-color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},3:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.heroImage:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},5:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-show-keyboard="false"\n        class="comment-button social-button">\n        <img\n            class="social-icon"\n            width="19" height="17"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='\n            src="resource://comment">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n            >",a=e["if"].call(t,null!=t?t.commentCount:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</text>\n    </button>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.commentCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" "+r((e.numberWithCommas||t&&t.numberWithCommas||a).call(t,null!=t?t.shareCount:t,{name:"numberWithCommas",hash:{},data:i}))+" "},10:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='        <button\n            type="imagetext"\n            data-connect-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n            data-target-id="'+s(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n            class="share-button social-button">\n            <text\n                class="social-text"\n                ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"\n                >"+s((r=null!=(r=e.playCount||(null!=t?t.playCount:t))?r:o,typeof r===l?r.call(t,{name:"playCount",hash:{},data:i}):r))+"</text>\n        </button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l=this.escapeExpression,o="function",s=e.helperMissing,c=this.lambda,u='<list class="social-list">\n    <button\n        type="imagetext"\n        sub-type="toggle"\n        big-hit="true"\n        auto-increment-count="true"\n        toggled="'+l(e.lookup.call(t,(a=i&&i.root)&&a.likesData,null!=t?t.id:t,{name:"lookup",hash:{},data:i}))+'"\n        toggle-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-connect-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        class="like-button social-button">\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ';return a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlNeutral">\n        </img>\n        <img\n            class="social-icon"\n            width="17" height="15"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://LoveHateControlLoved">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >"+l((e.numberWithCommas||t&&t.numberWithCommas||s).call(t,null!=t?t.likeCount:t,{name:"numberWithCommas",hash:{},data:i}))+"</text>\n    </button>\n\n",a=e.unless.call(t,(a=i&&i.root)&&a.hasConnectRestrictions,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='    <button\n        type="imagetext"\n        selectable="true"\n        big-hit="true"\n        data-connect-id="'+l((r=null!=(r=e.id||(null!=t?t.id:t))?r:s,typeof r===o?r.call(t,{name:"id",hash:{},data:i}):r))+'"\n        data-target-id="'+l(c(null!=(a=null!=t?t.target:t)?a.id:a,t))+'"\n        class="share-button social-button">\n        <img\n            class="social-icon"\n            width="13" height="19"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='\n            src="resource://socialShare">\n        </img>\n        <text\n            class="social-text"\n            ',a=e["if"].call(t,null!=t?t.heroImage:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="\n            >",a=e["if"].call(t,null!=t?t.shareCount:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+="</text>\n    </button>\n\n",a=e["if"].call(t,null!=t?t.playCount:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"</list>\n"},useData:!0})},{"hbsfy/runtime":418}],196:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l,o=this.lambda,s=this.escapeExpression,c=e.helperMissing,u="function",h='    <lockup\n        type="editorial"\n        data-content-id="'+s(o(null!=(r=null!=a[1]?a[1].target:a[1])?r.id:r,t))+'"\n        ';return r=e["if"].call(t,null!=(r=null!=a[1]?a[1].heroImage:a[1])?r.bgColorComplement:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(h+=r),h+='>\n\n        <title\n            class="soundbite-title"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n            >"+s((e.toUpperCase||t&&t.toUpperCase||c).call(t,null!=t?t.name:t,{name:"toUpperCase",hash:{},data:i})),r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='</title>\n        <button\n            type="play"\n            class="play-button cover-button editorial-button"\n            data-content-id="'+s((l=null!=(l=e.id||(null!=t?t.id:t))?l:c,typeof l===u?l.call(t,{name:"id",hash:{},data:i}):l))+'"\n            ',r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"play",targetType:"button"},data:i}),null!=r&&(h+=r),h+">\n            <title>"+s((e.loc||t&&t.loc||c).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n"},2:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},4:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},6:function(t,e,n,i,a){var r,l="<badge ";return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+' class="explicit-badge" src="resource://explicit"/>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],197:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{track:"true",line1:null!=t?t.artistName:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(l+=r),l+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],198:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.editorialLockup,"    ","editorialLockup",t,{badge:null!=a[1]?a[1].badge:a[1],track:"true",line2:null!=a[1]?a[1].ownerName:a[1],line1:null!=t?t.description:t,title:null!=t?t.name:t,connectId:null!=a[1]?a[1].id:a[1],background:null!=a[1]?a[1].heroImage:a[1],selectable:"true"},e,n,i),null!=r&&(l+=r),l},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r;return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r?r:""},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],199:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l,o=this.lambda,s=this.escapeExpression,c=e.helperMissing,u="function",h='    <lockup\n        type="shelf"\n        selectable="true"\n        class="play-media"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='\n        data-content-id="'+s(o(null!=t?t.id:t,t))+'"\n        data-connect-id="'+s(o(null!=a[1]?a[1].id:a[1],t))+'"\n        ',r=(e["data-metrics"]||t&&t["data-metrics"]||c).call(t,{name:"data-metrics",hash:{impressions:!0,location:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(h+=r),h+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+='    </lockup>\n\n    <title maxLines="2"\n        class="align-center"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+="\n        >"+s((l=null!=(l=e.name||(null!=t?t.name:t))?l:c,typeof l===u?l.call(t,{name:"name",hash:{},data:i}):l))+" ",r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+"</title>\n\n"},2:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <img\n                width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n                    <button\n                        type="play"\n                        class="play-media cover-button"\n                        data-content-id="'+l(r(null!=t?t.id:t,t))+'"\n                        ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"play",targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                        <title>"+l((e.loc||t&&t.loc||o).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n                    </button>\n            </img>\n"},6:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},8:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'<badge style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';" class="explicit-badge" src="resource://explicit"/>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],200:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <lockup\n        selectable="true"\n        class="action-lockup"\n        ';return r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n        data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n        ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=">\n\n",r=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='    </lockup>\n\n\n    <lockup\n        type="caption"\n        selectable="true"\n        data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n        class="action-lockup caption-lockup"\n        ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n        ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+='>\n\n        <title\n            class="video-title"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+o(l(null!=t?t.name:t,t)),r=e["if"].call(t,null!=t?t.showExplicitBadge:t,{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='</title>\n\n        <subtitle\n            maxLines="1"\n            class="caption-subtitle video-subtitle"\n            ',r=e["if"].call(t,null!=a[1]?a[1].heroImage:a[1],{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="\n            >"+o(l(null!=t?t.artistName:t,t))+'</subtitle>\n\n        <button\n            type="play"\n            class="play-media cover-button caption-play-button"\n            data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n            ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,actionType:"play",targetType:"button"},data:i}),null!=r&&(c+=r),c+">\n            <title>"+o((e.loc||t&&t.loc||s).call(t,"FUSE.Play",{name:"loc",hash:{},data:i}))+"</title>\n        </button>\n    </lockup>\n\n\n"},2:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.1,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <img\n                disabled="true"\n                width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n            </img>\n'},8:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.bgColorComplement:r,{name:"hexToRgb",hash:{},data:i}))+';"'},10:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i}))+';"'},12:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'<badge style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,{name:"getHighContrastColor",hash:{},data:i
}))+';" class="explicit-badge" src="resource://explicit"/>'},14:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'style="color: '+o((e.getHighContrastColor||t&&t.getHighContrastColor||l).call(t,null!=(r=null!=a[2]?a[2].heroImage:a[2])?r.isDark:r,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],201:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=a.pubSub,o=i.event.Event,s=t("./template.hbs"),c=t("../partials/coldstart_status.hbs"),u=t("../../base").style,h=t("../../common").traits.EventMap,d=i.controller.MultiElementController,p=t("../../common").traits.TabComponent,m=t("../../common").traits.DataProvider,f=t("../helpers.js"),g=t("../style.hbs"),s=t("./template.hbs"),b=function(t,e){t=t||{},t.styles=t.styles||[],t.styleTemplate=g,t.styles.push(new u(t)),t.events=t.events||[],t.events.push("select"),d.call(this,t,e),h.call(this,t),p.call(this,t),f.call(this,t),this.coldstartStatusBarVisible=!1,this.data=t.data,this.params=t.params,this.api=t.api||"recommendedEntities",this.pullToRefreshEnabled="false"!==t.pullToRefreshEnabled,this.followText=t.followText||r.loc("FUSE.Connect.Coldstart.Follow"),this.followingText=t.followingText||r.loc("FUSE.Connect.Coldstart.Following"),this.toggled=t.toggled,this.viewProfileEnabled=this.data&&this.data.viewProfileEnabled!==!1,this.lockupPressStateDisabled=!this.viewProfileEnabled,this.model=new m,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),a.extend(this.onSelect,{"follow-button":this.follow,"done-following":this.doneFollowing,"view-following":this.viewFollowing,"view-recommended":this.viewRecommended.bind(this)}),this.viewProfileEnabled!==!1&&(this.onSelect["view-profile"]=this.viewProfile),this.loading=!0,t.hasAutoFollowToggle?this.getUserProfile():this.fetchRecommendations()};a.inherit(b,d),a.inherit(b,h,!0),a.inherit(b,p,!0),a.inherit(b,f,!0),b.prototype.template=s,b.prototype.getUserProfile=function(){var t={user:itms.accountInfo.DSID},e=a.urls.userProfile();a.xhr({method:"GET",url:e+a.query.build(t),failure:this.handleUserProfile.bind(this),success:this.handleUserProfile.bind(this)})},b.prototype.handleUserProfile=function(t){var e=JSON.parse(t);e&&e.profile&&e.profile.autoFollowEnabled&&(this.autoFollowEnabled=!!e.profile.autoFollowEnabled),this.fetchRecommendations()},b.prototype.fetchRecommendations=function(){var t=this.params||{},e=a.urls[this.api]();this.model.fetchData({url:e+a.query.build(t),success:this.fetchRecommendationsSuccess.bind(this),failure:this.fetchRecommendationsFailure.bind(this),retries:1})},b.prototype.fetchRecommendationsSuccess=function(t){this.viewModel=[];for(var e,n=t.recommendedEntities||t.follows||[],i=0;i<n.length;i++)e=this.lookupNode(n[i]),this.viewModel.push(e);return this.viewModel},b.prototype.fetchRecommendationsFailure=function(t,e){this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},b.prototype.lookupNode=function(t){var e=t.entityId||t.targetEntityId,n=this.model.lookupContent(e,this.processNode.bind(this,t));return n},b.prototype.processNode=function(t,e){var n=a.deepClone(e),i=t.entityType||t.targetEntityType,r=n.artwork||n.latestAlbumArtwork;return r&&(n.avatarImage=this.getArtwork({kind:"follower",artwork:r}).image),n.entityId=t.entityId||t.targetEntityId,n.entityType=t.entityType||t.targetEntityType,n[i]=!0,n},b.prototype.userProfileReady=function(t){this.userProfile=t,this.handleDataReady()},b.prototype.handleDataReady=function(t){a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.loading=!1,this.render()},b.prototype.follow=function(t){function e(t,e){this.insertColdstartStatusBar();var n=JSON.parse(e);(n&&"error"===n.status||!t)&&a.log.warn("follow request error: ",e)}var n={},i=t.target,r=!t.toggled,l=a.urls.follow(),o=a.urls.unfollow(),s=i.getAttribute("data-entity-id"),c=i.getAttribute("data-entity-type"),u=r?l:o;n[c]=s,a.xhr({method:"GET",url:u+a.query.build(n),failure:e.bind(this,!1),success:e.bind(this,!0)})},b.prototype.insertColdstartStatusBar=function(){if(!this.coldstartStatusBarVisible){var t=this.el.ownerDocument.getElementById("coldstart-statusbar-section"),e=a.parser.parse(c(),this.el.ownerDocument);t&&e&&(t.appendChild(e),this.coldstartStatusBarVisible=!0)}},b.prototype.doneFollowing=function(){l.publish("refreshConnectTab",!0)},b.prototype.viewFollowing=function(){var t={dataType:"connect_following",navigationDocument:modal,isModal:!0};this.dispatchEvent(new o("tabPush",{detail:t}))},b.prototype.viewProfile=function(t){function e(e){this.model.lookup(e)&&this.pushProduct(t)}var n=t.target.getAttribute("data-content-id"),i=this.model.lookup(n);i?this.pushProduct(t):this.model.fetchContent({contentIds:[n],profile:this.model.pageProfile,onSuccess:e.bind(this,n),onFailure:e.bind(this,n)})},b.prototype.viewRecommended=function(t){var e=t.target.ownerDocument.navigationDocument,n={data:{viewProfileEnabled:this.viewProfileEnabled},dataType:"connect_recommendations",navigationDocument:e};this.dispatchEvent(new o("tabPush",{detail:n}))},e.exports=b},{"../../../util":391,"../../base":97,"../../common":133,"../helpers.js":174,"../partials/coldstart_status.hbs":179,"../style.hbs":205,"./template.hbs":204,itml:435}],202:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=t("../../base/document"),l=t("./element"),o=t("../../common").traits.TabComponent,s=function(e,n){e=e||{},e.controllers=e.controllers||[],e.name=a.loc("FUSE.Connect.Recommended");var s=i.keypath(e,"event.detail.isModal");if(e.controllers.length||(this.controller=new l(e),e.controllers.push(this.controller)),s&&(this.titleTemplate=t("./nav_title.hbs")),r.call(this,e,n),o.call(this),s){var c=function(){var t=this.el.getElementById("doneButton");t&&t.addEventListener("select",this.handleDoneButton.bind(this))};this.navigationBarController.addEventListener("render",c.bind(this)),c.call(this)}};i.inherit(s,r),i.inherit(s,o,!0),s.prototype.documentType="settingsTemplate",s.prototype.handleDoneButton=function(){modal.popDocument()},e.exports=s},{"../../../util":391,"../../base/document":96,"../../common":133,"./element":201,"./nav_title.hbs":203}],203:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"<title>"+r((e.loc||t&&t.loc||a).call(t,"FUSE.Connect.Recommended",{name:"loc",hash:{},data:i}))+'</title>\n<button id="doneButton" class="hide-sheet align-right" type="done">'+r((e.loc||t&&t.loc||a).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>"},useData:!0})},{"hbsfy/runtime":418}],204:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <pullToRefresh class="refresh"/>\n'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(9,i),data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r='       <group style="padding: 0 0 0 0;">\n';return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </group>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.recommendation,"                ","recommendation",t,void 0,e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){return"       <spacer/>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.pullToRefreshEnabled:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],205:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},3:function(t,e,n,i){return"        color: rgb(0,0,0);\n"},5:function(t,e,n,i){return"        background-color:rgba(255,255,255,0.15);\n"},7:function(t,e,n,i){return"        background-color:rgba(0,0,0,0.2);\n"},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.6",{name:"hexToRgb",hash:{},data:i}))+"\n"},11:function(t,e,n,i){return"        color: rgb(0,0,0);\n        background-color:rbga(0,0,0,0.6);\n"},13:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+"\n"},15:function(t,e,n,i){return"        itml-img-mask-color:rgba(0,0,0);\n"},17:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+"\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n"},19:function(t,e,n,i){return"        background-color: rgba(0, 0, 0, 0.4);\n        color: white;\n"},21:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+"\n"},23:function(t,e,n,i){return"        background-color: rgba(0, 0, 0, 0.4);\n"},25:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".post-detail {\n  background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n  color:"+r((e.getHighContrastColor||t&&t.getHighContrastColor||a).call(t,null!=t?t.isDark:t,.6,{name:"getHighContrastColor",hash:{},data:i}))+";\n}\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=".coldstart-spacer-xs {\n    itml-divider-type:borderless;\n    itml-item-height: 180pt;\n}\n\n.coldstart-spacer-s {\n    itml-divider-type:borderless;\n    itml-item-height: 230pt;\n}\n\n.coldstart-spacer-m {\n    itml-divider-type:borderless;\n    itml-item-height: 280pt;\n}\n\n.coldstart-spacer-l {\n    itml-divider-type:borderless;\n    itml-item-height: 420pt;\n}\n\n.coldstart-spacer-xl {\n    itml-divider-type:borderless;\n    itml-item-height: 400pt;\n}\n\n.coldstart-spacer-xxl {\n    itml-divider-type:borderless;\n    itml-item-height: 680pt;\n}\n\n.coldstart-title {\n    color: rgba(0,0,0,.8);\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 28pt;\n    text-align: center;\n    max-width: 300pt;\n}\n\n.coldstart-subtitle {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 20pt;\n    text-align: center;\n    color: rgba(0,0,0,.6);\n}\n\n.coldstart-button-list {\n    padding: 20pt 0 0 0;\n}\n\n.coldstart-subtitle-link {\n    itml-text-max-lines: 0;\n    font-weight: light;\n    font-size: 16pt;\n    text-align: center;\n}\n\n.signin-button {\n    font-weight: medium;\n}\n\n.no-followers-title {\n   font-size: 20pt;\n   text-align: center;\n   itml-text-max-lines: 0;\n}\n\n.recommended-lockup {\n    padding: 10pt 0pt 10pt 0pt;\n}\n\n.recommended-text {\n    font-size: 16pt;\n}\n\n.feed-start-card {\n    padding: 0 0 20pt 0;\n}\n\n.feed-start-close-button {\n    itml-position: top-left;\n    padding: 16pt 0 0 4pt;\n    margin: 0 0 0 0;\n}\n\n.feed-start-title {\n    color: rgba(0,0,0,.9);\n    padding: 0 0 0 0;\n    itml-text-max-lines: 0;\n    font-size: 28pt;\n    font-weight: thin;\n    text-align: center;\n    max-width: 300pt;\n}\n\n.feed-start-subtitle {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    font-weight: light;\n    text-align: center;\n    color: rgb(142,142,147);\n}\n\n.feed-start-recommendations-button {\n    font-size: 13pt;\n    font-weight: bold;\n    color: tint-color;\n    border-color: tint-color;\n    border-width: 1pt;\n    border-radius: 19pt;\n    padding: 10pt 32pt 10pt 32pt;\n}\n\n.feed-start-following-button {\n    font-size: 14pt;\n    font-weight: light;\n    color: tint-color;\n}\n\n.feed-start-divider {\n    padding: 0 0 0 0; margin: 0 0 0 0;\n    color:rgb(255,0,0);\n}\n\n.author-lockup {\n    margin: -5.0 0 0 0;\n}\n.author-text {\n    font-weight: normal;\n";return a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n\n\n.bottom-loader {\n    max-height: 30;\n    padding: 0 0 12pt 0;\n}\n\n.large-screen-grid {\n    column-count:0;\n    itml-item-width:420;\n    border-color:rgba(255,255,255,0);\n}\n\n.connect-top {\n    padding: 50 0 0 0;\n}\n.connect-bottom {\n    padding:0 0 0 0;\n}\n.connect-last {\n    padding:0 0 1pt 0;\n}\n.social-list {\n    padding: 5pt 0 0 0;\n}\n.social-lockup {\n    itml-align: center;\n}\n.social-button {\n    itml-align:center;\n}\n.social-icon {\n    itml-img-mask-color:rgb(0,0,0);\n}\n.social-text {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.like-button {\n    padding: 0 68 0 0;\n}\n.comment-button {\n    padding: 0 0 0 0;\n}\n.share-button {\n    padding: 0 0 0 68;\n}\n\n.message-text {\n    text-align: left;\n    font-size:16pt;\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-lockup {\n    itml-lockup-type: editorial;\n",a=e["if"].call(t,null!=t?t.isDark:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),null!=a&&(r+=a),r+="}\n\n.align-center {\n    itml-position: center;\n}\n\n.editorial-title {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+="    background-color: rbga(0,0,0,0);\n}\n.editorial-subtitle {\n",a=e["if"].call(t,null!=t?t.textColor1:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r+="}\n.editorial-button {\n    padding: 0 15pt 0 0;\n    itml-position:center;\n}\n.editorial-button-image {\n    padding: 10pt 10pt 10pt 10pt;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r+="}\n.caption-lockup {\n    itml-lockup-type: caption;\n    background-color:rgb(192,192,192);\n}\n\n.caption-title {\n    font-size: 13pt;\n    font-weight: medium;\n    color: rgb(0,0,0);\n    text-align: center;\n}\n\n.caption-subtitle {\n    color:rgba(0,0,0,0.7);\n    font-size: 10pt;\n}\n\n.caption-button {\n    padding:0 15pt 0 0;\n    itml-position:center;\n}\n\n.caption-play-button {\n    padding: 0 15pt 0 0;\n    itml-position: top-right;\n}\n\n.playlist-title {\n    itml-text-max-lines: 2;\n}\n\n.playlist-subtitle {\n    itml-font-style: caption2;\n    font-size: 10pt;\n    itml-text-max-lines: 2;\n}\n\n.soundbite-title {\n    font-size: 12pt;\n    font-weight: medium;\n}\n\n.badge {\n    font-size: 11pt;\n\n    font-weight: medium;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.program(19,i),data:i}),null!=a&&(r+=a),r+="    itml-badge-treatment: rounded;\n    itml-position: top-right;\n    padding: 0 10pt 0 0;\n}\n\n.explicit-badge {\n    font-size: 11pt;\n    font-weight: medium;\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.program(23,i),data:i}),null!=a&&(r+=a),r+="    itml-badge-treatment: rounded;\n    itml-position: top-right;\n    padding: 0 0 0 0;\n}\n\n.follow-button {\n    font-size: 12pt;\n    color: tint-color;\n    border-color: rgba(0, 0, 0, 0.2);\n    border-width: 1pt;\n    border-radius: 13pt;\n    padding: 5pt 12pt 5pt 12pt;\n}\n\n.post-action-text {\n    text-align: center;\n}\n\n.top-right {\n    itml-position: top-right;\n}\n\n.comments-grid {\n    column-count: 0;\n}\n\n.comment-title {\n    itml-text-align:left;\n    font-size: 14pt\n\n}\n\n.comment-text {\n    font-size: 14pt;\n    itml-text-align:left;\n\n}\n\n.comment-time {\n    itml-align: top;\n    itml-position: top-right;\n}\n\n.comment-lockup {\n    background-color: rgba(0,0,0,0);\n}\n.comment-count {\n    itml-text-align:center;\n    text-align: center;\n    itml-align: center;\n    color:tint-color;\n}\n\n.follow-bar {\n    background-color: rgba(255,255,255,0.0);\n    padding: 0 0 0 0;\n}\n\n.done-following {\n    font-weight: bold;\n}\n\n.report-comment {\n    background-color:rgb(243,163,63);\n}\n.gradient {\n    itml-img-treatment:radial-gradient;\n    padding: 0pt, 0pt, 0pt, 0pt;\n    itml-img-fill:1;\n}\n.owner-name {\n    font-weight: normal;\n    font-size: 16pt;\n}\n.attribution-text {\n    font-weight:regular;\n}\n.view-recommended {\n    padding: 15pt 0pt 15pt 0;\n}\n.top-spacer {\n    margin: 0 0 15 0;\n}\n.bottom-spacer {\n    margin: 0 0 75pt 0;\n}\n.post-divder {\n    padding: 0 0 0 0;\n}\n.lockup-disabled {\n    background-color: rgba(0,0,0,0);\n}\n",a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(25,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n@media all and (min-width: 1024pt) {\n    .large-screen-grid {\n        itml-item-width: 420pt;\n    }\n}\n\n"},useData:!0})},{"hbsfy/runtime":418}],206:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../sharing"),l=t("../../util"),o=t("../common/traits/data_provider"),s=l.loc,c=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.handleSelect.bind(this)),this.model=new o};c.prototype.handleSelect=function(t){var e=t.buttonIdentifier;e.indexOf("share")>-1?this.handleShare(t):e.indexOf(s.loc("FUSE.ForYou.RecommendLess"))>-1?this.handleRecommendLess(t):"header"===e&&this.handleSelectHeader(t)},c.prototype.handleSelectHeader=function(t){var e=l.keypath(t,"entityValueProvider"),n=e.valuesForEntityProperties(["kind","id"]);if("album"===n.kind){var i=n.id;if(i&&"0"!==i){var r,o=this.model.lookup(i);if(r=o?o.url:l.urls.build("album",{id:i})){var s={data:{url:r},navigationDocument:this.nativeViewController.navigationDocument};this.eventHandlers.tabPush(new a("tabPush",{detail:s}))}else l.log.error("ContextualActionsController:: no url for id",i)}}else l.log.error("ContextualActionsController: Unsupported kind: "+n.kind)},c.prototype.handleShare=function(t){this.shareController=new r({data:{event:t}}),l.keypath(this.shareController,"controller.loading")?this.shareController.addEventListener("shareDataReady",function(){this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})}.bind(this)):this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})},c.prototype.handleRecommendLess=function(t){var e=l.keypath(t,"entityValueProvider"),n=e.valueForEntityProperty("albumStoreID"),i=new o,a=l.urls.setRecommendationPref(-1)+"&id="+n;n&&i.fetchData({url:a,success:function(){}})},c.prototype.handleShareSubmit=function(){},e.exports=c},{"../../util":391,"../common/traits/data_provider":149,"../sharing":366,itml:435}],207:[function(t,e,n){var i=t("../../util"),a=t("./template.hbs"),r=t("../base").controller,l=function(t,e){t=t||{},this.errorMessage=t.errorMessage,this.errorTitle=t.errorTitle,r.call(this,t,e)};i.inherit(l,r),l.prototype.template=a,e.exports=l},{"../../util":391,"../base":97,"./template.hbs":209}],208:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,l=t("./controller"),o=function(t,e){t=t||{},t.controllers=t.controllers||[],t.watchedAttributes=t.watchedAttributes||[],t.data=t.data||{};var n,i=t.data.url;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),i&&(t.watchedAttributes.push("loadUrl"),t.loadUrl=i),r.call(this,t,e),this.navigationBarController.watchedAttributes.push("hidesShadow"),this.navigationBarController.watchedAttributes.push("class"),this.navigationBarController.hidesShadow="1",this.navigationBarController["class"]="hidden-bar",this.navigationBarController.render()};a.inherit(o,r),o.prototype.documentType="stackTemplate",o.prototype.replaceDocument=function(t){this.tabController.navigationDocument.replaceDocument(t,this.el,{animated:!1})},e.exports=o},{"../../util":391,"./controller":207,itml:435}],209:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"	","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],210:[function(t,e,n){function i(t){t=t||{},r.call(this,t),t.data&&(this.data=t.data),this.token=""}var a=t("itml"),r=a.model.BaseModel,l=t("../../util"),o=t("moment");l.inherit(i,r,!0),i.prototype.constructor=i,i.prototype.lookup=function(){return this.token},i.prototype.fetchToken=function(t){var e=l.keypath(t,"success")?t.success:null,n=l.keypath(t,"failure")?t.failure:null;t.force||!this.isValid()?l.xhr({url:"https://itunes.apple.com/apps1b/authtoken/token.txt",method:"GET",success:function(t){this.tokenSuccess(t,e)}.bind(this),failure:function(t){this.tokenFailure(t,n)}.bind(this)}):this.isValid()&&"string"==typeof this.token?e(this.token):n(this.token)},i.prototype.tokenSuccess=function(t,e){"string"==typeof t&&(this.token="?token="+t.trim(),this.expires||(this.expires=this.token.match(/expires=(.*?)~/i)[1]||null)),"function"==typeof e&&e(t)},i.prototype.tokenFailure=function(t,e){l.log.error("Festival: Token Fetch Failure: ",t),"function"==typeof e&&e(t)},i.prototype.isValid=function(){if(!this.expires)return!1;var t=o().valueOf(),e=1e3*parseInt(this.expires);return!isNaN(e)&&o(t).isBefore(e)?!0:!1},e.exports=i},{"../../util":391,itml:435,moment:470}],211:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("moment"),l=t("./helpers"),o=t("./template.hbs"),s=t("./style.hbs"),c=t("./partials"),u=t("../common").traits.DataProvider,h=t("./TokenProvider"),d=t("../base").style,p=i.event.Event,m=t("../common").traits.EventMap,f=t("../common").traits.TabComponent,g=i.controller.MultiElementController,b=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.controllerName="festival-landing";var n={};t.styles.push(new d({styleTemplate:s,tintInfo:n})),c(),this.loading=!0,g.call(this,t,e),m.call(this,t),f.call(this),a.extend(this.onSelect,{link:this.pushUrl,"festival-brick":this.handleBrick,"event-details-link":this.handleEventDetail,"artist-list-item":this.handleArtistList,"play-button":this.playMedia}),this.model=new u,this.token=new h,this.cmsData={},this.cmsTranslations={},this.cmsDataLoaded=!1,this.cmsTranslationsLoaded=!1,this.storeDataFetchDone=!1,this.storeLanguage=itms.getBag().language,this.storeCountryCode=this.getStorefrontCode(),this.storeCountryCode3Char=l.get3CharCountryCode(this.storeCountryCode),this.screenSize=a.screen.sizeForScreenDimension(),this.isPostFestival=!1,this.isPreFestival=!1,this.preFestivalEndTime=null,this.getCmsData()};a.inherit(b,g),a.inherit(b,m,!0),a.inherit(b,f,!0),b.prototype.template=o,b.prototype.getStorefrontCode=function(){var t,e=a.bag().storeFront,n=/apple.com\/(.{2})\/store/i;return"string"==typeof e&&(t=e.match(n),t instanceof Array&&2===t.length)?t.pop():"gb"},b.prototype.setFestivalLanguage=function(){var t,e=this.storeLanguage||"en-GB",n=this.cmsData.availableLanguages||[];e=e.replace("-","_").toLowerCase(),n.indexOf(e)>-1&&(t=e),t||(e=e.split("_")[0],n.indexOf(e)&&(t=e)),t||(t="en"),this.cmsLanguage=t},b.prototype.setFestivalStartTime=function(){var t=this.cmsData&&this.cmsData.timeline instanceof Array?this.cmsData.timeline:null,e=t&&t.length?t[0].eventId:null,n=l.getData(this.cmsData,e,"events"),i=n?a.keypath(n,"startTime"):null,o=r(i).subtract(1,"day");this.preFestivalEndTime=o.valueOf(),this.isPreFestival=r().isBefore(o)},b.prototype.handleAppear=function(){var t=!!Object.keys(this.cmsData).length,e=!!Object.keys(this.cmsTranslations).length;t&&e&&this.startHeartbeat()},b.prototype.handleDisappear=function(){this.stopHeartbeat()},b.prototype.handleUnload=function(){this.stopHeartbeat()},b.prototype.handleStateChange=function(){var t=function(){this.createView()};this.currentTimelineState.hasOwnProperty("eventId")?this.isPostFestival=!1:this.isPostFestival=!0,this.token.fetchToken({success:t.bind(this),failure:t.bind(this)})},b.prototype.handleDataReady=function(){this.cmsDataLoaded&&this.cmsTranslationsLoaded&&this.storeDataFetchDone&&(this.loading=!1,this.setHeartbeat())},b.prototype.handleRotation=function(){this.createView()},b.prototype.handleBrick=function(t){var e=t.target.getAttribute("data-link-url"),n=t.target.getAttribute("data-link-target");e&&("external"===n?openURL(e):this.pushUrl(t))},b.prototype.handleEventDetail=function(t){var e={dataType:"festival_event",data:{eventId:t.target.getAttribute("data-event-id"),cmsData:this.cmsData,cmsTranslations:this.cmsTranslations,tokenProvider:this.token,dataProvider:this.model,storeCountryCode:this.storeCountryCode,isPreFestival:this.isPreFestival,isPostFestival:this.isPostFestival},navigationDocument:getActiveDocument().ownerDocument.navigationDocument};this.dispatchEvent(new p("tabPush",{detail:e}))},b.prototype.handleArtistList=function(t){var e=t.target.getAttribute("data-link-url");e&&this.pushUrl(t)},b.prototype.getCmsData=function(){a.xhr({url:"https://app.itunesfestival.com/2a/"+this.storeCountryCode+".json",method:"GET",success:this.cmsDataSuccess.bind(this),failure:this.cmsDataFailure.bind(this)})},b.prototype.cmsDataSuccess=function(t){try{this.cmsData=JSON.parse(t)}catch(e){a.log.error("Festival: CMS Data Parse Failure: ",t)}Object.keys(this.cmsData).length&&(this.cmsDataLoaded=!0,this.setFestivalLanguage(),this.getCmsTranslations(),this.getStoreData(),this.setFestivalStartTime())},b.prototype.cmsDataFailure=function(t){this.cmsDataLoaded=!1,a.log.error("Festival: CMS Data Request Failure: ",t)},b.prototype.getCmsTranslations=function(){a.xhr({url:"https://app.itunesfestival.com/2a/translations/"+this.cmsLanguage+".json",method:"GET",success:this.cmsTranslationsSuccess.bind(this),failure:this.cmsTranslationsFailure.bind(this)})},b.prototype.cmsTranslationsSuccess=function(t){var e={};try{e=JSON.parse(t)}catch(n){a.log.error("Festival: CMS Translations Parse Failure: ",t)}Object.keys(e).length&&(this.cmsTranslations=e.translations[this.cmsLanguage],this.cmsTranslationsLoaded=!0,this.handleDataReady())},b.prototype.cmsTranslationsFailure=function(t){a.log.error("Festival: CMS Translations Request Failure: ",t),this.cmsTranslationsLoaded=!1},b.prototype.getStoreData=function(){var t=[],e=this.cmsData.artists||{},n=Object.keys(e)||[];n.forEach(function(n){var i=e[n],a=i.hasOwnProperty("featuredAlbumId")?i.featuredAlbumId:null,r=i.hasOwnProperty("festivalAlbumId")?i.festivalAlbumId:null;i.stations instanceof Array&&t.push.apply(t,i.stations),a&&t.push(a),r&&t.push(r)},this),this.model.fetchContent({profile:"lockup",contentIds:t,onSuccess:this.storeDataSuccess.bind(this),onFailure:this.storeDataFailure.bind(this)})},b.prototype.storeDataSuccess=function(){this.storeDataFetchDone=!0,this.handleDataReady()},b.prototype.storeDataFailure=function(t){this.storeDataFetchDone=!0,this.handleDataReady(),a.log.error("Festival: Store request failed: ",t)},b.prototype.setStoreDataArtwork=function(t){if(t.artwork){var e=a.deepClone(t);return e.image=a.artwork.getArtworkForContent({content:{artwork:t.artwork},artworkMap:this.artworkMap,params:{type:"album_shelf"}}).image,e}},b.prototype.setHeartbeat=function(){this.intervalDuration=1e4,this.currentTimelineIndex=0,this.currentTimelineState={},this.tick(),this.startHeartbeat()},b.prototype.startHeartbeat=function(){this.heartbeatInterval||(this.heartbeatInterval=setInterval(function(){this.tick()}.bind(this),this.intervalDuration))},b.prototype.stopHeartbeat=function(){clearInterval(this.heartbeatInterval),this.heartbeatInterval=void 0},b.prototype.tick=function(){for(var t,e,n,i=r().valueOf(),a=this.cmsData.timeline,l=this.currentTimelineIndex;l<a.length;l++)if(t=a[l],e=r(t.startTime).isValid()?r(t.startTime).valueOf():null,n=r(t.endTime).isValid()?r(t.endTime).valueOf():null,this.isPreFestival&&r(i).isAfter(this.preFestivalEndTime)&&(this.isPreFestival=!1,this.handleStateChange()),0===this.currentTimelineIndex&&(e=i-1e3),e&&n&&r(i).isBetween(e,n)){t!==this.currentTimelineState&&(this.currentTimelineIndex=l,this.currentTimelineState=t,this.handleStateChange());break}},b.prototype.createView=function(){var t=this.buildMasterArtModel(),e=this.buildShowcaseModel(),n=this.buildEventListModel(),i=this.buildBricksModel(),a=this.buildSubscribeTextModel(),r={children:[]};t&&r.children.push(t),e&&r.children.push(e),n&&r.children.push(n),i&&r.children.push(i),a&&r.children.push(a),this.viewModel=r,this.renderView()},b.prototype.buildMasterArtModel=function(){var t=this.isPostFestival?"master_art_landing_p4":"master_art_landing_p3",e=this.cmsData.venues[32].images[t],n={isMasterArt:!0};return n.image=this.processArtwork({artworkUrl:e.url,artworkName:t,artworkMap:e.artworkMap}),n},b.prototype.buildShowcaseModel=function(){if(!this.isPostFestival){var t=this.buildHeroModel(),e=this.buildArtistListModel(),n=this.buildArtistMusicModel(),i={isShowcase:!0};return t&&(i.hero=t),e&&(i.artistList=e),n&&(i.artistMusic=n),i}},b.prototype.buildHeroModel=function(){function t(t){if(t){var e=l.getData(this.cmsData,t.eventId,"events"),n=a.keypath(e,"closerId")?e.closerId:null;return t.live?t.artistId:n}}function e(t){var e,n=t?a.keypath(t,"liveStream"):null;return n&&(e=n.deviceUrl,["xs","s","m"].indexOf(this.screenSize)>-1&&n.iphoneUrl&&(e=n.iphoneUrl)),e}if(!this.isPreFestival){var n=this.currentTimelineState,i=t.call(this,n),r=l.getData(this.cmsData,i,"artists"),o=this.shouldUseWideLayout()?"hero_art_landing_large":"hero_art_landing_small",s=l.getArtistImageData(this.cmsData,i,o),c=l.is12HourCountry(this.storeCountryCode)?"hm":"Hm",u=l.getDate(r.stageTime,c),h=e.call(this,r),d={isHero:!0,editorial:{}};return n.live?d.editorial.title=this.getLoc("LANDING_MAIN.WATCH_LIVE").toUpperCase():u?d.editorial.title=this.getLoc("LANDING_MAIN.PERFORMING_AT").replace("@@STAGETIME@@",u).toUpperCase():d.editorial.title=this.getLoc("LANDING_MAIN.PERFORMING_NEXT").toUpperCase(),s&&(d.image=this.processArtwork({artworkUrl:s.url,artworkName:o,artworkMap:s.artworkMap})),n.live&&h&&(d.videoUrl=h,d.videoUrl+=this.token.lookup()),d}},b.prototype.buildArtistListModel=function(){var t=this.currentTimelineState,e=l.getEventArtistIds(this.cmsData,t.eventId),n={isArtistList:!0,editorial:{title:this.getLoc("LANDING_MAIN.FEATURED_ARTISTS").toUpperCase()},children:[]};return e=a.deepClone(e).reverse(),e.forEach(function(t){var e="artist_avatar",i=l.getData(this.cmsData,t,"artists"),r=l.getArtistImageData(this.cmsData,t,e),o=a.keypath(i,"itunesUrl")?i.itunesUrl:null,s=l.is12HourCountry(this.storeCountryCode)?"MMMdhmm":"MMMdHmm",c={};o&&(c.url=o),i&&(c.details={name:this.shouldUseWideLayout()?i.name:i.shortname,stageTime:l.getDate(i.stageTime,s)}),r&&(c.image=this.processArtwork({artworkUrl:r.url,artworkName:e,artworkMap:r.artworkMap})),Object.keys(c).length&&n.children.push(c)},this),n},b.prototype.buildArtistMusicModel=function(){
var t=this.currentTimelineState,e=l.getEventArtistIds(this.cmsData,t.eventId),n={isArtistMusic:!0,editorial:{title:this.getLoc("LANDING_MAIN.FEATURED_MUSIC").toUpperCase()},children:[]};return e=a.deepClone(e).reverse(),e.forEach(function(t){var e=l.getData(this.cmsData,t,"artists"),i=e&&a.keypath(e,"featuredAlbumId")?this.model.lookup(e.featuredAlbumId):null;i&&(i=this.setStoreDataArtwork(i),n.children.push(i))},this),n.children.length?n:null},b.prototype.buildEventListModel=function(){var t=this.currentTimelineState||{},e=this.cmsData.eventList||[],n={isEventList:!0,children:[]};if(this.isPostFestival||e.indexOf(t.eventId)>0){n.editorial={title:this.getLoc("LANDING_MAIN.HIGHLIGHTS_SHOWS_HEADER").toUpperCase(),body:this.isPostFestival?this.getLoc("LANDING_MAIN.EVENT_LIST_OVERARCHING_POST"):this.getLoc("LANDING_MAIN.EVENT_LIST_OVERARCHING"),p4:this.isPostFestival},this.isPostFestival&&(n.editorial.links=[{label:this.getLoc("LANDING_MAIN.FOLLOWCONNECT"),url:this.cmsData.curatorUrl}]);for(var i=0;i<e.length;i++){var a,r=e[i],o=l.getData(this.cmsData,r,"events");if(!this.isPostFestival&&o.id===t.eventId)break;a=this.buildEventTileModel(o),a&&n.children.push(a)}}return n.children.length?n:null},b.prototype.buildEventTileModel=function(t){var e=this.shouldUseWideLayout()?"_large":"_small",n=(this.isPostFestival?"event_list_p4":"event_list_p3")+e,i=l.getEventImageData(this.cmsData,t.id,n),a=l.getEventArtistIds(this.cmsData,t.id),o=t.startTime||"",s={eventId:t.id,editorial:{title:"",body:""}};i&&(s.image=this.processArtwork({artworkUrl:i.url,artworkName:n,artworkMap:i.artworkMap}));for(var c=a.length-1,u=0;c>=0;c--,u++){var h=a[c],d=l.getData(this.cmsData,h,"artists"),p=this.shouldUseWideLayout()?d.name:d.shortname;s.editorial.body+=u>0?" / ":"",s.editorial.body+=p||""}return r(o).isValid()&&(s.editorial.title=l.getDate(o,"dMMMM")),s},b.prototype.buildBricksModel=function(){if(!this.isPostFestival){var t=this.cmsData.curatorUrl||null,e={isBricks:!0,children:[]};return"string"==typeof t&&e.children.push({label:this.getLoc("LANDING_MAIN.FOLLOWCONNECT").toUpperCase(),url:t}),e.children.push({label:this.getLoc("LANDING_MAIN.VIEWLINEUP").toUpperCase(),url:"https://uic.itunes.apple.com/projects/festival/london-2015/ticketing/amf_ticketing.html?country="+this.storeCountryCode+"&language="+this.cmsLanguage}),"string"==typeof this.cmsData.faqUrl&&e.children.push({label:this.getLoc("LANDING_MAIN.FAQ").toUpperCase(),url:this.cmsData.faqUrl,target:"external"}),e}},b.prototype.buildSubscribeTextModel=function(){var t={},e=this.shouldUseWideLayout()?this.getLoc("LANDING_MAIN.SUBSCRIBE_LONG"):this.getLoc("LANDING_MAIN.SUBSCRIBE_SHORT");return"string"==typeof e&&e.length?(t.isSubscribeText=!0,t.editorial={body:e},t):null},b.prototype.renderView=function(){this.viewModel&&(this.viewModel.screenSize=this.screenSize,this.viewModel.wideLayout=this.shouldUseWideLayout(),this.viewModel.narrowLayout=!this.shouldUseWideLayout()),this.render()},b.prototype.processArtwork=function(t){return l.processArtwork(t,this.artworkMap)},b.prototype.shouldUseWideLayout=function(){return l.shouldUseWideLayout()},b.prototype.getLoc=function(t){return a.keypath(l,"getLoc")?l.getLoc(t,this.cmsTranslations):""},b.prototype.artworkMap={festival_master_art:{crop:"h",xs:[320,140],s:[375,160],m:[414,180],l:[768,330],xl:[1024,330],xxl:[1024,330]},album_list:{crop:"cc",xs:[55,55],s:[55,55],m:[80,80],l:[100,100],xl:[100,100],xxl:[100,100]},album_grid:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[190,190],xl:[200,200],xxl:[200,200]},album_shelf:{crop:"cc",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168],xxl:[168,168]}},e.exports=b},{"../../util":391,"../base":97,"../common":133,"./TokenProvider":210,"./helpers":227,"./partials":236,"./style.hbs":240,"./template.hbs":241,itml:435,moment:470}],212:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("moment"),l=t("../helpers"),o=t("./template.hbs"),s=t("./style.hbs"),c=t("./partials"),u=t("../TokenProvider"),h=t("../../base").style,d=t("../../common").traits.EventMap,p=t("../../common").traits.TabComponent,m=i.controller.MultiElementController,f=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.controllerName="festival-event-details";var n={};t.styles.push(new h({styleTemplate:s,tintInfo:n})),c(),m.call(this,t,e),d.call(this,t),p.call(this),a.extend(this.onSelect,{link:this.pushUrl,"more-link":this.pushUrl,"play-button":this.playMedia});var i=t.data||{};this.screenSize=a.screen.sizeForScreenDimension(),this.token=a.keypath(i,"tokenProvider")?i.tokenProvider:new u,this.cmsData=i.cmsData,this.cmsTranslations=i.cmsTranslations,this.eventId=i.eventId,this.model=i.dataProvider,this.artistList=l.getEventArtistIds(this.cmsData,this.eventId),this.storeCountryCode=i.storeCountryCode,this.isPreFestival=i.isPreFestival,this.isPostFestival=i.isPostFestival,this.artistList instanceof Array&&(this.artistList=a.deepClone(this.artistList),this.artistList.reverse()),this.token.fetchToken({force:!0,success:this.createView.bind(this),failure:this.createView.bind(this)})};a.inherit(f,m),a.inherit(f,d,!0),a.inherit(f,p,!0),f.prototype.template=o,f.prototype.processArtwork=function(t){return l.processArtwork(t,this.artworkMap)},f.prototype.getLoc=function(t){return a.keypath(l,"getLoc")?l.getLoc(t,this.cmsTranslations):""},f.prototype.createView=function(){var t=this.buildMasterArtModel(),e=this.buildEditorialModel(),n=this.buildArtistBlocksModel(),i={children:[]};t&&i.children.push(t),e&&i.children.push(e),n&&(i.children=i.children.concat(n)),this.viewModel=i,this.renderView()},f.prototype.buildMasterArtModel=function(){var t=this.isPostFestival?"master_art_event_p4":"master_art_event_p3",e=l.getEventImageData(this.cmsData,this.eventId,t),n={isMasterArt:!0};return n.image=this.processArtwork({artworkUrl:e.url,artworkName:t,artworkMap:e.artworkMap}),n},f.prototype.buildEditorialModel=function(){function t(t){var e;return t&&"[object Object]"===t.toString()&&(e=t.deviceUrl,["xs","s","m"].indexOf(this.screenSize)>-1&&t.iphoneUrl&&(e=t.iphoneUrl)),e}var e,n=l.getData(this.cmsData,this.eventId,"events"),i=n.startTime||"",o={isEditorialHighlight:!0,hasHighlight:!1,editorial:{}};if(r(i).isValid()&&(o.editorial.title=l.getDate(i,"dMMMM"),o.editorial.p4=this.isPostFestival,"string"==typeof o.editorial.title&&(o.editorial.title=o.editorial.title.toUpperCase())),n&&n.hasOwnProperty("eventBlurbKey")&&(o.editorial.body=this.getLoc(n.eventBlurbKey)),-1===["de","deu"].indexOf(this.storeCountryCode)){e=l.getEventHighlightData(this.cmsData,this.eventId);var s,c=t.call(this,e),u="highlight_poster";e&&a.keypath(e,"images."+u)&&c&&(s=e.images[u],o.image=this.processArtwork({artworkUrl:s.url,artworkName:u,artworkMap:s.artworkMap}),o.videoUrl=c+this.token.lookup(),o.isExplicit=l.isExplicit(e),o.hasHighlight=!0)}return o},f.prototype.buildArtistBlocksModel=function(){var t=this.artistList,e={isArtistBlocks:!0,children:[]};return t.forEach(function(t){var n,i=l.getData(this.cmsData,t,"artists");i&&(n=i.isHeadliner?this.buildHeadlinerModel(i,t):this.buildSupportModel(i,t)),n&&e.children.push(n)},this),e.children.length?e:null},f.prototype.buildHeadlinerModel=function(t,e){var n=this.buildVodModel(e),i=this.buildPhotosModel(t,"top"),a=this.buildPhotosModel(t,"bottom"),r=this.buildQuoteModel(t),l=this.buildMoreMusicModel(t),o={isArtistBlock:!0,isHeadliner:!0,p4:this.isPostFestival,artistName:t&&this.shouldUseWideLayout()?t.name:t.shortname,artistUrl:t&&"string"==typeof t.itunesUrl?t.itunesUrl:"",children:[]};return n&&o.children.push(n),i&&(i.isTop=!0,o.children.push(i)),r&&o.children.push(r),a&&(a.isBottom=!0,o.children.push(a)),l&&o.children.push(l),o.children.length?o:null},f.prototype.buildSupportModel=function(t,e){var n=this.buildVodModel(e),i=this.buildPhotosModel(t),a=this.buildMoreMusicModel(t),r={isArtistBlock:!0,isHeadliner:!1,p4:this.isPostFestival,artistName:t&&this.shouldUseWideLayout()?t.name:t.shortname,artistUrl:t&&"string"==typeof t.itunesUrl?t.itunesUrl:"",children:[]};return n&&r.children.push(n),i&&r.children.push(i),a&&r.children.push(a),r.children.length?r:null},f.prototype.buildVodModel=function(t){function e(t){var e;return t&&"[object Object]"===t.toString()&&(e=t.deviceUrl,["xs","s","m"].indexOf(this.screenSize)>-1&&t.iphoneUrl&&(e=t.iphoneUrl)),e}var n=l.getArtistVodData(this.cmsData,t),i=this.shouldUseWideLayout()?"vod_poster_large":"vod_poster_small",r=n&&a.keypath(n,"images")?n.images[i]:null,o=e.call(this,n),s={isVod:!0};return s.isExplicit=l.isExplicit(n),r&&(s.image=this.processArtwork({artworkUrl:r.url,artworkName:i,artworkMap:r.artworkMap})),n&&o&&(s.videoUrl=o,s.videoUrl+=this.token.lookup()),s.videoUrl?s:null},f.prototype.buildPhotosModel=function(t,e){var n,i=a.keypath(t,"photos"),r=a.keypath(this.cmsData,"photos"),l={isPhotos:!0,children:[]};return i=a.deepClone(i),t.isHeadliner&&"bottom"===e&&i.splice(0,2),n=i.slice(0,2),n.forEach(function(t){var e="photo_image",n=r[t],i=n?a.keypath(n,"images"):null,o=i?i[e]:null;n&&o&&Object.keys(o).length&&l.children.push({caption:this.getLoc(n.captionKey),image:this.processArtwork({artworkUrl:o.url,artworkName:e,artworkMap:o.artworkMap})})},this),l.children.length?l:null},f.prototype.buildQuoteModel=function(t){var e,n,i={isQuote:!0};return t&&t.isHeadliner&&(e=this.getLoc(a.keypath(t,"quote.bodyKey")),n=this.getLoc(a.keypath(t,"quote.citeKey")),e.length&&n.length)?(i.body=""+e+"",i.cite=""+n,i):null},f.prototype.buildMoreMusicModel=function(t){if(!t)return null;var e=this.lookupStoreContent(a.keypath(t,"featuredAlbumId")),n=this.lookupStoreContent(a.keypath(t,"festivalAlbumId")),i=t.stations instanceof Array?this.lookupStoreContent(t.stations[0]):null,r={isMoreMusic:!0,children:[]};return e&&(e=this.setStoreDataArtwork(e),e.isExplicit=a.lockup.isExplicit(e),r.children.push(e)),n&&(n=this.setStoreDataArtwork(n),n.isExplicit=a.lockup.isExplicit(n),r.children.push(n)),i&&(i=this.setStoreDataArtwork(i),i.isExplicit=a.lockup.isExplicit(i),r.children.push(i)),r.children.length?(r.title=this.getLoc("EVENT.MORE_MUSIC_HEADER").toUpperCase(),r.p4=this.isPostFestival,r):null},f.prototype.lookupStoreContent=function(t){var e="string"==typeof t?this.model.lookup(t):null;return e||null},f.prototype.renderView=function(){this.viewModel&&(this.viewModel.screenSize=this.screenSize,this.viewModel.wideLayout=this.shouldUseWideLayout(),this.viewModel.narrowLayout=!this.shouldUseWideLayout()),this.render()},f.prototype.shouldUseWideLayout=function(){return l.shouldUseWideLayout()},f.prototype.handleAppear=function(){},f.prototype.setStoreDataArtwork=function(t){if(t.artwork){var e=a.deepClone(t);return e.image=a.artwork.getArtworkForContent({content:{artwork:t.artwork},artworkMap:this.artworkMap,params:{type:"album_shelf"}}).image,e}},f.prototype.handleRotation=function(){this.createView()},f.prototype.artworkMap={festival_master_art:{crop:"h",xs:[320,140],s:[375,160],m:[414,180],l:[768,330],xl:[1024,330],xxl:[1024,330]},album_list:{crop:"cc",xs:[55,55],s:[55,55],m:[80,80],l:[100,100],xl:[100,100],xxl:[100,100]},album_grid:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[190,190],xl:[200,200],xxl:[200,200]},album_shelf:{crop:"cc",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168],xxl:[168,168]}},e.exports=f},{"../../../util":391,"../../base":97,"../../common":133,"../TokenProvider":210,"../helpers":227,"./partials":219,"./style.hbs":225,"./template.hbs":226,itml:435,moment:470}],213:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),l=t("../../common").traits.TabComponent,o=function(t,e){t=t||{},t.name="Apple Music Festival",t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("festival-document");var n=t.data;this.controller=new r({data:n}),t.controllers.push(this.controller),a.call(this,t,e),l.call(this)};i.inherit(o,a),i.inherit(o,l,!0),o.prototype.documentType="stackTemplate",o.prototype.metricsPageData={pageId:"EventDetails",pageType:"Festival"},o.prototype.handleOnAppear=function(){this.controller&&"function"==typeof this.controller.handleAppear&&this.controller.handleAppear()},e.exports=o},{"../../../util":391,"../../base/document":96,"../../common":133,"./element":212}],214:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"post-festival-title"},3:function(t,e,n,i){return"post-festival-chevron"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c="";return a=this.invokePartial(n.divider,"","divider",t,void 0,e,n,i),null!=a&&(c+=a),c+='<header class="festival-edge-header">\n    <button type="imagetext" class="more-link" data-link-url="'+s((r=null!=(r=e.artistUrl||(null!=t?t.artistUrl:t))?r:o,typeof r===l?r.call(t,{name:"artistUrl",hash:{},data:i}):r))+'" data-link-title="'+s((r=null!=(r=e.artistName||(null!=t?t.artistName:t))?r:o,typeof r===l?r.call(t,{name:"artistName",hash:{},data:i}):r))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"ArtistPage",targetType:"button"},data:i}),null!=a&&(c+=a),c+='>\n      <title class="edge-title festival-edge-title ',a=e["if"].call(t,null!=t?t.p4:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='" id="name">',a=(e.escapeText||t&&t.escapeText||o).call(t,null!=t?t.artistName:t,{name:"escapeText",hash:{},data:i}),null!=a&&(c+=a),c+='</title>\n      <img class="festival-edge-chevron ',a=e["if"].call(t,null!=t?t.p4:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://ChevronTerms"/>\n    </button>\n</header>\n<divider class="festival-spacer"/>\n'},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],215:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<title class="festival-quote-body">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.body:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+='</title>\n<title class="festival-quote-cite"><i>',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.cite:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+'</i></title>\n<divider class="festival-spacer"/>\n<divider class="festival-spacer"/>\n'},useData:!0})},{"hbsfy/runtime":418}],216:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<divider class="festival-divider"/>\n'},useData:!0})},{"hbsfy/runtime":418}],217:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"post-festival-header"},3:function(t,e,n,i){var a,r=e.helperMissing,l='            <text maxLines="0" class="event-detail-blurb">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.body:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</text>\n"},5:function(t,e,n,i){var a,r,l=e.helperMissing,o=this.lambda,s=this.escapeExpression,c="function",u="        <lockup ";return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{impressions:!0,location:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(u+=a),u+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+='>\n            <video class="editorial-lockup-image" ',a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"HighlightStream",targetType:"button"},data:i}),null!=a&&(u+=a),u+='>\n                <img class="editorial-lockup-image" width="'+s(o(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+s(o(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+s(o(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+s(o(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" type=""/>\n                <asset src="'+s((r=null!=(r=e.videoUrl||(null!=t?t.videoUrl:t))?r:l,typeof r===c?r.call(t,{name:"videoUrl",hash:{},data:i}):r))+'" keyDelivery="itunes"/>\n            </video>\n            ',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+'\n        </lockup>\n        <divider class="festival-spacer"/>\n'},6:function(t,e,n,i){return'disabled="true"'},8:function(t,e,n,i){var a,r=e.helperMissing,l='<badge class="explict-badge';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'" src="resource://explicit" style="itml-position: bottom;"/>'},9:function(t,e,n,i){return"-disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="<section>\n    <lockup ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,click:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(l+=a),l+=' disabled="true">\n        <title maxLines="2" class="',a=e["if"].call(t,null!=(a=null!=t?t.editorial:t)?a.p4:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.title:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+='</title>\n        <divider class="festival-spacer"/>\n',a=e["if"].call(t,null!=(a=null!=t?t.editorial:t)?a.body:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    </lockup>\n",a=e["if"].call(t,null!=t?t.hasHighlight:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</section>\n"},useData:!0})},{"hbsfy/runtime":418}],218:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="        ";return a=e["if"].call(t,null!=t?t.isVod:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isTop:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isQuote:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isBottom:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isMoreMusic:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a;return a=this.invokePartial(n.vodHero,"","vodHero",t,void 0,e,n,i),null!=a?a:""},4:function(t,e,n,i){var a;return a=this.invokePartial(n.photos,"","photos",t,void 0,e,n,i),null!=a?a:""},6:function(t,e,n,i){var a;return a=this.invokePartial(n.artistQuote,"","artistQuote",t,void 0,e,n,i),null!=a?a:""},8:function(t,e,n,i){var a;return a=this.invokePartial(n.moreMusic,"","moreMusic",t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<section class="artist-block headliner" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.artistHeader,"    ","artistHeader",t,void 0,e,n,i),null!=a&&(l+=a),l+="\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</section>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],219:[function(t,e,n){var i=t("itml").utils.Handlebars,a={masterArt:t("./masterArt.hbs"),headlinerBlock:t("./headlinerBlock.hbs"),supportBlock:t("./supportBlock.hbs"),artistQuote:t("./artistQuote.hbs"),moreMusic:t("./moreMusic.hbs"),photos:t("./photos.hbs"),vodHero:t("./vodHero.hbs"),artistHeader:t("./artistHeader.hbs"),divider:t("./divider.hbs"),editorialHighlightBlock:t("./editorialHighlightBlock.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./artistHeader.hbs":214,"./artistQuote.hbs":215,"./divider.hbs":216,"./editorialHighlightBlock.hbs":217,"./headlinerBlock.hbs":218,"./masterArt.hbs":220,"./moreMusic.hbs":221,"./photos.hbs":222,"./supportBlock.hbs":223,"./vodHero.hbs":224,itml:435}],220:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'    <img class="festival-master-art"\n        width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n        height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n        srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n        disabled="true"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],221:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"post-festival-title"},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"        ","shelfLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<grid class="festival-section-header">\n  <header class="edge-header">\n      <title class="edge-title festival-section-title ';return a=e["if"].call(t,null!=t?t.p4:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.title:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+='</title>\n  </header>\n</grid>\n\n<grid class="festival-more-music-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</grid>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],222:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='        <lockup disabled="true"\n            ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{impressions:!0,location:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n            <img class=""\n                width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                type=""/>\n            <text class="photo-caption" maxLines="0"><i>',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.caption:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+"</i></text>\n        </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<grid class="festival-photo-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'</grid>\n<divider class="festival-spacer"/>\n<divider class="festival-spacer"/>\n'},useData:!0})},{"hbsfy/runtime":418}],223:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="        ";return a=e["if"].call(t,null!=t?t.isVod:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isPhotos:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n        ",a=e["if"].call(t,null!=t?t.isMoreMusic:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a;return a=this.invokePartial(n.vodHero,"","vodHero",t,void 0,e,n,i),null!=a?a:""},4:function(t,e,n,i){var a;return a=this.invokePartial(n.photos,"","photos",t,void 0,e,n,i),null!=a?a:""},6:function(t,e,n,i){var a;return a=this.invokePartial(n.moreMusic,"","moreMusic",t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<section class="artist-block headliner" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.artistHeader,"    ","artistHeader",t,void 0,e,n,i),null!=a&&(l+=a),l+="\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</section>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],224:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'disabled="true"'},3:function(t,e,n,i){var a,r=e.helperMissing,l='<badge class="explict-badge';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'" src="resource://explicit" style="itml-position: right;"/>'},4:function(t,e,n,i){return"-disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s="<lockup ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='>\n    <video class="editorial-lockup-image" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,actionType:"navigate",targetId:"VodStream",targetType:"button"},data:i}),null!=a&&(s+=a),s+='>\n        <img class="editorial-lockup-image"\n             width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n             height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n             srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n             alt="'+o(l(null!=(a=null!=t?t.imageLink:t)?a.alt:a,t))+'"\n             type=""/>\n        <asset src="'+o(l(null!=t?t.videoUrl:t,t))+'" keyDelivery="itunes"/>\n    </video>\n</lockup>\n<list>\n',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"\n</list>\n"},useData:!0})},{"hbsfy/runtime":418}],225:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".festival-document {\n    background-color: rgb(0, 0, 0);\n    color: rgb(255, 255, 255);\n}\n\n.festival-section-header {\n    background-color: rgb(0, 0, 0);\n    padding: 0 0 0 0;\n}\n\n.festival-section-title {\n    color: rgb(255,255,255);\n}\n\n.festival-quote-body {\n    itml-text-max-lines: 0;\n    font-size: 20pt;\n    margin: 40 0 20 0;\n}\n\n.festival-quote-cite {\n    itml-text-max-lines: 0;\n    font-size: 18pt;\n}\n\n.festival-hr {\n    background-color: rgb(51, 51, 51);\n}\n\n.festival-divider {\n    border-color:rgb(115,115,115);\n}\n\n.festival-spacer {\n    border-color: rgba(255,255,255,0);\n    itml-divider-type:borderless;\n}\n\n.festival-edge-header {\n    padding: 15pt 0pt 0pt 15pt;\n    itml-align: left;\n}\n\n.festival-edge-title {\n    font-size: 13pt;\n    color: rgb(255,255,255);\n}\n\n.festival-edge-chevron {\n    itml-img-mask-color: rgb(255, 255, 255);\n}\n\n.festival-more-music-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 3;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n.festival-photo-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 2;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 5pt 0pt 5pt;\n    itml-align: center;\n}\n\n.event-detail-blurb {\n    color: rgb(142,142,147);\n}\n\n.photo-caption {\n    text-align: center;\n    color: rgb(142,142,147);\n}\n\n.post-festival-header {\n    color: rgb(201, 183, 143);\n}\n\n.post-festival-title {\n    color: rgb(201, 183, 143);\n}\n\n.post-festival-chevron {\n    itml-img-mask-color: rgb(201, 183, 143);\n}\n\n@media all and (min-width: 768) {\n    .festival-more-music-grid {\n        column-count: 5;\n    }\n    .festival-photo-grid {\n        column-count: 2;\n    }\n}\n\n@media all and (width: 1024) {\n    .festival-more-music-grid {\n        column-count: 6;\n    }\n    .festival-photo-grid {\n        column-count: 1;\n    }\n}\n\n@media all and (width: 1366) {\n    .festival-more-music-grid {\n        column-count: 8;\n    }\n    .festival-photo-grid {\n        column-count: 1;\n    }\n\n    .festival-quote-body {\n        itml-text-max-lines: 0;\n        font-size: 30pt;\n    }\n\n    .festival-quote-cite {\n        itml-text-max-lines: 0;\n        font-size: 24pt;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],226:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.children:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="            ";return a=e["if"].call(t,null!=t?t.isMasterArt:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n\n",a=e["if"].call(t,null!=t?t.isEditorialHighlight:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.isArtistBlocks:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a;return a=this.invokePartial(n.masterArt,"","masterArt",t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.editorialHighlightBlock,"                ","editorialHighlightBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},7:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isHeadliner:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.headlinerBlock,"                        ","headlinerBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.supportBlock,"                        ","supportBlock",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='<section class="festival-event-details '+s((r=null!=(r=e.screenSize||(null!=t?t.screenSize:t))?r:o,typeof r===l?r.call(t,{name:"screenSize",hash:{},data:i}):r))+'">\n';return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</section>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],227:[function(t,e,n){var i=t("../../util"),a=t("moment"),r={getLoc:function(t,e){return"[object Object]"===e.toString()?e[t]||"":""},get3CharCountryCode:function(t){var e,n={al:"alb",dz:"dza",ao:"ago",ai:"aia",ag:"atg",ar:"arg",am:"arm",au:"aus",at:"aut",az:"aze",bs:"bhs",bh:"bhr",bb:"brb",by:"blr",be:"bel",bz:"blz",bj:"ben",bm:"bmu",bt:"btn",bo:"bol",bw:"bwa",br:"bra",vg:"vgb",bn:"brn",bg:"bgr",bf:"bfa",kh:"khm",ca:"can",
cv:"cpv",ky:"cym",td:"tcd",cl:"chl",cn:"chn",co:"col",cg:"cog",cr:"cri",hr:"hrv",cy:"cyp",cz:"cze",dk:"dnk",dm:"dma","do":"dom",ec:"ecu",eg:"egy",sv:"slv",ee:"est",fj:"fji",fi:"fin",fr:"fra",gm:"gmb",de:"deu",gh:"gha",gr:"grc",gd:"grd",gt:"gtm",gw:"gnb",gy:"guy",hn:"hnd",hk:"hkg",hu:"hun",is:"isl","in":"ind",id:"idn",ie:"irl",il:"isr",it:"ita",jm:"jam",jp:"jpn",jo:"jor",kz:"kaz",ke:"ken",kr:"kor",kw:"kwt",kg:"kgz",la:"lao",lv:"lva",lb:"lbn",lr:"lbr",lt:"ltu",lu:"lux",mo:"mac",mk:"mkd",mg:"mdg",mw:"mwi",my:"mys",ml:"mli",mt:"mlt",mr:"mrt",mu:"mus",mx:"mex",fm:"fsm",md:"mda",mn:"mng",ms:"msr",mz:"moz",na:"nam",np:"npl",nl:"nld",nz:"nzl",ni:"nic",ne:"ner",ng:"nga",no:"nor",om:"omn",pk:"pak",pw:"plw",pa:"pan",pg:"png",py:"pry",pe:"per",ph:"phl",pl:"pol",pt:"prt",qa:"qat",ro:"rou",ru:"rus",st:"stp",sa:"sau",sn:"sen",sc:"syc",sl:"sle",sg:"sgp",sk:"svk",si:"svn",sb:"slb",za:"zaf",es:"esp",lk:"lka",kn:"kna",lc:"lca",vc:"vct",sr:"sur",sz:"swz",se:"swe",ch:"che",tw:"twn",tj:"tjk",tz:"tza",th:"tha",tt:"tto",tn:"tun",tr:"tur",tm:"tkm",tc:"tca",ug:"uga",gb:"gbr",ua:"ukr",ae:"are",uy:"ury",us:"usa",uz:"uzb",ve:"ven",vn:"vnm",ye:"yem",zw:"zwe"},i="gbr";return"string"==typeof t&&(e=n[t]),e||i},isExplicit:function(t){var e=!1;return t&&"[object Object]"===t.toString()&&(e=t.isExplicit||t.explicit||e),!!e},shouldUseWideLayout:function(){return["l","xl","xxl"].indexOf(i.screen.sizeForScreenDimension())>-1},processArtwork:function(t,e){var n,a,r={},l=i.screen.sizeForScreenDimension();return"string"==typeof t.artworkName&&"[object Object]"===t.artworkMap.toString()&&(e[t.artworkName]=t.artworkMap),a=e[t.artworkName],n=a?a[l]:null,t.artwork instanceof Array?r=t.artwork:t.artworkUrl&&n instanceof Array&&2===n.length&&(r={url:t.artworkUrl,width:n[0],height:n[1]}),i.artwork.bestArtwork(t.artworkName,r,e)},getDate:function(t,e){var n;return"string"==typeof t&&(n=a(t).isValid()?a(t).toDate():void 0),a(n).isValid()&&"string"==typeof e?formatDate(n,e):""},is12HourCountry:function(t){var e=["usa","can","aus","nzl","hkg","mac","us","ca","au","nz","hk","mo"];return t&&e.indexOf(t)>-1?!0:!1},getData:function(t,e,n){return e&&"string"==typeof n&&i.keypath(t,n)?t[n][e]:null},getEventArtistIds:function(t,e){var n="events",i=this.getData(t,e,n);return i&&i.artists instanceof Array?i.artists:[]},getArtistVodData:function(t,e){var n="artists",a=this.getData(t,e,n),r=a?i.keypath(a,"vodId"):null;return r&&i.keypath(t,"vods")?t.vods[r]:null},getArtistImageData:function(t,e,n){var a="artists",r=this.getData(t,e,a),l=r?i.keypath(r,"images"):null;return"string"==typeof n&&l?i.keypath(l,n):null},getEventImageData:function(t,e,n){var a="events",r=this.getData(t,e,a),l=r?i.keypath(r,"images"):null;return"string"==typeof n&&l?i.keypath(l,n):null},getEventHighlightData:function(t,e){var n="events",a=this.getData(t,e,n),r=a&&i.keypath(a,"highlights")&&a.highlights instanceof Array?a.highlights[0]:null;return r&&i.keypath(t,"highlights")?t.highlights[r]:null}};e.exports=r},{"../../util":391,moment:470}],228:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),l=t("../common").traits.TabComponent,o=function(t,e){t=t||{},t.name="Apple Music Festival",t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("festival-document");var n=t.data;this.controller=new r({data:n}),t.controllers.push(this.controller),a.call(this,t,e),l.call(this),this.addEventListener("unload",this.handleOnUnload.bind(this)),this.addEventListener("appear",this.handleAppear.bind(this)),this.addEventListener("disappear",this.handleOnDisappear.bind(this))};i.inherit(o,a),i.inherit(o,l,!0),o.prototype.documentType="stackTemplate",o.prototype.metricsPageData={pageId:"Landing",pageType:"Festival"},o.prototype.handleOnUnload=function(){this.controller&&"function"==typeof this.controller.handleUnload&&this.controller.handleUnload()},o.prototype.handleAppear=function(){this.controller&&"function"==typeof this.controller.handleAppear&&this.controller.handleAppear()},o.prototype.handleOnDisappear=function(){this.controller&&"function"==typeof this.controller.handleDisappear&&this.controller.handleDisappear()},e.exports=o},{"../../util":391,"../base/document":96,"../common":133,"./element":211}],229:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.header,"","header",null!=t?t.editorial:t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <lockup class="action-lockup artist-list-item" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===l?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n",a=e["if"].call(t,null!=t?t.details:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+="\n",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"        </lockup>\n"},4:function(t,e,n,i){return'disabled="true"'},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                <img class="artist-avatar-image"\n                     width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                     height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                     srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" />\n'},8:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                <title class="callout-emphasized">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.details:t)?a.name:a,{name:"escapeText",hash:{},data:i}),null!=a&&(o+=a),o+'</title>\n                <subtitle class="artist-list-stagetime">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.details:t)?a.stageTime:a,{name:"toUpperCase",hash:{},data:i}))+"</subtitle>\n"},10:function(t,e,n,i){return'              <decorationImage class="brick-arrow" src="resource://arrow" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<divider class="margin-helper"/>\n\n';return a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n\n<grid class="artist-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</grid>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],230:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.header,"","header",null!=t?t.editorial:t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<divider class="margin-helper"/>\n\n<section class="artist-music">\n    ';return a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n\n    <grid class="artist-music-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"    </grid>\n</section>\n\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],231:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <lockup type="brick" class="action-lockup brick-grid-lockup festival-brick" data-link-url="'+l(r(null!=t?t.url:t,t))+'" data-link-target="'+l(r(null!=t?t.target:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetId:"FestivalBrick",targetType:"brick"},data:i}),null!=a&&(s+=a),s+='>\n            <text class="brick-title-wrapper brick-title">\n                <span class="brick-title">',a=(e.escapeText||t&&t.escapeText||o).call(t,null!=t?t.label:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+'</span>\n            </text>\n            <decorationImage class="brick-arrow" src="resource://arrow"/>\n        </lockup>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<divider class="margin-helper"/>\n\n<grid class="brick-border brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</grid>\n"},useData:!0})},{"hbsfy/runtime":418}],232:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <lockup class="festival-brick festival-brick-largeScreen" data-link-url="'+l(r(null!=t?t.url:t,t))+'" data-link-target="'+l(r(null!=t?t.target:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetId:"FestivalBrick",targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=">\n            <text>\n                <span>",a=(e.escapeText||t&&t.escapeText||o).call(t,null!=t?t.label:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+'</span>\n            </text>\n            <decorationImage class="brick-arrow" src="resource://arrow"/>\n        </lockup>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<grid class="edge-3col-grid brick-border-largeScreen" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</grid>\n"},useData:!0})},{"hbsfy/runtime":418}],233:[function(t,e,n){e.exports=t(58)},{"hbsfy/runtime":418}],234:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.header,"    ","header",null!=t?t.editorial:t,void 0,e,n,i),null!=r&&(l+=r),r=e["if"].call(t,null!=(r=null!=t?t.editorial:t)?r.body:r,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=(r=null!=t?t.editorial:t)?r.p4:r,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},2:function(t,e,n,i){var a,r=e.helperMissing,l='        <text maxLines="0" class="event-list-blurb">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.body:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</text>\n"},4:function(t,e,n,i,a){var r,l="        <list>\n";return r=e.each.call(t,null!=(r=null!=a[1]?a[1].editorial:a[1])?r.links:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"        </list>\n"},5:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <button disabled="false" type="link" class="link horizontal event-list-link" data-link-url="'+l(r(null!=t?t.url:t,t))+'" data-page-target="self" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,location:!0,click:!0,targetId:"CuratorLinkList",targetType:"button"},data:i}),null!=a&&(s+=a),s+=">",a=(e.escapeText||t&&t.escapeText||o).call(t,null!=t?t.label:t,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+"</button>\n"},7:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c=this.lambda,u='    <card class="event-details-link" data-event-id="'+s((r=null!=(r=e.eventId||(null!=t?t.eventId:t))?r:o,typeof r===l?r.call(t,{name:"eventId",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetId:"EventTile",targetType:"card"},data:i}),null!=a&&(u+=a),u+='>\n        <background>\n            <img srcset="'+s(c(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+s(c(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                 width="'+s(c(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                 height="'+s(c(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"/>\n        </background>\n        <lockup ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,impressions:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(u+=a),u+=">\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+"        </lockup>\n    </card>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,l='            <list class="event-tile-text">\n                <text class="text-shadow">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.title:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+='</text>\n                <img class="edge-chevron" src="resource://ChevronTerms"/>\n            </list>\n            <list class="event-tile-text">\n                <text class="callout-emphasized text-shadow" maxLines="2">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.body:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</text>\n            </list>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e.each.call(t,null!=t?t.children:t,{name:"each",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],235:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="festival-section-header">\n      <header class="edge-header">\n          <title class="edge-title festival-section-title';return a=e["if"].call(t,null!=t?t.p4:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.title:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</title>\n      </header>\n    </grid>\n"},2:function(t,e,n,i){return" post-festival-header"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],236:[function(t,e,n){var i=t("itml").utils.Handlebars,a={artistList:t("./artistList.hbs"),artistMusic:t("./artistMusic.hbs"),bricksWide:t("./bricksWide.hbs"),bricksNarrow:t("./bricksNarrow.hbs"),eventList:t("./eventList.hbs"),masterArt:t("./masterArt.hbs"),showcase:t("./showcase.hbs"),showcaseHero:t("./showcaseHero.hbs"),editorial:t("./editorial.hbs"),header:t("./header.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./artistList.hbs":229,"./artistMusic.hbs":230,"./bricksNarrow.hbs":231,"./bricksWide.hbs":232,"./editorial.hbs":233,"./eventList.hbs":234,"./header.hbs":235,"./masterArt.hbs":237,"./showcase.hbs":238,"./showcaseHero.hbs":239,itml:435}],237:[function(t,e,n){e.exports=t(220)},{"hbsfy/runtime":418}],238:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a;return a=this.invokePartial(n.showcaseHero,"","showcaseHero",null!=t?t.hero:t,void 0,e,n,i),null!=a?a:""},3:function(t,e,n,i){var a;return a=this.invokePartial(n.artistList,"","artistList",null!=t?t.artistList:t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a;return a=this.invokePartial(n.artistMusic,"","artistMusic",null!=t?t.artistMusic:t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l='<section class="festival-showcase" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(l+=a),l+=">\n    ",a=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n    ",a=e["if"].call(t,null!=t?t.artistList:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="\n    ",a=e["if"].call(t,null!=t?t.artistMusic:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"\n</section>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],239:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='      <header class="edge-header">\n          <title class="edge-title" style="color: rgb(255,255,255)">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.editorial:t)?a.title:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+'</title>\n      </header>\n      <divider class="margin-helper"/>\n'},3:function(t,e,n,i){var a,r=e.helperMissing,l="        <lockup ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(l+=a),l+='>\n            <video class="editorial-lockup-image" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,click:!0,targetId:"LiveStream"},data:i}),null!=a&&(l+=a),l+">\n"},5:function(t,e,n,i){return'disabled="true"'},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <asset src="'+r(a(null!=t?t.videoUrl:t,t))+'" keyDelivery="itunes"/>\n            </video>\n        </lockup>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='<section class="showcase-hero" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n",a=e["if"].call(t,null!=t?t.editorial:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.videoUrl:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                <img class="editorial-lockup-image"\n                     width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                     height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                     srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                     alt="'+o(l(null!=(a=null!=t?t.imageLink:t)?a.alt:a,t))+'"\n                     type=""\n                     ',a=e.unless.call(t,null!=t?t.videoUrl:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="/>\n",a=e["if"].call(t,null!=t?t.videoUrl:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</section>\n"},useData:!0})},{"hbsfy/runtime":418}],240:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".festival-document {\n    background-color: rgb(0, 0, 0);\n    color: rgb(255, 255, 255);\n}\n\n.festival-section-header {\n    background-color: linear-gradient(top, rgb(43, 43, 43), rgba(0,0,0,0.15), rgba(0,0,0,1));\n    padding: 0 0 0 0;\n}\n\n.festival-section-title {\n    color: rgb(255,255,255);\n}\n\n.edge-chevron {\n    itml-img-mask-color: rgb(255, 255, 255);\n}\n\n.artist-list-stagetime {\n    color: rgb(142,142,147);\n}\n\n.event-list-blurb {\n    color: rgb(142,142,147);\n}\n\n.event-list-link {\n    color: rgb(209,184,136);\n}\n\n.festival-divider {\n    border-color:rgb(115,115,115);\n    border-width: 1 0 0 0;\n}\n\n.brick-lockup {\n    padding: 0 0 1 0;\n    margin: 0 0 0 0;\n}\n\n.brick-border {\n    border-width: 1pt;\n    border-color: rgb(102,102,102);\n}\n\n.brick-border-largeScreen {\n    border-width: 10pt;\n    border-color: rgb(0,0,0);\n}\n\n.brick-list {\n    padding: 0 0 0 0pt;\n    margin: 0 0 0 0pt;\n    column-count: 1;\n    itml-item-width: 100%;\n}\n\n.brick-title-wrapper {\n    itml-text-max-lines: 3;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-title {\n    color: rgb(255,255,255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 14pt;\n    font-weight: medium;\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.brick-linear-gradient {\n    itml-img-treatment: left-to-right-linear-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n}\n\n.brick-arrow {\n    color: rgb(255, 255, 255);\n    itml-img-treatment: tint;\n    itml-position: right;\n}\n\n.festival-brick {\n    padding: 30pt 10pt 30pt 10pt;\n    background-color: rgb(33,33,33);\n}\n\n.festival-brick-largeScreen {\n    padding: 55pt 10pt 80pt 10pt;\n    background-color: rgb(33,33,33);\n}\n\n.artist-music-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    column-count: 3;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    text-align: center;\n}\n\n.post-festival-header {\n    color: rgb(201, 183, 143);\n}\n\nbutton.link {\n    color: rgb(201, 183, 143);\n}\n\n.text-shadow {\n    text-shadow: 0pt 1pt 2pt rgb(0,0,0);\n}\n\n.subscribe-text {\n    color: rgb(255,255,255);\n    text-align: center;\n    font-size: 15pt;\n}\n\n@media all and (width: 768) {\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 8 0 8;\n        margin: 2 0 2 0;\n    }\n\n    .artist-list {\n        column-count: 1;\n    }\n\n    .artist-list-item {\n        padding: 0 30pt 15pt 0;\n    }\n\n    .artist-music-grid {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        column-count: 5;\n        itml-item-width: 100%;\n        itml-lockup-type: shelf;\n        text-align: center;\n    }\n}\n\n@media all and (width: 1024) {\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 10 0 10;\n        margin: 2 0 2 0;\n    }\n\n    .artist-list {\n        column-count: 1;\n    }\n\n    .artist-list-item {\n        padding: 0 30pt 15pt 0;\n    }\n\n    .artist-music-grid {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        column-count: 6;\n        itml-item-width: 100%;\n        itml-lockup-type: shelf;\n        text-align: center;\n    }\n\n    .event-tile-text {\n        padding: 0 0 0 8pt;\n    }\n}\n\n@media all and (width: 1366pt) {\n    .brick-border-largeScreen {\n        border-width: 10pt;\n        border-color: rgb(0,0,0);\n        column-count: 2;\n    }\n\n    .festival-brick-largeScreen {\n        padding: 55pt 10pt 80pt 10pt;\n        background-color: rgb(33,33,33);\n    }\n\n    .artist-list {\n        column-count: 1;\n    }\n\n    .artist-music-grid {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        column-count: 8;\n        itml-item-width: 100%;\n        itml-lockup-type: shelf;\n        text-align: center;\n    }\n\n    .event-tile-text {\n        padding: 0 0 0 8pt;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],241:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=(r=null!=t?t.viewModel:t)?r.children:r,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},2:function(t,e,n,i,a){var r,l="        ";return r=e["if"].call(t,null!=t?t.isMasterArt:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n        ",r=e["if"].call(t,null!=t?t.isShowcase:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n        ",r=e["if"].call(t,null!=t?t.isEventList:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=t?t.isBricks:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),r=e["if"].call(t,null!=t?t.isSubscribeText:t,{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},3:function(t,e,n,i){var a;return a=this.invokePartial(n.masterArt,"","masterArt",t,void 0,e,n,i),null!=a?a:""},5:function(t,e,n,i){var a;return a=this.invokePartial(n.showcase,"","showcase",t,void 0,e,n,i),null!=a?a:""},7:function(t,e,n,i){var a;return a=this.invokePartial(n.eventList,"","eventList",t,void 0,e,n,i),null!=a?a:""},9:function(t,e,n,i,a){var r,l="            ";return r=e["if"].call(t,null!=(r=null!=a[2]?a[2].viewModel:a[2])?r.wideLayout:r,{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n            ",r=e["if"].call(t,null!=(r=null!=a[2]?a[2].viewModel:a[2])?r.narrowLayout:r,{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n"},10:function(t,e,n,i){var a;return a=this.invokePartial(n.bricksWide,"","bricksWide",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.bricksNarrow,"","bricksNarrow",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=(r=null!=t?t.editorial:t)?r.body:r,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},15:function(t,e,n,i,a){var r,l=e.helperMissing,o="";return r=e["if"].call(t,null!=(r=null!=a[3]?a[3].viewModel:a[3])?r.wideLayout:r,{name:"if",hash:{},fn:this.program(16,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='                <divider/>\n                <divider/>\n                <text maxLines="0" class="subscribe-text">',r=(e.escapeText||t&&t.escapeText||l).call(t,null!=(r=null!=t?t.editorial:t)?r.body:r,{name:"escapeText",hash:{},data:i}),null!=r&&(o+=r),o+="</text>\n                <divider/>\n",r=e["if"].call(t,null!=(r=null!=a[3]?a[3].viewModel:a[3])?r.wideLayout:r,{name:"if",hash:{},fn:this.program(18,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},16:function(t,e,n,i){return'                <divider class="festival-divider"/>\n'},18:function(t,e,n,i){return"                <divider/>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l,o="function",s=e.helperMissing,c=this.escapeExpression,u='<section class="festival '+c((l=null!=(l=e.screenSize||(null!=t?t.screenSize:t))?l:s,typeof l===o?l.call(t,{name:"screenSize",hash:{},data:i}):l))+'">\n';return r=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(u+=r),u+"</section>\n"},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],242:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("../base").style,l=t("./style.hbs"),o=t("../common").traits.EventMap,s=i.controller.MultiElementController,c=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new r({styleTemplate:l})),t.events=t.events||[],t.events.push("select"),this.filters=t.filters,this.selectedFilter=t.selectedFilter,this.selectCallback=t.selectCallback,s.call(this,t,e),o.call(this,t),a.extend(this.onSelect,{"filter-lockup":this.selectFilter.bind(this)})};a.inherit(c,s),a.inherit(c,o,!0),c.prototype.template=t("./template.hbs"),c.prototype.selectFilter=function(t){this.selectCallback(t)},e.exports=c},{"../../util":391,"../base":97,"../common":133,"./style.hbs":244,"./template.hbs":245,itml:435}],243:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=t("./element.js"),l=t("./title.hbs"),o=a.loc,s=i.controller.DocumentController,c=function(t,e){t=t||{},t.filters=t.filters||[],t.controllers=t.controllers||[],t.selectedFilter=t.selectedFilter||"",t.name=o.loc("FUSE.TopCharts.Genres"),0===t.controllers.length&&t.controllers.push(new r({filters:t.filters,selectedFilter:t.selectedFilter,selectCallback:t.selectCallback})),s.call(this,t,e),this.cancelCallback=t.cancelCallback,this.el.getElementById("cancel").addEventListener("select",this.cancel.bind(this))};a.inherit(c,s),c.prototype.documentType="stackTemplate",c.prototype.titleTemplate=l,c.prototype.cancel=function(){this.cancelCallback()},e.exports=c},{"../../util":391,"./element.js":242,"./title.hbs":246,itml:435}],244:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".filter-lockup {\n    itml-padding: 15pt 15pt 15pt 0;\n    itml-align: left;\n}\n.filter-title {\n    font-size: 17pt;\n    color: rgb(51,51,51);\n}\n.filter-selected {\n    color: rgb(255,0,0);\n}"},useData:!0})},{"hbsfy/runtime":418}],245:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=e.helperMissing,o="        ";return r=(e.selectorLockupItem||t&&t.selectorLockupItem||l).call(t,t,null!=a[1]?a[1].selectedFilter:a[1],{name:"selectorLockupItem",hash:{},data:i}),null!=r&&(o+=r),o+'\n        <divider class="filter-divider"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="<grid>\n";return r=e.each.call(t,null!=t?t.filters:t,{name:"each",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"</grid>"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],246:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"<title>"+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</title>\n<button type="cancel" id="cancel" class="align-right filter-selected">Cancel</button>\n'},useData:!0})},{"hbsfy/runtime":418}],247:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,l=i.controller.DocumentController,o=t("./element"),s=t("../common").traits.TabComponent,c=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=a.loc.loc("FUSE.NavBar.ForYou"),t.classes=t.classes||[],t.classes.push("fu-page"),this.controller=new o,t.controllers.push(this.controller),l.call(this,t,e),s.call(this),this.addEventDelegates(this.controller,["replaceDocument"]),this.addEventListener("appear",this.controller.handleAppear.bind(this.controller)),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.controller.addEventListener("resetScrollState",this.resetScrollState.bind(this)),r.subscribe("RestrictionsChange",this.handleRestrictionsChange.bind(this))};a.inherit(c,l),a.inherit(c,s,!0),c.prototype.documentType="stackTemplate",c.prototype.resetScrollState=function(){this.el.scrollToTop(),itms.resetStateForActiveDocument()},c.prototype.handleRestrictionsChange=function(){this.resetScrollState(),this.controller.handleRestrictionsChange()},e.exports=c},{"../../util":391,"../common":133,"./element":248,itml:435}],248:[function(t,e,n){var i=t("itml"),a=i.utils.keypath,r=i.event.Event,l=t("../../util"),o=l.loc,s=l.pubSub,c=t("./template.hbs"),u=t("../common").traits.DataProvider,h=t("../account/onboarding/genre"),d=t("./partials"),p=i.controller.MultiElementController,m=t("../common").traits.EventMap,f=t("../common").traits.TabComponent,g=t("../base").style,b=t("./style.hbs"),v=t("./partials/forYouSection.hbs"),y=function(t,e){
t=t||{},t.styles=t.styles||[],t.entityProviders=t.entityProviders||[],t.classes=t.classes||[],t.classes.push("shelfGrid"),t.styles.push(new g({styleTemplate:b})),this.controllerName="for-you",d(),t.events=t.events||[],t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.events.push("holdselect"),t.events.push("change"),this.loading=!0,p.call(this,t,e),m.call(this,t),f.call(this),this.retries=2,this.recommendationCount=0,this.retryTTL=3600,this.appearTTL=6e4,this.lastAppearSuccess=Date.now(),this.doRefresh=!1,this.doMore=!1,this.isOnline=""!==itms.networkConnectionType,l.extend(this.onSelect,{"action-lockup":this.handleLockupFromRecommendation,"more-link":this.pushUrl,"playlist-card":this.pushProduct,"play-button":this.playFromRecommendation,"sign-in-button":this.signIn}),l.extend(this.onHoldSelect,{"playlist-card":this.showActionMenu}),l.extend(this.onChange,{refresh:this.handleRefresh}),this.model=new u,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get(),s.subscribe("tasteProfileUpdated",this.handleTasteProfileUpdated.bind(this)),s.subscribe("networkChange",this.handleNetworkChange.bind(this)),s.subscribe("bagChange",this.handleBagChange.bind(this))};l.inherit(y,p),l.inherit(y,m,!0),l.inherit(y,f,!0),y.prototype.template=c,y.prototype.artworkMap={hero:{xs:[320,193],s:[375,226],m:[414,240],l:[320,193],xl:[578,289],xxl:[578,289]},cover:{crop:"sr",xs:[320,193],s:[375,226],m:[414,240],l:[485,250],xl:[656,250],xxl:[656,250]},grid:{xs:[163,163],s:[200,200],m:[206,206],l:[256,256],xl:[256,256],xxl:[256,256]},product:{xs:[154,154],s:[163,163],m:[196,196],l:[127,127],xl:[127,127],xxl:[127,127]}},y.prototype.get=function(t){var e=this.params||{};("next"!==t||this.lastId)&&(this.requestInFlight=!0,"next"===t&&this.lastId&&(e.offsetId=this.lastId),"refresh"===t&&this.firstId&&(e.refreshOffsetId=this.firstId),this.model.fetchData({url:l.urls.build("justForYou",e),success:this.handleSuccessfulFetch.bind(this),failure:this.handleFailedFetch.bind(this),retries:this.retries,eventType:t}),t&&"tasteupdate"!==t||this.render())},y.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doRefresh?(this.doRefresh=!1,this.get("refresh")):this.doMore&&(this.doMore=!1,this.get("next"))},y.prototype.getMoreRecommendations=function(){var t=l.screen.sizeForScreenDimension();("xl"===t||"xxl"===t)&&this.recommendationCount>=0&&(this.recommendationCount=-1,this.get("next"))},y.prototype.handleSuccessfulFetch=function(t,e){if(t.status&&"error"===t.status||t.error)return t.serviceErrorCode&&453===t.serviceErrorCode?(this.resetLoading(),this.showOnBoarding()):this.retries>0?(this.retries--,setTimeout(function(){this.model.retry()}.bind(this),this.retryTTL)):this.handleFailedFetch(t),null;if(this.resetLoading(),t.ttl&&(this.retryTTL=t.ttl),t.labels)return this.showOnBoarding(),null;if("appear"===e.eventType&&(this.lastAppearSuccess=Date.now()),this.viewModel&&"tasteupdate"!==e.eventType){var n=this.createView(t);return"refresh"!==e.eventType&&"appear"!==e.eventType||!a(t,"recommendations")||t.recommendations[0].id===this.firstId?"next"===e.eventType?(this.viewModel=this.viewModel.concat(n),this.sectionViewModel=n,this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.viewModel):this.viewModel:(this.firstId=t.recommendations[0].id,this.viewModel=n,this.sectionViewModel=null,this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new r("resetScrollState")),this.viewModel)}return t.recommendations?(this.firstId=t.recommendations[0].id,this.viewModel=this.createView(t),this.sectionViewModel=null,this.lastId=this.getLastId(t),this.viewModel.lastId=this.lastId,this.dispatchEvent(new r("resetScrollState")),this.viewModel):null},y.prototype.showOnBoarding=function(){var t=new h;t.addEventListener("handleOnboardingDone",this.handleOnboardingDone.bind(this)),this.dispatchEvent(new r("replaceDocument",{detail:{document:t}}))},y.prototype.getLastId=function(t){if(t.recommendations){var e=t.recommendations.length-1;if(t.recommendations[e].hasMore)return t.recommendations[e].id}return null},y.prototype.handleOnboardingDone=function(){var t=this.el.ownerDocument.navigationDocument;t.clear();var e={dataType:"for_you_page",navigationDocument:t};this.dispatchEvent(new r("tabPush",{detail:e}))},y.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=[],n=t.unavailableContent||{};if(t.recommendations&&t.recommendations.length>0&&(e="object"==typeof t.recommendations[0].content?this.parseRecommendationsSet(t.recommendations,n):this.parseRecommendations(t.recommendations,n)),t.nfa){var i=l.screen.sizeForScreenDimension(),a=this.parseNewFromYourArtists(t.nfa.content),r={xs:2,s:2,m:2,l:5,xl:6,xxl:7},s=e.length>0?e.length-1:0;e[s].content.push({newFromYourArtists:!0,title:o.loc("FUSE.ForYou.NFYA.SwooshTitle"),content:a,numColumns:r[i]})}return e},y.prototype.parseRecommendationsSet=function(t,e){for(var n=[],i={},a=0;a<t.length;a++)i.content=this.parseRecommendations(t[a].content,e),i.recoId=l.keypath(t[a],"metrics.reco_id"),i.metrics=t[a].metrics,n.push(i);return n},y.prototype.parseRecommendations=function(t,e){for(var n,i,a=t.length,r=[],o=[],s=l.screen.sizeForScreenDimension(),c="l"===s||"xl"===s||"xxl"===s?!0:!1,u=0;a>u;u++){var h=t[u],d=t[u+1],p=h.contentType.type;if(i={id:h.id,params:{type:"grid"}},"Album"!==p){var m={},f=d&&"Album"!==l.keypath(d,"contentType.type");m.playlist=!0,m.isEven=u%2===0,m.isOdd=!m.isEven,m.columns=c,m.showBorder=f,n=this.model.lookupContent(i,this.processContent.bind(this,m)),r.length>0&&(r.length%2>0&&r.pop(),r.length>3&&o.push({albumGrid:!0,grid:!0,content:r}),r=[]),o.push(n)}else e[i.id]||(n=this.model.lookupContent(i,this.processContent.bind(this,null)),r.push(n)),u===parseInt(a-1)&&(r.length%2>0&&r.pop(),r.length>3&&o.push({albumGrid:!0,grid:!0,content:r,numColumns:r.length}),r=[])}return o},y.prototype.parseNewFromYourArtists=function(t){var e=l.screen.sizeForScreenDimension(),n={xs:4,s:4,m:4,l:5,xl:6,xxl:7},i=n[e];t.length>i&&(t=t.slice(0,i));for(var a,r,o=t.length,s=[],c=0;o>c;c++){var u=t[c];r={id:u.id,params:{type:"product"}},a=this.model.lookupContent(r,this.processContent.bind(this,null)),s.push(a)}return s},y.prototype.handleFailedFetch=function(t,e,n){this.resetLoading(),this.errorTitle=n,t=t||{},"object"==typeof e&&0===Object.keys(e).length&&(e=void 0),this.errorMessage=e||t.error||t.serviceError||o.loc("FUSE.Error.AnErrorOccurred"),this.handleDataReady()},y.prototype.handleDataReady=function(){this.sectionViewModel&&this.viewModel!==this.sectionViewModel?this.renderSection():this.render(),this.getMoreRecommendations()},y.prototype.renderSection=function(){var t=Object.create(this);this.sectionViewModel&&(t.viewModel=this.sectionViewModel);var e=l.parser.parse(v(t),this.el.ownerDocument),n=this.el.ownerDocument.getElementsByTagName("stackTemplate").item(0),i=this.el.ownerDocument.getElementById("loadMore");n.insertBefore(e,i),this.lastId||n.removeChild(i),this.elementsWithoutEventListeners=this.elementsWithoutEventListeners||[],this.elementsWithoutEventListeners.push(e),this.elementArray.push(e),this.dispatchEvent(new r("render"))},y.prototype.handleRefresh=function(){this.requestInFlight?this.doRefresh=!0:this.get("refresh")},y.prototype.handleTasteProfileUpdated=function(){this.get("tasteupdate")},y.prototype.handleBagChange=function(){this.isOnline=""!==itms.networkConnectionType,this.isOnline&&this.handleAppear(),this.sectionViewModel=null,this.render(),this.getMoreRecommendations()},y.prototype.handleNetworkChange=function(){this.isOnline=""!==itms.networkConnectionType,this.isOnline&&this.handleAppear(),this.sectionViewModel=null,this.render(),this.getMoreRecommendations()},y.prototype.handleAppear=function(){!this.requestInFlight&&Date.now()-this.lastAppearSuccess>this.appearTTL&&this.get("appear")},y.prototype.processContent=function(t,e,n){var i=l.artwork.getArtworkForContent({content:e,artworkMap:this.artworkMap,params:n}),a=l.lockup.setArtworks(e,i,this.artworkMap);return a.isExplicit=l.lockup.isExplicit(e),a[e.kind]=!0,a.playlist&&(a=l.lockup.playlistProcessCard(a)),t&&l.extend(a,t),a},y.prototype.handleNeedsMore=function(t){this.model&&"stackTemplate"===t.target.tagName&&(this.requestInFlight?this.doMore=!0:this.get("next"))},y.prototype._setRecoDataOnEvent=function(t){for(var e,n=t.target;n.parentNode&&(!n.getAttribute||!(e=n.getAttribute("data-reco-id")));)n=n.parentNode;return t.recoId=e,t},y.prototype.handleLockupFromRecommendation=function(t){t=this._setRecoDataOnEvent(t),this.handleLockup(t)},y.prototype.playFromRecommendation=function(t){t=this._setRecoDataOnEvent(t),this.playMedia(t)},y.prototype.handleRestrictionsChange=function(){this.dispatchEvent(new r("resetScrollState")),this.sectionViewModel=null,this.render()},e.exports=y},{"../../util":391,"../account/onboarding/genre":45,"../base":97,"../common":133,"./partials":252,"./partials/forYouSection.hbs":251,"./style.hbs":254,"./template.hbs":255,itml:435}],249:[function(t,e,n){var i=t("itml").event.Event,a=t("../../util"),r=a.pubSub,l=t("./document"),o=t("../account/welcome/document"),s=t("../loading"),c=t("../base/tab"),u=t("../account/carrier_bundling/unlinked_for_you"),h=t("../account/migration/getting_favorites"),d=t("../account/welcome/family"),p=function(t){t=t||{},this.loading=!0,c.call(this,t),r.subscribe("serviceChange",this.checkCurrentAccountStatus.bind(this)),r.subscribe("importingFavorites",this.showGettingFavorites.bind(this)),r.subscribe("migrationComplete",this.migrationComplete.bind(this));var e=a.account.isEligibleForAppleMusic();e===!1?this.checkCurrentAccountStatus():this.handleServiceEligibility(1,itms.eligibilityForService())};a.inherit(p,c),p.prototype.checkCurrentAccountStatus=function(){a.log.warn("For You checkCurrentAccountStatus"),a.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this))},p.prototype.showGettingFavorites=function(t){a.log.warn("showGettingFavorites"),t=t||{},this.handleServiceEligibility(1,{migrating:!0})},p.prototype.migrationComplete=function(){this._migrating=!1,a.account.setIsMigrationInProgress(!1)},p.prototype.handleServiceEligibility=function(t,e){if(e=e||{},a.log.warn("For You handleServiceEligibility ",t,e),e.isFinal===!0&&this.partialResults)return void(this.partialResults=!1);e.isFinal===!1&&(this.partialResults=!0);var n=this.getDocumentController(t,e);this.dispatchEvent(new i("replaceDocument",{detail:{document:n}}))},p.prototype.getDocumentController=function(t,e){var n;return e=e||{},this.loading?(n=new s,this.loading=!1):1===t&&a.account.shouldShowFamilyWelcomePage(e)?n=new d({name:TabBar.selectedTab.title}):1===t&&e&&(e.isFinal&&"unlinked"===e.carrierBundle||"eligible"===e.carrierBundle&&!itms.DSID)?(a.log.warn("Unlinked carrier bundle or Eligible number with no DSID"),n=new u({name:TabBar.selectedTab.title,data:e})):e&&e.migrating||a.account.isMigrationInProgress()?(this._migrating=!0,n=new h({name:TabBar.selectedTab.title})):1!==t||this._migrating?this._migrating||(n=new o({name:TabBar.selectedTab.title,data:{mode:"upsell",upsellIdentifier:"ForYou"},eligibilityData:{eligible:t,data:e}})):n=new l({name:TabBar.selectedTab.title}),a.log.warn("For You Controller: ",n),n},e.exports=p},{"../../util":391,"../account/carrier_bundling/unlinked_for_you":25,"../account/migration/getting_favorites":30,"../account/welcome/document":84,"../account/welcome/family":87,"../base/tab":100,"../loading":281,"./document":247,itml:435}],250:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="        <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" ',a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' class="nfya-lockup action-lockup" data-content-id="'+l(r(null!=t?t.id:t,t))+'" data-content-kind="'+l(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">>\n            "+l((e.productArtwork||t&&t.productArtwork||o).call(t,t,"play","no-light-art",{name:"productArtwork",hash:{},data:i}))+"\n",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(8,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),s+"        </lockup>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="background-color:'+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';" '},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},6:function(t,e,n,i){return'disabled="true"'},8:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="            <title \n";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 maxLines="1" class="title">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.program(14,i),data:i}),null!=a&&(s+=a),s+="</title>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 class="subtitle-1">'+l(r(null!=t?t.artistName:t,t))+"</subtitle>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'                 class="subtitle-2">'+l((e.getGenreName||t&&t.getGenreName||o).call(t,null!=t?t.genres:t,{name:"getGenreName",hash:{},data:i}))+l((e.getYearFromDate||t&&t.getYearFromDate||o).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},9:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},11:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=l(r(null!=t?t.name:t,t))+" <badge ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'class="explict-badge" src="resource://explicit"/>\n                 '},12:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.3,{name:"getHighContrastColor",hash:{},data:i}))+';" '},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},16:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="            <title \n";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 maxLines="1" class="title">',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(19,i),inverse:this.program(14,i),data:i}),null!=a&&(s+=a),s+="</title>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='                 class="subtitle-1">'+l(r(null!=t?t.artistName:t,t))+"</subtitle>\n            <subtitle \n",a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'                 class="subtitle-2">'+l((e.getGenreName||t&&t.getGenreName||o).call(t,null!=t?t.genres:t,{name:"getGenreName",hash:{},data:i}))+l((e.getYearFromDate||t&&t.getYearFromDate||o).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n"},17:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},19:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=l(r(null!=t?t.name:t,t))+" <badge ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'class="explict-badge" src="resource://explicit"/>\n                 '},20:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" '},22:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='<grid class="album-grid grid-cols-'+s((r=null!=(r=e.numColumns||(null!=t?t.numColumns:t))?r:o,typeof r===l?r.call(t,{name:"numColumns",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(c+=a),c+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"</grid>\n"},useData:!0})},{"hbsfy/runtime":418}],251:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <section data-reco-id="'+l(r(null!=t?t.recoId:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"        </section>\n"},3:function(t,e,n,i){var a,r="            ";return a=e["if"].call(t,null!=t?t.playlist:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.albumGrid:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.newFromYourArtists:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},4:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.playlistCard,"","playlistCard",t,{fromHeroCover:!1},e,n,i),null!=a&&(r+=a),r+" "},6:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.albumGrid,"","albumGrid",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},8:function(t,e,n,i){var a,r=" ";return a=this.invokePartial(n.newFromYourArtists,"","newFromYourArtists",t,void 0,e,n,i),null!=a&&(r+=a),r+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],252:[function(t,e,n){var i=t("itml").utils.Handlebars,a={albumGrid:t("./albumGrid.hbs"),newFromYourArtists:t("./newFromYourArtists.hbs"),forYouSection:t("./forYouSection.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./albumGrid.hbs":250,"./forYouSection.hbs":251,"./newFromYourArtists.hbs":253,itml:435}],253:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <lockup type="shelf" class="action-lockup" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=">\n                "+l((e.productArtwork||t&&t.productArtwork||o).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+'\n                <title class="" maxLines="1">\n                    <text>',a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(s+=a),s+='</text>\n                </title>\n                <subtitle class="nfya-subtitle-1">'+l(r(null!=t?t.artistName:t,t))+'</subtitle>\n                <subtitle class="nfya-subtitle-2">'+l((e.getYearFromDate||t&&t.getYearFromDate||o).call(t,null!=t?t.releaseDate:t,{name:"getYearFromDate",hash:{},data:i}))+"</subtitle>\n                ",a=(e.margin||t&&t.margin||o).call(t,"10pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+"\n            </lockup>\n"},2:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='<section>\n    <header class="nfya-header">\n        <title class="nfya-title">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n    </header>\n    <grid class="nfya-grid" style="column-count: '+l(o(null!=t?t.numColumns:t,t))+';" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </grid>\n</section>\n"},useData:!0})},{"hbsfy/runtime":418}],254:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* common styles */\n.no-light-art {\n    itml-img-treatment: none;\n}\n\n/*for you*/\n.action-lockup {\n    itml-position: bottom;\n    itml-align: left;\n    itml-padding: 0 0 0 0;\n}\n\n.title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.title-disabled {\n    color: rgba(255, 255, 255, 0.6);\n}\n\n.explicit-badge {\n    color: rgba(255, 255, 255, 1.0);\n}\n\n.explicit-badge-disabled {\n    color: rgba(255, 255, 255, 0.6);\n}\n\n.subtitle-1 {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 11pt;\n}\n\n.subtitle-2 {\n    color: rgba(255, 255, 255, 0.3);\n    font-size: 10pt;\n}\n\n.new-release-badge {\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n}\n\n.playlist-play-button {\n    itml-position: bottom;\n}\n\n/*\n// TODO this is a hack. We are using background color and padding to get a border. Border color is the background\n// color of the document .fu-page. Need client support for this.\n*/\n.show-border {\n    padding: 0pt 0pt 1pt 0pt;\n}\n\n.fu-page {\n    background-color: rgb(255, 255, 255);\n}\n\n/* this is properly using a border color */\n.album-grid {\n    border-color: rgb(255, 255, 255);\n    padding: 0;\n}\n\n.tune-taste-button {\n    color: tint-color;\n    border-color: tint-color;\n    text-align: center;\n    font-size 20pt;\n}\n\n.card-border {\n    itml-divider-type: full;\n    itml-padding: 0pt;\n    margin: 0pt;\n    background-color: transparent;\n}\n\n.4up-grid {\n    border-color: rgba(255,255,255,0.2);\n    border-width: 1pt;\n}\n\n.nfya-grid {\n    padding: 0 16pt 0 16pt;\n    border-color: rgba(0,0,0,0);\n    itml-divider-type: borderless;\n}\n\n.nfya-lockup {\n    padding: 0;\n}\n\n.nfya-title {\n    font-size: 13pt;\n    font-weight: medium;\n    color: rgb(0,0,0);\n    text-align: center;\n}\n\n.nfya-subtitle-1 {\n    color: rgba(0,0,0,0.6);\n}\n\n.nfya-subtitle-2 {\n    color: rgba(0,0,0,0.3);\n}\n\n.bottom-loader {\n    max-height: 30;\n    padding: 16pt 0 12pt 0;\n}\n\n.nfya-header {\n    padding: 16pt 0pt 16pt 0pt;\n}\n\n@media all and (max-width: 767pt) {\n    .grid-cols-4 {\n        column-count: 2;\n    }\n    .grid-cols-6 {\n        column-count: 2;\n    }\n    .nfya-grid {\n        column-count: 2;\n    }\n}\n\n@media all and (min-width: 768pt) {\n    .grid-cols-4 {\n        column-count: 4;\n    }\n    .grid-cols-6 {\n        column-count: 3;\n    }\n    .nfya-grid {\n        column-count: 5;\n    }\n    .playlist-row {\n        margin:0 0 0 0;\n    }\n    /*\n    // TODO this is a hack. We are using background color and padding to get a border. Border color is the background\n    // color of the document .fu-page. Need client support for this.\n    */\n    .show-border {\n        margin: 0pt 0pt 1pt 0pt;\n    }\n}\n\n@media all and (min-width: 1024pt) {\n    .grid-cols-6 {\n        column-count: 6;\n    }\n    .nfya-grid {\n        column-count: 6;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],255:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isOnline:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'	    <activityIndicator id="loadMore" class="bottom-loader"></activityIndicator>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<pullToRefresh class="refresh"/>\n';return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.forYouSection,"","forYouSection",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],256:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,l=i.utils.keypath,o=t("./template.hbs"),s=t("./partials"),c=t("../base/controller"),u=i.event.Event,h=t("../base").style,d=t("./style.hbs"),p=t("../common").traits.DataProvider,m=t("../filter"),f=a.loc,g=function(t,e,n){var i=t.defaults[n];return e=e&&e.toLowerCase(),t[e]&&t[e][n]&&(i=t[e][n]),i},b=function(t,e){t=t||{},t.events=t.events||[],t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=d,t.styles.push(new h(t)),this.controllerName="grouping",this.documentDimensions={},this.topChartsSidepackArr=[],s(),this.loading=!0,this.requestTTL=48e4,this.lastAppearSuccess=Date.now(),c.call(this,t,e),this.name="Grouping",this.blockIt=!1,this.containerType=t.containerType||"",this.hasPersonalizedFCs=!1,this.hasGradient=t.hasGradient,r.subscribe("serviceChange",this.checkForPersonalizedFCs.bind(this)),this.pageUrl=t.url,a.extend(this.onSelect,{"play-button":this.playMedia,link:this.pushUrl,song:this.playMedia,carousel:this.pushProduct,"more-link":this.pushUrl,"top-charts-more-link":this.goToTopCharts,copperRecentRadioMarker:this.showMoreRecents,"brick-lockup":this.pushUrl,"radio-hero":this.handleRadioHero,"radio-hero-button":this.handleRadioHero}),this.artworkMap={recentRadioStation:{crop:"bb",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168],xxl:[168,168]},featuredProduct:{xs:[150,150],s:[163,163],m:[256,256],l:[256,256],xl:[256,256],xxl:[256,256]},heroContent:{xs:[88,88],s:[90,90],m:[90,90],l:[71,71],xl:[71,71],xxl:[71,71]},heroTall:{crop:"sr",xs:[320,320],s:[375,375],m:[414,414],l:[768,305],xl:[1024,288],xxl:[1366,288]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[80,80],xl:[80,80],xxl:[80,80]},product:{xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168],xxl:[189,189]},trackShelf:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[353,96],xl:[312,96],xxl:[414,128]},brickShelf:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[254,160],xl:[340,160],xxl:[450,160]},playlistTall:{crop:"sr",xs:[105,105],s:[125,125],m:[125,125],l:[200,200],xl:[200,200],xxl:[200,200]}},this.typesForKey={recentRadioStation:["recentRadioStation"],featuredProduct:["featuredRadioStation"],heroContent:["heroContent"],heroTall:["heroTall"],brickShelf:["brickShelf"]},this.model=new p({data:t.data,pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataFailed.bind(this)),this.get()};a.inherit(b,c),b.prototype.handleRadioHero=function(t){var e=t.target.getAttribute("data-override-url"),n={navigationDocument:t.target.ownerDocument.navigationDocument,data:{}};e&&""!==e?(e.match(/itunes.apple.com\/beats1/)?n.dataType="radio_live_station":n.data.url=decodeURIComponent(e),"button"===t.target.tagName&&this.playMedia(t),this.dispatchEvent(new u("tabPush",{detail:n}))):this.playMedia(t)},b.prototype.template=o,b.prototype.get=function(t){this.loading="appear"!==t,this.requestInFlight=!0,this.errorTitle=null,this.errorMessage=null,this.model.fetchData({url:this.pageUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this),retries:1,type:t})},b.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.requestInFlight=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},b.prototype.goToTopCharts=function(t){for(var e,n=t.target,i=this.model.getData("top-charts-side-pack"),a=0;a<i.length;a++)i[a].seeAllUrls[0]===n.getAttribute("data-link-url")&&(e=i[a]);var r="top_charts_page",l={data:e,dataType:r,navigationDocument:n.ownerDocument.navigationDocument};this.dispatchEvent(new u("tabPush",{detail:l}))},b.prototype.createView=function(t,e){function n(t,e,n){var i=t.link&&t.link.contentId||t.adamId||t.contentId;if(c[e]&&!o[i])return c[e](t);var a={id:i,params:{parentLabel:n}},r=c.model.lookupContent(a,c.processContent.bind(c));return r}function i(t,e){if(t){var r,h,d,p,m,f,g,b=t.length,v=!0,y=[];for(r=0;b>r;r++)if(h=t[r],o[h.contentId])a.log.warn(h.contentId+" is in unAvailableContentIds.");else if(d=h.content||h.children,p=h.fcKind,p&&(m=u[p]||a.log.warn("fcKindId "+p+" is not configured.",h)),"content"===h.type||"content"===l(h,"link.type")){if(h=n(h,m,e))if("playlist"===h.kind&&v){var k=!1;h.artworkTrackIds&&h.artworkTrackIds.length>0?k=!0:(h.image||h.logo||h.cover)&&(k=!0),k&&y.push(h)}else y.push(h)}else d&&(f=i(d,m)),c[m]&&(g=c[m](h,f,s,d,o),g&&y.push(g));return y}}this.screenSize=a.screen.sizeForScreenDimension(this.documentDimensions),this.errorTitle=null,this.errorMessage=null,this.data=t,e=e||{};var r=t.pageData.fcStructure.model.children,o=t.pageData.unAvailableContentIds||{},s=this.gridMaxItems(),c=this;this.markerRequests=[];var u={315:"copperMusicRoot",316:"copperHeroList",317:"copperHero",318:"copperHeroCover",319:"copperHeroSwipe",320:"copperHeroCustom",321:"copperHeroHLSStream",322:"copperLinkStack",323:"copperChartSet",324:"copperBrickBlock",325:"copperBrick",326:"copperSwoosh",327:"copperTrackSwoosh",328:"copperNotesSwoosh",329:"copperCuratorMarker",330:"copperHeroRadioMarker",331:"copperFeaturedRadioMarker",332:"copperRecentRadioMarker",
347:"playlistBlock",368:"copperTrackSwoosh"},h=this.viewModel;return("rotate"===e.type||this.modelHasChanged(r))&&(this.hasChartSet=!1,h=i(r)),h},b.prototype.modelHasChanged=function(t){var e=JSON.stringify(t).substr(0,500);return this.currentFCRoot?this.currentFCRoot!==e?(this.currentFCRoot=e,!0):!1:(this.currentFCRoot=e,!0)},b.prototype.processContent=function(t,e){e=e||{};var n=e.type;e.parentLabel&&"copperTrackSwoosh"===e.parentLabel&&(n="song"!==t.kind?"list":n),"playlist"===t.kind&&"hero"===e.type&&(n="playlistTall");var i=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:{type:n},screenSize:this.screenSize}),r=a.lockup.setArtworks(t,i,this.artworkMap,n,this.screenSize);return r.line1=a.lockup.line1(t),r.isExplicit=a.lockup.isExplicit(t),r.playlist&&(r=a.lockup.playlistProcessCard(r)),e.chartIndex&&(r.chartIndex=e.chartIndex),r},b.prototype.copperTrackSwoosh=function(t,e){var n={expanded:{xs:50,s:50,m:50,l:60,xl:60,xxl:60},compact:{xs:5,s:5,m:5,l:6,xl:6,xxl:6},defaults:{xs:5,s:5,m:5,l:6,xl:6,xxl:6}},i=g(n,t.displayStyle,this.screenSize),a=e.slice(0,i),r=e.length>a.length&&t.seeAllUrl?t.seeAllUrl:!1;return{trackShelf:!0,seeAllUrl:r,moreClass:"more-link",content:a,title:t.name||t.title,showGradient:this.hasGradient}},b.prototype.copperNotesSwoosh=function(t,e,n){var i=this.screenSize;n="xl"===i||"xxl"===i?3:2;var a=e.slice(0,n),r=e.length>a.length&&t.seeAllUrl?t.seeAllUrl:!1,l="xs"===i?"subtitle":"description";return{copperNotesSwoosh:!0,content:a,title:t.title||t.name,seeAllUrl:r,moreClass:"more-link",displayType:"copperNotesSwoosh",showGradient:this.hasGradient,descriptionTag:l}},b.prototype.copperHeroList=function(t,e){if("2"===t.displayStyle||"expanded"===t.displayStyle)for(var n=0,i=e.length;i>n;n++)if(e[n].content)for(var r=0,l=e[n].content.length;l>r;r++){var o=e[n].content[r],s=a.artwork.getArtworkForContent({content:o,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:{type:"heroTall"},screenSize:this.screenSize});s&&(o=a.lockup.setArtworks(o,s,this.artworkMap,"heroTall",this.screenSize),o.hero=o.image)}return{copperHeroList:!0,displayStyle:t.displayStyle,content:e}},b.prototype.copperChartSet=function(t,e,n,i,a){e=e||[],n=5;var r,l=[],o=[],s=0,c=1,u=!1,h=this.screenSize,d=!1;this.moreTopChartsString=f.loc("FUSE.MoreTopCharts");var p=function(t,e){for(var n,i=Math.ceil(t.length/e),a=-1,r=[],l=0;l<t.length;l++)l%i===0&&a++,n=l%i,n*=e,n+=a,r[n]=t[l],r[n].empty?(r[n].params=r[n].params||{},r[n].params.chartIndex=l+1):r[n].chartIndex=l+1;return r};for(("xl"===h||"l"===h||"xxl"===h)&&(this.hasChartSet?(n=6,d=!0,u=!1):(c=2,u=!0,this.hasChartSet=!0));c>s;){var m=t.children[s],g=0;if(m){l.push(m.seeAllUrl),o.push(m.name),r=m.links,e[s]={},e[s].content=[],e[s].title=m.name;for(var b=0;b<r.length&&g!==n;b++)a[r[b].contentId]||(e[s].content.push(this.model.lookupContent(r[b].contentId,this.processContent.bind(this))),g++)}s++}if(u||(e=e[0]),d){var v="xl"===h||"xxl"===h?3:2,y=p(e.content,v);e.content=y}this.topChartsSidepackArr.push({topChartsSidePack:t.children,seeAllUrls:l,names:o}),this.model.setData("top-charts-side-pack",this.topChartsSidepackArr);var k={seeAllUrl:l[0],moreClass:"more-link",content:e,sortedGrid:d,showGradient:this.hasGradient,useMultiColumn:u,moreTopChartsString:f.loc("FUSE.MoreTopCharts")};return k.trackShelfOrdered=!0,k},b.prototype.getDesignBadgeContent=function(t,e){return(t.designBadge||t.designTag)&&(e.designBadge=t.designBadge||t.designTag),e},b.prototype.copperBrick=function(t){return t=this.processContent(t,{type:"brickShelf"})},b.prototype.copperBrickBlock=function(t,e,n){n=3,e=e.slice(0,n);var i=this.screenSize,a=!1;("xxl"===i||"xl"===i||"l"===i)&&(a=!0);var r={xs:"brick-list",s:"brick-list",m:"brick-list",l:"brick-grid",xl:"brick-grid",xxl:"brick-grid"},l=e[e.length-1];if(l.image&&"brick-grid"===r[i]){var o=Math.round(this.documentDimensions.width/3);l.image.width=o}return{copperBrickBlock:!0,content:e,title:f.loc("FUSE.FindRightMusic"),showGradient:this.hasGradient,largeScreen:a}},b.prototype.playlistBlock=function(t){for(var e,n=t.content.slice(0,8),i=[],a=0;a<n.length;a++){var r={id:n[a].contentId,params:{type:"featuredRadioStation"}};i.push(this.model.lookupContent(r,this.processContent.bind(this)))}return{playlistBlock:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,content:i,orientation:this.getOrientationString()}},b.prototype.copperFeaturedRadioMarker=function(t){this.hasPersonalizedFCs=!0;var e,n,i=this.screenSize,r="m"===i?9:8;if(itms.accountInfo.DSID){var l={copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,orientation:this.getOrientationString()},o=function(t){n=t.contentIds&&t.contentIds.slice(0,8)||[];for(var e=0;e<n.length;e++){var i={id:n[e].id,params:{type:"featuredRadioStation"}};n[e]=this.model.lookupContent(i,this.processContent.bind(this))}return this.handleMarkers(n,"copperFeaturedRadioMarker",r),n}.bind(this);if(this.featuredRadioData)l.content=this.featuredRadioData;else{var s=function(t){return this.featuredRadioData=o(t),this.viewModel}.bind(this),c=function(){this.model.fetchData({url:a.urls.radioFeatured(),success:s.bind(this),failure:this.handleFailedFetch.bind(this)})}.bind(this);this.markerRequests.push(c)}return l}n=this.data.pageData.unpersonalizedFeaturedStations;for(var u=0;u<n.length;u++)n[u]=this.model.lookupContent(n[u],this.processContent.bind(this));return{copperFeaturedRadioMarker:!0,seeAllUrl:e,moreClass:"featuredContent",title:t.name,content:n,orientation:this.getOrientationString()}},b.prototype.copperRecentRadioMarker=function(){this.hasPersonalizedFCs=!0;var t={xs:3,s:3,m:3,l:5,xl:6,xxl:7},e=this.screenSize,n=t[e],i=this.getOrientationString();if(itms.accountInfo.DSID){var a=function(){var t={recentRadio:{results:{}}},e={},i=function(i){if(i)for(var a=0;a<i.length;a++){i[a].kind="radioStation";var r=i[a].id;e[r]=i[a],i[a]=this.processContent(i[a],{type:"recentRadioStation"})}t.recentRadio.results=e,this.model.cacheContent(t),this.handleMarkers(i,"copperRecentRadioMarker",n)}.bind(this);RecentStationsManager.getRecentStations(null,function(t){i(t)}.bind(this)),RecentStationsManager.onUpdate=function(){this.requestInFlight||RecentStationsManager.getRecentStations(null,function(t){i(t)}.bind(this))}.bind(this)}.bind(this);this.markerRequests.push(a)}return{copperRecentRadioMarker:!0,title:f.loc("FUSE.Radio.Recents.SwooshTitle"),hideDivider:!0,orientation:i}},b.prototype.copperHeroCover=function(t){var e={id:t.link.contentId,params:{type:"hero"}},n=this.model.lookupContent(e,this.processContent.bind(this));return n.coverHero=!0,t.content=[],t.screenSize=this.screenSize,n=this.getDesignBadgeContent(t,n),t.listenNowText=f.loc("FUSE.Radio.ListenNowButton"),t.overrideURL=t.overrideURL||"",t.content.push(n),t},b.prototype.copperHeroCustom=function(t){return t.type="hero",t.customHero=!0,t.screenSize=this.screenSize,t=this.processContent(t),t.hero=a.artwork.bestArtwork("hero",t.artwork),t},b.prototype.copperHeroSwipe=function(t,e){return{shelf:!0,content:e,title:t.title||t.name,displayType:"shelf",showGradient:this.hasGradient,screenSize:this.screenSize,swipeHero:!0}},b.prototype.copperHero=function(t){var e={id:t.link.contentId,params:{type:"heroContent"}},n=this.model.lookupContent(e,this.processContent.bind(this));return t.content=[],t.screenSize=this.screenSize,t.mainHero=!0,n=this.getDesignBadgeContent(t,n),t.content.push(n),t},b.prototype.copperLinkStack=function(t){return this.genres=t.links,{genresStack:!0,genres:this.genres}},b.prototype.copperSwoosh=function(t,e,n){var i={expanded:{xs:6,s:6,m:6},compact:{xs:3,s:3,m:3,l:5,xl:6,xxl:7},defaults:{xs:3,s:3,m:3,l:5,xl:6,xxl:7}},a=g(i,t.displayStyle,this.screenSize),r=this.screenSize,l=t.id,o={sectionId:l,title:t.name||t.title,displayType:"shelf",showGradient:this.hasGradient,orientation:this.getOrientationString()};if(e){var s=this.getKindFromContent(e);switch(s){case"curator":o.curatorSwoosh=!0;break;case"musicVideo":a="l"===r||"xl"===r||"xxl"===r?n:n-1,o.musicVideoSwoosh=!0;break;case"radioStation":o.radioSwoosh=!0;break;case"playlist":o.copperSwoosh=!0;break;case"album":o.copperSwoosh=!0;break;default:a="l"===r||"xl"===r||"xxl"===r?n:n-1,o.musicVideoSwoosh=!0}}var c=e.slice(0,a),u=e.length>c.length&&t.seeAllUrl?t.seeAllUrl:!1;return o.content=c,o.seeAllUrl=u,o.moreClass="more-link",o},b.prototype.getKindFromContent=function(t){for(var e=t.length,n=0;e>n;){var i=t[n].kind;if(i)return i;n++}},b.prototype.copperCuratorMarker=function(t){for(var e,n=t.content,i=[],a=0;a<n.length;a++){var r={id:n[a].contentId,params:{type:"brick"}};i.push(this.model.lookupContent(r,this.processContent.bind(this)))}var l=this.screenSize,o={xs:"brick-list",s:"brick-list",m:"brick-list",l:"brick-grid",xl:"brick-grid",xxl:"brick-grid"},s={xs:!0,s:!0,m:!0,l:!1,xl:!1,xxl:!1},c=o[l],u=s[l],h="";return("xxl"===l||"xl"===l||"l"===l)&&(h="-largeScreen"),{playlistMarker:!0,seeAllUrl:e,title:t.name,content:i,brickListType:c,shouldHaveChevron:u,largeScreen:h}},b.prototype.handleDataFailed=function(){this.loading=!1,this.requestInFlight=!1,this.viewModel||this.render()},b.prototype.handleDataReady=function(t){if(this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.markerRequests&&this.markerRequests.length>0){var e=this.markerRequests.shift();e.call(this)}else this.requestInFlight=!1,this.lastRequest=Date.now(),this.render()},b.prototype.handleMarkers=function(t,e,n){if(t){this.markerCallbacked=!0;var i=t.length>n;i&&(t=t.slice(0,n),this.model.setData(e,t));for(var a=0;a<this.viewModel.length;a++)this.viewModel[a][e]&&(this.viewModel[a].content=t,this.viewModel[a].seeAllUrl=i,this.viewModel[a].moreClass=e,this.viewModel[a].orientation=this.getOrientationString())}this.handleDataReady()},b.prototype.showMoreRecents=function(t){var e;RecentStationsManager.getRecentStationGroups(null,function(n){e={dataType:"recents",stations:n,navigationDocument:t.target.ownerDocument.navigationDocument},this.dispatchEvent(new u("tabPush",{detail:e}))}.bind(this))},b.prototype.authenticate=function(t){var e={button:f.loc("FUSE.SignIn"),reason:f.loc("FUSE.Radio.SignIn"),headline:f.loc("FUSE.Radio.SignIn"),callback:this.playRadioStation.bind(this,t)},n={data:e,dataType:"login",navigationDocument:modal};this.dispatchEvent(new u("tabPush",{detail:n}))},b.prototype.gridMaxItems=function(){var t=this.screenSize,e={xs:3,s:3,m:3,l:5,xl:6,xxl:7};return e[t]},b.prototype.checkForPersonalizedFCs=function(){this.hasPersonalizedFCs&&(this.hasPersonalizedFCs=!1,this.get())},b.prototype.showGenreFilter=function(){this.filterModal=new m({filters:this.genres,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})},b.prototype.getOrientationString=function(){var t="",e=this.screenSize,n=a.screen.getCurrentOrientation(this.documentDimensions);return("xxl"===e||"xl"===e||"l"===e)&&(t="-"+n),t},b.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url")||this.pageUrl,i=e.getAttribute("label"),a=i.replace("&","&amp;");this.selectedFilter=i;var r={selectedFilter:this.selectedFilter,name:a,url:n};this.pageUrl=n,this.get("filter"),this.render(),this.dispatchEvent(new u("genre-selected",{detail:r})),modal.popDocument()},b.prototype.handleFilterCancellation=function(){modal.popDocument()},b.prototype.handleRotation=function(t){this.documentDimensions=t;var e=this;this.data&&(clearTimeout(this.timer),this.timer=setTimeout(function(){e.model.dataSuccess(e.data,{success:e.createView.bind(e),type:"rotate"})},300))},b.prototype.handleAppear=function(t){!this.requestInFlight&&"stackTemplate"===t.target.tagName&&Date.now()-this.lastRequest>this.requestTTL&&this.get("appear")},e.exports=b},{"../../util":391,"../base":97,"../base/controller":95,"../common":133,"../filter":243,"./partials":264,"./style.hbs":273,"./template.hbs":274,itml:435}],257:[function(t,e,n){var i=t("../../util"),a=t("./controller"),r=t("../common").traits.TabComponent,l=t("../base/document"),o=function(t,e){t=t||{},t.controllers=t.controllers||[];var n,o=i.keypath(t,"data.pageData.fcStructure.model.children");t.name=i.keypath(o[0],"name")||"",0===t.controllers.length&&(n=new a({data:t.data,dataType:t.dataType}),t.controllers.push(n)),l.call(this,t,e),r.call(this)};i.inherit(o,l),i.inherit(o,r,!0),o.prototype.documentType="stackTemplate",e.exports=o},{"../../util":391,"../base/document":96,"../common":133,"./controller":256}],258:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <grid class="brick-border '+o(l(null!=t?t.brickListType:t,t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+=">\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.lambda,s=this.escapeExpression,c='        <lockup type="brick"\n';return r=e["if"].call(t,null!=(r=null!=t?t.link:t)?r.url:r,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(c+=r),c+="            ",r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"brick"},data:i}),null!=r&&(c+=r),c+='>\n\n            <img class="brick-linear-gradient brick-image'+s(o(null!=a[1]?a[1].largeScreen:a[1],t))+'"\n                width="'+s(o(null!=(r=null!=t?t.cover:t)?r.width:r,t))+'"\n                height="'+s(o(null!=(r=null!=t?t.cover:t)?r.height:r,t))+'"\n                srcset="'+s(o(null!=(r=null!=t?t.cover:t)?r.url:r,t))+" "+s(o(null!=(r=null!=t?t.cover:t)?r.dpr:r,t))+'"\n                alt="'+s(o(null!=t?t.name:t,t))+'">\n\n                <text class="brick-title-wrapper'+s(o(null!=a[1]?a[1].largeScreen:a[1],t))+' brick-title">\n                    <span class="brick-title">'+s(o(null!=t?t.name:t,t))+"</span>\n                </text>\n",r=e["if"].call(t,null!=a[1]?a[1].shouldHaveChevron:a[1],{name:"if",hash:{},fn:this.program(8,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"            </img>\n        </lockup>\n"},3:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression;return'                class="brick-lockup brick-grid-lockup'+o(l(null!=a[2]?a[2].largeScreen:a[2],t))+'" data-link-url="'+o(l(null!=(r=null!=t?t.link:t)?r.url:r,t))+'"\n'},5:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s='                class="action-lockup brick-grid-lockup'+o(l(null!=a[2]?a[2].largeScreen:a[2],t))+'" data-content-id="'+o(l(null!=t?t.id:t,t))+'" ';return r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"\n"},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},8:function(t,e,n,i){return'                    <decorationImage class="brick-arrow" src="resource://arrow"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],259:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.largeScreen:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,l='        <grid class="brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </grid>         \n"},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                <lockup type="brick"\n';return a=e["if"].call(t,null!=(a=null!=t?t.link:t)?a.url:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(o+=a),o+'                    <img class="brick-linear-gradient"\n                    width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                    height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                    srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                    alt="'+l(r(null!=t?t.name:t,t))+'" style="itml-padding: 0 25 0 25">\n                        <text class="brick-title-wrapper-largeScreen" maxLines="3"><span data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-title">'+l(r(null!=t?t.title:t,t))+'<decorationImage class="brick-arrow" src="resource://arrow"/></span><br /><description data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-description">'+l(r(null!=t?t.Description:t,t))+"</description></text>\n                    </img>\n                </lockup>\n"},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="brick-lockup"\n                        data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.kind:a,t))+'"\n                        data-link-title="'+l(r(null!=(a=null!=t?t.link:t)?a.label:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"brick"},data:i}),null!=a&&(s+=a),s+">\n"},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="action-lockup"\n                        data-content-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-preview-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.type:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"brick"},data:i}),null!=a&&(s+=a),s+">\n"},8:function(t,e,n,i){var a,r=e.helperMissing,l='        <grid class="brick-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </grid>\n"},9:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='                <lockup type="brick"\n';return a=e["if"].call(t,null!=(a=null!=t?t.link:t)?a.url:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(o+=a),o+'                    <background data-link-url="'+l(r(null!=t?t.url:t,t))+'">\n                        <img class="brick-linear-gradient"\n                        width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'"\n                        height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'"\n                        srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'"\n                        alt="'+l(r(null!=t?t.name:t,t))+'" />\n                    </background>\n                    <title class="brick-title">'+l(r(null!=t?t.name:t,t))+'</title>\n                    <title data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-title">'+l(r(null!=t?t.title:t,t))+'</title>\n                    <description data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'" class="brick-description">'+l(r(null!=t?t.Description:t,t))+'</description>\n                    <decorationImage class="brick-arrow" src="resource://arrow"/>\n                </lockup>\n'},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="brick-lockup brick-style"\n                        data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.kind:a,t))+'"\n                        data-link-title="'+l(r(null!=(a=null!=t?t.link:t)?a.label:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"brick"},data:i}),null!=a&&(s+=a),s+">\n"},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="action-lockup brick-style"\n                        data-content-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-preview-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.type:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"brick"},data:i}),null!=a&&(s+=a),s+">\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],260:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="edge-3col-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(l+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <lockup type="shelf" class="curator-lockup" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-kind="'+l(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+'>\n                <img class="curator-avatar" width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+l(r(null!=t?t.name:t,t))+'" />\n                <title maxLines="2" class="lockup-title">\n                    <text>'+l(r(null!=t?t.name:t,t))+'</text>\n                </title>\n                <subtitle maxLines="1">\n                    <text>'+l((e.first||t&&t.first||o).call(t,null!=t?t.genreNames:t,{name:"first",hash:{},data:i}))+"</text>\n                </subtitle>\n            </lockup>\n"},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],261:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='        <button type="imagetext" class="'+l(r(null!=t?t.moreClass:t,t))+'" data-link-url="'+l(r(null!=t?t.seeAllUrl:t,t))+'" data-link-title="'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'">\n';return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(s+=a),s+'            <img class="edge-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},4:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,"More",{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":418}],262:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='    <grid class="album-grid album-grid'+s((r=null!=(r=e.orientation||(null!=t?t.orientation:t))?r:o,typeof r===l?r.call(t,{name:"orientation",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(c+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="            <lockup ";return a=e["if"].call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' type="caption" class="action-lockup" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='>\n                <img class="radio-art" width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+l(r(null!=t?t.name:t,t))+'">\n                    ',a=(e.playButton||t&&t.playButton||o).call(t,t,{name:"playButton",hash:{},data:i}),null!=a&&(s+=a),s+='\n                </img>\n                <title style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" class="radio-featured-shelf-title"><text>'+l(r(null!=t?t.name:t,t))+'</text></title>\n                <subtitle style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||o).call(t,null!=(a=null!=t?t.image:t)?a.isDark:a,{name:"getHighContrastColor",hash:{},data:i}))+';" class="radio-featured-shelf-subtitle"><text>',a=e["if"].call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(s+=a),s+"</text></subtitle>\n            </lockup>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.image:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"'},5:function(t,e,n,i){return'disabled="true"'},7:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},9:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],263:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=e.helperMissing,o='      <carousel displayInterval="7" class="carousel" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"carousel"},data:i}),null!=r&&(o+=r),o+=">\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"    </carousel>\n"},2:function(t,e,n,i,a){var r,l="\n";return r=e["if"].call(t,null!=(r=null!=(r=null!=t?t.content:t)?r[0]:r)?r.radioStation:r,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.program(5,i,a),data:i}),null!=r&&(l+=r),l},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.radioHero,"                ","radioHero",t,void 0,e,n,i),null!=a&&(r+=a),r},5:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=(r=null!=(r=null!=t?t.content:t)?r[0]:r)?r.playlist:r,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(l+=r),l},6:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.playlistCard,"                    ","playlistCard",null!=(a=null!=t?t.content:t)?a[0]:a,{fromHeroCover:!0,isActionLockup:!0},e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=(r=null!=(r=null!=t?t.content:t)?r[0]:r)?r.id:r,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.program(14,i,a),data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(19,i,a),inverse:this.program(62,i,a),data:i}),null!=r&&(l+=r),l+"                    </card>\n"},9:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(s+=a),s+='                        class="action-lockup"\n                        data-content-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n                        data-preview-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.kind:a,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+">\n"},10:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                            <card style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n'},12:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                            <card style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.cover:a)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n'},14:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                        <card style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.bgColor:a,{
name:"hexToRgb",hash:{},data:i}))+';"\n';return a=e["if"].call(t,null!=(a=null!=t?t.link:t)?a.url:a,{name:"if",hash:{},fn:this.program(15,i),inverse:this.program(17,i),data:i}),null!=a&&(o+=a),o},15:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="link"\n                        data-link-url="'+l(r(null!=(a=null!=t?t.link:t)?a.url:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.kind:a,t))+'"\n                        data-link-title="'+l(r(null!=(a=null!=t?t.link:t)?a.label:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+">\n"},17:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                        class="action-lockup"\n                        data-content-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-preview-id="'+l(r(null!=(a=null!=t?t.link:t)?a.contentId:a,t))+'"\n                        data-content-kind="'+l(r(null!=(a=null!=t?t.link:t)?a.type:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+">\n"},19:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(20,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},20:function(t,e,n,i,a){var r,l=e.helperMissing,o="                                <background>\n";return r=e["if"].call(t,null!=t?t.coverHero:t,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.program(23,i,a),data:i}),null!=r&&(o+=r),o+="                                </background>\n\n",r=e["if"].call(t,null!=a[1]?a[1].designBadge:a[1],{name:"if",hash:{},fn:this.program(28,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='\n                                <lockup type="list" class="hero-lockup hero-top album" ',r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=r&&(o+=r),o+=" ",r=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(33,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=">\n",r=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(35,i,a),inverse:this.program(44,i,a),data:i}),null!=r&&(o+=r),r=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(51,i,a),inverse:this.program(60,i,a),data:i}),null!=r&&(o+=r),o+="                                            ",r=(e.playButton||t&&t.playButton||l).call(t,t,{name:"playButton",hash:{},data:i}),null!=r&&(o+=r),o+"\n                                        </img>\n                                </lockup>\n"},21:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                                        <img alt="'+l(r(null!=t?t.name:t,t))+'" style="itml-img-fill: 1;" width="'+l(r(null!=(a=null!=t?t.hero:t)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=t?t.hero:t)?a.height:a,t))+'" srcset="'+l(r(null!=(a=null!=t?t.hero:t)?a.url:a,t))+" "+l(r(null!=(a=null!=t?t.hero:t)?a.dpr:a,t))+'" />\n'},23:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(24,i,a),inverse:this.program(26,i,a),data:i}),null!=r&&(l+=r),l},24:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing;return'                                            <img alt="'+o(l(null!=t?t.name:t,t))+'" class="gradient" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||s).call(t,null!=(r=null!=t?t.hero:t)?r.bgColor:r,{name:"hexToRgb",hash:{},data:i}))+';"\n                                            width="'+o(l(null!=(r=null!=t?t.hero:t)?r.width:r,t))+'" height="'+o((e.addPaddingtoHeight||t&&t.addPaddingtoHeight||s).call(t,null!=(r=null!=t?t.hero:t)?r.height:r,null!=a[2]?a[2].screenSize:a[2],{name:"addPaddingtoHeight",hash:{},data:i}))+'" srcset="'+o(l(null!=(r=null!=t?t.hero:t)?r.url:r,t))+" "+o(l(null!=(r=null!=t?t.hero:t)?r.dpr:r,t))+'" />\n'},26:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing;return'                                            <img alt="'+o(l(null!=t?t.name:t,t))+'" class="gradient" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||s).call(t,null!=(r=null!=t?t.cover:t)?r.bgColor:r,{name:"hexToRgb",hash:{},data:i}))+';"\n                                            width="'+o(l(null!=(r=null!=t?t.cover:t)?r.width:r,t))+'" height="'+o((e.addPaddingtoHeight||t&&t.addPaddingtoHeight||s).call(t,null!=(r=null!=t?t.cover:t)?r.height:r,null!=a[2]?a[2].screenSize:a[2],{name:"addPaddingtoHeight",hash:{},data:i}))+'" srcset="'+o(l(null!=(r=null!=t?t.cover:t)?r.url:r,t))+" "+o(l(null!=(r=null!=t?t.cover:t)?r.dpr:r,t))+'" />\n'},28:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(29,i,a),inverse:this.program(31,i,a),data:i}),null!=r&&(l+=r),l},29:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'                                        <badge style="color: rgb(255,255,255); background-color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=t?t.hero:t)?r.textColor2:r,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        class="badge" text="'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=a[3]?a[3].designBadge:a[3],{name:"toUpperCase",hash:{},data:i}))+'"/>\n'},31:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression;return'                                        <badge style="color: rgb(255,255,255); background-color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=t?t.cover:t)?r.textColor2:r,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        class="badge" text="'+o((e.toUpperCase||t&&t.toUpperCase||l).call(t,null!=a[3]?a[3].designBadge:a[3],{name:"toUpperCase",hash:{},data:i}))+'"/>\n'},33:function(t,e,n,i){return'disabled="true"'},35:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(36,i),inverse:this.program(41,i),data:i}),null!=a&&(r+=a),r},36:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                                            <title style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(37,i),inverse:this.program(39,i),data:i}),null!=a&&(o+=a),o+"</title>\n"},37:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return l(r(null!=t?t.name:t,t))+' <badge style="color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge-disabled" src="resource://explicit"/>'},39:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},41:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                                            <title style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cover:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(42,i),inverse:this.program(39,i),data:i}),null!=a&&(o+=a),o+"</title>\n"},42:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return l(r(null!=t?t.name:t,t))+' <badge style="color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(a=null!=t?t.cover:t)?a.textColor1:a,.4,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge-disabled" src="resource://explicit"/>'},44:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.hero:t,{name:"if",hash:{},fn:this.program(45,i),inverse:this.program(48,i),data:i}),null!=a&&(r+=a),r},45:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                                            <title style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(46,i),inverse:this.program(39,i),data:i}),null!=a&&(o+=a),o+"</title>\n"},46:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return l(r(null!=t?t.name:t,t))+' <badge style="color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge" src="resource://explicit"/>'},48:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o='                                            <title style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cover:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-title" maxLines="2">';return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(49,i),inverse:this.program(39,i),data:i}),null!=a&&(o+=a),o+"</title>\n"},49:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return l(r(null!=t?t.name:t,t))+' <badge style="color: '+l((e.hexToRgb||t&&t.hexToRgb||o).call(t,null!=(a=null!=t?t.cover:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="explict-badge" src="resource://explicit"/>'},51:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='                                            <subtitle style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-subtitle" maxLines="2">'+l(o(null!=t?t.artistName:t,t))+"</subtitle>\n                                            ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n                                            <text style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="3">',a=e["if"].call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"if",hash:{},fn:this.program(52,i),inverse:this.program(54,i),data:i}),null!=a&&(s+=a),s+='</text>\n                                            <img alt="'+l(o(null!=t?t.name:t,t))+'" class="',a=e["if"].call(t,null!=(a=null!=t?t.hero:t)?a.isDark:a,{name:"if",hash:{},fn:this.program(56,i),inverse:this.program(58,i),data:i}),null!=a&&(s+=a),s+'" width="'+l(o(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(o(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(o(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(o(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n'},52:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},54:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},56:function(t,e,n,i){return" dark-art "},58:function(t,e,n,i){return" light-art "},60:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s='                                            <subtitle style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cover:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-subtitle" maxLines="2">'+l(o(null!=t?t.artistName:t,t))+"</subtitle>\n                                            ";return a=(e.margin||t&&t.margin||r).call(t,"7pt",{name:"margin",hash:{},data:i}),null!=a&&(s+=a),s+='\n                                            <text style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.cover:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="3">',a=e["if"].call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"if",hash:{},fn:this.program(52,i),inverse:this.program(54,i),data:i}),null!=a&&(s+=a),s+='</text>\n                                            <img alt="'+l(o(null!=t?t.name:t,t))+'" class="',a=e["if"].call(t,null!=(a=null!=t?t.cover:t)?a.isDark:a,{name:"if",hash:{},fn:this.program(56,i),inverse:this.program(58,i),data:i}),null!=a&&(s+=a),s+'" width="'+l(o(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(o(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+l(o(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+l(o(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'">\n'},62:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.customHero:t,{name:"if",hash:{},fn:this.program(63,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},63:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=(r=null!=t?t.hero:t)?r.url:r,{name:"if",hash:{},fn:this.program(64,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},64:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression,s=this.lambda,c='                                    <background>\n                                        <img class="gradient" alt="';return r=(e.escapeText||t&&t.escapeText||l).call(t,null!=t?t.designTag:t,{name:"escapeText",hash:{},data:i}),null!=r&&(c+=r),c+='" style="itml-img-fill:1; background-color:'+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=t?t.hero:t)?r.bgColor:r,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        width="'+o(s(null!=(r=null!=t?t.hero:t)?r.width:r,t))+'" height="'+o((e.addPaddingtoHeight||t&&t.addPaddingtoHeight||l).call(t,null!=(r=null!=t?t.hero:t)?r.height:r,null!=a[2]?a[2].screenSize:a[2],{name:"addPaddingtoHeight",hash:{},data:i}))+'" srcset="'+o(s(null!=(r=null!=t?t.hero:t)?r.url:r,t))+" "+o(s(null!=(r=null!=t?t.hero:t)?r.dpr:r,t))+'" />\n                                    </background>\n',r=e["if"].call(t,null!=t?t.designBadge:t,{name:"if",hash:{},fn:this.program(65,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='                                    <list class="hero-design-tag">\n                                        <text style="color: '+o((e.hexToRgb||t&&t.hexToRgb||l).call(t,null!=(r=null!=t?t.hero:t)?r.textColor1:r,{name:"hexToRgb",hash:{},data:i}))+';" class="hero-text" maxLines="2">',r=(e.escapeText||t&&t.escapeText||l).call(t,null!=t?t.designTag:t,{name:"escapeText",hash:{},data:i}),null!=r&&(c+=r),c+"</text>\n                                    </list>\n"},65:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                                        <badge style="color: rgb(255,255,255); background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.hero:t)?a.textColor2:a,{name:"hexToRgb",hash:{},data:i}))+';"\n                                        class="badge" text="'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.designBadge:t,{name:"toUpperCase",hash:{},data:i}))+'"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],264:[function(t,e,n){var i=t("itml").utils.Handlebars,a={heroList:t("./heroList.hbs"),edgeHeader:t("./edgeHeader.hbs"),shelf:t("./shelf.hbs"),featuredShelf:t("./featuredShelf.hbs"),trackShelf:t("./trackShelf.hbs"),trackShelfOrdered:t("./trackShelfOrdered.hbs"),curatorSwoosh:t("./curatorSwoosh.hbs"),notesSwoosh:t("./notesSwoosh.hbs"),brickShelf:t("./brickShelf.hbs"),radioSwoosh:t("./radioSwoosh.hbs"),playlistList:t("./playlistList.hbs"),musicVideoSwoosh:t("./musicVideoSwoosh.hbs"),brickGrid:t("./brickGrid.hbs"),radioHero:t("./radioHero.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./brickGrid.hbs":258,"./brickShelf.hbs":259,"./curatorSwoosh.hbs":260,"./edgeHeader.hbs":261,"./featuredShelf.hbs":262,"./heroList.hbs":263,"./musicVideoSwoosh.hbs":265,"./notesSwoosh.hbs":266,"./playlistList.hbs":267,"./radioHero.hbs":268,"./radioSwoosh.hbs":269,"./shelf.hbs":270,"./trackShelf.hbs":271,"./trackShelfOrdered.hbs":272,itml:435}],265:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="video-grid" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(l+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+'    </grid>\n    <lockup class="ghost-divider"></lockup>\n'},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.artistName:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],266:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=e.helperMissing,o='    <grid class="track-list notes-swoosh" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(o+=r),o+=">\n",r=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=r&&(o+=r),o+="\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"    </grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,!0,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='            <lockup type="editorial"\n';return r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.bgColor:r,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(c+=r),c+='\n                class="action-lockup editorial-lockup '+o(l(null!=t?t.kind:t,t))+'"\n                data-content-id="'+o(l(null!=t?t.id:t,t))+'"\n                ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n                data-link-url="'+o(l(null!=t?t.url:t,t))+'"\n                ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+="\n                ",r=(e.shouldDisable||t&&t.shouldDisable||s).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=">\n\n                "+o((e.productArtwork||t&&t.productArtwork||s).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n                <title ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor1:r,{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n                class="editorial-title">',r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.program(17,i,a),data:i}),null!=r&&(c+=r),c+="</title>\n\n                <subtitle ",r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor2:r,{name:"if",hash:{},fn:this.program(19,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n                class="editorial-subtitle">'+o(l(null!=t?t.artistName:t,t))+"</subtitle>\n\n                <"+o(l(null!=a[1]?a[1].descriptionTag:a[1],t)),r=e["if"].call(t,null!=(r=null!=t?t.artwork:t)?r.textColor1:r,{name:"if",hash:{},fn:this.program(21,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='\n                maxLines="3">',r=e["if"].call(t,null!=(r=null!=t?t.itunesNotes:t)?r["short"]:r,{name:"if",hash:{},fn:this.program(23,i,a),inverse:this.program(25,i,a),data:i}),null!=r&&(c+=r),c+"</"+o(l(null!=a[1]?a[1].descriptionTag:a[1],t))+">\n            </lockup>\n"},5:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'                    style="background-color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.bgColor:a,{name:"hexToRgb",hash:{},data:i}))+';"\n'},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                    style="background-color: '+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,"EEEEEE",{name:"hexToRgb",hash:{},data:i}))+';"\n'},9:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},11:function(t,e,n,i){return'disabled="true"'},13:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,{name:"hexToRgb",hash:{},data:i}))+';"'},15:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))+' <badge class="explict-badge" src="resource://explicit"/>'},17:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return r(a(null!=t?t.name:t,t))},19:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor4:a,{name:"hexToRgb",hash:{},data:i}))+';"'},21:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return' style="color: '+l((e.hexToRgb||t&&t.hexToRgb||r).call(t,null!=(a=null!=t?t.artwork:t)?a.textColor1:a,"0.80",{name:"hexToRgb",hash:{},data:i}))+';"'},23:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a["short"]:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},25:function(t,e,n,i){var a,r=e.helperMissing;return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=t?t.itunesNotes:t)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],267:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <section class="content-section">\n        <grid ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+=' class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.edgeHeader,"            ","edgeHeader",t,void 0,e,n,i),null!=a&&(l+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </grid>\n    </section>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.featuredArtists:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],268:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'<card class="radio-hero" data-preview-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-content-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-content-kind="radioStation" data-override-url="'+l(r(null!=t?t.overrideURL:t,t))+'">\n	<background>\n		<img alt="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.name:a,t))+" "+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.itunesNotes:a)?a["short"]:a,t))+'" class="radio-hero-image" width="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.height:a,t))+'" srcset="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.url:a,t))+" "+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.hero:a)?a.dpr:a,t))+'"/>\n	</background>\n	<list class="radio-hero-list">\n		<button alt="'+l(r(null!=t?t.listenNowText:t,t))+'" type="thin" class="radio-hero-button radio-hero-listen-button" data-content-id="'+l(r(null!=(a=null!=(a=null!=t?t.content:t)?a[0]:a)?a.id:a,t))+'" data-override-url="'+l(r(null!=t?t.overrideURL:t,t))+'">'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.listenNowText:t,{name:"toUpperCase",hash:{},data:i}))+"</button>\n	</list>\n\n</card>"},useData:!0})},{"hbsfy/runtime":418}],269:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <lockup class="ghost-divider"></lockup>\n    <grid class="edge-grid'+o(l(null!=a[1]?a[1].orientation:a[1],t))+'" data-section-id="'+o(l(null!=t?t.sectionId:t,t))+'" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+=">\n",r=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=r&&(c+=r),r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=(a=null!=t?t.genre:t)?a.name:a,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],270:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <lockup class="ghost-divider"></lockup>\n    <grid class="edge-grid'+o(l(null!=a[1]?a[1].orientation:a[1],t))+'" data-section-id="'+o(l(null!=t?t.sectionId:t,t))+'" ';return r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+=">\n",r=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=r&&(c+=r),r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'"'},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"            ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],271:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="track-list track-list-ipad" ';return a=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=this.invokePartial(n.edgeHeader,"        ","edgeHeader",t,void 0,e,n,i),null!=a&&(l+=a),a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    </grid>\n    ",a=(e.margin||t&&t.margin||r).call(t,"16pt",{name:"margin",hash:{},data:i}),null!=a&&(l+=a),l+"\n"},2:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'style="'+r((e.getColorGridStyle||t&&t.getColorGridStyle||a).call(t,null!=t?t.content:t,{name:"getColorGridStyle",hash:{},data:i}))+'" '},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <lockup\n                style="track-lockup"\n                type="list"\n                class="track-lockup-ipad action-lockup"\n                data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n\n",a=e["if"].call(t,null!=t?t.radioStation:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"            </lockup>\n"},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},7:function(t,e,n,i){return'disabled="true"'},9:function(t,e,n,i){return'                    <img src="resource://RadioButtonPlayIconWhite" />\n'},11:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},13:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='                    <title class="title';
return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+o(l(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},14:function(t,e,n,i){return"-disabled"},16:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},18:function(t,e,n,i){var a,r=e.helperMissing,l='                    <subtitle class="subititle one-line">\n                        <span>';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.line1:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</span>\n                    </subtitle>\n"},20:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],272:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.useMultiColumn:t,{name:"if",hash:{},fn:this.program(2,i,a),inverse:this.program(24,i,a),data:i}),null!=r&&(l+=r),l},2:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n"},3:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.lambda,s=this.escapeExpression,c='            <split class="track-list-split">\n                <grid class="track-list-ordered" ';return r=e["if"].call(t,null!=a[1]?a[1].showGradient:a[1],{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+='>\n                    <header class="edge-header">\n',r=e["if"].call(t,null!=a[2]?a[2].seeAllUrl:a[2],{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(c+=r),c+="                    </header>\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(10,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'                </grid>\n                <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+s(o(null!=a[2]?a[2].seeAllUrl:a[2],t))+'">\n                    <title>'+s(o(null!=a[2]?a[2].moreTopChartsString:a[2],t))+"</title>\n                </button>\n            </split>\n"},4:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'style="'+o((a=null!=(a=e.getColorGridStyle||(null!=t?t.getColorGridStyle:t))?a:l,typeof a===r?a.call(t,{name:"getColorGridStyle",hash:{},data:i}):a))+'" '},6:function(t,e,n,i,a){var r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'                            <button type="imagetext" class="top-charts-more-link" data-link-url="'+l(r(null!=a[2]?a[2].seeAllUrl:a[2],t))+'">\n                                <title class="edge-title" id=\'name\'>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                                <img class="edge-chevron" src="resource://ChevronTerms"/>\n                            </button>\n'},8:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"                            <title class=\"edge-title\" id='name'>"+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i,a){var r,l=e.helperMissing,o=this.escapeExpression,s=this.lambda,c='                        <lockup style="background-color: '+o((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||l).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" type="list" class="top-charts-lockup track action-lockup" data-content-id="'+o(s(null!=t?t.id:t,t))+'" ';return r=e["if"].call(t,null!=t?t.postUrl:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=" ",r=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n                            <ordinal class="top-charts-ordinal">'+o((e.increment||t&&t.increment||l).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                            <img class="light-art play-button" data-content-id="'+o(s(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+o(s(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+o(s(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'">\n                                <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+o(s(null!=t?t.id:t,t))+"\" type='play'/>\n                            </img>\n",r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(15,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(c+=r),c+='                            <subtitle class="one-line">\n                                <span>'+o(s(null!=t?t.artistName:t,t))+"\n",r=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(20,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="                                </span>\n                            </subtitle>\n",r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(22,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                        </lockup>\n"},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'post-url="'+r(a(null!=t?t.postUrl:t,t))+'"'},13:function(t,e,n,i){return'disabled="true"'},15:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='                                <title class="title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+o(l(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},16:function(t,e,n,i){return"-disabled"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                                <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},20:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"                                  "+r(a(null!=t?t.collectionName:t,t))+"\n"},22:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                            <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img class="top-charts-action-button" src="resource://UniversalActionControl"/></button>\n'},24:function(t,e,n,i,a){var r,l=e.helperMissing,o='        <grid class="track-list-ordered ';return r=e["if"].call(t,null!=t?t.sortedGrid:t,{name:"if",hash:{},fn:this.program(25,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='" ',r=e["if"].call(t,null!=t?t.showGradient:t,{name:"if",hash:{},fn:this.program(27,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(o+=r),o+='>\n            <header class="edge-header">\n',r=e["if"].call(t,null!=t?t.seeAllUrl:t,{name:"if",hash:{},fn:this.program(29,i,a),inverse:this.program(31,i,a),data:i}),null!=r&&(o+=r),o+="            </header>\n",r=e.each.call(t,null!=(r=null!=t?t.content:t)?r.content:r,{name:"each",hash:{},fn:this.program(33,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),r=e.unless.call(t,null!=t?t.sortedGrid:t,{name:"unless",hash:{},fn:this.program(50,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="        </grid>\n",r=e["if"].call(t,null!=t?t.sortedGrid:t,{name:"if",hash:{},fn:this.program(52,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o},25:function(t,e,n,i){return"sorted-grid"},27:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="'+l((e.getColorGridStyle||t&&t.getColorGridStyle||r).call(t,null!=(a=null!=t?t.content:t)?a.content:a,{name:"getColorGridStyle",hash:{},data:i}))+'" '},29:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'                    <button type="imagetext" class="top-charts-more-link" data-link-url="'+l(r(null!=t?t.seeAllUrl:t,t))+'">\n                        <title class="edge-title" id=\'name\'>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},31:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.content:t)?a.title:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},33:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c="                <lockup ";return r=e.unless.call(t,null!=a[1]?a[1].sortedGrid:a[1],{name:"unless",hash:{},fn:this.program(34,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' type="list" class="top-charts-lockup track action-lockup" ',r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(36,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=" ",r=e["if"].call(t,null!=t?t.postUrl:t,{name:"if",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' data-content-id="'+o(l(null!=t?t.id:t,t))+'" ',r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=r&&(c+=r),c+=" ",r=(e.shouldDisable||t&&t.shouldDisable||s).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(13,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n                    <ordinal class="top-charts-ordinal">',r=e["if"].call(t,null!=t?t.chartIndex:t,{name:"if",hash:{},fn:this.program(38,i,a),inverse:this.program(40,i,a),data:i}),null!=r&&(c+=r),c+='</ordinal>\n                    <img class="light-art play-button" data-content-id="'+o(l(null!=t?t.id:t,t))+'" width="56" height="56" srcset="'+o(l(null!=(r=null!=t?t.image:t)?r.url:r,t))+" "+o(l(null!=(r=null!=t?t.image:t)?r.dpr:r,t))+'">\n                        <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+o(l(null!=t?t.id:t,t))+"\" type='play'/>\n                    </img>\n",r=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(42,i,a),inverse:this.program(44,i,a),data:i}),null!=r&&(c+=r),c+='                    <subtitle class="one-line">\n                        <span>'+o(l(null!=t?t.artistName:t,t))+"\n",r=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(46,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+="</span>\n                    </subtitle>\n",r=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(48,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"                </lockup>\n"},34:function(t,e,n,i,a){var r=e.helperMissing,l=this.escapeExpression;return' style="background-color: '+l((e.topChartsGetFirstBgColor||t&&t.topChartsGetFirstBgColor||r).call(t,null!=a[1]?a[1].content:a[1],i&&i.first,{name:"topChartsGetFirstBgColor",hash:{},data:i}))+';" '},36:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},38:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return o((a=null!=(a=e.chartIndex||(null!=t?t.chartIndex:t))?a:l,typeof a===r?a.call(t,{name:"chartIndex",hash:{},data:i}):a))},40:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return r((e.increment||t&&t.increment||a).call(t,i&&i.index,{name:"increment",hash:{},data:i}))},42:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='                        <title class="title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+o(l(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},44:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                        <title maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},46:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"                          "+r(a(null!=t?t.collectionName:t,t))+"\n                        "},48:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <button type="image" class="action-button" data-content-id="'+r(a(null!=t?t.id:t,t))+'"><img class="top-charts-action-button" src="resource://UniversalActionControl"/></button>\n'},50:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'               <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+r(a(null!=t?t.seeAllUrl:t,t))+'">\n                <title>'+r(a(null!=t?t.moreTopChartsString:t,t))+"</title>\n            </button> \n"},52:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <button class="top-charts-button top-charts-more-link" type="thin" data-link-url="'+r(a(null!=t?t.seeAllUrl:t,t))+'">\n                <title>'+r(a(null!=t?t.moreTopChartsString:t,t))+"</title>\n            </button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],273:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return"50%"},3:function(t,e,n,i){return'".5"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=".hero-title {\n    /* TODO should be able to use itml-font-style only */\n    /* itml-font-style: body; */\n    font-size: 17pt;\n    font-weight: light;\n    letter-spacing: 0;\n    /* TODO will need to get client support for line-height / leading */\n    /* line-height: 22pt; */\n    itml-padding: 0pt 16pt 0pt 16pt;\n    padding: -5.0 1.0 0.0 16.0;\n}\n\n.hero-subtitle {\n    itml-font-style: caption1;\n    /*\n    font-size: 12pt;\n    font-weight: regular;\n    letter-spacing: 0;\n    */\n}\n\n.badge {\n    font-size: 11pt;\n    font-weight: medium;\n    background-color: rgba(0, 0, 0, 0.4);\n    color: white;\n    itml-badge-treatment: rounded;\n    itml-position: left;\n\n    /* TODO client needs to implement padding and letter spacing on badge */\n    padding: 8pt;\n    letter-spacing: 3;\n}\n\n.filter-divider {\n    margin: 10.0 16.0 0.0 16.0;\n}\n\n.filter-divider-text {\n    font-size: 17pt;\n    padding: 0.0 1.0 0.0 16.0;\n}\n\n.filter-divider-image {\n    padding: 1.0 16.0 0.0 2.0;\n}\n\n.carousel {\n    /* background-color: rgb(195, 195, 195); */\n    background-color: rgb(204, 204, 204);\n    padding: 0;\n}\n\n.gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt 0pt 56pt 0pt;\n}\n\n.simple-gradient {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n}\n\n/* editorial */\n.editorial-lockup {\n    itml-margin: 0pt 15pt 15pt 15pt;\n    itml-lockup-type: editorial;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.brick-linear-gradient {\n    itml-img-treatment: left-to-right-linear-gradient;\n    itml-img-fill:1;\n    padding: 0pt;\n    /* this was approved by design */\n    background-color: linear-gradient(left, rgba(0,0,0,0.5), rgba(0,0,0,0));\n}\n\n.brick-title-wrapper {\n    itml-text-max-lines: 3;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-title {\n    color: rgb(255,255,255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 15pt;\n    font-weight: medium;\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.brick-description-wrapper {\n    itml-text-max-lines: 2;\n    itml-position: left;\n    text-align: left;\n}\n\n.brick-description {\n    color: rgb(255, 255, 255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 11pt;\n    font-weight: regular;\n    itml-text-max-lines: 2;\n}\n\n.brick-arrow {\n    color: rgb(255, 255, 255);\n    itml-img-treatment: tint;\n    itml-position: right;\n}\n\n.brick-border {\n    border-width: 1pt;\n}\n\n/* curators */\n.curator-avatar {\n    itml-img-treatment: artist-circle;\n}\n\n.curator-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n/* radio shelf */\n.radio-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    itml-padding: 0 0pt 12pt 0pt;\n}\n\n.album-lockup {\n    itml-position: bottom;\n    itml-align: center;\n    background-color: rgba(0, 0, 0, 0);\n    padding: 0;\n}\n\n.hero-lockup {\n    itml-padding: 6pt 16pt 16pt 16pt;\n    itml-align: center;\n}\n\n.hero-top {\n    itml-position: top;\n}\n\n/* radio */\n.radio-art {\n    color:tint-color;\n}\n\n.recent-grid {\n    itml-padding:0;\n}\n\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 7pt 0 7pt 15pt;\n}\n\n.recent-text {\n    font-size:13pt;\n    color: rgb(102,102,102);\n    itml-text-max-lines: 1;\n}\n\n.recent-lockup {\n   border-width: 0pt;\n   border-color: rgba(0,0,0,0);\n   itml-padding: 8pt 0 8pt 0;\n}\n\n.live-color {\n    color: rgb(255, 0, 0);\n}\n\n.listen-button {\n    color: rgb(255, 255, 255);\n    background-color: rgba(0,0,0,0.5);\n    border-width: 1pt;\n    border-radius: 13t;\n}\n\n.two-col {\n    column-count: 2;\n    border-width: 0 0 0 0;\n}\n\n.show-more-recents {\n    color: tint-color;\n}\n\n.album-grid {\n    color: rgb(255, 255, 255);\n}\n\n.ghost-divider {\n    itml-padding: 0 0 1pt 0;\n}\n\n.top-charts-button {\n    font-size: 12pt;\n    color: rgb(0,0,0);\n    border-color: rgba(0, 0, 0, 0.5);\n    border-width: 1pt;\n    border-radius: 13pt;\n    buttonType: thin;\n    padding: 5 10 5 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    itml-align: center;\n}\n\n.top-charts-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:56;\n    itml-divider-type: full;\n}\n\n.top-charts-lockup-button {\n    itml-align: center;\n}\n\n.top-charts-ordinal {\n    color: rgb(0, 0, 0);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.top-charts-action-button {\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgb(255, 255, 255);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.edge-header {\n    background-color: rgba(0,0,0,0);\n}\n\n.track-list-ordered, .track-list {\n    padding: 0;\n    margin: 0;\n}\n\n.track-list-split {\n    itml-item-width: ";return a=(e.versionGreaterOrEqualTo||t&&t.versionGreaterOrEqualTo||r).call(t,"9.1.0",{name:"versionGreaterOrEqualTo",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(l+=a),l+=";\n}\n\n.track-lockup {\n    itml-padding: 0 0pt 0 0pt;\n    itml-item-height:48;\n}\n\n.video-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: center;\n    column-count: 2;\n}\n\n.radio-hero-button {\n    font-size: 12pt;\n    border-color: rgba(255, 255, 255, 0.5);\n    border-width: 1pt;\n    border-radius: circle-caps;\n    padding: 2 10 2 10;\n    margin: 0 0 0 0;\n    background-color: transparent;\n    /* y u no work */\n    itml-position: center;\n    itml-align: center;\n    text-align: center;\n}\n\n.brick-lockup {\n    padding: 0 0 1 0;\n    margin: 0 0 0 0;\n}\n\n.brick-style {\n    padding: 0 0 0 8pt;\n}\n\n.brick-grid {\n    padding: 0 0 0 0;\n    margin: 2 0 2 0;\n    column-count: 2;\n    itml-item-width: 100%;\n}\n\n.brick-list {\n    padding: 0 0 0 0pt;\n    margin: 0 0 0 0pt;\n    column-count: 1;\n    itml-item-width: 100%;\n}\n\n.brick-title-wrapper-largeScreen {\n    itml-position: center;\n    text-align: center;\n    itml-text-max-lines: 3;\n    color: rgb(255, 255, 255);\n    text-shadow: 0pt 0pt 5pt rgba(0,0,0,0.5);\n    font-size: 11pt;\n    font-weight: regular;\n}\n\n.brick-image-largeScreen {\n    itml-img-treatment: brick;\n}\n\n.brick-grid-lockup-largeScreen {\n    padding: 32 16 0 16;\n    margin: 0 0 0 0;\n    border-radius: 13;\n}\n\n.album-grid-portrait {\n    column-count: 4;\n}\n\n.album-grid-landscape {\n    column-count: 4;\n}\n\n.edge-grid-portrait {\n    column-count: 5;\n}\n\n.edge-grid-landscape {\n    column-count: 6;\n}\n\n.edge-grid {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 0pt 0pt 4pt;\n    itml-align: center;\n    column-count: 3;\n}\n\n.radio-hero {\n    itml-card-type: billboard;\n    background-color: rgb(255, 255, 255);\n}\n\n.radio-hero-list {\n    itml-position: bottom;\n    padding: 0 0 40 0;\n}\n\n.radio-hero-listen-button {\n    padding:6 14 6 14;\n    color: rgb(255, 255, 255);\n}\n\n.radio-hero-image {\n    background-color: rgb(0,0,0);\n}\n\n.hero-design-tag {\n    padding: 180pt 0pt 0pt 0pt;\n    itml-text-max-lines: 2;\n}\n\n.hero-text {\n    itml-font-style: caption1;\n    color: rgb(255, 255, 255);\n}\n\n.radio-featured-shelf-title {\n    font-size: 15pt;\n    font-weight: light;\n    itml-text-max-lines: 2;\n}\n\n.radio-featured-shelf-subtitle {\n    itml-text-max-lines: 2;\n}\n\n.sorted-grid {\n    border-color: rgba(0,0,0,0);\n}\n\n@media all and (min-width: 768pt) {\n    .video-grid {\n        column-count: 5;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 8 0 8;\n        margin: 2 0 2 0;\n    }\n\n    .notes-swoosh {\n        itml-padding: 0pt 6pt 0pt 0pt;\n    }\n\n    .track-list-ipad {\n        itml-divider-type:none;\n    }\n\n    .track-lockup-ipad {\n        padding: 0 0 1pt 0;\n    }\n\n    .margin-helper {\n        /* TODO should be a better way to get rid of this border. Potential client bug here */\n        border-color: rgba(255,255,255,0);\n    }\n\n    .hero-design-tag {\n        padding: 234pt 0 0 0;\n    }\n\n    .gradient {\n        padding: 0pt 0pt 10pt 0pt;\n    }\n}\n\n@media all and (width: 1024pt) {\n    .video-grid {\n        column-count: 6;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 3;\n        padding: 0 10 0 10;\n        margin: 2 0 2 0;\n    }\n\n    .track-list-ipad {\n        itml-divider-type:none;\n    }\n\n    .track-lockup-ipad {\n        padding: 0 0 1pt 0;\n    }\n\n    .margin-helper {\n        /* TODO should be a better way to get rid of this border. Potential client bug here */\n        border-color: rgba(255,255,255,0);\n    }\n\n    .hero-design-tag {\n        padding: 234pt 0 0 0;\n    }\n\n    .gradient {\n        padding: 0pt 0pt 10pt 0pt;\n    }\n}\n\n@media all and (min-height: 1366pt) {\n    .edge-grid-portrait {\n        column-count: 6;\n    }\n    .notes-swoosh {\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 2;\n        itml-padding: 0pt 6pt 0pt 0pt;\n        margin: 6 10 2 0;\n    }\n\n    .editorial-lockup {\n        itml-margin: 0pt 15pt 15pt 15pt;\n        itml-lockup-type: editorial;\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n\n    .album-grid-portrait {\n        column-count: 8;\n    }\n\n    .album-grid-landscape {\n        column-count: 8;\n    }\n\n    .track-list-split {\n        itml-item-width: ",a=(e.versionGreaterOrEqualTo||t&&t.versionGreaterOrEqualTo||r).call(t,"9.1.0",{name:"versionGreaterOrEqualTo",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(l+=a),l+=";\n    }\n}\n\n@media all and (min-width: 1366pt) {\n    .video-grid {\n        column-count: 7;\n    }\n\n    .edge-grid-landscape {\n        column-count: 7;\n    }\n\n    .brick-list {\n        border-color: transparent;\n        background-color: transparent;\n        border-width: 0;\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 2;\n        padding: 0 10 0 10;\n        margin: 2 0 2 0;\n    }\n\n    .track-list-ipad {\n        itml-divider-type:none;\n    }\n\n    .track-lockup-ipad {\n        padding: 0 0 1pt 0;\n    }\n\n    .margin-helper {\n        /* TODO should be a better way to get rid of this border. Potential client bug here */\n        border-color: rgba(255,255,255,0);\n    }\n\n    .hero-design-tag {\n        padding: 234pt 0 0 0;\n    }\n\n    .gradient {\n        padding: 0pt 0pt 10pt 0pt;\n        itml-item-border-margin: 0pt 0pt 60pt 0pt;\n    }\n\n    .notes-swoosh {\n        itml-item-width: 100%;\n        itml-align: center;\n        column-count: 2;\n        itml-padding: 0pt 6pt 0pt 0pt;\n        margin: 6 10 2 0;\n    }\n\n    .editorial-lockup {\n        itml-margin: 0pt 15pt 15pt 15pt;\n        itml-lockup-type: editorial;\n        background-color: rgba(0, 0, 0, 0.2);\n    }\n\n    .album-grid-portrait {\n        column-count: 6;\n    }\n\n    .album-grid-landscape {\n        column-count: 7;\n    }\n\n    .track-list-split {\n        itml-item-width: ",a=(e.versionGreaterOrEqualTo||t&&t.versionGreaterOrEqualTo||r).call(t,"9.1.0",{name:"versionGreaterOrEqualTo",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(l+=a),l+";\n    }\n\n}\n"},useData:!0})},{"hbsfy/runtime":418}],274:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(30,i),data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="            ";return a=e["if"].call(t,null!=t?t.copperHeroList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperSwoosh:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperRecentRadioMarker:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperFeaturedRadioMarker:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistBlock:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.trackShelfOrdered:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.curatorSwoosh:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperNotesSwoosh:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.copperBrickBlock:t,{name:"if",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.radioSwoosh:t,{name:"if",hash:{},fn:this.program(22,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistList:t,{name:"if",hash:{},fn:this.program(24,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.musicVideoSwoosh:t,{name:"if",hash:{},fn:this.program(26,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n            ",a=e["if"].call(t,null!=t?t.playlistMarker:t,{name:"if",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},6:function(t,e,n,i){var a;return a=this.invokePartial(n.heroList,"","heroList",t,void 0,e,n,i),null!=a?a:""},8:function(t,e,n,i){var a;return a=this.invokePartial(n.shelf,"","shelf",t,void 0,e,n,i),null!=a?a:""},10:function(t,e,n,i){var a;return a=this.invokePartial(n.featuredShelf,"","featuredShelf",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelf,"","trackShelf",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.trackShelfOrdered,"","trackShelfOrdered",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.curatorSwoosh,"","curatorSwoosh",t,void 0,e,n,i),null!=a?a:""},18:function(t,e,n,i){var a;return a=this.invokePartial(n.notesSwoosh,"","notesSwoosh",t,void 0,e,n,i),null!=a?a:""},20:function(t,e,n,i){var a;return a=this.invokePartial(n.brickShelf,"","brickShelf",t,void 0,e,n,i),null!=a?a:""},22:function(t,e,n,i){var a;return a=this.invokePartial(n.radioSwoosh,"","radioSwoosh",t,void 0,e,n,i),null!=a?a:""},24:function(t,e,n,i){var a;return a=this.invokePartial(n.playlistList,"","playlistList",t,void 0,e,n,i),null!=a?a:""},26:function(t,e,n,i){var a;return a=this.invokePartial(n.musicVideoSwoosh,"","musicVideoSwoosh",t,void 0,e,n,i),null!=a?a:""},28:function(t,e,n,i){var a;return a=this.invokePartial(n.brickGrid,"","brickGrid",t,void 0,e,n,i),null!=a?a:""},30:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(31,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},31:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"            ","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],275:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,l=i.controller.MultiElementController,o=t("../common").traits.EventMap,s=t("../common").traits.TabComponent,c=t("../base").style,u=t("./style.hbs"),h=t("./template.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c({styleTemplate:u})),t.events=t.events||[],t.events.push("select"),l.call(this,t,e),o.call(this,t),s.call(this),a.extend(this.onSelect,{"open-url":this.openUrl});var n=t.data&&t.data.typeKey;n&&(this.learnMoreBlurb=r.locWithButtonSubstitution("FUSE.LearnMore."+n,{
Link:null})),this.render()};a.inherit(d,l),a.inherit(d,o,!0),a.inherit(d,s,!0),d.prototype.template=h,e.exports=d},{"../../util":391,"../base":97,"../common":133,"./style.hbs":277,"./template.hbs":278,itml:435}],276:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,l=t("./title.hbs"),o=i.controller.DocumentController,s=t("../common").traits.TabComponent,c=t("./element"),u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n=t.data&&t.data.typeKey;n&&(t.name=r.loc("FUSE.LearnMore."+n+".Title"));var i;0===t.controllers.length&&(i=new c(t),t.controllers.push(i)),o.call(this,t,e),s.call(this);var a=function(){var t=this.el.getElementById("dismissSheetButton");t&&t.addEventListener("select",this.dismissSheet.bind(this))};this.addEventListener("render",a.bind(this)),a.call(this)};a.inherit(u,o),a.inherit(u,s,!0),u.prototype.documentType="panelTemplate",u.prototype.titleTemplate=l,u.prototype.dismissSheet=function(){modal.popDocument()},e.exports=u},{"../../util":391,"../common":133,"./element":275,"./title.hbs":279,itml:435}],277:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".p-text {\n    itml-text-max-lines: 0;\n    font-size: 14pt;\n    margin: 20 0 20 0;\n}"},useData:!0})},{"hbsfy/runtime":418}],278:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s='<text class="p-text">';return r=null!=(r=e.learnMoreBlurb||(null!=t?t.learnMoreBlurb:t))?r:o,a=typeof r===l?r.call(t,{name:"learnMoreBlurb",hash:{},data:i}):r,null!=a&&(s+=a),s+"</text>\n"},useData:!0})},{"hbsfy/runtime":418}],279:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"<title>"+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o="";return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+'\n<button id="dismissSheetButton" type="done" class="align-right done-button">'+l((e.loc||t&&t.loc||r).call(t,"FUSE.DoneButton",{name:"loc",hash:{},data:i}))+"</button>\n"},useData:!0})},{"hbsfy/runtime":418}],280:[function(t,e,n){var i=t("../../util"),a=i.loc,r=t("./template.hbs"),l=t("../base").controller,o=function(t,e){t=t||{},t.title=t.title||a.loc("Fuse.Loading"),i.network.isOnline()?this.model={data:{title:t.title}}:(this.errorMessage=a.loc("FUSE.Error.YoureOffline.Reconnect"),this.errorTitle=a.loc("FUSE.Error.YoureOffline")),l.call(this,t,e)};i.inherit(o,l),o.prototype.template=r,e.exports=o},{"../../util":391,"../base":97,"./template.hbs":282}],281:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,l=t("./controller"),o=function(t,e){t=t||{},t.controllers=t.controllers||[],t.watchedAttributes=t.watchedAttributes||[],t.data=t.data||{};var n,i=t.data.url;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),i&&(t.watchedAttributes.push("loadUrl"),t.loadUrl=i),a.network.isOffline()&&(this.documentType="stackTemplate"),r.call(this,t,e),this.navigationBarController.render()};a.inherit(o,r),o.prototype.documentType="loadingTemplate",o.prototype.replaceDocument=function(t){this.tabController.navigationDocument.replaceDocument(t,this.el,{animated:!1})},e.exports=o},{"../../util":391,"./controller":280,itml:435}],282:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.errorMessage,"	","errorMessage",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return"	<activityIndicator>\n	    <title>"+l(r(null!=(a=null!=(a=null!=t?t.model:t)?a.data:a)?a.title:a,t))+"</title>\n	</activityIndicator>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.errorMessage:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.data:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],283:[function(t,e,n){var i=t("../../util"),a=t("./template.hbs"),r=t("../common").traits.DataProvider,l=t("../base").controller,o=function(t,e){t=t||{},e=e||{},this.loading=!0,this.batchSize=24,this.doMore=!1,this.theEnd=!1,this.requestInFlight=!1,l.call(this,t,e),Array.isArray(t.data)&&(this.contentIds=i.deepClone(t.data),this.loading=!1),i.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia}),this.model=new r({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),e.autoload!==!1&&this.getMore(),this.render()};i.inherit(o,l,!0),o.prototype.template=a,o.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60],xxl:[60,60]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84],xxl:[150,84]}},o.prototype.resetLoading=function(){this.loading=!1,this.requestInFlight=!1,this.doMore&&(this.doMore=!1,this.handleNeedsMore())},o.prototype.handleFailedFetch=function(t,e,n){this.resetLoading(),this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},o.prototype.createView=function(){return this.viewModel?this.viewModel=this.viewModel.concat(this.getAnotherBatch()):this.contentIds?this.viewModel=this.getAnotherBatch():this.handleFailedFetch(404,"","MoreController: Missing Content"),this.viewModel},o.prototype.getAnotherBatch=function(){for(var t=[],e=this.contentIds.splice(0,this.batchSize),n=0;n<e.length;n++){var i={id:e[n]};t.push(this.model.lookupContent(i,this.processContent.bind(this)))}return this.theEnd=0===this.contentIds.length,t},o.prototype.handleDataReady=function(t){this.resetLoading(),i.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},o.prototype.getMore=function(){this.requestInFlight?this.doMore=!0:this.theEnd||(this.requestInFlight=!0,this.model.dataSuccess(this.contentIds,{success:this.createView.bind(this)}))},o.prototype.handleNeedsMore=function(t){this.model&&t&&"stackTemplate"===t.target.tagName&&this.getMore()},e.exports=o},{"../../util":391,"../base":97,"../common":133,"./template.hbs":285}],284:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,l=t("./controller"),o=t("../common").traits.TabComponent,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data;0===t.controllers.length&&(this.controller=new l({data:n}),t.controllers.push(this.controller)),r.call(this,t,e),o.call(this),this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller))};a.inherit(s,r),a.inherit(s,o,!0),s.prototype.documentType="stackTemplate",e.exports=s},{"../../util":391,"../common":133,"./controller":283,itml:435}],285:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="paged-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"    </grid>\n"},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line2:null!=t?t.line2:t,line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],286:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),l=r.loc,o=t("./template.hbs"),s=t("../common").traits.DataProvider,c=t("../base/controller"),u=t("../base").style,h=t("./style.hbs"),d=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new u({styleTemplate:h})),t.classes=t.classes||[],t.events=t.events||[],this.videoData=t.data||{},this.loading=!0,this.controllerName="music-video",this.typesForKey={video:["grid"],header:["header"]},this.artworkMap={video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[140,71],xl:[145,81],xxl:[145,81]},header:{crop:"h",xs:[320,180],s:[375,210],m:[414,233],l:[768,305],xl:[1024,305],xxl:[1366,405]}},c.call(this,t,e),r.extend(this.onSelect,{"play-button":this.playMedia,"artist-link":this.handleArtistLink,"more-link":this.pushMorePage}),this.viewModel=this.viewModel||{},this.videoData.pageData?(this.model=new s({data:this.videoData}),this.videoData=this.model.lookup(this.videoData.pageData.id)):this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.productUrl=this.videoData.url;var n=this.createView(this.videoData);this.handleDataReady({detail:{view:n}}),this.model.fetchData({url:this.productUrl,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})};r.inherit(d,c),d.prototype.template=o,d.prototype.createView=function(t){return r.keypath(t,"pageData")&&(this.model.data=t),this.screenSize=r.screen.sizeForScreenDimension(this.documentDimensions),this.orientation=this.getOrientationString(),this.errorTitle=null,this.errorMessage=null,r.keypath(t,"pageData")&&(this.viewModel.content=this.processRelatedData(t)),this.viewModel.product=this.processContent(this.videoData,{type:"header"}),this.viewModel},d.prototype.processRelatedData=function(t){for(var e,n,i=[],a=["moreMusicVideosByArtist","moreMusicVideosInGenre"],r={moreMusicVideosByArtist:"FUSE.Product.MoreByArtist",moreMusicVideosInGenre:"FUSE.Product.YouMayAlsoLike"},o={moreMusicVideosByArtist:"releaseDate",moreMusicVideosInGenre:"artistName"},s=!!this.screenSize.match(/xs|s|m/g),c=function(t,e,n,i){t=t.slice(0,100);for(var a=[],r=[],l=0;l<t.length;l++){var o=t[l];if(r.push(o),e>l){var s={id:o,params:i};a.push(this.model.lookupContent(s,this.processContent.bind(this)))}}return this.model.setData(n,r),a}.bind(this),u={xs:3,s:3,m:3,l:5,xl:6,xxl:8},h=u[this.screenSize],d=this.model.lookup(t.pageData.id)||{},p=d.artistName,m=0;m<a.length;m++){var f=t.pageData[a[m]];if(f){f.length>h&&(e=a[m]),n={type:"grid",line2:o[a[m]]};var g=r[a[m]],b={title:l.loc(g,{artistName:p}),list:s,content:c(f,h,e,n),sectionId:e};i.push(b)}}return i},d.prototype.processContent=function(t,e){var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e,screenSize:this.screenSize}),i=r.lockup.setArtworks(t,n,this.artworkMap);if(i.isExplicit=r.lockup.isExplicit(i),i[t.kind]=!0,"header"===e.type){var a={genre:t.genres[0].name,year:t.releaseDate.split("-")[0],time:r.lockup.formatDuration(t,"FUSE.Time.MinutesSeconds")};i.metaData=l.loc("FUSE.MusicVideo.GenreYearTime",a)}return e.line2&&(i.line1="releaseDate"===e.line2?t[e.line2].split("-")[0]:t[e.line2]),i},d.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},d.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel=t.detail.view,this.viewModel.product.isExplicit&&r.enablers.isExplicitDialogEnabled()&&itms.restrictions.presentExplicitRestrictionAlertIfNeededOfType("onContainerLoad",function(){})),this.render()},d.prototype.handleArtistLink=function(t){var e=t.target,n=e.getAttribute("data-link-url"),i=e.getAttribute("data-link-title"),r={data:{url:decodeURIComponent(n),title:i},navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:r}))},d.prototype.handleRotation=function(){this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},d.prototype.getOrientationString=function(){var t="",e=this.screenSize,n=r.screen.getCurrentOrientation(this.documentDimensions);return("xxl"===e||"xl"===e||"l"===e)&&(t="-"+n),t},e.exports=d},{"../../util":391,"../base":97,"../base/controller":95,"../common":133,"./style.hbs":288,"./template.hbs":289,itml:435}],287:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),l=t("../common").traits.TabComponent,o=function(t,e){t=t||{},t.controllers=t.controllers||[];var n,i=t.data;0===t.controllers.length&&(n=new r({data:i}),t.controllers.push(n)),a.call(this,t,e),l.call(this)};i.inherit(o,a),i.inherit(o,l,!0),o.prototype.documentType="productTemplate",e.exports=o},{"../../util":391,"../base/document":96,"../common":133,"./element":286}],288:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".music-video-lockup {\n    background-color: rgba(0, 0, 0, 0);\n}\n\n.product-title {\n    font-size: 22pt;\n    itml-text-max-lines: 2;\n}\n\n.artist-link {\n    font-size: 16pt;\n}\n\n.shelf-grid {\n    itml-item-width: 100%;	\n}\n\n.shelf-lockup {\n    padding: 0 8 0 8;\n}\n\n@media all and (width: 1024) {\n    .shelf-lockup {\n        padding: 0 8 0 12;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],289:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda,s="<section ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n    <card ",a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"card"},data:i}),null!=a&&(s+=a),s+=">\n        <background>\n        "+l((e.productArtwork||t&&t.productArtwork||r).call(t,null!=(a=null!=t?t.viewModel:t)?a.product:a,"play",{name:"productArtwork",hash:{},data:i}))+'\n        </background>\n    </card>\n    <lockup class="music-video-lockup" pin="alone" type="list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{click:!0,location:!0,impressions:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n        <title class="product-title">'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.name:a,t)),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.isExplicit:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'</title>\n        <subtitle class="artist-link">\n            <button class="artist-link" data-link-url="'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistUrl:a,t))+'" data-link-title="'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'" type="link">'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.artistName:a,t))+'</button>\n        </subtitle>\n        <subtitle class="product-metadata">'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.metaData:a,t))+'</subtitle>\n        <button type="image" class="action-button" data-content-id="'+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.product:a)?a.id:a,t))+'"><img src="resource://UniversalActionControl"/></button>\n    </lockup>\n</section>\n<divider type="full"/>\n'},2:function(t,e,n,i){return' <badge class="explict-badge" src="resource://explicit"/>'},4:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=(r=null!=t?t.viewModel:t)?r.content:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},5:function(t,e,n,i,a){var r,l='        <header class="edge-header">\n';return r=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(6,i,a),inverse:this.program(8,i,a),data:i}),null!=r&&(l+=r),l+="        </header>\n",r=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(l+=r),l},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <button type="imagetext" class="more-link" data-section-id="'+l(r(null!=t?t.sectionId:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,location:!0,actionType:"more",targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                    <title class=\"edge-title\" id='name'>"+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                    <img class="edge-chevron" src="resource://ChevronTerms"/>\n                </button>\n'},8:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},10:function(t,e,n,i){var a,r=e.helperMissing,l="            <grid ";return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </grid>\n"},11:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},13:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='            <grid class="shelf-grid shelf-grid'+o(l(null!=a[2]?a[2].orientation:a[2],t))+'" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+=">\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"            </grid>\n"},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=r&&(l+=r),r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.product:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),r=e["if"].call(t,null!=(r=null!=t?t.viewModel:t)?r.content:r,{name:"if",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],290:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("../grouping/controller"),l=t("../common/upsell_banner/controller"),o=t("../loading/controller"),s=t("../common").traits.TabComponent,c=t("./title.hbs"),u=i.loc,h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=u.loc("FUSE.New.AllGenres");var n,c;0===t.controllers.length&&i.urls.browse()?(n=new r({url:i.urls.browse(),hasGradient:!0}),c=new l,t.controllers.push(c),t.controllers.push(n)):(n=new o,t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e);var h=this.el.getElementById("genre-selector");h&&n instanceof r&&h.addEventListener("select",n.showGenreFilter.bind(n)),n&&(this.addEventListener("appear",n.handleAppear.bind(n)),n.addEventListener("genre-selected",function(e){t.name=e.detail.name,t.url=e.detail.url,this.el.getElementById("name").innerHTML=t.name}.bind(this))),c&&this.addEventListener("appear",c.handleBannerAppear.bind(c)),s.call(this)};i.inherit(h,a),i.inherit(h,s,!0),h.prototype.documentType="stackTemplate",h.prototype.titleTemplate=c,e.exports=h},{"../../util":391,"../base/document":96,"../common":133,"../common/upsell_banner/controller":155,"../grouping/controller":256,"../loading/controller":280,"./title.hbs":292}],291:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),l=function(t){t=t||{},a.call(this,t)};r.inherit(l,a),l.prototype.getDocumentController=function(){return new i({name:this.name})},e.exports=l},{"../../util":391,"../base/tab":100,"./document":290}],292:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'<button type="imagetext" class="selector" id="genre-selector">\n    <text id=\'name\'>'+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+'</text>\n    <img class="selector-chevron" src="resource://UniversalSortingChevron"/>\n</button>\n'},useData:!0})},{"hbsfy/runtime":418}],293:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,l=i.utils.parser,o=t("../common").traits.EventMap,s=i.controller.MultiElementController,c=t("./template.hbs"),u=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.events.push("select"),this.buyParamsQueryString=e.offers&&e.offers[0]?e.offers[0].buyParams:"",this.buyParams=a.query.parse(this.buyParamsQueryString),s.call(this,t,e),o.call(this,t,e),this.viewModel={bannerId:"permissionBanner",bannerClass:"banner-text",linkClass:"banner-link",linkId:"approveLink"};var n='<button class="'+this.viewModel.linkClass+'" id="'+this.viewModel.linkId+'">'+r.loc("FUSE.AskToBuy.PermissionBannerText.bannerLinkText")+"</button>";this.strings={},this.strings.bannerText=r.loc("FUSE.AskToBuy.PermissionBannerText",{bannerLinkText:n});var i=this.template(this),c=l.parse(i,t.document);this.el=c,this.el.addEventListener("select",this.handleApproveInPerson.bind(this)),this.document=t.document,this.controller=t.controller};a.inherit(u,s),a.inherit(u,o,!0),u.prototype.template=c,u.prototype.handleApproveInPerson=function(){var t=this.buyParams.salableAdamId;itms.approveInPerson(t,function(t){var e=a.doc.findNodeWithTagName(this.document,"template"),n=e.firstChild;n.getAttribute("id")===this.viewModel.bannerId&&e.removeChild(n),"success"===t.status&&a.account.notifyServiceChange({from:"approveInPerson"})}.bind(this))},e.exports=u},{"../../util":391,"../common":133,"./template.hbs":294,itml:435}],294:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<subtitle id="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.bannerId:a,t))+'" class="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.bannerClass:a,t))+'">';return a=(e.escapeText||t&&t.escapeText||o).call(t,null!=(a=null!=t?t.strings:t)?a.bannerText:a,{name:"escapeText",hash:{},data:i}),null!=a&&(s+=a),s+"</subtitle>\n"},useData:!0})},{"hbsfy/runtime":418}],295:[function(t,e,n){var i=t("../../util"),a=t("../common/traits/data_provider"),r=t("../product/document"),l=t("../profile/document"),o=t("../music_video"),s=t("../connect/detail"),c=function(t,e){if(void 0!==t){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.needsDocumentForPreview.bind(this))}else i.log.warn("PreviewController was passed an undefined event")};c.prototype.needsDocumentForPreview=function(t){var e,n=t.entityValueProvider,i=n.valueForEntityProperty("id"),c=new a;if(i){var u=c.lookup(i),h={data:u,event:t};if(i.match(/^sa\./))h.data={id:i.replace(/(.*)\./,""),showKeyboard:!1},e=new s(h),this.nativeViewController.setPreviewDocument(e.el,{});else if(u){switch(u.kind){case"artist":case"curator":case"brand":case"activity":case"iTunesBrand":e=new l(h);break;case"musicVideo":e=new o(h);break;case"uploadedAudio":case"uploadedVideo":h.data={id:u.postId.replace(/(.*)\./,""),showKeyboard:!1},e=new s(h);break;default:e=new r(h)}this.nativeViewController.setPreviewDocument(e.el,{})}}},e.exports=c},{"../../util":391,"../common/traits/data_provider":149,"../connect/detail":166,"../music_video":287,"../product/document":296,"../profile/document":313}],296:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,l=t("../common/traits/data_provider"),o=function(t,e){if(void 0!==t){t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type");var n,i,o=t.data||{},s=t.event||{};s.queryParams=t.queryParams||[],this.tabName=s.tabName||"",o.pageData?(n=o,this.model=new l({data:o}),i=this.model.lookup(o.pageData.id)):i=o,t.type="song"===i.kind?"album":i.kind;var c=(TabBar.selectedTab.identifier+"").replace(" ","-").toLowerCase(),u=t.selectedFilter?(t.selectedFilter+"").toLowerCase():"none";this.featureName=c+":"+u+" / "+i.kind,r.call(this,t,e),this.handleLockupData(i,n,s)}else a.log.warn("ProductDocumentController received no attributes")};a.inherit(o,r),o.prototype.documentType="productTemplate",o.prototype.handleLockupData=function(t,e,n){var i=t.kind,r={};if("album"===i||"song"===i){var l=t.releaseDate||"",o=l.substring(0,l.indexOf("-")),s=t.collectionId||t.id,c=t.collectionName||t.name;r={queryParams:n.queryParams,albumStoreID:""+s,albumName:c,albumYear:o,albumGenre:t.genres&&t.genres[0]&&t.genres[0].name,albumItemsCount:t.trackCount,albumArtistName:t.artistName,albumArtistStoreID:""+t.artistId}}else if("playlist"===i){var u=[];if(t.artworkTracks)for(var h=t.artworkTracks,d=t.artworkTrackIds,p=0;p<d.length;p++){var m=d[p],f=h[m];if(f){var g=f.artwork;g&&u.push([g])}}r={queryParams:n.queryParams,playlistStoreID:""+t.id,playlistName:t.name,playlistItemsCount:u.length,trackArtworks:u}}var b=e||t;b.recoId=a.keypath(n,"detail.recoId"),r.metadata=t,r.sidePackData=b,r.tabName=this.tabName;var v=this.el.getElementsByTagName("productTemplate").item(0),y=v.getFeature("ProductNativeViewController");y.setProductEntityValueProvider(r),t.uber&&y.setUberParameters(t.uber)},e.exports=o},{"../../util":391,"../common/traits/data_provider":149,itml:435}],297:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../util"),l=r.log,o=t("./related_content"),s=t("../common/traits/data_provider"),c=t("../sharing"),u=function(t,e){if(void 0!==t){var n=t.entityValueProvider.valueForEntityProperty("sidePackData"),i=t.entityValueProvider.valueForEntityProperty("queryParams");this.featureName=t.entityValueProvider.valueForEntityProperty("featureName"),this.tintInfo=t.tintInfo,this.eventHandlers={};for(var a in e)e.hasOwnProperty(a)&&(this.eventHandlers[a]=e[a]);this.eventData=n,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("select",this.selectHandler.bind(this)),this.nativeViewController.addEventListener("action",r.metrics.handleNativeAction.bind(this)),this.tabName=t.entityValueProvider.valueForEntityProperty("tabName"),i&&i.i&&this.nativeViewController.setProminentTrackStoreID&&this.nativeViewController.setProminentTrackStoreID(i.i),"itml"===t.source&&r.account.isAppleMusicEnabled()?n&&("playlist_page"===r.keypath(n,"pageData.componentName")||"playlist"===n.kind?this.pageProfile="playlist-product":this.pageProfile="product-dv",this.model=new s({pageProfile:this.pageProfile}),this.model.addEventListener("dataReady",this.updatePage.bind(this)),n.pageData?this.model.dataSuccess(n,{success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this)}):this.model.fetchData({url:n.url,success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this),retries:1})):this.nativeViewController.addEventListener("needscontent",this.needsRelatedContentForMyMusicProductView.bind(this)),setTimeout(function(){this.nativeViewController.setNumberOfLikes(85)}.bind(this),1500)}else l.warn("ProductController was passed an undefined event")};u.prototype.createView=function(t){this.model.setData("pageData",t.pageData);var e={id:t.pageData.id,profile:this.pageProfile},n={content:[this.model.lookupContent(e)]};return n},u.prototype.handleFetchingDataFailure=function(t,e){r.log.error("error fetching product data",t,e)},u.prototype.needsRelatedContentForMyMusicProductView=function(t){var e=t.entityValueProvider;this.tintInfo=t.tintInfo;var n,i=e.valueForEntityProperty("albumStoreID"),a=e.valueForEntityProperty("cloudStoreID");i&&"0"!==i?(n=i,this.pageProfile="product-dv"):a&&"0"!==a&&(n=a,this.pageProfile="playlist-product"),n&&r.account.isAppleMusicEnabled()&&(this.model=new s({pageProfile:this.pageProfile}),this.model.fetchContent({profile:this.pageProfile,contentIds:[n],onSuccess:this.fetchRelatedContentForMyMusicProductView.bind(this,n)}))},u.prototype.fetchRelatedContentForMyMusicProductView=function(t){this.model.addEventListener("dataReady",this.updateRelatedContent.bind(this));var e=this.model.lookup(t);e&&this.model.fetchData({url:e.url,success:this.createView.bind(this),failure:this.handleFetchingDataFailure.bind(this),retries:1})},u.prototype.selectHandler=function(t){if("artistName"===t.buttonIdentifier)this.pushArtist();else if("shareButton"===t.buttonIdentifier){this.model||(this.model=new s);var e,n=this.model.getData("pageData");n&&(e=this.model.lookup(n.id)),this.shareController=new c({data:{event:t,content:e}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0})}},u.prototype.pushArtist=function(){var t=this.model.getData("pageData");if(t&&t.hasPrimaryArtist){var e=this.viewModel.artistUrl,n=""+this.viewModel.artistId,i=t.artistName,r={navigationDocument:this.nativeViewController.navigationDocument},l=this.model.lookup(n);l?(r.data=l,r.dataType="artist_page"):r.data={id:n,url:decodeURIComponent(e),title:i},this.eventHandlers.tabPush(new a("tabPush",{detail:r}))}},u.prototype.updatePage=function(t){var e=t.detail.view;this.viewModel=e.content[0],this.updateTracklist(),this.updateRelatedContent(),this.nativeViewController.setReportingInformation({featureName:this.featureName,recommendationData:this.eventData.recoId}),this.viewModel.description&&this.updateDescription(),r.lockup.isExplicit(this.viewModel)&&r.enablers.isExplicitDialogEnabled()&&itms.restrictions.presentExplicitRestrictionAlertIfNeededOfType("onContainerLoad",function(){})},u.prototype.updateTracklist=function(){var t,e=[];this.viewModel&&(t=this.viewModel.children,e=this.viewModel.childrenIds),this.updateTracklistWithChildren(t,e)},u.prototype.updateTracklistWithChildren=function(t,e){if(t){for(var n,i=[],a=!1,r=Object.keys(t),l=0;l<r.length;l++){var o=t[r[l]].artistId;if(n){if(o!==n){a=!0;break}}else n=o}for(var s=0;s<e.length;s++){var c=e[s];if(t.hasOwnProperty(c)){var u=t[c],h=null;h=[u.artwork];var d=u.duration;if(!d){var p=u.offers&&u.offers[0].assets;p&&p.length>0&&(d=p[0].duration)}var m={trackName:u.name,trackNumber:u.trackNumber,trackDuration:d,artistName:u.artistName,collectionName:u.collectionName,isCompilation:a,trackKind:u.kind,artwork:h,metadata:u,isFullMetadata:!0};u.id&&(m.trackStoreID=u.id+""),u.artistId&&(m.artistStoreID=u.artistId+""),u.collectionId&&(m.collectionStoreID=u.collectionId+""),i.push(m)}}this.nativeViewController.setTracklistItems(i)}},u.prototype.updateRelatedContent=function(){var t=new o({data:this.model.getData("pageData"),tintInfo:this.tintInfo});this.nativeViewController.setRelatedContentDocument(t.el),t.addEventListener("tabPush",this.eventHandlers.tabPush.bind(this))},u.prototype.updateDescription=function(){},e.exports=u},{"../../util":391,"../common/traits/data_provider":149,"../sharing":366,"./related_content":299,itml:435}],298:[function(t,e,n){var i=t("../../../util"),a=i.loc,r=t("../../base/controller"),l=t("../../common").traits.ReportConcern,o=t("../../base").style,s=t("./style.hbs"),c=t("../../common").traits.DataProvider,u=function(t,e){t=t||{},t.styles=t.styles||[],
t.tintInfo=t.tintInfo||{},t.styleTemplate=s,t.styles.push(new o(t)),t.events=t.events||[],this.loading=!0,this.blockIt=!1,this.controllerName="product",r.call(this,t,e),i.extend(this.onSelect,{"cover-button":this.playMedia,"more-link":this.pushMorePage,"report-concern":this.reportSharedPlaylistSheetCallback.bind(this)}),this.model=new c(t),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};i.inherit(u,r),i.inherit(u,l,!0),u.prototype.template=t("./template.hbs"),u.prototype.artworkMap={grid:{xs:[105,105],s:[123,123],m:[135,135],l:[72,72],xl:[72,72],xxl:[72,72]},gridChild:{xs:[52,52],s:[62,62],m:[67,67],l:[36,36],xl:[36,36],xxl:[36,36]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84],xxl:[150,84]}},u.prototype.typesForKey={grid:["grid"]},u.prototype.relatedSections={artistUploadedAudio:"SF.UploadedAudio",artistUploadedVideo:"SF.UploadedVideos",featuredArtists:"FUSE.Product.FeaturedArtists",topAlbumsByArtist:"FUSE.Product.MoreByArtist",moreByThisProvider:"FUSE.Product.MoreByProvider",listenersAlsoBoughtAlbums:"FUSE.Product.YouMayAlsoLike"},u.prototype.get=function(){this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.createView=function(t){this.screenSize=i.screen.sizeForScreenDimension(this.documentDimensions),this.errorTitle=null,this.errorMessage=null;var e=this.model.lookup(t.id)||{};this.productId=e.id,this.playlistType=e.playlistType;var n,r=e.artistName,l=e.curatorName,o=[],s="xl"===this.screenSize||"xxl"===this.screenSize?4:3,c=Object.keys(this.relatedSections),u="edge-3col-grid";"l"===this.screenSize?u="related-grid-3":("xl"===this.screenSize||"xxl"===this.screenSize)&&(u="related-grid-4");for(var h=0;h<c.length;h++){var d=c[h];if(n=null,t[d]&&Object.keys(t[d]).length>0){var p=h<c.length-1,m=t[d];m.length>s&&(n=d,this.model.setData(d,m));var f=/artistUploadedAudio/.test(d)?"song":/artistUploadedVideo/.test(d)?"video":"grid",g=this.lookupContentIds.call(this,t[d],s,f,d),b=this.relatedSections[d],v=a.loc(b,{artistName:r,curatorName:l});if(g.length>0){var y={title:v,content:g,sectionId:n,gridClass:u,divider:p};/artistUploadedAudio|artistUploadedVideo/.test(d)?(y.auc=!0,y.headerClass="auc-header"):y.grid=!0,o.push(y)}}}return o},u.prototype.lookupContentIds=function(t,e,n,i){var a=[];e=e||t.length;for(var r=0;e>r;r++){var l={id:t[r],params:{type:n||"grid",key:i}};a.push(this.model.lookupContent(l,this.processContent.bind(this)))}return a},u.prototype.processContent=function(t,e){var n=i.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,artworkKeys:this.typesForKey,params:e}),a=i.lockup.setArtworks(t,n,this.artworkMap,e.type,this.screenSize);return!e||"moreByThisProvider"!==e.key&&"listenersAlsoBoughtAlbums"!==e.key?a.releaseDate&&(a.line1=a.releaseDate.split("-")[0]):a.line1=i.lockup.line1(a),a.isExplicit=i.lockup.isExplicit(a),a[t.kind]=!0,a},u.prototype.handleDataReady=function(t){this.loading=!1,i.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.reportAConcern=null,this.playlistType&&"user-shared"===this.playlistType&&i.enablers.reportAConcern&&(this.reportAConcern={isReportAConcern:!0,id:this.productId,targetType:"PUBLIC_PLAYLIST",admin:!1,text:a.loc("FUSE.Connect.Detail.ReportConcern"),className:"report-concern"}),this.render()},u.prototype.handleRotation=function(){var t=this;this.blockIt||(this.blockIt=!0,this.documentDimensions=Settings.Screen,this.get(),setTimeout(function(){t.blockIt=!1},300))},e.exports=u},{"../../../util":391,"../../base":97,"../../base/controller":95,"../../common":133,"./style.hbs":300,"./template.hbs":301}],299:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=new r(t);t.controllers.push(n),t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e),this.addEventDelegates(n,["tabPush"])};i.inherit(l,a),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":391,"../../base/document":96,"./element":298}],300:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return".link-color {\n    color: tint-color;\n    itml-img-treatment: tint;\n}\n\n.related-header {\n    padding: 15pt 0pt 15pt 0pt;\n}\n\n.related-grid {\n    padding: 0pt 0pt 0pt 0pt;\n    border-width: 0;\n}\n.related-grid-3 {\n    column-count: 3;\n}\n.related-grid-4 {\n    column-count: 4;\n}\n.lockup-subtitle {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,"0.4",{name:"hexToRgb",hash:{},data:i}))+";\n}\n.auc-header {\n    padding: 15pt 0pt 0pt 0pt;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],301:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <button big-hit="true"\n            data-playlist-id="'+l(r(null!=(a=null!=t?t.reportAConcern:t)?a.id:a,t))+'"\n            data-target-id="'+l(r(null!=(a=null!=t?t.reportAConcern:t)?a.targetId:a,t))+'"\n            data-target-type="'+l(r(null!=(a=null!=t?t.reportAConcern:t)?a.targetType:a,t))+'"\n            ';return a=e["if"].call(t,null!=(a=null!=t?t.reportAConcern:t)?a.heroImage:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='\n            class="message-text '+l(r(null!=(a=null!=t?t.reportAConcern:t)?a.className:a,t))+' post-action-text"\n            ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,targetId:"ReportAConcern",targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=(a=null!=t?t.reportAConcern:t)?a.text:a,t))+"</button>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'style="color: '+l((e.getHighContrastColor||t&&t.getHighContrastColor||r).call(t,null!=(a=null!=(a=null!=t?t.reportAConcern:t)?a.heroImage:a)?a.isDark:a,.6,{name:"getHighContrastColor",hash:{},data:i}))+';"'},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.content:t)?a[0]:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o='            <header class="edge-header related-header '+l(r(null!=t?t.headerClass:t,t))+'">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=a&&(o+=a),o+="            </header>\n",a=e["if"].call(t,null!=t?t.auc:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),a=e["if"].call(t,null!=t?t.grid:t,{name:"if",hash:{},fn:this.program(27,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},7:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                    <button type="imagetext" class="more-link" data-section-id="'+l(r(null!=t?t.sectionId:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{click:!0,actionType:"more",targetId:"More",targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                        <title class=\"edge-title\" id='name'>"+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},9:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,l='                <grid class="track-list" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"                </grid>\n"},12:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=t?t.empty:t,{name:"unless",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},13:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                            <lockup class="'+l(r(null!=t?t.kind:t,t))+' action-lockup" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=">\n                                "+l((e.productArtwork||t&&t.productArtwork||o).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.program(19,i),data:i}),null!=a&&(s+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(21,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,(a=i&&i.root)&&a.pickerMode,{name:"if",hash:{},fn:this.program(23,i),inverse:this.program(25,i),data:i}),null!=a&&(s+=a),s+"                            </lockup>\n"},14:function(t,e,n,i){return'disabled="true"'},16:function(t,e,n,i){var a,r,l=e.helperMissing,o="function",s=this.escapeExpression,c='                                    <title class="list-title';return a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='">'+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:i}):r))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+'" src="resource://explicit"/></title>\n'},17:function(t,e,n,i){return"-disabled"},19:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'                                    <title class="list-title">'+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>\n"},21:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'                                    <subtitle class="lockup-line-1">'+r((e.replaceHtmlEntities||t&&t.replaceHtmlEntities||a).call(t,null!=t?t.postId:t,{name:"replaceHtmlEntities",hash:{},data:i}))+"</subtitle>\n"},23:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                                    <button type="image" class="add-button" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"add",targetType:"button"},data:i}),null!=a&&(s+=a),s+'>\n                                        <img src="resource://MediaPickerAddControl"/>\n                                    </button>\n'},25:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                                    <button type="image" class="action-button" data-content-id="'+l(r(null!=t?t.id:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"universal-action",targetType:"button"},data:i}),null!=a&&(s+=a),s+'>\n                                        <img class="action-color" src="resource://UniversalActionControl"/>\n                                    </button>\n'},27:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <grid class="'+l(r(null!=t?t.gridClass:t,t))+' related-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(28,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"                </grid>\n"},28:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                        ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.reportAConcern:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],302:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l=t("../../base").style,o=t("../../common").traits.DataProvider,s=t("../../base/controller"),c=t("./style.hbs"),u=function(t,e){t=t||{};var n=t.entityValueProvider;t.data||(t.data={id:n.valueForEntityProperty("artistStoreID")}),t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styleTemplate=c,t.styles.push(new l(t)),t.events=t.events||[],t.recoId=t.recoId,this.tabName=t.tabName,this.loading=!0,this.blockIt=!1,this.controllerName="profile-all",s.call(this,t,e),r.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia,"more-link":this.handleMorePage}),this.screenSize=r.screen.sizeForScreenDimension(this.documentDimensions),("l"===this.screenSize||"xl"===this.screenSize||"xxl"===this.screenSize)&&(this.largeScreen=!0),this.model=new o({data:t.data,pageProfile:"artist"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};r.inherit(u,s),u.prototype.template=t("./template.hbs"),u.prototype.artworkMap={latest:{xs:[55,55],s:[55,45],m:[55,45],l:[120,110],xl:[120,120],xxl:[150,150]},shelf:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[150,150]},list:{xs:[55,55],s:[55,55],m:[55,55],l:[55,55],xl:[55,55],xxl:[55,55]},track:{xs:[32,32],s:[32,32],m:[32,32],l:[40,40],xl:[40,40],xxl:[40,40]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84],xxl:[150,84]}},u.prototype.get=function(){this.model.data.pageData&&this.handleFetchSuccess(this.model.data)},u.prototype.handleFetchSuccess=function(t){t&&(this.containerType=4,this.model.dataSuccess(t,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)}))},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.createView=function(t){this.screenSize=r.screen.sizeForScreenDimension(Settings.Screen),this.data=t,this.errorTitle=null,this.errorMessage=null;var e,n,i,a,l,o,s,c=[],u=this.screenSize,h=!!u.match(/xs|s|m/g),d="xxl"===u?5:"xl"===u?4:3,p=5,m="xxl"===u?5:"xl"===u?4:3,f=24,g=r.keypath(t,"pageData.content"),b=r.keypath(g,"length");if(g)for(o=0;b>o;o++){s=o===b-1?f:d,l=g[o],n=null,e="list";var v=g[o];1>o&&"song"!==v.dkExternalId?e="latest":v.dkExternalId&&"song"!==v.dkExternalId&&!h?e="shelf":"song"===v.dkExternalId&&h&&(e="track"),"song"===v.dkExternalId&&(s=p),l.adamIds.length>s?(i=l.adamIds.slice(0,s),n=l.title,l.adamIds.seeAllUrl=l.seeAllUrl,this.model.setData(n,l.adamIds)):i=l.adamIds,a=this.lookupContentIds(i,{type:e}),(Settings.Restrictions.allowArtistActivity||!l.dkExternalId.match(/uploadedAudio|uploadedVideo/))&&c.push({title:l.title,grid:!0,latest:"latest"===e,list:"list"===e,shelf:"shelf"===e,sectionId:n,content:a,numCols:h?"":"-"+m,needsVideoPadding:v.dkExternalId&&v.dkExternalId.match(/video/i)&&h})}else r.log.error("missing content for artist",t);return c},u.prototype.lookupContentIds=function(t,e){for(var n=[],i=0;i<t.length;i++){var a={id:t[i],params:e};n.push(this.model.lookupContent(a,this.processContent.bind(this)))}return n},u.prototype.processContent=function(t,e){e.type=t.kind.match(/video/i)?"video":e.type;var n=r.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:e,screenSize:this.screenSize}),i=r.lockup.setArtworks(t,n,this.artworkMap,this.screenSize);return i.kind&&("album"===i.kind?i.releaseDate&&(i.line1=i.releaseDate.split("-")[0]):"song"===i.kind&&(i.line1=i.collectionName)),i.isExplicit=r.lockup.isExplicit(i),i[t.kind]=!0,i},u.prototype.handleMorePage=function(t){var e=t.target,n=e.getAttribute("data-section-id"),i=this.model.getData(n),r=i?i.seeAllUrl:null;if(r&&25===i.length){var l={data:i,dataType:"see_all_page",navigationDocument:e.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:l}))}else this.pushMorePage(t)},u.prototype.handleRotation=function(){var t=this;!this.blockIt&&this.data&&(this.blockIt=!0,this.viewModel=this.model.dataSuccess(this.data,{success:this.createView.bind(this),type:"rotate"}),setTimeout(function(){t.blockIt=!1},300))},u.prototype.handleDataReady=function(t){this.loading=!1,r.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},e.exports=u},{"../../../util":391,"../../base":97,"../../base/controller":95,"../../common":133,"./style.hbs":306,"./template.hbs":307,itml:435}],303:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),l=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name="All",this.controller=new r(t),t.controllers.push(this.controller),this.suppressNavigationController=!0,t.classes=t.classes||[],t.classes.push("template"),a.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};i.inherit(l,a),l.prototype.documentType="stackTemplate",l.prototype.handleFetchSuccess=function(t){this.controller.handleFetchSuccess(t)},l.prototype.handleFailedFetch=function(t){this.controller.handleFailedFetch(t)},e.exports=l},{"../../../util":391,"../../base/document":96,"./element":302}],304:[function(t,e,n){var i=t("../../../../util"),a=t("../../../more/controller"),r=function(t,e){t=t||{},e=e||{},this._data=t.data;var n=this._data.seeAllUrl;n&&(t=i.deepClone(t),t.data=null),a.call(this,t,i.extend({autoload:!n},e)),n&&(this._createMoreView=this.createView,this.createView=this._createView,this.model.fetchData({url:n,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)}))};i.inherit(r,a,!0),r.prototype._createView=function(t){return i.keypath(t,"pageData.adamIds")&&(this.contentIds=i.keypath(t,"pageData.adamIds")),this._createMoreView(t)},r.prototype.handleDataReady=function(t){var e=i.keypath(t,"detail.view");e?void 0===this.contentIds?(this.contentIds=e,this.getMore()):(this.resetLoading(),this.viewModel=e):(this.contentIds=i.deepClone(this._data),this.getMore()),this.render()},e.exports=r},{"../../../../util":391,"../../../more/controller":283}],305:[function(t,e,n){var i=t("../../../../util"),a=t("./controller"),r=t("../../../more"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data;t.name=n.name,0===t.controllers.length&&(this.controller=new a({data:n}),t.controllers.push(this.controller)),r.call(this,t,e)};i.inherit(l,r),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../../util":391,"../../../more":284,"./controller":304}],306:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".edge-header {\n	padding: 0 0 0 0;\n}\n\n.shelf-grid-3 {\n	column-count: 3;\n	border-color: rgba(0,0,0,0);\n	border-width: 0;\n	padding: 0 0 0 0;\n}\n\n.shelf-grid-4 {\n	column-count: 4;\n	border-color: rgba(0,0,0,0);\n	border-width: 0;\n	padding: 0 0 0 0;\n}\n\n.shelf-grid-5 {\n	column-count: 5;\n	border-color: rgba(0,0,0,0);\n	border-width: 0;\n	padding: 0 0 0 0;\n}\n\n.grid {\n	padding: 0 0 7pt 0;\n}\n\n.edge-header {\n	padding: 15pt 0pt 15pt 0pt;\n}\n\n.grid-zero {\n	column-count: 0;\n	padding: 0 0 0 0;\n}\n\n.latest-album {\n	font-size: 17pt;\n	itml-text-max-lines: 2;\n}\n\n.album,\n.song,\n.musicVideo {\n	padding: 3pt 0 3pt 0;\n}"},useData:!0})},{"hbsfy/runtime":418}],307:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.latest:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(11,i),data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r='            <header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),null!=a&&(r+=a),r+"            </header>\n"},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                    <button type="imagetext" class="more-link" data-section-id="'+l(r(null!=t?t.sectionId:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,click:!0,actionType:"more",targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                        <title class=\"edge-title\" id='name'>"+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},6:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"                    <title class=\"edge-title\" id='name'>"+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},8:function(t,e,n,i){var a,r=e.helperMissing,l='            <grid class="grid-zero" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"            </grid>\n"},9:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{titleClass:"latest-album",line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},11:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.shelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(15,i),data:i}),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                <grid class="grid shelf-grid'+l(r(null!=t?t.numCols:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(13,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"                </grid>\n"},13:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                    ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},15:function(t,e,n,i){var a,r=e.helperMissing,l='                <grid class="grid ';return a=e["if"].call(t,null!=t?t.needsVideoPadding:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"                </grid>\n"},16:function(t,e,n,i){return"video"},18:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                    ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],308:[function(t,e,n){var i=t("../../../util"),a=t("../../base/controller"),r=t("../../common").traits.DataProvider,l=t("../../base").style,o=t("./style.hbs"),s=t("./template.hbs"),c=i.loc,u=function(t,e){t=t||{},t.styles=[],t.styleTemplate=o,t.styles.push(new l(t)),t.events=t.events||[],t.data=t.data||[],this.isArtist=!0,this.tintInfo=t.tintInfo,this.isFullScreen=t.isFullScreen,this.contentDataKeys={artistContemporaries:c.loc("FUSE.Bio.ArtistContemporaries")},this.artworkMap={profile:{xs:[70,70],s:[80,80],m:[88,88],l:[70,70],xl:[70,70],xxl:[70,70]}},this.fullScreenArtworkMap={profile:{xs:[70,70],s:[80,80],m:[88,88],l:[120,120],xl:[140,140],xxl:[140,140]}},a.call(this,t,e),this.bioTitleHeader=this.isArtist?c.loc("FUSE.Bio.Biography"):c.loc("FUSE.Bio.About"),this.bioFormedHeader=c.loc("FUSE.Bio.Formed"),this.bioOriginHeader=c.loc("FUSE.Bio.Origin"),this.bioGenreHeader=c.loc("FUSE.Bio.Genre"),this.model=new r({data:t.data,pageProfile:"lockup"}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.addEventListener("dataFailed",this.handleDataFailed.bind(this)),this.get()};i.inherit(u,a),u.prototype.get=function(){var t;if(this.model.data.pageData?(t="artist_page"===this.model.data.pageData.componentName?"artist":"lockup",this.data=this.model.lookup(this.model.data.pageData.id,t)):(t="artist"===this.model.data.kind?"artist":"lockup",this.data=this.model.lookup(this.model.data.id,t)),this.data){var e=this.data.bornOrFormed&&new Date(this.data.bornOrFormed).getFullYear();e||(e=this.data.bornOrFormed),this.bornOrFormed=e,this.bioGenreValue=this.data.genreNames&&this.data.genreNames[0],this.model.dataSuccess(this.data,{success:this.handleDataFetchSuccess.bind(this)})}},u.prototype.handleDataFetchSuccess=function(t){this.data=t;var e=i.screen.sizeForScreenDimension(Settings.Screen),n="xl"===e||"xxl"===e?4:3,a=[],r=0,l=0,o=i.screen.sizeForScreenDimension().indexOf("l")>-1;this.descriptionClassName=o?"bio-text-full":"bio-text";for(var s in this.data)if(this.contentDataKeys[s]&&this.data[s].length){for(a.push({}),l=a.length-1,a[l].content=[],a[l].title=this.contentDataKeys[s],a[l].columnCount="-"+n,r=0;r<this.data[s].length;r++)a[l].content.push(this.model.lookupContent(this.data[s][r],this.handleLookupCallback.bind(this)));a[l].content=a[l].content.slice(0,n)}return a},u.prototype.handleDataFailed=function(){i.log.warn("Failed data fetch")},u.prototype.handleDataReady=function(t){this.viewModel=t.detail.view,this.render()},u.prototype.handleLookupCallback=function(t){var e=this.isFullScreen?this.fullScreenArtworkMap:this.artworkMap,n=i.artwork.getArtworkForContent({content:t,artworkMap:e}),a=i.lockup.setArtworks(t,n,e);return a},u.prototype.handleRotation=function(){this.viewModel=this.handleDataFetchSuccess(this.data),this.render()},u.prototype.template=s,e.exports=u},{"../../../util":391,"../../base":97,"../../base/controller":95,"../../common":133,"./style.hbs":310,"./template.hbs":311}],309:[function(t,e,n){var i=t("../../../util"),a=t("../../base/document"),r=t("./element"),l=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=[],this.controller=new r(t),t.controllers.push(this.controller),a.call(this,t,e),this.addEventDelegates(this.controller,["tabPush"])};i.inherit(l,a),l.prototype.documentType="stackTemplate",l.prototype.handleFetchSuccess=function(t){this.controller.get(t)},e.exports=l},{"../../../util":391,"../../base/document":96,"./element":308}],310:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".bio-text {\n    itml-text-max-lines: 3;\n}\n\n.bio-text-full {\n	itml-text-max-lines: 0;\n}\n\n.bio-info-grid {\n	column-count: 3;\n	itml-item-width: 100%;\n	itml-align: center;\n	border-width: 0;\n	itml-lockup-type: shelf;\n}\n\n.bio-title-lockup {\n	padding: 0 13 0 13;\n	itml-img-treatment: artist-circle;\n}\n\n.bio-title {\n	text-align: left;\n	itml-position: center;\n}\n\n.bio-swoosh-grid-4 {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n    column-count: 4;\n}\n\n.bio-swoosh-grid-3 {\n    border-color: transparent;\n    background-color: transparent;\n    border-width: 0;\n    itml-item-width: 100%;\n    itml-lockup-type: shelf;\n    itml-padding: 0pt 7pt 0pt 0pt;\n    itml-align: center;   \n    column-count: 3;\n}\n\n.edge-header {\n	padding: 16pt 0pt 7pt 16pt;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],311:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <title class="edge-title bio-edge-title">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.bioTitleHeader:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},3:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'        <title class="edge-title bio-edge-title">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=t?t.bioTitleHeader:t,{name:"toUpperCase",hash:{},data:i}))+" "+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.data:t)?a.name:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},5:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='    <description class="'+s((r=null!=(r=e.descriptionClassName||(null!=t?t.descriptionClassName:t))?r:o,typeof r===l?r.call(t,{name:"descriptionClassName",hash:{},data:i}):r))+'">';return a=(e.escapeText||t&&t.escapeText||o).call(t,null!=(a=null!=t?t.data:t)?a.artistBio:a,{name:"escapeText",hash:{},data:i}),null!=a&&(c+=a),c+"</description>\n"},7:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='    <description class="'+s((r=null!=(r=e.descriptionClassName||(null!=t?t.descriptionClassName:t))?r:o,typeof r===l?r.call(t,{name:"descriptionClassName",hash:{},data:i}):r))+'">';return a=(e.escapeText||t&&t.escapeText||o).call(t,null!=(a=null!=(a=null!=t?t.data:t)?a.itunesNotes:a)?a.standard:a,{name:"escapeText",hash:{},data:i}),null!=a&&(c+=a),c+"</description>\n"},9:function(t,e,n,i){var a,r='    <grid class="bio-info-grid">\n';return a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.bornOrFormed:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.data:t)?a.origin:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.bioGenreValue:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},10:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+r(a(null!=t?t.bioFormedHeader:t,t))+"</title>\n                <subtitle>"+r(a(null!=t?t.bornOrFormed:t,t))+"</subtitle>\n            </lockup>\n"},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+l(r(null!=t?t.bioOriginHeader:t,t))+"</title>\n                <subtitle>"+l(r(null!=(a=null!=t?t.data:t)?a.origin:a,t))+"</subtitle>\n            </lockup>\n"},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;
return'            <lockup class="bio-title-lockup">\n                <title class="bio-title">'+r(a(null!=t?t.bioGenreHeader:t,t))+"</title>\n                <subtitle>"+r(a(null!=t?t.bioGenreValue:t,t))+"</subtitle>\n            </lockup>\n"},16:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c='    <grid class="bio-swoosh-grid'+o(l(null!=t?t.columnCount:t,t))+'" style="background-color: '+o((e.hexToRgb||t&&t.hexToRgb||s).call(t,null!=(r=null!=a[1]?a[1].tintInfo:a[1])?r.bgColor:r,{name:"hexToRgb",hash:{},data:i}))+';" ';return r=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(c+=r),c+='>\n        <header class="edge-header"><title class="edge-title">'+o((e.toUpperCase||t&&t.toUpperCase||s).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title></header>\n",r=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(17,i,a),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"    </grid>\n"},17:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <lockup type="shelf" class="action-lockup shelf-lockup" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+l(r(null!=t?t.id:t,t))+'" data-content-kind="'+l(r(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(20,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+">\n                "+l((e.productArtwork||t&&t.productArtwork||o).call(t,t,null!=t?t.kind:t,"bio-artist-img artist-art",{name:"productArtwork",hash:{},data:i}))+'\n                <title maxLines="2" class="">'+l(r(null!=t?t.name:t,t))+'</title>\n                <subtitle class="lockup-subtitle">'+l(r(null!=(a=null!=(a=null!=t?t.genres:t)?a[0]:a)?a.name:a,t))+"</subtitle>\n            </lockup>\n"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},20:function(t,e,n,i){return'disabled="true"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l='<header class="edge-header">\n';return r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.hasArtistBio:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.program(3,i,a),data:i}),null!=r&&(l+=r),l+="</header>\n",r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.artistBio:r,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.itunesNotes:r,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=(r=null!=t?t.data:t)?r.hasArtistBio:r,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(16,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],312:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../connect/feed/element"),l=i.controller.DocumentController,o=t("../../common").traits.TabComponent,s=t("../../common/traits/data_provider"),c=a.loc,u=function(t,e){t=t||{},t.entityValueProvider=t.entityValueProvider||{},t.controllers=t.controllers||[],t.name=c.loc("FUSE.NavBar.Connect"),this.model=new s;var n=t.entityValueProvider.valueForEntityProperty("metadata");!n&&a.keypath(t,"data.pageData.id")&&(n=this.model.lookup(t.data.pageData.id));var i=t.tintInfo,u=n&&n.id,h=n&&n.kind,d={};d[h]=u;var p=4;t.controllers.length||(this.controller=new r({api:"activities",params:d,tintInfo:i,containerType:p}),t.controllers.push(this.controller)),t.classes=t.classes||[],t.classes.push("template"),l.call(this,t,e),o.call(this),this.controller&&(this.el.addEventListener("needsmore",this.controller.handleNeedsMore.bind(this.controller)),this.addEventDelegates(this.controller,["showRecommendations","getConnectFeed"]),a.account.getSubscriptionStatus({service:"AppleMusic"},function(){a.account.hasAdminPermission()&&a.account.getProfilePermissions({success:this.handlePermissions.bind(this),failure:this.handlePermissions.bind(this)})}.bind(this)))};a.inherit(u,l),a.inherit(u,o,!0),u.prototype.documentType="stackTemplate",u.prototype.handlePermissions=function(t){this.permissions=t||[]},e.exports=u},{"../../../util":391,"../../common":133,"../../common/traits/data_provider":149,"../../connect/feed/element":168,itml:435}],313:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.loc,l=t("../common/traits/data_provider"),o=t("../error"),s=i.controller.DocumentController,c=function(t,e){var n,i=t.data||{},c=t.event||{},u="connect"===TabBar.selectedTab.identifier;if(i.storePlatformData){this.model=new l({data:i});var h=a.keypath(i,"pageData.id");n=this.model.lookup(h)}else n=i;n.recoId=a.keypath(c,"detail.recoId");var d=n.kind,p=d&&d.match(/iTunesBrand|brand|activity/g),m=d&&"activity"===d,f=n;t=t||{},t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type=p?"curator":"artist",s.call(this,t,e);var g={artistStoreID:n.id+"",artistName:n.shortName||n.name,metadata:f,sidePackData:n,tabName:a.keypath(c,"detail.tabName")},b=!1;if(i.storePlatformData&&i.pageData){var v=i.pageData.id;if(i.storePlatformData.artist){var y=a.keypath(i,"storePlatformData.artist.results");v&&y[v]&&y[v].hasArtistBio&&(b=y[v].hasArtistBio)}else if(i.storePlatformData.product){var k=a.keypath(i,"storePlatformData.product.results");v&&k[v]&&k[v].hasArtistBio&&(b=k[v].hasArtistBio)}}else(i.hasArtistBio||a.keypath(i,"itunesNotes.standard"))&&(b=!0);var w=this.el.getElementsByTagName("profileTemplate").item(0),x=w.getFeature("ProfileNativeViewController");if(n.isBlacklistedForSubscription&&n.url){var S=new o({errorTitle:"",errorMessage:r.loc("FUSE.Redirecting")});this.el.replace(S.el),openURL(n.url.replace("https","itmss"))}if(p){var D=[];(n.groupingId||m)&&D.push({identifier:"editors_picks",title:r.loc("FUSE.Profile.EditorsPicks")}),m||D.push({identifier:"playlists",title:r.loc("FUSE.Profile.Playlists")}),n.hasSocialPosts?D.push({identifier:"connect",title:r.loc("FUSE.Profile.Connect")}):x.setSocialHidden(!0),x.setAvailableContentFlags({related_content:b}),x.setVisibleSegments(D)}else{var C={all:!n.isBlacklistedForSubscription,connect:t.data.hasSocialPosts&&Settings.Restrictions.allowArtistActivity,related_content:b};x.setAvailableContentFlags(C),u&&x.setSelectedSegment("connect")}x.setProfileEntityValueProvider(g)};a.inherit(c,s),c.prototype.documentType="profileTemplate",e.exports=c},{"../../util":391,"../common/traits/data_provider":149,"../error":208,itml:435}],314:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.MultiElementController,l=t("../../common").traits.DataProvider,o=t("../../base").style,s=t("./style.hbs"),c=t("./template.hbs"),u=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new o({styleTemplate:s})),t.events=t.events||[],t.data=t.data||[],this.model=new l({data:t.data}),this.viewModel=this.model.lookup(t.data.id,"artist"),r.call(this,t,e),this.render()};a.inherit(u,r),u.prototype.template=c,e.exports=u},{"../../../util":391,"../../base":97,"../../common":133,"./style.hbs":316,"./template.hbs":317,itml:435}],315:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,l=t("./element"),o=t("./title.hbs"),s=t("./toolbar.hbs"),c=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[];var n;0===t.controllers.length&&(n=new l(t),t.controllers.push(n)),r.call(this,t,e)};a.inherit(c,r),c.prototype.documentType="editorTemplate",c.prototype.titleTemplate=o,c.prototype.toolbarTemplate=s,e.exports=c},{"../../../util":391,"./element":314,"./title.hbs":318,"./toolbar.hbs":319,itml:435}],316:[function(t,e,n){e.exports=t(58)},{"hbsfy/runtime":418}],317:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"    "+r(a(t,t))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<dialogTemplate>\n  	<title>Reset Biography</title>\n   	<text>Resetting your biography will remove any changes you have made. Your default Apple Music biography will be displayed on your artist profile.</text>\n   	<button type="destructive">Reset</button>\n   	<button type="cancel">Cancel</button>\n</dialogTemplate>\n<text>\n';return a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.artistBio:a,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"</text>"},useData:!0})},{"hbsfy/runtime":418}],318:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<button id="cancelButton" class="align-left" action="close">Cancel</button>\n<title>Biography</title>\n<button class="align-right done-button" type="done">Done</button>'},useData:!0})},{"hbsfy/runtime":418}],319:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"<button>Reset</button>"},useData:!0})},{"hbsfy/runtime":418}],320:[function(t,e,n){var i=t("../../../util"),a=t("../../grouping/controller"),r=t("../../common").traits.TabComponent,l=t("../../base/document"),o=function(t,e){t=t||{},t.controllers=t.controllers||[],t.entityValueProvider=t.entityValueProvider||{};var n,i=t.entityValueProvider.valueForEntityProperty("metadata"),o=4,s=t.tintInfo;i.url&&(n=new a({url:i.url,tintInfo:s,containerType:o}),t.controllers.push(n)),t.classes=t.classes||[],t.classes.push("template"),l.call(this,t,e),r.call(this)};i.inherit(o,l),i.inherit(o,r,!0),o.prototype.documentType="stackTemplate",e.exports=o},{"../../../util":391,"../../base/document":96,"../../common":133,"../../grouping/controller":256}],321:[function(t,e,n){var i=t("./all"),a=t("./editors_picks"),r=t("./playlists"),l=t("./bio"),o=t("./connect"),s=t("../sharing"),c=t("../common/traits/data_provider"),u=t("./edit"),h=t("../../util"),d=function(t,e){var n=t.entityValueProvider,i=n.valueForEntityProperty("metadata")||{};this.artistId=n.valueForEntityProperty("artistStoreID")||i.id,this.tabName=n.valueForEntityProperty("tabName"),this.recoId=i.recoId,this.hasArtistBio=!1,this.relatedControllers=[],this.model=new c({suppressDialogs:!0}),this.shouldSetNativeFlags=!1,"native"===t.source&&h.account.isAppleMusicEnabled()&&(this.shouldSetNativeFlags=!0);var a=i&&i.url;this.eventHandlers={};for(var r in e)e.hasOwnProperty(r)&&(this.eventHandlers[r]=e[r]);this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("select",this.handleSelect.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this)),this.nativeViewController.addEventListener("action",h.metrics.handleNativeAction.bind(this)),this.setNativeFlags(),!a&&this.artistId&&h.account.isAppleMusicEnabled()?this.model.fetchContent({profile:"url",contentIds:[this.artistId],onSuccess:this.get.bind(this)}):(this.pageUrl=a,this.get())};d.prototype.get=function(){if(!this.pageUrl){var t=this.model.lookup(this.artistId)||{};this.pageUrl=t.url}this.pageUrl&&this.model.fetchData({url:this.pageUrl,success:this.handleFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},d.prototype.setNativeFlags=function(){var t=this.model.lookup(this.artistId);if(t){var e={hasSocialPosts:!1,hasArtistBio:!1,isBlacklisted:!1};e.hasSocialPosts=!!t.hasSocialPosts,e.hasArtistBio=!!t.hasArtistBio,e.isBlacklisted=!!t.isBlacklistedForSubscription;var n=t.isBlacklistedForSubscription||"activity"===t.kind||!h.account.isConnectEnabledForStorefront()||!Settings.Restrictions.allowArtistActivity;if(this.nativeViewController.setSocialHidden(n),this.shouldSetNativeFlags){var i={all:!e.isBlacklisted,connect:e.hasSocialPosts&&Settings.Restrictions.allowArtistActivity,biography:e.hasArtistBio};this.nativeViewController.setAvailableContentFlags(i)}}else this.nativeViewController.setSocialHidden(!0)},d.prototype.handleFetchSuccess=function(t){if(this.data=t,this.setNativeFlags(),this.relatedControllers.length>0)for(var e=0;e<this.relatedControllers.length;e++){var n=this.relatedControllers[e];n.handleFetchSuccess&&n.handleFetchSuccess.call(n,t)}},d.prototype.handleFailedFetch=function(t,e,n){if(this.relatedControllers.length>0)for(var i=0;i<this.relatedControllers.length;i++){var a=this.relatedControllers[i];a.handleFailedFetch&&a.handleFailedFetch.call(a,t,e,n)}},d.prototype.handleNeedsContent=function(t){var e,n={all:i,editors_picks:a,playlists:r,more_related_content:l,related_content:l,connect:o},s=t.segmentIdentifier||t.documentIdentifier,c=n[s],u={};if(c){u.entityValueProvider=t.entityValueProvider,u.tintInfo=t.tintInfo;var d=u.entityValueProvider;if(this.data=this.data||d.valueForEntityProperty("metadata"),this.data||(this.data={id:d.valueForEntityProperty("artistStoreID")}),u.data=this.data,u.recoId=this.recoId,u.tabName=this.tabName,e=new c(u),e.addEventListener("tabPush",this.eventHandlers.tabPush),"more_related_content"===s){var p=h.screen.sizeForScreenDimension();if("l"===p||"xl"===p||"xxl"===p)return;this.nativeViewController.setMoreRelatedContentDocument(e.el)}else"related_content"===s?this.nativeViewController.setRelatedContentDocument(e.el):this.nativeViewController.setSegmentDocument(s,e.el)}this.relatedControllers.push(e)},d.prototype.handleSelect=function(t){var e=t.buttonIdentifier;switch(e){case"shareButton":var n=this.model.lookup(this.artistId);this.shareController=new s({data:{event:t,content:n}}),this.nativeViewController.presentShareDocument(this.shareController.el,{animated:!0});var i=this.shareController.el.getElementsByTagName("shareTemplate").item(0);i&&i.addEventListener("submit",this.handleShareSubmit.bind(this));break;case"editButton":this.editProfileController=new u({data:this.data}),this.nativeViewController.presentBiographyEditorDocument(this.editProfileController.el,{animated:!0});var a=this.editProfileController.el.getElementsByTagName("editorTemplate").item(0);a&&a.addEventListener("submit",this.handleEditProfileSubmit.bind(this))}},d.prototype.handleChange=function(t){var e=t.itemIdentifier;switch(e){case"following":}},d.prototype.handleEditProfileSubmit=function(t){var e=t.buttonIdentifier;switch(e){case"doneButton":break;case"cancelButton":}},d.prototype.handleShareSubmit=function(){},d.prototype.setFollowerCount=function(t){var e=t.entityValueProvider.valueForEntityProperty("artistStoreID"),n=h.urls.build("followerCount",{artist:e});h.xhr({method:"GET",url:n,success:function(t){try{var e=JSON.parse(t);this.nativeViewController.numberOfFollowers=e.count,this.nativeViewController.setNumberOfFollowers(this.nativeViewController.numberOfFollowers)}catch(n){h.log.error(n)}}.bind(this),failure:function(){h.log.error("failed request for follower count")}})},e.exports=d},{"../../util":391,"../common/traits/data_provider":149,"../sharing":366,"./all":303,"./bio":309,"./connect":312,"./edit":315,"./editors_picks":320,"./playlists":323}],322:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),l=t("../../common").traits.DataProvider,o=i.controller.MultiElementController,s=t("../../common").traits.EventMap,c=t("../../common").traits.TabComponent,u=t("../../base").style,h=function(t,e){t=t||{},t.styles=t.styles||[],t.tintInfo=t.tintInfo||{},t.styles.push(new u(t)),t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.events.push("holdselect"),this.loading=!0,this.batchSize=24,this.controllerName="profile-playlists",o.call(this,t,e),s.call(this,t),c.call(this),a.extend(this.onSelect,{carousel:this.pushProduct,"play-button":this.playMedia,"show-more":this.showMore}),this.model=new l({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};a.inherit(h,o),a.inherit(h,c,!0),a.inherit(h,s,!0),h.prototype.template=r,h.prototype.artworkMap={profile:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},track:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},product:{xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},productChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60],xxl:[60,60]},video:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84],xxl:[150,84]}},h.prototype.get=function(){this.model.data.pageData&&this.handleFetchSuccess(this.model.data)},h.prototype.handleFetchSuccess=function(t){t&&this.model.dataSuccess(t,{success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)})},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.createView=function(t){if(this.viewModel)this.viewModel=this.viewModel.concat(this.getPlaylistBatch());else{var e=t.pageData.id,n=this.model.lookup(e,"product");n&&n.playlistIds?(this.playlistIds=n.playlistIds,this.viewModel=this.getPlaylistBatch()):this.handleFailedFetch(404,"","Missing Playlists for Curator")}return this.viewModel},h.prototype.getPlaylistBatch=function(){for(var t=[],e=this.playlistIds.splice(0,this.batchSize),n=0;n<e.length;n++){var i={id:e[n]};t.push(this.model.lookupContent(i,this.processContent.bind(this)))}return this.theEnd=0===this.playlistIds.length,t},h.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap}),n=a.lockup.setArtworks(t,e,this.artworkMap);return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},h.prototype.handleDataReady=function(t){this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},h.prototype.showMore=function(){this.loading||this.theEnd||(this.loading=!0,this.model.dataSuccess(this.playlistIds,{success:this.createView.bind(this)}))},e.exports=h},{"../../../util":391,"../../base":97,"../../common":133,"./template.hbs":324,itml:435}],323:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),l=t("../../common").traits.TabComponent,o=i.controller.DocumentController,s=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data,i=t.tintInfo;n?(this.controller=new r({data:n,tintInfo:i}),t.controllers.push(this.controller)):a.log.error("no playlists associated with curator",n),t.classes=t.classes||[],t.classes.push("template"),o.call(this,t,e),l.call(this)};a.inherit(s,o),a.inherit(s,l,!0),s.prototype.documentType="stackTemplate",s.prototype.handleFetchSuccess=function(t){this.controller.handleFetchSuccess(t)},s.prototype.handleFailedFetch=function(t,e,n){this.controller.handleFailedFetch(t,e,n)},e.exports=s},{"../../../util":391,"../../common":133,"./element":322,itml:435}],324:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="paged-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="    </grid>\n\n",a=e.unless.call(t,null!=t?t.theEnd:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"            ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},4:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"        <button id=\"showMore\" class='show-more-grid show-more' >"+r((e.loc||t&&t.loc||a).call(t,"FUSE.ShowMore",{name:"loc",hash:{},data:i}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],325:[function(t,e,n){var i=t("../../util"),a=t("../grouping/controller"),r=t("../loading/controller"),l=t("../common").traits.EventMap,o=t("../common").traits.TabComponent,s=t("../common").traits.DataProvider,c=t("../base/document"),u=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=t.name||"Radio";var n,s=t.url;0===t.controllers.length&&i.urls.radio()?(n=new a({url:i.urls.radio()}),t.controllers.push(n)):(n=new r,t.controllers.push(n)),c.call(this,t,e),o.call(this),l.call(this),this.addEventListener("appear",n.handleAppear.bind(n)),s&&this.handleDeepLink(s)};i.inherit(u,c),i.inherit(u,o,!0),i.inherit(u,l,!0),u.prototype.documentType="stackTemplate",u.prototype.handleDeepLink=function(t){var e=t.match(/ra\.[0-9]+/g);e||(e=t.match(/st\.[0-9]+/g)),e&&(this.stationId=e[0],this.model=new s({pageProfile:"lockup"}),this.model.fetchContent({profile:"lockup",contentIds:[this.stationId],onSuccess:function(){this.playMediaID.call(this,this.stationId)}.bind(this)}))},e.exports=u},{"../../util":391,"../base/document":96,"../common":133,"../grouping/controller":256,"../loading/controller":280}],326:[function(t,e,n){var i=t("./document"),a=t("../base/tab"),r=t("../../util"),l=function(t){t=t||{},this.url=t.url,a.call(this,t),t.url&&this.removeEventListener("replaceDocument")};r.inherit(l,a),l.prototype.getDocumentController=function(){return new i({name:this.name,url:this.url})},e.exports=l},{"../../util":391,"../base/tab":100,"./document":325}],327:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=a.loc,l=t("moment"),o=i.event.Event,s=t("./template.hbs"),c=t("./style.hbs"),u=t("./partials"),h=t("../../common").traits.DataProvider,d=t("../../base").style,p=t("../../common").traits.EventMap,m=t("../../common").traits.TabComponent,f=i.controller.MultiElementController,g=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("change"),t.styles.push(new d({styleTemplate:c})),u(),this.loading=!0,f.call(this,t,e),p.call(this,t),m.call(this),this.model=new h,this.unavailableShowIds=[],a.extend(this.onSelect,{"link-button":this.handleLink,"play-media":this.playMedia,"request-button":this.handleUserRequest,"action-button":this.showActionMenu}),a.extend(this.onChange,{refresh:this.handleRefresh}),this.getCmsData()};a.inherit(g,f),a.inherit(g,p,!0),a.inherit(g,m,!0),g.prototype.template=s,g.prototype.getCmsData=function(){a.xhr({url:"https://uic.itunes.com/live-stations/beats1/feed.json",method:"GET",success:this.cmsSuccess.bind(this),failure:this.cmsFailure.bind(this)})},g.prototype.handleRefresh=function(){this.getCmsData()},g.prototype.cmsSuccess=function(t){this.cmsData=JSON.parse(t),this.cmsData.anchors=[{curatorId:990050553,showHost:"Zane Lowe",description:"Live From LA"},{curatorId:990473683,showHost:"Ebro Darden",description:"Live From NY"},{curatorId:993270508,showHost:"Julie Adenuga",description:"Live From London"}],this.cmsData.stationId?this.getStoreData():this.handleRender()},g.prototype.cmsFailure=function(t){a.log.warn("BeatsOne: CMS Request Failure: ",t),this.renderView()},g.prototype.getStoreData=function(){var t=[];t.push(this.cmsData.stationId),this.cmsData.curatorIds instanceof Array&&t.push.apply(t,this.cmsData.curatorIds),this.model.fetchContent({profile:"lockup",contentIds:t,onSuccess:this.storeDataSuccess.bind(this),onFailure:this.storeDataFailure.bind(this)})},g.prototype.storeDataSuccess=function(){var t=this.model.lookup(this.cmsData.stationId);t?(this.stationData=t,this.createView()):(a.log.warn("LiveStation: No station data found for ID: ",this.cmsData.stationId),this.handleRender())},g.prototype.storeDataFailure=function(t){a.log.warn("LiveStation: Store request failed: ",t),this.renderView()},g.prototype.createView=function(){this.errorTitle=null,this.errorMessage=null,this.viewModel={},this.viewModel.stationId=this.cmsData.stationId,this.strings={},this.cmsData.details&&(this.viewModel.requestAddress=this.cmsData.details.requestAddress,this.viewModel.links=this.cmsData.details.links,this.viewModel.defaultShowImageUrl=this.cmsData.details.defaultShowImageUrl,this.strings={onAirNow:"On Air Now  ",anchorsTitle:"Beats 1 Anchors",actionShareText:"Share Show...",shareUrl:"http://applemusic.com/beats1",shareShowText:"Listen to @showTitle@.",description:this.cmsData.details.description,liveNowTitle:this.cmsData.details.liveNowTitle,aboutTitle:this.cmsData.details.aboutTitle,upcomingShowsTitle:this.cmsData.details.upcomingShowsTitle,featuredShowsTitle:this.cmsData.details.featuredShowsTitle,listenNowActionText:r.loc("FUSE.Radio.ListenNowButton"),requestActionText:r.loc("FUSE.Radio.SendRequestButton")}),this.genericShowData={},this.cmsData.details.genericShowDetails&&(this.genericShowData.title=this.cmsData.details.genericShowDetails.title,this.genericShowData.description=this.cmsData.details.genericShowDetails.description,this.genericShowData.artwork={url:this.cmsData.details.genericShowDetails.artworkUrl}),this.setUpcomingShows(),this.setAnchors(),this.setFeaturedShows(),this.handleRender()},g.prototype.setUpcomingShows=function(){var t,e,n,i,r,l=Date.now(),o=new Date(l+432e5);this.viewModel.upcomingShows=[],this.cmsData.upcomingShows instanceof Array&&this.cmsData.upcomingShows.forEach(function(s){n=null,i=null,r=null,s.curatorId&&(n=this.model.lookup(s.curatorId),n?(s.storeData=n,i=a.keypath(s,"storeData.editorialArtwork.subscriptionCover"),i&&(s.subscriptionCoverData=i),r=a.keypath(s,"storeData.editorialArtwork.brandLogo"),r&&(s.brandLogoData=r)):this.unavailableShowIds.push(s.curatorId)),s.subscriptionCoverData||(s.subscriptionCoverData=this.genericShowData.artwork),s.brandLogoData||(s.brandLogoData=this.genericShowData.artwork),t=new Date(s.startTime),e=new Date(s.endTime),s.formattedStartTime=this.formatTimestamp(t),s.formattedEndTime=this.formatTimestamp(e),s.allowRequests&&this.viewModel.requestAddress&&this.strings.requestActionText?s.showRequestButton=!0:s.showRequestButton=!1,s.formattedStartTime.indexOf("AM")>-1&&s.formattedEndTime.indexOf("AM")>-1&&(s.formattedStartTime=s.formattedStartTime.replace("AM","")),s.formattedStartTime.indexOf("PM")>-1&&s.formattedEndTime.indexOf("PM")>-1&&(s.formattedStartTime=s.formattedStartTime.replace("PM","")),l<e.getTime()&&t.getTime()<o&&(l>t.getTime()?this.viewModel.currentShow=s:this.viewModel.upcomingShows.push(s))},this)},g.prototype.formatTimestamp=function(t){var e;return t&&t instanceof Date&&(e=formatDate(t,"hm"),e=e.replace(" ","").replace(":00AM","AM").replace(":00PM","PM")),e},g.prototype.setAnchors=function(){var t,e;this.viewModel.anchors=[],this.cmsData.anchors instanceof Array&&this.cmsData.anchors.forEach(function(n){t=this.model.lookup(n.curatorId),t&&(n.storeData=t,e=a.keypath(n,"storeData.editorialArtwork.brandLogo"),e&&(n.brandLogoData=e),this.viewModel.anchors.push(n))},this)},g.prototype.setFeaturedShows=function(){var t;this.viewModel.featuredShows=[],this.cmsData.featuredShows instanceof Array&&this.cmsData.featuredShows.forEach(function(e){if(e.curatorId)if(t=this.model.lookup(e.curatorId)){e.storeData=t;var n=a.keypath(e,"storeData.editorialArtwork.brandLogo");n&&(e.brandLogoData=n),e.timestamp="",e.nextStartTime&&(e.timestamp=l(e.nextStartTime).format("MMM DD").toUpperCase(),e.timestamp+=", "+this.formatTimestamp(new Date(e.nextStartTime))),e.showHost=e.showHost||"Beats 1",this.viewModel.featuredShows.push(e)}else this.unavailableShowIds.push(e.curatorId)},this)},g.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url"),n=t.target.getAttribute("data-page-target");e&&("external"===n?openURL(e):this.pushUrl(t))},g.prototype.handleUserRequest=function(t){var e=t.target.getAttribute("data-request-address");e&&openURL("sms:"+e)},g.prototype.shouldUseWideLayout=function(){return["l","xl","xxl"].indexOf(a.screen.sizeForScreenDimension())>-1},g.prototype.handleRender=function(){this.loading=!1,this.unavailableShowIds.length>0&&(this.unavailableShowIds=this.unavailableShowIds.filter(function(t,e,n){return n.indexOf(t)===e}),a.log.warn("LiveStation: Unavailable show Ids: ",this.unavailableShowIds)),this.dispatchEvent(new o("updateDocumentStyles",{detail:{style:new d({styleTemplate:c,tintInfo:{textColor4:"9d9e9e",textColor3:"9d9e9e",textColor2:"ffffff",textColor1:"ffffff",bgColor:"000000"}})}})),this.renderView()},g.prototype.handleRotation=function(){this.renderView()},g.prototype.renderView=function(){this.viewModel&&(this.viewModel.wideLayout=this.shouldUseWideLayout(),this.viewModel.narrowLayout=!this.shouldUseWideLayout(),this.setProperArtwork()),this.render()},g.prototype.showActionMenu=function(t){var e={data:{type:"actionSheet",options:{sourceElement:t.target},hideTitle:!0,buttons:[{title:this.strings.actionShareText,className:"share-show",callback:this.shareShow.bind(this,t)},{title:r.loc("FUSE.CancelButton"),className:"cancel-action-menu",callback:this.cancelActionMenu.bind(this)}]},sourceElement:t.target,dataType:"dialog",navigationDocument:modal};this.dispatchEvent(new o("tabPush",{detail:e}))},g.prototype.cancelActionMenu=function(){modal.popDocument()},g.prototype.shareShow=function(t){function e(){var e={data:{content:{url:r,imageUrl:i,title:{mail:a,message:a,twitter:a,facebook:a,"default":a}},shareType:"custom"},dataType:"sharing",navigationDocument:modal,options:{sourceElement:t.target}};this.dispatchEvent(new o("tabPush",{detail:e}))}var n=t.target.getAttribute("data-content-title"),i=t.target.getAttribute("data-content-image"),a=this.strings.shareShowText.replace("@showTitle@",n),r=this.strings.shareUrl;e.call(this)},g.prototype.setProperArtwork=function(){this.viewModel.currentShow.subscriptionCoverData&&(this.viewModel.currentShow.image=this.getProperArtwork("live",this.viewModel.currentShow.subscriptionCoverData)),this.viewModel.upcomingShows.forEach(function(t){t.brandLogoData&&(t.image=this.getProperArtwork("upcoming",t.brandLogoData))},this),this.viewModel.anchors.forEach(function(t){t.brandLogoData&&(t.image=this.getProperArtwork("anchors",t.brandLogoData))},this),this.viewModel.featuredShows.forEach(function(t){t.brandLogoData&&(t.image=this.getProperArtwork("featured",t.brandLogoData))},this)},g.prototype.getProperArtwork=function(t,e){var n,i,r;return t&&e&&(r={content:{artwork:e},params:{type:t}},this.artworkMap&&(r.artworkMap=this.artworkMap),i=a.artwork.getArtworkForContent(r),i&&i.image&&(n=i.image)),n},g.prototype.artworkMap={anchors:{crop:"cc",xs:[90,90],s:[105,105],m:[115,115],l:[123,123],xl:[123,123],xxl:[105,105]},live:{crop:"sr",xs:[320,280],s:[375,300],m:[414,300],l:[768,330],xl:[1024,330],xxl:[1024,305]},upcoming:{crop:"cc",xs:[65,65],s:[65,65],m:[80,80],l:[80,80],xl:[80,80],xxl:[80,80]},featured:{crop:"cc",xs:[160,160],s:[187,187],m:[207,207],l:[192,192],xl:[204,204],xxl:[204,204]}},e.exports=g},{"../../../util":391,"../../base":97,"../../common":133,"./partials":333,"./style.hbs":335,"./template.hbs":336,itml:435,moment:470}],328:[function(t,e,n){var i=t("../../../util"),a=t("./element"),r=t("../../common").traits.TabComponent,l=t("../../base/document"),o=function(t,e){t=t||{},t.name="Beats 1",t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("live-station-document"),t.controllers=t.controllers||[],this.controller=new a,this.controller.addEventListener("updateDocumentStyles",this.updateDocumentStyles.bind(this)),t.controllers.push(this.controller),l.call(this,t,e),r.call(this)};i.inherit(o,l),i.inherit(o,r,!0),o.prototype.dataReady=function(){},o.prototype.updateDocumentStyles=function(t){t&&t.detail&&(this.stylesController.addStyle(t.detail.style),
this.render())},o.prototype.documentType="stackTemplate",e.exports=o},{"../../../util":391,"../../base/document":96,"../../common":133,"./element":327}],329:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'        <divider class="section-divider" />\n'},3:function(t,e,n,i){var a,r,l=this.lambda,o=this.escapeExpression,s="function",c=e.helperMissing,u="            <lockup ";return a=e.unless.call(t,(a=(a=i&&i.root)&&a.viewModel)&&a.wideLayout,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+=' class="action-lockup ',a=e["if"].call(t,(a=(a=i&&i.root)&&a.viewModel)&&a.wideLayout,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+'" data-preview-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-kind="'+o(l(null!=(a=null!=t?t.storeData:t)?a.kind:a,t))+'">\n                <img disabled="true" class="artist-art" width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o((r=null!=(r=e.name||(null!=t?t.name:t))?r:c,typeof r===s?r.call(t,{name:"name",hash:{},data:i}):r))+'" />\n                <title maxLines="2" class="anchor-title"><text>'+o((r=null!=(r=e.showHost||(null!=t?t.showHost:t))?r:c,typeof r===s?r.call(t,{name:"showHost",hash:{},data:i}):r))+'</text></title>\n                <subtitle maxLines="0">\n                    <text>'+o((r=null!=(r=e.description||(null!=t?t.description:t))?r:c,typeof r===s?r.call(t,{name:"description",hash:{},data:i}):r))+"</text>\n                </subtitle>\n            </lockup>\n"},4:function(t,e,n,i){return'type="shelf"'},6:function(t,e,n,i){return"anchor-wide"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o="<section>\n";return a=e.unless.call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+='    <header>\n        <title class="header-title">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,(a=(a=i&&i.root)&&a.strings)&&a.anchorsTitle,{name:"toUpperCase",hash:{},data:i}))+'</title>\n    </header>\n    <grid class="anchors-grid">\n',a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.anchors:a,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+"    </grid>\n</section>\n"},useData:!0})},{"hbsfy/runtime":418}],330:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda;return'                    <title maxLines="0" class="timestamp"><span class="on-air-now-label">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.onAirNow:a,{name:"toUpperCase",hash:{},data:i}))+"</span> "+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,t))+""+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,t))+"</title>\n"},4:function(t,e,n,i){return'                        <img class="title-chevron" src="resource://arrow"/>\n'},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'                    <description class="current-show-description" maxLines="0"><text>'+l(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,t))+"</text></description>\n"},8:function(t,e,n,i){return"align-left"},10:function(t,e,n,i){return"align-center"},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'            <column>\n                <button type="thin" class="request-button station-button align-right" data-request-address="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,t))+'"><title>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n            </column>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<section>\n    <card class="hero-card action-lockup" data-preview-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.kind:a,t))+'">\n        <background>\n            <img disabled="true" class="hero-image"\n                width="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.width:a,t))+'"\n                height="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.height:a,t))+'"\n                srcset="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.url:a,t))+" "+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.dpr:a,t))+'" />\n        </background>\n        <lockup>\n';return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        </lockup>\n    </card>\n    <card class="action-lockup" data-preview-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.kind:a,t))+'">\n        <lockup>\n            <list class="on-air-title-list">\n                    <title maxLines="0" class="on-air-title">'+l(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.title:a,t))+"</title>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="                </list>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='        </lockup>\n    </card>\n    <row>\n        <column>\n            <button type="thin" class="station-button play-media ',a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.showRequestButton:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(s+=a),s+='" data-content-id="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.stationId:a,t))+'"><title>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.strings:t)?a.listenNowActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n        </column>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.showRequestButton:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </row>\n</section>"},useData:!0})},{"hbsfy/runtime":418}],331:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression,o=this.lambda;return'                    <title maxLines="0" class="timestamp"><span class="on-air-now-label">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.onAirNow:a,{name:"toUpperCase",hash:{},data:i}))+"</span> "+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,t))+""+l(o(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedEndTime:a,t))+"</title>\n"},4:function(t,e,n,i){return'                    <img class="title-chevron" src="resource://arrow"/>\n'},6:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'            <lockup>\n                <description class="current-show-description" maxLines="0"><text>'+l(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,t))+"</text></description>\n            </lockup>\n"},8:function(t,e,n,i){return"align-left"},10:function(t,e,n,i){return"align-center"},12:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'                <button type="thin" class="request-button station-button wide-button align-right" data-request-address="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.requestAddress:a,t))+'"><title>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.strings:t)?a.requestActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='<section>\n    <card class="hero-card action-lockup" data-preview-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-id="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,t))+'" data-content-kind="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.kind:a,t))+'">\n        <background>\n            <img disabled="true" class="hero-image"\n                width="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.width:a,t))+'"\n                height="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.height:a,t))+'"\n                srcset="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.url:a,t))+" "+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.image:a)?a.dpr:a,t))+'" />\n        </background>\n        <lockup>\n';return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.formattedStartTime:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='            <list class="list-title">\n                <title maxLines="0" class="on-air-title">'+l(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.title:a,t))+"</title>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.storeData:a)?a.id:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+="            </list>\n        </lockup>\n    </card>\n</section>\n\n<row>\n    <column>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.description:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='    </column>\n    <column>\n        <list class="list-button">\n            <button type="thin" class="station-button play-media wide-button align-left ',a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.showRequestButton:a,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(10,i),data:i}),null!=a&&(s+=a),s+='" data-content-id="'+l(r(null!=(a=null!=t?t.viewModel:t)?a.stationId:a,t))+'"><title>'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=(a=null!=t?t.strings:t)?a.listenNowActionText:a,{name:"toUpperCase",hash:{},data:i}))+"</title></button>\n",a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.currentShow:a)?a.showRequestButton:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'        </list>\n    </column>\n</row>\n\n<divider class="section-divider" />'},useData:!0})},{"hbsfy/runtime":418}],332:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <divider class="section-divider" />\n';return a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n    <grid class="featured-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"    </grid>\n"},2:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'        <header class="featured-shows-header">\n           <title class="header-title">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.featuredShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},4:function(t,e,n,i){var a,r,l=this.lambda,o=this.escapeExpression,s=e.helperMissing,c="function",u='            <card class="featured-show-card action-lockup" data-preview-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-kind="'+o(l(null!=(a=null!=t?t.storeData:t)?a.kind:a,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||s).call(t,{name:"data-metrics",hash:{location:!0,impressions:!0,click:!0,targetType:"card"},data:i}),null!=a&&(u+=a),u+'>\n                <background>\n                    <img class="featured-image" width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o((r=null!=(r=e.name||(null!=t?t.name:t))?r:s,typeof r===c?r.call(t,{name:"name",hash:{},data:i}):r))+'" />\n                </background>\n                <lockup class="transparent-bar">\n                    <title class="featured-show-timestamp">'+o((r=null!=(r=e.timestamp||(null!=t?t.timestamp:t))?r:s,typeof r===c?r.call(t,{name:"timestamp",hash:{},data:i}):r))+'</title>\n                    <title class="featured-show-title">'+o((r=null!=(r=e.showHost||(null!=t?t.showHost:t))?r:s,typeof r===c?r.call(t,{name:"showHost",hash:{},data:i}):r))+'</title>\n                    <!--\n                    <button big-hit="true" type="image" class="action-button" data-content-title="'+o(l(null!=(a=null!=t?t.storeData:t)?a.shortName:a,t))+'" data-content-image="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+'">\n                        <img class="action-color" src="resource://UniversalActionControl"/>\n                    </button>\n                    -->\n                </lockup>\n            </card>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.featuredShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],333:[function(t,e,n){var i=t("itml").utils.Handlebars,a={anchors:t("./anchors.hbs"),currentShowNarrow:t("./currentShowNarrow.hbs"),currentShowWide:t("./currentShowWide.hbs"),upcomingShows:t("./upcomingShows.hbs"),featuredShows:t("./featuredShows.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./anchors.hbs":329,"./currentShowNarrow.hbs":330,"./currentShowWide.hbs":331,"./featuredShows.hbs":332,"./upcomingShows.hbs":334,itml:435}],334:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e.unless.call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"unless",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='    <grid class="shows-grid">\n',a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"each",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"    </grid>\n"},2:function(t,e,n,i){return'        <divider class="section-divider" />\n'},4:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return'        <header>\n           <title class="header-title">'+l((e.toUpperCase||t&&t.toUpperCase||r).call(t,null!=(a=null!=t?t.strings:t)?a.upcomingShowsTitle:a,{name:"toUpperCase",hash:{},data:i}))+"</title>\n        </header>\n"},6:function(t,e,n,i){var a,r,l=this.lambda,o=this.escapeExpression,s="function",c=e.helperMissing,u="            <lockup ";return a=e.unless.call(t,null!=(a=null!=t?t.storeData:t)?a.id:a,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+=' class="action-lockup" data-preview-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-id="'+o(l(null!=(a=null!=t?t.storeData:t)?a.id:a,t))+'" data-content-kind="'+o(l(null!=(a=null!=t?t.storeData:t)?a.kind:a,t))+'">\n                <img disabled="true" class="artist-art" width="'+o(l(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+o(l(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" srcset="'+o(l(null!=(a=null!=t?t.image:t)?a.url:a,t))+" "+o(l(null!=(a=null!=t?t.image:t)?a.dpr:a,t))+'" alt="'+o((r=null!=(r=e.name||(null!=t?t.name:t))?r:c,typeof r===s?r.call(t,{name:"name",hash:{},data:i}):r))+'" />\n                <text class="timestamp"><date>'+o(l(null!=t?t.formattedStartTime:t,t))+"</date><date>"+o(l(null!=t?t.formattedEndTime:t,t))+'</date></text>\n                <list>\n                    <title maxLines="2" class="show-title"><text>'+o(l(null!=t?t.title:t,t))+"</text></title>\n",a=e["if"].call(t,null!=(a=null!=t?t.storeData:t)?a.id:a,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(u+=a),u+'                </list>\n                <subtitle maxLines="0">\n                    <text>'+o(l(null!=t?t.description:t,t))+"</text>\n                </subtitle>\n            </lockup>\n"},7:function(t,e,n,i){return'disabled="true"'},9:function(t,e,n,i){return'                        <img class="title-chevron" src="resource://arrow"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.upcomingShows:a,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],335:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return" .live-station-document {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.9,{name:"hexToRgb",hash:{},data:i}))+";\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.section-divider-alt {\n    padding: 0 0 5pt 0;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.2,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.section-divider {\n    padding: 0 0 8pt 0;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.2,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.header-title {\n    font-size: 12pt;\n    font-weight: bold;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.hero-card {\n    padding: 0 0 0 0;\n}\n\n.hero-image {\n    itml-img-treatment:radial-gradient;\n    itml-img-fill:1;\n    background-color:rgb(0,0,0);\n}\n\n.artist-art {\n    border-width: 1;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.2,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.about-header {\n    padding: 0 0 0 0;\n}\n\n.upcoming-shows-header {\n    padding: 0pt 0 6pt 0;\n}\n\n.upcoming-shows-card {\n    padding: 12pt 0 12pt 0;\n}\n\n.featured-shows-header {\n    padding: 0 0 20pt 0;\n}\n\n.featured-show-card {\n    padding: 35pt 10pt 5pt 13pt;\n}\n\n.featured-show-caption {\n    padding: 0 0 0 0;\n    background-color: rgb(255,0,0);\n}\n\n.featured-show-timestamp {\n    itml-text-max-lines: 0;\n    font-size: 11pt;\n}\n\n.featured-show-title {\n    itml-text-max-lines: 0;\n    font-size: 15pt;\n    padding: 4pt 0 0 0;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.featured-image {\n    itml-img-treatment: uber;\n    background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.current-show-header {\n    padding: 0 0 5pt 0;\n}\n\n.current-show-description {\n    font-size: 14pt;\n}\n\n.title-chevron {\n    itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.link-list {\n    padding: 5pt 0 0 0;\n}\n\n.link-button {\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.on-air-title {\n    font-size:24pt;\n    color:rgb(255,255,255);\n}\n\n.timestamp {\n    font-size: 12pt;\n    font-weight: bold;\n}\n\n.show-title {\n    font-size: 16pt;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n    padding: 2pt 0 3pt 0;\n}\n\n.on-air-title-list {\n    padding: 3pt 0 8pt 0;\n}\n\n.on-air-now-label {\n    font-weight: bold;\n    color: rgb(255,45,85);\n}\n\n.shows-grid {\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.2,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.anchors-grid {\n    itml-align: center;\n    text-align: center;\n    itml-item-width: 100%;\n    border-width: 0;\n}\n\n.anchors-grid {\n    column-count: 3;\n}\n\n.anchor-title {\n    font-size: 14pt;\n    color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,{name:"hexToRgb",hash:{},data:i}))+";\n}\n\n.anchor-wide {\n    padding: 15pt 0 20pt 15pt;\n}\n\n.featured-grid {\n    itml-item-width: 100%;\n    border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    border-width: 1;\n    column-count: 2;\n}\n\n.featured-show {\n    padding: 0 0 15pt 0;\n}\n\n.station-button {\n    color: rgb(255,45,85);\n    font-size: 12pt;\n    padding:6 14 6 14;\n    border-color: rgb(255,45,85);\n    border-width: 1pt;\n    border-radius: circle-caps;\n}\n\n.wide-button {\n    padding: 6pt 30pt 6pt 30pt;\n}\n\n.list-button {\n    itml-align: center;\n    padding: 1pt 0 0 0;\n}\n\n.list-title {\n    padding: 3pt 0 0 0;\n}\n\n@media all and (min-width: 736pt) {\n    .anchors-grid {\n        column-count: 1;\n    }\n\n    .featured-grid {\n        column-count: 4;\n    }\n}\n\n@media all and (min-width: 1024pt) {\n    .featured-grid {\n        column-count: 5;\n    }\n}\n\n@media all and (min-width: 1366pt) {\n    .anchors-grid {\n        height: 600pt;\n    }\n\n    .featured-grid {\n        column-count: 6;\n    }\n}\n"},useData:!0})},{"hbsfy/runtime":418}],336:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r+="\n\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.wideLayout:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.currentShowWide,"        ","currentShowWide",t,void 0,e,n,i),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.currentShowNarrow,"        ","currentShowNarrow",t,void 0,e,n,i),null!=a&&(r+=a),r},6:function(t,e,n,i){var a,r="        <split>\n";return a=this.invokePartial(n.upcomingShows,"            ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),r+="        </split>\n        <split>\n",a=this.invokePartial(n.anchors,"            ","anchors",t,void 0,e,n,i),null!=a&&(r+=a),r+="        </split>\n",a=this.invokePartial(n.featuredShows,"        ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r},8:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.upcomingShows,"        ","upcomingShows",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.anchors,"        ","anchors",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=this.invokePartial(n.featuredShows,"        ","featuredShows",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<pullToRefresh class="refresh"/>\n';return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],337:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("../../base").style,l=t("./style.hbs"),o=t("./template.hbs"),s=i.controller.MultiElementController,c=t("../../common").traits.EventMap,u=t("../../common").traits.TabComponent,h=t("../../common").traits.DataProvider,d=function(t,e){t=t||{},t.styles=t.styles||[],t.events=t.events||[],t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.styles.push(new r({styleTemplate:l})),s.call(this,t,e),c.call(this,t),u.call(this),a.extend(this.onSelect,{"play-button":this.playMedia,"recent-lockup":this.playMedia}),this.model=new h,this.artworkMap={list:{crop:"bb",xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]}};var n=this.createView(t.stations);this.onDataReady(n)};a.inherit(d,s),a.inherit(d,c,!0),a.inherit(d,u,!0),d.prototype.template=o,d.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=a.screen.sizeForScreenDimension().match(/l/i);if(t)for(var n=function(t){for(var e=0;e<t.length;e++)t[e].kind="radioStation",t[e]=this.processContent(t[e]);return t}.bind(this),i=0;i<t.length;i++){var r=t[i];r.stations=n(r.stations),r.isLarge=e}return t},d.prototype.processContent=function(t){var e=a.artwork.getArtworkForContent({content:t,artworkMap:this.artworkMap,params:{type:"list"}}),n=a.lockup.setArtworks(t,e,this.artworkMap,"list");return n.line1=a.lockup.line1(t),n.isExplicit=a.lockup.isExplicit(t),n},d.prototype.onDataReady=function(t){t&&(this.viewModel=t),this.loading=!1,this.render()},d.prototype.refreshComplete=function(t){var e=t.detail,n=e.result;"hasNewContent"===n&&this.render()},e.exports=d},{"../../../util":391,"../../base":97,"../../common":133,"./style.hbs":339,"./template.hbs":340,itml:435}],338:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./element"),l=t("../../common").traits.TabComponent,o=i.controller.DocumentController,s=a.loc,c=function(t,e){t=t||{},t.controllers=t.controllers||[],t.name=s.loc("FUSE.Radio.Recents.PageTitle"),0===t.controllers.length&&t.controllers.push(new r(t)),o.call(this,t,e),l.call(this)};a.inherit(c,o),a.inherit(c,l,!0),c.prototype.documentType="stackTemplate",e.exports=c},{"../../../util":391,"../../common":133,"./element":337,itml:435}],339:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".recent-grid {\n}\n.recent-grid-large {\n    border-width: 0pt;\n    column-count: 5;\n}\n.recent-header {\n    border-width: 0pt;\n    border-color: rgba(0,0,0,0);\n    itml-padding: 15pt 0 0 15pt;\n}\n.shelf-lockup {\n	padding: 10pt 0 0 0;\n}\n@media all and (min-width: 768) {\n    .recent-grid-large {\n        column-count: 5;\n    }\n}\n\n@media all and (width: 1024) {\n    .recent-grid-large {\n        column-count: 6;\n    }   \n}"},useData:!0})},{"hbsfy/runtime":418}],340:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i,a){var r,l="";return r=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(4,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"\n"},4:function(t,e,n,i,a){var r,l=e.helperMissing,o='        <grid class="recent-grid';return r=e["if"].call(t,null!=t?t.isLarge:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='" ',r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(o+=r),o+=">\n\n",r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="\n",r=e.each.call(t,null!=t?t.stations:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"\n        </grid> \n\n"},5:function(t,e,n,i){return"-large"},7:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'            <header class="recent-header">\n                <text class="edge-title">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</text>\n            </header>\n"},9:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=a[1]?a[1].isLarge:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(12,i,a),data:i}),null!=r&&(l+=r),l},10:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"                    ","shelfLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},12:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                    ","listLockup",t,{line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l+="\n",r=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(l+=r),l},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],341:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.pubSub,l=t("./template.hbs"),o=t("./style.hbs"),s=t("./partials"),c=t("../common").traits.DataProvider,u=t("../base").style,h=t("../common").traits.EventMap,d=t("../common").traits.TabComponent,p=i.controller.MultiElementController,m=t("../common/blocks"),f=t("../account/subscribe"),g=function(t,e){t=t||{},t.styles=t.styles||[],t.classes=t.classes||[],t.events=t.events||[],t.events.push("select"),t.events.push("disabledButSelectedEvent"),t.events.push("holdselect"),this.controllerName="room";var n=t.data,i=a.keypath(n,"pageData.uber.masterArt")||{};t.styles.push(new u({styleTemplate:o,tintInfo:i})),t.styles.push(new u({styleTemplate:m.styleTemplate,tintInfo:i})),s(),this.loading=!0,p.call(this,t,e),h.call(this,t),d.call(this),a.extend(this.onSelect,{link:this.pushUrl,radio:this.playMedia,"link-external":this.openUrlExternal,"more-link":this.pushUrl,"play-button":this.playMedia,"link-subscribe":this.showSubscriptionsSheet}),r.subscribe("serviceChange",this.checkCurrentAccountStatus.bind(this)),this.model=new c({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.dataSuccess(this.model.data,{success:this.createView.bind(this),failure:this.requestFailure.bind(this)})};a.inherit(g,p),a.inherit(g,h,!0),a.inherit(g,d,!0),g.prototype.template=l,g.prototype.requestFailure=function(t){a.log.error("RoomElementController: Store request failed: ",t),this.renderView()},g.prototype.createView=function(t){var e={children:[]};if(t.pageData&&t.pageData.uber&&(e.uber=t.pageData.uber),t.pageData.blocks){
var n;this.blocksController=new m({data:t.pageData.blocks,model:this.model}),n=this.blocksController.createView(),n instanceof Array&&e.children.push({isBlocks:!0,children:n})}else this.blocksController=null;return t.pageData&&t.pageData.segments?(this.isMultiroom=!0,t.pageData.segments.forEach(function(t){e.children.push(this.processRoomPreData(t))},this)):t.pageData&&t.pageData.adamIds instanceof Array&&(this.isMultiroom=!1,e.children.push(this.processRoomPreData(t.pageData))),e},g.prototype.processRoomPreData=function(t){var e={content:[]},n={326:"Shelf",327:"List",328:"Grid+ShortCopy",329:"Grid"};if(t.title&&(e.title=t.title),t.fcMetadata&&t.fcMetadata.lockupStyle)e.layoutConfig=this.layouts[t.fcMetadata.lockupStyle];else{var i=t.fcKind,a=n[i]||"List";e.layoutConfig=this.layouts[a]}this.isMultiroom&&t.seeAllUrl&&(e.seeAllUrl=t.seeAllUrl);for(var r=0;r<t.adamIds.length&&(!this.isMultiroom||10!==r);r++)e.content.push(this.model.lookupContent({id:t.adamIds[r]},this.processContent.bind(this)));return e},g.prototype.processContent=function(t){return a.deepClone(t)},g.prototype.handleDataReady=function(t){this.viewModel=t.detail.view;for(var e=this.viewModel.children,n=e.length-1;n>=0;n--)e[n].isBlocks?this.viewModel.blocks=e.splice(n,1)[0]:e[n].content.length>0?this.processRoomPostData(e[n]):e.splice(n,1);this.loading=!1,this.renderView()},g.prototype.processRoomPostData=function(t){var e=["musicVideo","uploadedVideo"];t.firstChildKind=t.content[0].kind,e.indexOf(t.firstChildKind)>=0?(t.isVideoType=!0,t.productType="video"):(t.isAlbumType=!0,t.productType="album"),t.layoutConfig||(t.layoutConfig=this.layouts.List,this.isMultiroom&&"song"!==t.firstChildKind&&(t.layoutConfig=this.layouts.Shelf)),t[t.layoutConfig.id]=!0,t.layout=t.layoutConfig.id,t.layoutConfig.hasOwnProperty("showDescription")&&(t.showDescription=t.layoutConfig.showDescription)},g.prototype.renderView=function(){this.viewModel&&this.setProperLayout(),this.render()},g.prototype.setProperLayout=function(){function t(t,e){var n;switch(t){case"song":n="list"===e?"track":"album_"+e;break;case"playlist":n="list"===e?"list":"album_"+e;break;case"uploadedVideo":case"musicVideo":n="video_"+e;break;default:n="album_"+e}return n}var e,n,i,r,l,o,s,c=a.screen.sizeForScreenDimension();this.viewModel.uber&&(this.viewModel.uber.image=a.artwork.getArtworkForContent({content:{artwork:this.viewModel.uber.masterArt},artworkMap:this.artworkMap,params:{type:"uber"}}).image),this.viewModel.children.forEach(function(u,h){for(u.screenSize=c,l=u.content.length,["l","xl","xxl"].indexOf(c)>=0?u.isLargeScreen=!0:u.isSmallScreen=!0,u.layoutConfig.numColumns&&(u.numColumns=u.layoutConfig.numColumns[u.productType][c]),h<this.viewModel.children.length-1&&(u.showDivider=!0),u.visibleContent=[],this.isMultiroom&&(o=u.layoutConfig.multiroomMax[u.productType][c],u.content.length>o?(l=o,u.showSeeAll=!0):u.showSeeAll=!1),s=0;l>s;){if(r=u.content[s],e=t(r.kind,u.layout),n=a.artwork.getArtworkForContent({content:r,artworkMap:this.artworkMap,params:{type:e}}),r.title=r.title||r.name,r.line1=a.lockup.line1(r),u.showDescription&&r.itunesNotes&&(r.itunesNotes["short"]||r.itunesNotes.standard)&&(r.lineDescription=r.itunesNotes["short"]||r.itunesNotes.standard),r.isExplicit=a.lockup.isExplicit(r),"playlist"===u.content[s].kind){var d=a.extend(a.artwork.artworkMap,this.artworkMap);i=d[e][c],this.artworkMap[e+"Child"]={crop:"cc"},this.artworkMap[e+"Child"][c]=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)]}u.visibleContent.push(a.lockup.setArtworks(u.content[s],n,this.artworkMap,e)),s++}},this)},g.prototype.handleRotation=function(){this.updateBlocks(),this.renderView()},g.prototype.layouts={Grid:{id:"grid",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:6,xxl:7},video:{xs:6,s:6,m:6,l:8,xl:6,xxl:7}},numColumns:{album:{xs:2,s:2,m:2,l:4,xl:6,xxl:7},video:{xs:2,s:2,m:2,l:4,xl:6,xxl:7}}},"Grid+ShortCopy":{id:"gridWithCopy",showDescription:!0,multiroomMax:{album:{xs:6,s:6,m:6,l:6,xl:6,xxl:7},video:{xs:6,s:6,m:6,l:6,xl:6,xxl:7}},numColumns:{album:{xs:1,s:1,m:1,l:2,xl:2,xxl:7},video:{xs:1,s:1,m:1,l:3,xl:4,xxl:7}}},Spotlight:{id:"spotlight",multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1,xxl:7},video:{xs:1,s:1,m:1,l:1,xl:1,xxl:7}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1,xxl:7},video:{xs:1,s:1,m:1,l:1,xl:1,xxl:7}}},"Spotlight+ShortCopy":{id:"spotlight",showDescription:!0,multiroomMax:{album:{xs:1,s:1,m:1,l:1,xl:1,xxl:7},video:{xs:1,s:1,m:1,l:1,xl:1,xxl:7}},numColumns:{album:{xs:1,s:1,m:1,l:1,xl:1,xxl:7},video:{xs:1,s:1,m:1,l:1,xl:1,xxl:7}}},Shelf:{id:"shelf",multiroomMax:{album:{xs:6,s:6,m:6,l:5,xl:6,xxl:7},video:{xs:6,s:6,m:6,l:5,xl:6,xxl:7}},numColumns:{album:{xs:3,s:3,m:3,l:5,xl:6,xxl:7},video:{xs:3,s:3,m:3,l:5,xl:6,xxl:7}}},List:{id:"list",multiroomMax:{album:{xs:6,s:6,m:6,l:8,xl:8,xxl:8},video:{xs:6,s:6,m:6,l:8,xl:8,xxl:8}}}},g.prototype.artworkMap={uber:{crop:"h",xs:[320,140],s:[375,160],m:[414,180],l:[768,330],xl:[1024,330],xxl:[1024,330]},album_list:{crop:"cc",xs:[55,55],s:[55,55],m:[80,80],l:[100,100],xl:[100,100],xxl:[100,100]},video_list:{crop:"h",xs:[100,56],s:[100,56],m:[100,56],l:[150,84],xl:[150,84],xxl:[150,84]},album_shelf:{crop:"cc",xs:[105,105],s:[123,123],m:[137,137],l:[152,152],xl:[168,168],xxl:[189,189]},video_shelf:{crop:"h",xs:[105,60],s:[123,70],m:[137,78],l:[152,86],xl:[170,96],xxl:[189,107]},album_grid:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[190,190],xl:[200,200],xxl:[200,200]},video_grid:{crop:"h",xs:[158,90],s:[187,105],m:[207,116],l:[190,108],xl:[170,96],xxl:[170,96]},album_gridWithCopy:{crop:"cc",xs:[130,130],s:[130,130],m:[150,150],l:[130,130],xl:[150,150],xxl:[150,150]},video_gridWithCopy:{crop:"h",xs:[144,82],s:[152,86],m:[180,102],l:[224,125],xl:[224,125],xxl:[224,125]},album_spotlight:{crop:"cc",xs:[158,158],s:[187,187],m:[207,207],l:[185,185],xl:[185,185],xxl:[185,185]},video_spotlight:{crop:"h",xs:[320,182],s:[375,210],m:[414,232],l:[356,202],xl:[356,202],xxl:[356,202]}},g.prototype.openUrlExternal=function(t){var e=t.target.getAttribute("data-link-url");e&&openURL(e)},g.prototype.updateBlocks=function(){this.blocksController&&(this.viewModel.blocks.children=this.blocksController.createView())},g.prototype.showSubscriptionsSheet=function(){var t=new f({showCancelButton:!0});t.addEventListener("handleSubscribeDone",function(){modal.popDocument()}),modal.pushDocument(t.el,{}),t.initSubscribeData()},g.prototype.checkCurrentAccountStatus=function(){a.account.getSubscriptionStatus(0,this.handleServiceEligibility.bind(this))},g.prototype.handleServiceEligibility=function(t,e){this.blocksController&&(this.blocksController.isSubscribed=a.keypath(e,"subscribed"),this.updateBlocks(),this.renderView())},e.exports=g},{"../../util":391,"../account/subscribe":75,"../base":97,"../common":133,"../common/blocks":104,"./partials":347,"./style.hbs":353,"./template.hbs":354,itml:435}],342:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./element"),l=t("../common").traits.TabComponent,o=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("room-document");var n=t.data;this.controller=new r({data:n}),t.controllers.push(this.controller),a.call(this,t,e),l.call(this)};i.inherit(o,a),i.inherit(o,l,!0),o.prototype.documentType="stackTemplate",e.exports=o},{"../../util":391,"../base/document":96,"../common":133,"./element":341}],343:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){return'    <divider class="room-divider" />\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.showDivider:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],344:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing;return'        <button type="imagetext" class="more-link" data-link-url="'+l(r(null!=(a=null!=t?t.seeAllUrl:t)?a.url:a,t))+'" data-link-title="'+l(r(null!=t?t.title:t,t))+'">\n            <title class="edge-title title-color">'+l((e.toUpperCase||t&&t.toUpperCase||o).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+'</title>\n            <img class="edge-chevron title-chevron" src="resource://ChevronTerms"/>\n        </button>\n'},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return'        <title class="edge-title title-color">'+r((e.toUpperCase||t&&t.toUpperCase||a).call(t,null!=t?t.title:t,{name:"toUpperCase",hash:{},data:i}))+"</title>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r='<header class="edge-header">\n';return a=e["if"].call(t,null!=t?t.showSeeAll:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),r+"</header>"},useData:!0})},{"hbsfy/runtime":418}],345:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"edge-"+o((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:l,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.shelfLockup,"        ","shelfLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(l+=a),l},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],346:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"grid-"+o((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:l,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},5:function(t,e,n,i){return"grid-no-border"},7:function(t,e,n,i){return"grid-with-border"},9:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=a[1]?a[1].isAlbumType:a[1],{name:"if",hash:{},fn:this.program(10,i,a),inverse:this.program(13,i,a),data:i}),null!=r&&(l+=r),l},10:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===l?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},11:function(t,e,n,i){return'disabled="true"'},13:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=a[2]?a[2].isLargeScreen:a[2],{name:"if",hash:{},fn:this.program(14,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(l+=r),l},14:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='                <lockup type="shelf" class="action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===l?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},16:function(t,e,n,i){var a,r,l=e.helperMissing,o=this.escapeExpression,s="function",c='                <lockup type="editorial" style="itml-item-height: '+o((e.multiply||t&&t.multiply||l).call(t,null!=(a=null!=t?t.image:t)?a.height:a,1.15,{name:"multiply",hash:{},data:i}))+'" class="action-lockup '+o((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:l,typeof r===s?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+o((r=null!=(r=e.id||(null!=t?t.id:t))?r:l,typeof r===s?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+o((r=null!=(r=e.url||(null!=t?t.url:t))?r:l,typeof r===s?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||l).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,{"class":"video-description"},e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l=e.helperMissing,o="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='\n\n<grid class="',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i,a),inverse:this.program(7,i,a),data:i}),null!=r&&(o+=r),o+='" ',r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(o+=r),o+=">\n",r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+="</grid>\n\n",r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],347:[function(t,e,n){var i=t("itml").utils.Handlebars,a={roomEdgeHeader:t("./edgeHeader.hbs"),lockupArtwork:t("./lockupArtwork.hbs"),lockupDetails:t("./lockupDetails.hbs"),roomDivider:t("./divider.hbs"),roomList:t("./list.hbs"),roomShelf:t("./shelf.hbs"),roomGrid:t("./grid.hbs"),roomGridWithCopy:t("./gridWithCopy.hbs"),roomSpotlight:t("./spotlight.hbs")},r=function(){for(var t in a)a[t]&&i.registerPartial(t,a[t])};e.exports=r},{"./divider.hbs":343,"./edgeHeader.hbs":344,"./grid.hbs":345,"./gridWithCopy.hbs":346,"./list.hbs":348,"./lockupArtwork.hbs":349,"./lockupDetails.hbs":350,"./shelf.hbs":351,"./spotlight.hbs":352,itml:435}],348:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider-s"></lockup>'},3:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"        ","listLockup",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n\n<grid class="track-list" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"</grid>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],349:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n"},3:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    "+r((e.productArtwork||t&&t.productArtwork||a).call(t,t,"play",{name:"productArtwork",hash:{},data:i}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.song:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],350:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+o((a=null!=(a=e.title||(null!=t?t.title:t))?a:l,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+' <badge class="explict-badge" src="resource://explicit"/></title>\n'},3:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'    <title maxLines="2" class="lockup-title">'+o((a=null!=(a=e.title||(null!=t?t.title:t))?a:l,typeof a===r?a.call(t,{name:"title",hash:{},data:i}):a))+"</title>\n"},5:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'    <subtitle class="lockup-subtitle">'+o((a=null!=(a=e.line1||(null!=t?t.line1:t))?a:l,typeof a===r?a.call(t,{name:"line1",hash:{},data:i}):a))+"</subtitle>\n"},7:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'    <subtitle class="lockup-subtitle-2">'+o((a=null!=(a=e.line2||(null!=t?t.line2:t))?a:l,typeof a===r?a.call(t,{name:"line2",hash:{},data:i}):a))+"</subtitle>\n"},9:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'    <subtitle class="lockup-subtitle-3">'+o((a=null!=(a=e.line3||(null!=t?t.line3:t))?a:l,typeof a===r?a.call(t,{name:"line3",hash:{},data:i}):a))+"</subtitle>\n"},11:function(t,e,n,i){var a,r=e.helperMissing,l='    <description class="lockup-description ';return a=e["if"].call(t,null!=t?t["class"]:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='">',a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.lineDescription:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</description>\n"},12:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return o((a=null!=(a=e["class"]||(null!=t?t["class"]:t))?a:l,typeof a===r?a.call(t,{name:"class",hash:{},data:i}):a))},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line1:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line2:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.line3:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.lineDescription:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],351:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),r+'<lockup class="ghost-divider"></lockup>'},3:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"edge-"+o((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:l,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"col-grid"},5:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='        <lockup type="shelf" class="shelf-lockup action-lockup '+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-link-url="'+s((r=null!=(r=e.url||(null!=t?t.url:t))?r:o,typeof r===l?r.call(t,{name:"url",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"            ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"            ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"        </lockup>\n"},6:function(t,e,n,i){return'disabled="true"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l="";return a=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='\n\n<grid class="',a=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+='" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+="</grid>\n\n",a=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=a&&(l+=a),l+"]\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],352:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.roomEdgeHeader,"    ","roomEdgeHeader",t,void 0,e,n,i),null!=a&&(r+=a),a=e["if"].call(t,null!=t?t.isAlbumType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){return'        <lockup class="ghost-divider"></lockup>\n'},4:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.isLargeScreen:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){return'            <lockup class="ghost-divider"></lockup>\n'},7:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"grid-"+o((a=null!=(a=e.numColumns||(null!=t?t.numColumns:t))?a:l,typeof a===r?a.call(t,{name:"numColumns",hash:{},data:i}):a))+"-col"},9:function(t,e,n,i){return"grid-full-width"},11:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=a[1]?a[1].isVideoType:a[1],{name:"if",hash:{},fn:this.program(12,i,a),inverse:this.program(18,i,a),data:i}),null!=r&&(l+=r),l},12:function(t,e,n,i,a){var r,l="";return r=e["if"].call(t,null!=a[2]?a[2].isSmallScreen:a[2],{name:"if",hash:{},fn:this.program(13,i,a),inverse:this.program(16,i,a),data:i}),null!=r&&(l+=r),l},13:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='                <card class="action-lockup" style="itml-card-type:billboard;" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"card"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+='>\n                    <lockup type="editorial">\n',a=this.invokePartial(n.lockupArtwork,"                        ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),c+='                    </lockup>\n                    <lockup type="caption" class="transparent-bar top">\n',a=this.invokePartial(n.lockupDetails,"                        ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                    </lockup>\n                </card>\n"},14:function(t,e,n,i){return'disabled="true"'},16:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='                <lockup type="editorial" class="action-lockup shelf-lockup" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                    ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                    ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"                </lockup>\n"},18:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='            <lockup type="editorial" class="action-lockup shelf-lockup" data-preview-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'" data-content-kind="'+s((r=null!=(r=e.kind||(null!=t?t.kind:t))?r:o,typeof r===l?r.call(t,{name:"kind",hash:{},data:i}):r))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(c+=a),c+=" ",a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=this.invokePartial(n.lockupArtwork,"                ","lockupArtwork",t,void 0,e,n,i),null!=a&&(c+=a),a=this.invokePartial(n.lockupDetails,"                ","lockupDetails",t,void 0,e,n,i),null!=a&&(c+=a),c+"            </lockup>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l=e.helperMissing,o="";return r=e["if"].call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='\n<grid class="grid-no-border ',r=e["if"].call(t,null!=t?t.numColumns:t,{name:"if",hash:{},fn:this.program(7,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+=" ",r=e["if"].call(t,null!=t?t.isSmallScreen:t,{name:"if",hash:{},fn:this.program(9,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='" style="padding: 0 0 0 0;" ',r=(e["data-metrics"]||t&&t["data-metrics"]||l).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=r&&(o+=r),o+=">\n",r=e.each.call(t,null!=t?t.visibleContent:t,{name:"each",hash:{},fn:this.program(11,i,a),inverse:this.noop,data:i}),null!=r&&(o+=r),o+='</grid>\n\n<lockup class="ghost-divider-s"></lockup>\n',r=this.invokePartial(n.roomDivider,"","roomDivider",t,void 0,e,n,i),null!=r&&(o+=r),o},usePartial:!0,useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],353:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=e.helperMissing,r=this.escapeExpression;return"    .room-document {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,{name:"hexToRgb",hash:{},data:i}))+";\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .uber-image {\n        background-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.bgColor:t,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n     .title-color {\n        color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .title-chevron {\n        itml-img-mask-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor3:t,{name:"hexToRgb",hash:{},data:i}))+";\n     }\n\n    .track-list {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor1:t,.15,{name:"hexToRgb",hash:{},data:i}))+" ;\n    }\n\n    .room-divider {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n\n    .grid-with-border {\n        border-color: "+r((e.hexToRgb||t&&t.hexToRgb||a).call(t,null!=t?t.textColor4:t,.15,{name:"hexToRgb",hash:{},data:i}))+";\n    }\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=" .edge-header {\n    padding: 5pt 0 0 15pt;\n }\n\n .editorial-card {\n    itml-card-type: editorial;\n }\n\n.grid-copy-large-screen {\n    border-width: 0;\n}\n\n.ghost-divider {\n    itml-padding: 0 0 15pt 0;\n}\n\n.ghost-divider-s {\n    itml-padding: 0 0 7pt 0;\n}\n\n.grid-no-border {\n    border-width: 0;\n}\n\n.grid-full-width {\n    itml-item-width: 100%;\n}\n\n.grid-1-col {\n    column-count: 0;\n}\n\n.grid-2-col {\n    column-count: 2;\n}\n\n.grid-3-col {\n    column-count: 3;\n}\n\n.grid-4-col {\n    column-count: 4;\n}\n\n.grid-5-col {\n    column-count: 5;\n}\n\n.grid6col {\n    column-count: 6;\n}\n\n.grid-lockup-title {\n    itml-font-style: super-headline-1;\n    font-size: 14pt;\n    padding: 0 0 0 0;\n}\n\n.lockup-description {\n    padding: 5pt 0 0 0;\n    itml-text-max-lines: 3;\n}\n\n.video-description {\n    itml-text-max-lines: 2;\n}\n\n.artist-artwork {\n    itml-img-treatment: artist-circle;\n}\n\n.uber-image {\n    itml-img-treatment: uber;\n    itml-img-fill:1;\n}\n\n";return a=e["if"].call(t,null!=t?t.bgColor:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},useData:!0})},{"hbsfy/runtime":418}],354:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.uber:a,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.blocks:a,{name:"if",hash:{},
fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.children:a,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression;return'        	<img class="uber-image"\n                width="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.width:a,t))+'"\n                height="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.height:a,t))+'"\n                srcset="'+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.url:a,t))+" "+l(r(null!=(a=null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.image:a)?a.dpr:a,t))+'" />\n'},5:function(t,e,n,i){var a,r=e.helperMissing,l='        	<description maxLines="3">';return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=(a=null!=(a=null!=t?t.viewModel:t)?a.uber:a)?a.description:a,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</description>\n"},7:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.blocks,"        ","blocks",t,{blocks:null!=(a=null!=(a=null!=t?t.viewModel:t)?a.blocks:a)?a.children:a},e,n,i),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r="		";return a=e["if"].call(t,null!=t?t.list:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.shelf:t,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.grid:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.gridWithCopy:t,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n		",a=e["if"].call(t,null!=t?t.spotlight:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},10:function(t,e,n,i){var a;return a=this.invokePartial(n.roomList,"","roomList",t,void 0,e,n,i),null!=a?a:""},12:function(t,e,n,i){var a;return a=this.invokePartial(n.roomShelf,"","roomShelf",t,void 0,e,n,i),null!=a?a:""},14:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGrid,"","roomGrid",t,void 0,e,n,i),null!=a?a:""},16:function(t,e,n,i){var a;return a=this.invokePartial(n.roomGridWithCopy,"","roomGridWithCopy",t,void 0,e,n,i),null!=a?a:""},18:function(t,e,n,i){var a;return a=this.invokePartial(n.roomSpotlight,"","roomSpotlight",t,void 0,e,n,i),null!=a?a:""},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],355:[function(t,e,n){var i=t("../../../util"),a=t("../../more/controller"),r=t("../../common").traits.MediaPicker,l=t("../traits/results"),o=function(t,e){t=t||{},e=e||{};var n=t.data,o=!Array.isArray(n);this.pickerMode=!!e.pickerMode,this.mediaPickerId=e.mediaPickerId,r.call(this),l.call(this),a.call(this,t,i.extend({autoload:!o},e)),i.extend(this.onSelect,{"add-button":this.handleLockup,"action-lockup":this.handleActionLockup}),o&&(this._createMoreView=this.createView,this.createView=this._createView,this.model.fetchData({url:n.url,success:this.createView.bind(this),failure:this.handleFailedFetch.bind(this)}))};i.inherit(o,a,!0),i.inherit(o,r,!0),i.inherit(o,l,!0),o.prototype._createView=function(t){if(!i.keypath(t,"pageData.componentName"))return this._createMoreView(t);var e;switch(t.pageData.componentName){case"playlist_page":e=this.model.lookup(t.pageData.id,"playlist-product");break;case"album_page":e=this.model.lookup(t.pageData.id,"product-dv");break;default:e=null}return i.keypath(e,"childrenIds")?e.childrenIds:void 0},o.prototype.handleDataReady=function(t){var e=i.keypath(t,"detail.view");void 0===this.contentIds?e&&(this.contentIds=e,this.getMore()):(this.resetLoading(),e&&(this.viewModel=e),this.render())},e.exports=o},{"../../../util":391,"../../common":133,"../../more/controller":283,"../traits/results":363}],356:[function(t,e,n){var i=t("../../../util"),a=t("./controller"),r=t("../../more"),l=function(t,e){t=t||{},t.controllers=t.controllers||[];var n=t.data;t.name=n.name,0===t.controllers.length&&(this.controller=new a({data:n},{mediaPickerId:i.keypath(t,"event.detail.mediaPickerId"),pickerMode:!!i.keypath(t,"event.detail.pickerMode")}),t.controllers.push(this.controller)),r.call(this,t,e)};i.inherit(l,r),l.prototype.documentType="stackTemplate",e.exports=l},{"../../../util":391,"../../more":284,"./controller":355}],357:[function(t,e,n){var i=t("../../util/"),a=t("../base").style,r=t("./style.hbs"),l=t("../base/document"),o=t("./results"),s=t("./trending"),c=t("../common").traits.TabComponent,u=function(t,e){t=t||{},t.classes=t.classes||[],t.classes.push("search-template"),t.styles=t.styles||[],t.styles.push(new a({styleTemplate:r})),t.context=t.context,this.trendingController=new s,this.trendingController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.resultsController=new o(t),i.metrics.track(this.resultsController),t.controllers=t.controllers||[],this.controller=this.trendingController,t.controllers.push(this.controller),this.documentType=this.controller.getDocumentType(),l.call(this,t,e),c.call(this),this.addEventDelegates(this.resultsController,["selectMediaPickerItem"])};i.inherit(u,l),i.inherit(u,c,!0),u.prototype.handleTrendingTermSelect=function(t){this.removeController(this.trendingController),this.resultsController.get(t.detail.url),this.addController(this.resultsController),this.controllers=[this.resultsController],this.controller=this.resultsController,this.documentType=this.controller.getDocumentType(),this.render(),this.dispatchEvent(t)},u.prototype.updateSearchTerm=function(t,e){this.controller instanceof o||(this.removeController(this.trendingController),this.controller=this.resultsController,this.addController(this.controller),this.controllers=[this.resultsController],this.documentType=this.controller.getDocumentType(),this.render()),this.controller.updateSearchTerm(t,e)},e.exports=u},{"../../util/":391,"../base":97,"../base/document":96,"../common":133,"./results":359,"./style.hbs":361,"./trending":364}],358:[function(t,e,n){var i=t("./document"),a=t("../../util"),r=function(t,e){this.eventHandlers={};for(var n in e)e.hasOwnProperty(n)&&(this.eventHandlers[n]=e[n]);this.searchContext=t.searchContext,this.nativeViewController=t.nativeViewController,this.nativeViewController.addEventListener("needscontent",this.handleNeedsContent.bind(this)),this.nativeViewController.addEventListener("submit",this.handleSubmit.bind(this)),this.nativeViewController.addEventListener("change",this.handleChange.bind(this))};r.prototype.handleNeedsContent=function(t){var e={};e.name=t.storeSearchSegmentTitle,e.context=this.searchContext,this.storeSearchResultsDocumentController=new i(e),a.metrics.track(this.storeSearchResultsDocumentController,{tabIdentifier:TabBar.selectedTab.identifier,entityType:"search"}),this.storeSearchResultsDocumentController.addEventListener("tabPush",this.eventHandlers.tabPush),this.storeSearchResultsDocumentController.addEventListener("trendingTermSelect",this.handleTrendingTermSelect.bind(this)),this.storeSearchResultsDocumentController.addEventListener("selectMediaPickerItem",this.handleSelectMediaPickerItem.bind(this)),this.nativeViewController.setStoreSearchResultsDocument(this.storeSearchResultsDocumentController.el)},r.prototype.handleSubmit=function(t){if(a.metrics.recordSearchEvent(t),this.storeSearchResultsDocumentController){var e=t.term||"",n=t.url;this.storeSearchResultsDocumentController.updateSearchTerm(e,n)}},r.prototype.handleChange=function(t){""===t.term&&this.handleNeedsContent(t)},r.prototype.handleTrendingTermSelect=function(t){this.nativeViewController.setSearchTerm(t.detail.term)},r.prototype.handleSelectMediaPickerItem=function(t){var e=t.detail.productData;this.nativeViewController.selectMediaPickerItem(e)},e.exports=r},{"../../util":391,"./document":357}],359:[function(t,e,n){var i=t("../base").controller,a=t("../../util/"),r=a.loc,l=t("../common").traits.DataProvider,o=t("../common").traits.MediaPicker,s=t("./template.hbs"),c=t("./traits/results"),u=function(t,e){t=t||{},e=e||{},this.loading=!0,this.pickerMode=t.context&&"media-picker"===t.context||!!e.pickerMode,this.largeScreen=!0,this.controllerName="search",this.tabName="search";var n=a.screen.sizeForScreenDimension();("xs"===n||"s"===n||"m"===n)&&(this.largeScreen=!1),o.call(this),c.call(this),i.call(this,t,e),this.pickerMode&&(this.mediaPickerId=void 0!==e.mediaPickerId?e.mediaPickerId:o.register(this)),a.extend(this.onSelect,{"play-button":this.playMedia,"more-link":this.handleMoreLink,"add-button":this.handleLockup,"action-lockup":this.handleActionLockup}),this.model=new l,this.model.addEventListener("dataReady",this.handleDataReady.bind(this))};a.inherit(u,i),a.inherit(u,o,!0),a.inherit(u,c,!0),u.prototype.template=s,u.prototype.get=function(t){this.viewModel={blank:!0},this.loading=!0,this.model.fetchData({url:t,success:this.handleDataSuccess.bind(this),failure:this.handleFailedFetch.bind(this),retries:1}),this.render()},u.prototype.search=function(t,e){this.loading=!0,this.term=t,e||(e=a.urls.build("search",{term:t})),this.get(e)},u.prototype.handleDataSuccess=function(t){return this.model.data=t,this.createView(t)},u.prototype.generateBubbles=function(t){var e=[],n=function(t){return this.model.lookupContent(t,this.processContent)}.bind(this);if(a.keypath(t,"content.length")){var i=[];t.content.forEach(function(t){i.indexOf(t.dkExternalId)<0&&t.dkExternalId&&a.keypath(t,"adamIds.length")&&(i.push(t.dkExternalId),e.push({name:t.dkExternalId,results:t.adamIds.map(n)}))}.bind(this))}return e.length?e:null},u.prototype.createView=function(t){this.errorTitle=null,this.errorMessage=null;var e=t.pageData.bubbles||this.generateBubbles(t.pageData);if(!e)return[];this.term=t.pageData.term;var n=3;this.largeScreen&&(n=6);var i,l=[],o=["album","artist","topResults","song","station","artistStation","songStation","musicVideo","musicPlaylist","brand","activity","auc"],s=a.screen.sizeForScreenDimension();this.pickerMode&&(o=["album","artist","song","musicVideo","musicPlaylist"]);var c=function(t,e,n){t=t.slice(0,100);for(var i=[],a=[],r=0;r<t.length;r++){var l=t[r];a.push(l.id),e>r&&i.push(this.model.lookupContent(l.id,this.processContent))}return this.model.setData(n,a),i}.bind(this);if(e.length>0){this.noresults=!1;for(var u=0;u<e.length;u++){var h,d=e[u].results,p=e[u].name,m=d.length,f={},g=n;if(i=m>n?p:null,o.indexOf(p)>-1){if("topResults"===p&&"xl"===s?g=3:"topResults"===p&&"l"===s&&(g=2),h=c(d,g,i),"topResults"===p)for(var b=0;b<h.length;b++)h[b]=this.setSubtitleForContent(h[b]),h[b].isTopResult=!0;var v=p;"artistStation"===p?v="artist":"songStation"===p&&(v="song"),f.title=r.loc("FUSE.Search.BubbleHeader."+v),f.sectionId=i,f.content=h,l.push(f)}}}else this.noresults=r.loc("FUSE.Search.noResultsFound",{term:this.term});return l},u.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.noresults=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},u.prototype.setSubtitleForContent=function(t){var e="";switch(t.kind){case"album":e=r.loc("FUSE.Search.AlbumBy")+" "+t.artistName;break;case"artist":e=r.loc("FUSE.Artist");break;case"playlist":e=r.loc("FUSE.Playlist");break;case"station":e=r.loc("FUSE.Station");break;case"song":e=r.loc("FUSE.Search.SongBy")+" "+t.artistName;break;case"musicVideo":e=r.loc("FUSE.MusicVideoBy")+" "+t.artistName;break;default:e=t.artistName}return t.line1=e,t},u.prototype.handleDataReady=function(t){this.loading=!1,a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},u.prototype.updateSearchTerm=function(t,e){this.term!==t&&""!==t&&(this.showAboutAppleMusic="aboutapplemusic"===t,this.manifestVersionText=UpdatableAssets.currentManifestVersion(),this.manifestLatestVersionText=UpdatableAssets.newestCachedManifestVersion(),this.search(t,e),this.render())},u.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");e&&(this.get(e),this.render())},u.prototype.getDocumentType=function(){return"stackTemplate"},u.prototype.handleMoreLink=function(t){if(this.pickerMode){var e,n=t.target,i=n.getAttribute("data-section-id");if(this.model.getData&&(e=this.model.getData(i)),e)return this.pushDetailsPage(t,e)}this.pushMorePage(t)},u.prototype.handleRotation=function(){this.viewModel=this.createView(this.model.data),this.render()},e.exports=u},{"../../util/":391,"../base":97,"../common":133,"./template.hbs":362,"./traits/results":363}],360:[function(t,e,n){var i=t("../../util"),a=t("../base").style,r=t("./style.hbs"),l=t("./results"),o=t("../base/document"),s=t("../common").traits.TabComponent,c=function(t,e){t=t||{},t.controllers=t.controllers||[],t.classes=t.classes||[],t.classes.push("search-template"),t.styles=t.styles||[],t.styles.push(new a({styleTemplate:r}));var n=t.data;t.name=n.name;var c,u=i.keypath(t,"event.detail.url");0===t.controllers.length?(c=new l({data:n},{mediaPickerId:i.keypath(t,"event.detail.mediaPickerId"),pickerMode:!!i.keypath(t,"event.detail.pickerMode")}),t.controllers.push(c),u&&c.get(u)):c=t.controllers[0],o.call(this,t,e),s.call(this)};i.inherit(c,o),i.inherit(c,s,!0),c.prototype.documentType="stackTemplate",e.exports=c},{"../../util":391,"../base":97,"../base/document":96,"../common":133,"./results":359,"./style.hbs":361}],361:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return"/* search */\n.search-template {\n    itml-align: center;\n    text-align: center;\n}\n.trending-grid {\n    padding: 9, 0, 0, 0;\n    border-color: rgba(0, 0, 0, 0);\n    itml-align: center;\n    text-align: center;\n}\n.search-results-grid {\n    itml-align: left;\n    text-align: left;\n    padding: 0, 0, 0, 0;\n    itml-item-height: 36;\n    border-color: rgb(235, 235, 235);\n    itml-item-border-margin: 0pt 0pt 0pt 64pt;\n    itml-item-width:100%;\n}\n.trending-header {\n    background-color: rgb(255, 255, 255);\n    padding: 40.0, 16.0, 8.0, 16.0;\n    border-width: 0, 0, 0.5, 0;\n    border-color: rgba(0, 0, 0, 0.2);\n    itml-item-border-margin: 0, 0, 0, 16;\n}\n.trending-title {\n    color: rgb(0, 0, 0);\n    font-size: 22pt;\n    font-weight: light;\n}\n.search-lockup {\n    itml-item-height: 36;\n    font-size: 15pt;\n    padding: 8pt 0 8pt 0;\n}\n.line1 {\n    font-size: 11pt;\n    color: rgb(142, 142, 147);\n}\n.results-divider {\n    font-size: 2pt;\n    padding: 0 0 0 0;\n    itml-margin: 0;\n}\n.no-results-card {\n    padding: 80% 0 20 0;\n}\n.no-results-icon {\n    itml-img-mask-color: rgba(83,83,83,1);\n}\n.no-results-header {\n    color: rgba(83,83,83,1);\n    itml-text-max-lines: 2;\n}\n.grid-section-header {\n    text-align: left;\n    itml-align: left;\n    background-color: rgb(255, 255, 255);\n    padding: 17.5, 16.0, 4.0, 16.0;\n    itml-item-border-margin: 0pt 0pt 0pt 16pt;\n}\n.edge-title {\n    color: rgb(0,0,0);\n    font-size: 12pt;\n}\n\n.action-lockup {\n    itml-item-height: 48;\n    padding: 0pt 16pt 0pt 16pt;\n}\n\n@media all and (min-width: 768pt) {\n    .action-lockup {\n        itml-item-height: 71;\n        padding: 0pt 16pt 0pt 16pt;\n    }\n}\n\n.light-art {\n    margin: 0pt 8pt 0pt 0pt;\n}\n"},useData:!0})},{"hbsfy/runtime":418}],362:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"    <grid>\n        <header>\n            <title>Current version: "+o((a=null!=(a=e.manifestVersionText||(null!=t?t.manifestVersionText:t))?a:l,typeof a===r?a.call(t,{name:"manifestVersionText",hash:{},data:i}):a))+"</title>\n            <title>Latest version: "+o((a=null!=(a=e.manifestLatestVersionText||(null!=t?t.manifestLatestVersionText:t))?a:l,typeof a===r?a.call(t,{name:"manifestLatestVersionText",hash:{},data:i}):a))+"</title>\n        </header>\n    </grid>\n"},3:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='    <title class="trending-title">'+l(r(null!=(a=null!=(a=null!=t?t.viewModel:t)?a.header:a)?a.label:a,t))+"</title>\n    <section ";return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{location:!0,targetType:"section"},data:i}),null!=a&&(s+=a),s+=">\n",a=e.each.call(t,null!=(a=null!=t?t.viewModel:t)?a.trendingSearches:a,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"    </section>\n"},4:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <button class="align-center link tint-color" data-link-url="'+l(r(null!=t?t.url:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"button"},data:i}),null!=a&&(s+=a),s+">"+l(r(null!=t?t.label:t,t))+"</button>\n"},6:function(t,e,n,i){return"    <section></section>\n"},8:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(9,i),inverse:this.program(16,i),data:i}),null!=a&&(r+=a),r},9:function(t,e,n,i){var a,r=e.helperMissing,l='        <grid class="search-results-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+='>\n            <header class="grid-section-header">\n',a=e["if"].call(t,null!=t?t.sectionId:t,{name:"if",hash:{},fn:this.program(10,i),inverse:this.program(12,i),data:i}),null!=a&&(l+=a),l+='            </header>\n        </grid>\n        <grid class="search-results-grid" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+=">\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"        </grid>\n"},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='                    <button type="imagetext" class="more-link" data-section-id="'+l(r(null!=t?t.sectionId:t,t))+'" data-link-title="'+l(r(null!=t?t.title:t,t))+'" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"button"},data:i}),null!=a&&(s+=a),s+">\n                        <title class=\"edge-title\" id='name'>"+l(r(null!=t?t.title:t,t))+'</title>\n                        <img class="edge-chevron" src="resource://ChevronTerms"/>\n                    </button>\n'},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title class="edge-title">'+r(a(null!=t?t.title:t,t))+"</title>\n"},14:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.listLockup,"                ","listLockup",t,{line2:null!=t?t.line2:t,line1:null!=t?t.line1:t,title:null!=t?t.name:t},e,n,i),null!=a&&(r+=a),r},16:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.noresults:t,{name:"if",hash:{},fn:this.program(17,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},17:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return'            <card class="no-results-card">\n                <img width="124" height="128" class="no-results-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAAGACAMAAACKvmluAAADAFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzMPSIAAABAHRSTlMABR86U2h+kqKyws/b4O/0//Lp39FSEF6ApMbk/V04DQQujbr+3a+CVigDF4v494pRFilmoNrZXJ9bFTF9yMd8MDOH3DIt1xp6GE2x+0wi5eJAs7A9WcvKVw5zcQzreHQJBm/o5m0BVMPBLxSX/JUS7WIsxCoHg/r51NI0iITQznC4tERB8PGqu5tlSzclJp291VjzmWweIEKcySECjqV3OwgKP/UThb4RHdY8aTbhR6hGHGQLwEhQbk+RzOok3q4bVWCQiTW8ttOBqw+57nlOOZNF9pSpPsUZhqGPKyOMdb/jnmpfmEPne2N2zbdKZ2HstSdrln+ao6etWqZJrNhyQ5gd9wAAEWVJREFUeAHt3fl/VdW9//F3EsJMeAMaAkQIcghwMEGMRWQSQQElgFQUgSQkDEcQTolWIGIFoQzKpBAN0xElhkkRFSlai0CtAwpaBeXaohY6qC22tlW/6te29/aXO/SHez9r5+y9zt5rr+c/wOPxYj32WVnD3vCLtPSMBpkNGzVu0rRZ8xZZWS1Jtspq3abNec2aNmncqGHm+RnpaXCJlZ3RNqdd+w65FOV2aN8u54KOnVB/Vl7nthd26UCnIl3zu3XvEYVTVs/zL2pfwCQUtu91cW9Yqi4puvQ7dEWfS4t6QGL1vuzSDnRVh76X94MgzPoPGJhLD+QOumIwwklw5ZCh9NDQIVfB+hdXdxtKzw3rdjXCQzB8xDBqMmzENbAQvXZkMTUqzh8VRbiN7jaG2l3XLR3hNfa7uUyJ3OvHIZTybriRKTT+pjyEzYSJLZhibSZ1Qphk52TRB7JyshEWJVdk0SdKy0rCkbyslD5SOrkcpquYMpU+M216GkwWu3kofajPxTBX/xn0qZm3wEyzZufSt+LfmwPzxIoq6Wult8ZgmNu+T9+beTtMMnfefAZAVU4ajNHxDgbEgjthhrk/iDMwiu9KgwFuWchAWXQbgi42uYABU3h3DIHWczEDaEk/BNgPpzKQxixFUMXK4gyo4skxBNKEfHplWdbUNv/UOms5vbKiEwLotj50VVXze+4dsXLV6jX90vA/pPVe2/HaogH33d91Pl217hIEzvpquqVV+wceHFsThSBvw8Ypmza3pFtaNUCwxObRFQXtezXYEoMDiTXdH9o8n26IDIghQOZuZfKqv/vwI9tQL7WPjlhcx+RdWoHA2N6UyVq449EKJGXbxl7rmKyduxAQa/owKfH7p++GK0ZPnJHLpDy2BYHweCmTEGm6pzdcNHzKQCaj9RMIgFF1rL+hDdPhujXz9rL+6p6E711exfqqempsDJ5IPJ1fzPqq6g6f2xNhPU1t2Bse2ndXJespXgRfu7u+zdc9sw0e2//gUNZPZA98rIz186NVMWiQaDContUnGte86Vhoc+BG1stEs5oPOgCdYs8u8vcTRsNv6GOrUnCgsiudi2TCh9pG6Fjlc3lIgbkPL6dj8RvgOz+O06ni5+cgRa65L5dOVa2Cz4wroFNNb0cKXfkTOlWXAV/pUUmHlmfGkFJ5E+vo0MEX4CO9D9Ghw0eQcqO70KE+s+AbtZvpTOlP4QsvLqczM7bBJ6L5dGbxcPjElu/TmRUx+MPPAnxsLTqgmI68BF+4lY4s6AxfWT2UjlwOH3i5kE602w+fyW5CJ+o6I+X6taADVc/Bf2ID4nSg6y6kWPQVOjDmEfjSk5V04NUEUuslOjDoGvjUhqN04DWkVIMI1b1eC986dpzqIqOQQrvfoLpeCfhY2r1UVzocKRP9EZXFM+Fzb0aorEsMqTKCygp/Dt+7bD6VTUaKPDGfquo2IgCuraOqgv5IiZLmVLXsLQTCRvXq68qRCvdR1cGrEBBvLaOqt5ECJyLKza9GYKxWrh5ZCu1qD1HRsjsRIB3rqOhQCXR7iIrqViNQNtb59gHzRDyg8xbZz+dTTW5HaJW2gGrioyAI8Ame89Kg0xVUtAcB9DAVPQyN0k/q3NzS7x2qabkb+jyldRtXv+irVPMutDlFNf+2DQE14SjVbIQmiUVUMu09BNYLWVSyIAo9iqik6hEE2KgIlRRBi2OtqWQ6Ai2HSqZ2gg6/oJJfItgSS6ikGzR4r5oqFpQj4Ha1oIrqnvDeaaqoex+BNy5OFc/Dc7tPUkURDDCPKqpq4LXZVDESJsgbRBWz4bEtVVQwtR+M8EErXwz1vlTRAIbY44ehXlNMBYdhilhTKqgaDi99SAVZw2GMHoVUcBE8dGx5aGYujnYOqrPhnV9RwZkYDJJ2HhWMgGcqzlJW/D6McipCWYcKeOUCKngbhnkqtTeRFlJWOQeGUdqb3AyPZFDBgzDOa1Twcgr/MDqaB+PsP0vZr+GJCXWUPQsDraSsbg688BvKBsVgoLzmlD0HLzSj7ACM9FvKFsEDL1PWFGZKrKPsKrjvd5SNhaFuouxncN3cN8wd6LLYYxRNjcJtF1N2LYz1DGUfwW0rKBqWgLHmfpyCvYySkxSthME+oag0De5aT9HUbTDY9pb6J8zvUtQQRnuHok1wVXk1JfPfg9EGU/RGBdw0iqLXYbjNFJ3QfcToBAz3e81/H8XOUtIiAcN1akXJIc3Ps9dgvAcougTu+QNFPWC8cRRNgXteoeQczJcYQ0kTuKa8kJIyhMCHlFRXwC0/pOgDhEBHih6HW7pRMhBhENtLySdwyxlKJiMULqTkU7hkWyElaxEKGympzoM73qKkD8KhohUl/eGOSZRciJDIp2SPthOUf0RI/EnbneU2FBTUIiRqKBkGV8yh5AxCYxgF8Vq44SNKchAa91Jyp6Y7Lz9EaHxGye/hhl9SULwfobGWktNwwzkKziFEWlOwEy5I1FHwPYTIYQr+DBeMpuRWhMgISo4geasouQUhMkrLkcYpFBSkIUTSKclE8hpR0AyhkkVBLyTvLxS0Q6jM1PEOkMco+ASh8raOGXQ1Bd0RKs9RcFDHctfLCJVRlJQjWZ0pmYVQuY2SvyJZT1JQjXApoeSU968bOQ8h09r7H7k/UDASIbOZgs+9/8rrFwiZwxTM836r5EuEzP/z/t1Or1OQiZAZQsFX3p+Svhkh8ysKliBZP7EbpE63SWciWXdQcCVCZpT3y65tKHgBITPW+/NGBymoQcg8QUEb79fssxEygyl4w0Z3XWcKspAsShA2G2x0Gz0UaihohWRV6Y9uR3oWBXkImdEUVNrZi+sGez9Pb0HBLrjNRm9DwQaETAYFR72/ZNPDrr24vuDVjILVCJkGFIxHsgZScAAhU+T9ZcPFFKxHyLxJwfVI1tcUTEfIXERBX+9fDrgDIXOp9/frdlBwL0JmCQVXeH/75ThC5jwK/uT966S/g5BZ7v1nhzZSUJVAqGyn5C0kqwcl+xAqd1KSjmTVUnIKoXIzBfE0JK2UgrYIlT9Q0AHJW0TBXQiVvhQMQvK+oSAfoXJOx73aXiGbMwryCinopuO7kLmdECK3U/JbLW/dfAQhchMlGUjee5RMR4jsoJad+koKvkKI3E9BCz2vfWiO8MhrSUETTZ/b6YfQeJl69hcyKTkfoTGFkpvghtWUnEZovKvpqzvlxRQ0Q2hMo6AwD644SkGkN0KiMyXjdd3L5v9HSJRR8ra27yv3RUjM1Db+3qfkYAKhkF1MXddqE5WK6w1214gfwy3XUzIEoXApJV/DLZMp6RpDCMxdRsmDGjfA2REhcC1FtwH6HuofIgQaUzItBtesoGRvAsYrr6akMdyzkqJx9gqGy8dRaih6AMZrQknkGrhoISXLa2G4I3FKxmveGWRbGG4ARV/CTRkUfR9mS7SgqL/uD4nzFhjtAEWHYnDVF6H/Kc2n9sWQjyg62RsGW5tL0ZVwV7Q1Rd1gsNmk/kOd71BUWgtj9TuZikGXQdnnMFYOZVfDbbGuFA3Ng6HKSylal6L/6xdhqDLKRsB96bkUda2AkUpKKYrvgwf+QlkmjPQlZZ/CC89StncbDJSdRdlP4YW8jym7GwbaQdnHFan7tw/ugnF211E2D94YnUvZaRjnW8riNfDIEsqKL4FhMiKUHYZXllLBpzBL4kYqeBSeuZEKVsEon1HBOXjnBio4tB8GmXWQCi6Ad/JaUMFDMMhXVLA3DR6aRAXxJ2CMv1HFc/BSSRYVLEiDIUr2UkHpfi3ryoIBMMTzVFEGb00opYKq/jDCiQgVlJZoWlkW3LENBpg1RtdAF5RMo4pGMMD11DbQBXdTReTHCLxMKrkb3iu/jioq0xFw79dRxd650KCISsZvQ6BN6EMlL0KH6HlUch+CLHY9lTRLQIuxVJNpxMFowUZo8ncqqVqNwPpbnEpGQpcthVQypgYB1eMNKin4QP9OreToMQTSrOZUcxf0KelANfdUIIDKm1LN3lpodDMV9Y0hcKJ/p6JnodVhKspB4LxDRYeh1/AsKipDwMyjouX7oFkRFUX2IFAepqrPoVvsjHL1zxAgeyJUtDMG7dYUUlH8chObt9yCFJhEVfFbERDTI1T1G6RCbDFVRaYjEMqorEkMKfHeQSp7E/4X20Fl0/ohRa6NUFmvGHwu+gCVRZ5EynyP6rbOha+VLKG6h5A65euobsZ2+NiRRVS3cC5S6OqWVNdnLXxr8Fmqa/VXpNR6OlC6FD7141ZUF7kYKXYhHYj/KgYfis6L0IFfINXydtKJv3eC72w/TieOR5FyPc/SiWG3w2fubEEn2myHD6wuoBPVRfCT2MQCOnHyKvhC2wgdyZ8F3zjShY5E1sMn7qIzY56GT5z/ZzpzBfwi9hSdiTTqBB+Y05cOfRWDb8ydSYf2rkLK3TSVDnWpgI9kH6VTX/dEStU0oVPNjsFX9p2lU38uSiBl0ia1olNV6fCZtQfpWLOxSJE//oP1MLICPtN/GZ37ZjRS4JJXSZpRPaOOzhX0mgXN3mtUTBpTfWMd66F6yC5o1PP0SYrMr86snGxoMmtINZNzvNaQ6sx6aR802PJ8NZN2v++qj1vG+qn6ajA8tnpFnKSJ1VdXsr7ueTYPnqnoPoOCAFe/ugPr7bqcDfDEmh1TSRpc/YPmrL/cey4ogcuO/X5mhKTZ1XsPYjJOft2gHK4pWf9NAQVGVK99ncmpfv2y7XBBzxdHnqTAmOqJXkxWfMaAt6JIQtq4nIG5FBhVHZlxJm/Zq58srUU9lJz48ng1BQZWP7Ccrije/LPPriyHsv1PPPP2uTgFplZfewddE//HioaXPb4vgf9DtOZU25xvmudSYHb1kqfosqrmx7c2avj5+hOPDh68dkNN+oa/Dh489ukbHsx5+9t7us6nLATVMamY2tnqpz621fUbvtNW1y86othW1++toQyY79zorHoJ/KfkdxEGSOSd2mMD6cTAY/ChVR0YGHufBGBE9exNEQZC5IEJgCnV8XRXBsDQpQAMql77i/n0uap52wCzquP9mfS1+y8BYFz12A0d6FvX3QTAxOoo2XGSvlT3Wi1ganXsbpxL38ntewSAwdXR/1P6SyR/MADDq6Ojr7J/2hH/u2ODjKmOR8/QJ3Z2FGa695tTHWN30gdeGQuBWdVx57fFTKn57a6CwLzqSP9wOVNmWa/dEJhZHccmd2VKdP33ThCYWx2JE+9WUbOCrz+KQWB2dWDWxHXUaN2kWZAlVX18PwTA47NbU4vWszMgS7r6gn4IgrwDmyrpscpNH0UhMK66IC3Z7kLxA2kQGFpdED310h30wNEfjItCYHZ1we5btx6ki1pv/Ww3BLY6ELs98+vr6IK9WzN7xPBfbHXJ8PN/8Eol6+3jLkMuHg5ZGKsLap79pF2zQjpy8ie/nvRRb8jCXV2QSN+4csi3TQ9VCZv5h5p+O2Tl0vQEvFP7XfOqC7b3ONXgmcnzTm9qnJ9//Mw/Hc/Pb7zp9LzJzzQ41WMOdKgY6bS6Zavb6patbqtbtrqt7lO2uq3eZx8s7dWb2+q2uq1u2eohrG4JKg7rr25F29nqtrrP2Oq2umWr2+qWrW6rW7a6rS6w1TfA0l797AvwM1vdstVtdSv6O/3VrdgXtrqt7jO2uq1u2eq2umWr2+qWrW6rC2z14bC0Vx9fC0t79SZRWNqrN47BSl7seTrxRQwusIbY6rZ6OKsLLoJ+tvqb0M5Wj/wU2tnqdZ2hna3eLA3a2epl0M5Wz8qGdrb6AGhnq7eBfrZ6Z2hnqxdBO1v9C2hnqx+Ge6wRVHIGLrLKqOJVaGerb4V2tnoOtLPVR0E3W72wBLrZ6iugna0+DrrZ6iOhm62+bAs0s9WXrYYGtrrG5ra6/ubWnmr9za0tXfivZrwPy3OP5BfwP8UX/xFaWMe691q8sM3CV965oCf+238AluL5xRThNTgAAAAASUVORK5CYII="/>\n            </card>\n            <card class="no-results-header">\n                <header>\n                    <title maxLines="0" class="no-results-title">'+o((a=null!=(a=e.noresults||(null!=t?t.noresults:t))?a:l,typeof a===r?a.call(t,{name:"noresults",hash:{},data:i}):a))+"</title>\n                </header>\n            </card>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.showAboutAppleMusic:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.trendingSearches:a,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),a=e["if"].call(t,null!=(a=null!=t?t.viewModel:t)?a.blank:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.program(8,i),data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],363:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("../../../util"),l={product:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55],xxl:[55,55]},productChild:{xs:[20,20],s:[20,20],m:[20,20],l:[30,30],xl:[30,30],xxl:[30,30]},video:{xs:[40,30],s:[40,30],m:[40,30],l:[73,55],xl:[73,55],xxl:[73,55]},profile:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55],xxl:[55,55]},track:{xs:[40,40],s:[40,40],m:[40,40],l:[55,55],xl:[55,55],xxl:[55,55]}},o=function(){};o.prototype._pushPage=function(t,e,n){var i={mediaPickerId:this.mediaPickerId,pickerMode:this.pickerMode,data:n,dataType:t,url:n.url,navigationDocument:e.target.ownerDocument.navigationDocument};this.dispatchEvent(new a("tabPush",{detail:i}))},o.prototype.pushResultsPage=function(t,e){this._pushPage("search_results_page",t,e)},o.prototype.pushDetailsPage=function(t,e){if(void 0===e.name){var n=t.target.getElementsByTagName("title").item(0);n&&(e.name=n.innerHTML)}this._pushPage("search_details_page",t,e)},o.prototype.handleActionLockup=function(t){if(this.pickerMode){var e=t.target.getAttribute("data-content-id"),n=this.model.lookupContent(e);if("album"===n.kind||"playlist"===n.kind)return void this.pushDetailsPage(t,n);if("artist"===n.kind)return void this.pushResultsPage(t,n)}this.handleLockup(t)},o.prototype.processContent=function(t){var e=r.artwork.getArtworkForContent({content:t,artworkMap:l}),n=r.lockup.setArtworks(t,e,l);return n.line1=r.lockup.line1(n),n.isExplicit=r.lockup.isExplicit(n),n[t.kind]=!0,"playlist"===t.kind&&t.itunesNotes&&(n.line1=t.itunesNotes["short"]||t.itunesNotes.standard),"artist"===t.kind&&(n.unpickable=!0),n},e.exports=o},{"../../../util":391,itml:435}],364:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=i.controller.MultiElementController,l=t("../../util/"),o=t("../common").traits.DataProvider,s=t("./template.hbs"),c=t("../common/traits/event_map"),u=t("../common/traits/tab_component"),h=function(t,e){t=t||{},t.events=t.events||[],t.events.push("select"),t.events.push("holdselect"),this.loading=!0,r.call(this,t,e),c.call(this,t),u.call(this),l.extend(this.onSelect,{link:this.handleLink}),this.model=new o,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.get()};l.inherit(h,r),l.inherit(h,c,!0),l.inherit(h,u,!0),h.prototype.template=s,h.prototype.get=function(){this.loading=!0;var t=l.urls.trendingSearches();this.model.fetchData({url:t,success:this.createTrendingSearchesView.bind(this),failure:this.handleFailedFetch.bind(this)})},h.prototype.createTrendingSearchesView=function(t){return this.errorTitle=null,this.errorMessage=null,t.trendingSearches&&0===t.trendingSearches.length?{blank:!0}:t},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.handleDataReady=function(t){this.loading=!1,l.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.render()},h.prototype.getDocumentType=function(){return"trendingSearchTemplate"},h.prototype.handleLink=function(t){var e=t.target.getAttribute("data-link-url");if(e){var n=e.lastIndexOf("term=")+5,i=e.slice(n).indexOf("&");i=0>i?e.length-n:i;var r=decodeURIComponent(e.substr(n,i));l.metrics.recordSearchEvent.call(this,{actionUrl:e,term:r,actionType:"trending",targetType:"listItem"}),this.dispatchEvent(new a("trendingTermSelect",{detail:{url:e,term:r}}))}},e.exports=h},{"../../util/":391,"../common":133,"../common/traits/event_map":150,"../common/traits/tab_component":154,"./template.hbs":362,itml:435}],365:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=a.keypath,l=a.loc,o=i.event.Event,s=i.controller.MultiElementController,c=t("../common").traits.DataProvider,u=t("./template.hbs"),h=function(t,e){
t=t||{},t.data=t.data||{},t.events=t.events||[],this.viewModel=[],this.loading=!0,this.shareType="content",t.data.content?(this.data=t.data.content,this.shareType=t.data.shareType||this.shareType):t.data.event&&(this.data=this.getShareDataFromEvent(t.data.event),this.shareType=this.data.shareType||this.shareType),s.call(this,t,e),"custom"===this.shareType&&this.processCustomContent(t.data),this.data&&(this.model=new c({data:this.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.dataSuccess(this.model.data,{success:this.handleData.bind(this),failure:this.handleFailedFetch.bind(this)}))};a.inherit(h,s),h.prototype.template=u,h.prototype.handleShareSubmit=function(t){if("connect-post"===this.shareType){var e,n=this.data&&this.data.id,i=t&&t.activityType;"function"==typeof a.urls.incrementShareCount&&(e=a.urls.incrementShareCount()),n&&e&&i&&a.xhr({method:"POST",url:e+a.query.build({activities:n}),failure:this.handleShareSubmitFailure})}},h.prototype.handleShareSubmitFailure=function(t){a.log.error("Connect: share submit failed. "+t)},h.prototype.getShareDataFromEvent=function(t){var e,n,i,r={},l=t.entityValueProvider,o=l.valueForEntityProperty("metadata")||l.valueForEntityProperty("sidePackData");if(l&&(e=l.valuesForEntityProperties(["subscriptionStoreItemAdamID","storeItemAdamID","albumStoreID","artistStoreID","musicRadioStationStationStringID","playlistStoreID"])||{},i=e.playlistStoreID,n=l.valuesForEntityProperties(["playlistShareURL","name"])||{}),e.subscriptionStoreItemAdamID&&"0"!==e.subscriptionStoreItemAdamID)return{id:e.subscriptionStoreItemAdamID};if(o)r=o;else if(i){var s=n.playlistShareURL;s&&0!==s.length||(s=a.urls.build("playlist",{id:i})),r={id:i,url:s,shareType:"playlist",name:n.name}}else if(e)for(var c in e)if(e[c]&&"0"!==e[c]){r={id:e[c]};break}return r},h.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},h.prototype.handleData=function(t){this.errorTitle=null,this.errorMessage=null;var e=this.model.lookup(t.id);if("connect-post"===this.shareType)e=this.processPost(t);else if(e||"playlist"!==this.shareType)t.id&&(e=this.model.lookupContent(t.id,this.processContent.bind(this,t)));else{var n=itms.accountInfo.firstName;e={url:t.url,title:this.getShareText("ConnectPost.Playlist",{name:t.name,artist:n,playlistName:t.name,playlistCreator:n})}}return e&&this.viewModel.push(e),this.viewModel},h.prototype.processContent=function(t,e){var n,i,r={},o=e||{},s=o.kind||"default",c=a.artwork.getArtworkForContent({content:o}),u="artist"===o.kind?o.name:o.artistName||o.curatorName||o.brandName||l.loc("FUSE.AppleMusic"),h=c&&c.image&&c.image.url,d=o.shortUrl||o.url||t.url,p=o.collectionName,m=o.title||t.name,f=o.name||t.name,g=o.postId;switch(h&&(r.image=h),d&&(r.url=d),o.url&&(r.fullUrl=o.url),g&&(r.url=o.url||a.urls.post()+g.replace("sa.","")),"iTunesBrand"!==s||o.artistName||(s="curator"),s){case"brand":n="Brand",i={brand:f};break;case"curator":n="Curator",i={curator:f};break;case"artist":n="Artist",i={artist:u};break;case"track":case"song":n="Song",i={name:f,collection:p,artist:u};break;case"video":case"musicVideo":n="Video",i={name:f,artist:u};break;case"playlist":n="Playlist",i={name:f,artist:u,playlistName:f,playlistCreator:u};break;case"album":n="Album",i={name:f,artist:u};break;case"radioStation":case"station":n="RadioStation",i={name:f,stationName:f};break;case"uploadedAudio":n="ArtistUploadedAudio",i={name:m||f,artist:u};break;case"uploadedVideo":n="ArtistUploadedVideo",i={name:m||f,artist:u};break;case"default":n="Default",i={name:f||m};break;default:n="Default",i={name:f||m}}return r.title=this.getShareText("Content."+n,i),r},h.prototype.processCustomContent=function(t){var e=t.content||{},n={};e.imageUrl&&(n.image=e.imageUrl),e.url&&(n.url=e.url,n.fullUrl=e.url),e.title&&(n.title={mail:e.title.mail,message:e.title.message,twitter:e.title.twitter,facebook:e.title.facebook,"default":e.title["default"]}),this.viewModel.push(n),this.render(),this.dispatchEvent(new o("shareDataReady"))},h.prototype.processPost=function(t){var e,n={},i={},o=t.message||"",s=t.content&&t.content[0]||{},c=t.target&&t.target.type||"default",u=r(t,"author.image.url"),h=r(t,"author.fullName")||r(t,"owner.name"),d=s.image&&s.image.url,p=t.url||a.urls.post()+t.id,m=s.aucType||l.loc("FUSE.UserSharing.ConnectPost.DefaultAudioAUC");switch(h?n.author=h:s.artistName?n.author=s.artistName:t.admin&&t.admin.name&&(n.author=t.admin.name),n.author=n.author.replace("<b>","").replace("</b>",""),o&&(n.message=o),u&&(i.image=d||u),p&&(i.url=p),s.artistName?n.artistName=n.artist=s.artistName:n.author&&(n.artistName=n.author),s.name&&(n.name=s.name),"iTunesBrand"===c&&s.kind&&(c=s.kind),c){case"artist":case"brand":case"curator":e="Artist";break;case"track":case"song":e="Song",n.songName=s.name,n.albumName=s.collectionName;break;case"video":case"musicVideo":e="Video",n.videoName=s.name;break;case"playlist":e="Playlist",n.playlistName=s.name,n.playlistCreator=s.playlistBy.split(" ")[2];break;case"album":e="Album",n.albumName=s.name;break;case"radio":case"station":case"radioStation":e="RadioStation",n.stationName=s.name;break;case"uploadedAudio":e="ArtistUploadedAudio",n.aucType=m,n.songName=s.name;break;case"uploadedVideo":e="ArtistUploadedVideo",n.videoName=s.name;break;case"default":e="Default"}return i.title=this.getShareText("ConnectPost."+e,n),i},h.prototype.getShareText=function(t,e){return{mail:l.loc("FUSE.UserSharing."+t+".Mail",e),message:l.loc("FUSE.UserSharing."+t+".Message",e),facebook:l.loc("FUSE.UserSharing."+t+".Facebook",e),twitter:l.loc("FUSE.UserSharing."+t+".Twitter",e),"default":l.loc("FUSE.UserSharing."+t+".Default",e)}},h.prototype.handleDataReady=function(t){a.keypath(t,"detail.view")&&(this.viewModel=t.detail.view),this.loading=!1,this.render(),this.dispatchEvent(new o("shareDataReady"))},e.exports=h},{"../../util":391,"../common":133,"./template.hbs":367,itml:435}],366:[function(t,e,n){var i=t("itml"),a=t("../../util"),r=i.controller.DocumentController,l=t("./element"),o=function(t,e){t=t||{},t.data=t.data||{},t.classes=t.classes||[],t.classes.push("template"),t.controllers=t.controllers||[],0===t.controllers.length&&(this.controller=new l({data:t.data}),t.controllers.push(this.controller)),r.call(this,t,e),this.controller&&(this.el.addEventListener("submit",this.controller.handleShareSubmit.bind(this.controller)),this.addEventDelegates(this.controller,["shareDataReady"]))};a.inherit(o,r),o.prototype.documentType="shareTemplate",e.exports=o},{"../../util":391,"./element":365,itml:435}],367:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="    \n";return a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},2:function(t,e,n,i){var a,r="";return a=e["if"].call(t,i&&i.first,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n"},3:function(t,e,n,i){var a,r='\n            <activity type="message">\n                ';return a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="mail">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"if",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="twitter">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"if",hash:{},fn:this.program(12,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="facebook">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"if",hash:{},fn:this.program(14,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="more">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="airdrop">\n                ',a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.fullUrl:t,{name:"if",hash:{},fn:this.program(18,i),inverse:this.program(20,i),data:i}),null!=a&&(r+=a),r+='\n            </activity>\n            <activity type="*">\n                ',a=e["if"].call(t,null!=t?t.image:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"if",hash:{},fn:this.program(16,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n                ",a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"\n            </activity>\n\n"},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<img src="'+r(a(null!=t?t.image:t,t))+'"/>'},6:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<text>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.message:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},8:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"<url>"+r(a(null!=t?t.url:t,t))+"</url>"},10:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<text>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.mail:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},12:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<text>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.twitter:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},14:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<text>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a.facebook:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},16:function(t,e,n,i){var a,r=e.helperMissing,l=this.escapeExpression;return"<text>"+l((e.formatPlainTextMentions||t&&t.formatPlainTextMentions||r).call(t,null!=(a=null!=t?t.title:t)?a["default"]:a,{name:"formatPlainTextMentions",hash:{},data:i}))+"</text>"},18:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return"<url>"+r(a(null!=t?t.fullUrl:t,t))+"</url>"},20:function(t,e,n,i){var a,r="\n                ";return a=e["if"].call(t,null!=t?t.url:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],368:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='        <lockup class="top-charts-lockup-column action-lockup" type="list" ';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-url="'+o(l(null!=t?t.url:t,t))+'" ',a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=e["if"].call(t,null!=t?t.postUrl:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+o(l(null!=t?t.id:t,t))+'" data-content-kind="'+o(l(null!=t?t.kind:t,t))+'" ',a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n            <ordinal class="top-charts-ordinal">'+o((e.increment||t&&t.increment||r).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+"</ordinal>\n            "+o((e.productArtwork||t&&t.productArtwork||r).call(t,t,{name:"productArtwork",hash:{},data:i}))+"\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(8,i),inverse:this.program(11,i),data:i}),null!=a&&(s+=a),s+="\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(13,i),inverse:this.program(15,i),data:i}),null!=a&&(s+=a),s+'            <button type="image" class="action-button" data-content-id="'+o(l(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n        </lockup>\n'},2:function(t,e,n,i){return'disabled="true"'},4:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},6:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'post-url="'+r(a(null!=t?t.postUrl:t,t))+'"'},8:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='                <title class="top-charts-title title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="1">'+o(l(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},9:function(t,e,n,i){return"-disabled"},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <title class="top-charts-title" maxLines="1">'+r(a(null!=t?t.name:t,t))+"</title>\n"},13:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="top-charts-one-line">\n                    <span>'+r(a(null!=t?t.artistName:t,t))+"  "+r(a(null!=t?t.collectionName:t,t))+"</span>\n                </subtitle>\n"},15:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                <subtitle class="top-charts-one-line">\n                    <span>'+r(a(null!=t?t.artistName:t,t))+"</span>\n                </subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='<column class="no-borders-grid" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"column"},data:i}),null!=a&&(s+=a),s+="> \n    <header>\n        <title>"+o(l(null!=t?t.title:t,t))+"</title>\n    </header>\n\n",a=e.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+"</column>\n"},useData:!0})},{"hbsfy/runtime":418}],369:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),l=t("../../common").traits.DataProvider,o=i.controller.MultiElementController,s=t("../../common").traits.TabComponent,c=t("../../common").traits.EventMap,u=t("../../base").style,h=t("../style.hbs"),d=t("itml").utils.Handlebars,p=i.event.Event,m=a.artwork,f=t("../../filter"),g=function(e,n){e=e||{},e.styles=e.styles||[],e.styles.push(new u({styleTemplate:h})),e.events=e.events||[],e.events.push("holdselect","disabledButSelectedEvent","select"),e.entityProviders=e.entityProviders||[],e.classes=e.classes||[],d.registerPartial("chart_partial",t("../chart_partial.hbs")),this.loading=!0,this.controllerName="top_charts",this.artworkMap={track:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42],xxl:[42,42]},product:{xs:[42,42],s:[42,42],m:[42,42],l:[42,42],xl:[42,42],xxl:[42,42]},video:{xs:[56,32],s:[56,32],m:[56,32],l:[56,32],xl:[56,32],xxl:[56,32]}},o.call(this,e,n),c.call(this,e),s.call(this,e),this.chartTitles=e.chartTitles,a.extend(this.onSelect,{"play-button":this.playMedia}),this.model=new l({maxContentSize:150}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.model.fetchData({url:e.data.seeAllUrls[0],success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})};a.inherit(g,o),a.inherit(g,c,!0),a.inherit(g,s,!0),g.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},g.prototype.handleDataReady=function(){this.loading=!1,this.render()},g.prototype.processData=function(t){var e=t.pageData&&t.pageData.topCharts||[],n=[],i=0,a=0;for(i=0;i<e.length;i++)for(n[i]={},n[i].content=[],n[i].title=e[i].shortTitle,a=0;a<e[i].adamIds.length;a++)n[i].content.push(this.model.lookupContent(e[i].adamIds[a],this.processContent.bind(this)));return n},g.prototype.showGenreFilter=function(){if(this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children){var t=[],e=this.model.data.pageData.categoryList;e.name=e.parentCategoryLabel,t.push(e),t.push.apply(t,this.model.data.pageData.categoryList.children),this.filterModal=new f({filters:t,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})}},g.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};this.dispatchEvent(new p("genre-selected",{detail:i})),modal.popDocument(),this.hasData=!1,this.model.data=null,this.model.viewModel=null,this.loading=!0,this.render(),this.model.fetchData({url:n,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},g.prototype.handleFilterCancellation=function(){modal.popDocument()},g.prototype.processContent=function(t){var e=m.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},g.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.processData(t)},g.prototype.template=r,e.exports=g},{"../../../util":391,"../../base":97,"../../common":133,"../../filter":243,"../chart_partial.hbs":368,"../style.hbs":377,"./template.hbs":370,itml:435}],370:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},4:function(t,e,n,i){var a,r="";return a=e.each.call(t,null!=(a=null!=t?t.model:t)?a.viewModel:a,{name:"each",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},5:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.chart_partial,"            ","chart_partial",t,void 0,e,n,i),null!=a&&(r+=a),r},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.model:t,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],371:[function(t,e,n){var i=t("../../util"),a=t("../base/document"),r=t("./column_chart/element"),l=t("./menu_bar/element"),o=t("../common").traits.TabComponent,s=t("./title.hbs"),c=t("../base").style,u=i.loc,h=function(t,e){t=t||{},t.controllers=t.controllers||[],t.styles=t.styles||[],t.styles.push(new c),t.name=u.loc("FUSE.New.TopCharts.HeaderTitle");var n,h=i.screen.sizeForScreenDimension();"xs"===h||"s"===h||"m"===h?(t.documentType="menuBarTemplate",n=new l(t),t.controllers.push(n)):(t.documentType="chartsTemplate",t.watchedAttributes=t.watchedAttributes||[],t.watchedAttributes.push("type"),t.type="modern",n=new r(t),t.controllers.push(n)),this.titleTemplate=s,a.call(this,t,e),o.call(this,t),this.navigationBarController.shouldShowSearchButton=!1,n&&(this.controller=n,this.controller.addEventListener("genre-enabled",this.enableGenreFiler.bind(this)),this.controller.addEventListener("genre-selected",this.handleSelectedGenre.bind(this)))};i.inherit(h,a),i.inherit(h,o,!0),h.prototype.enableGenreFiler=function(){this.navigationBarController.showGenres=!0,this.navigationBarController.genreTitle=u.loc("FUSE.TopCharts.Genres"),this.navigationBarController.render();var t=this.el.getElementById("genre-selector");t&&t.addEventListener("select",this.controller.showGenreFilter.bind(this.controller))},h.prototype.handleSelectedGenre=function(t){var e={};e.name=t.detail.selectedFilter,e.url=t.detail.url,this.el.getElementById("genreName").innerHTML=e.name.replace("&","&amp;")},e.exports=h},{"../../util":391,"../base":97,"../base/document":96,"../common":133,"./column_chart/element":369,"./menu_bar/element":372,"./title.hbs":378}],372:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.BaseController,l=i.controller.MenuBarController,o=t("../segmented_chart"),s=t("../../common").traits.DataProvider,c=t("../../common").traits.TabComponent,u=t("./template.hbs"),h=i.event.Event,d=a.artwork,p=t("../../filter"),m=function(t){t=t||{},t.controllers=t.controllers||[],this.data=t.data,this.loading=!0,this.index=0,this.hasData=!!this.data.topChartsSidePack,this.currentUrl=this.data.seeAllUrls[0],this.menuItemDocumentControllers=[],this.template=u,this.menuItems=[],this.artworkMap={track:{xs:[40,40],s:[40,40],m:[40,40],l:[40,40],xl:[40,40],xxl:[40,40]},product:{xs:[54,54],s:[54,54],m:[54,54],l:[54,54],xl:[54,54],xxl:[54,54]},video:{xs:[100,56],s:[100,56],m:[100,56],l:[100,56],xl:[100,56],xxl:[100,56]}},this.model=new s,this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),r.call(this,t),l.call(this,t),c.call(this,t),this.addEventListener("needscontent",this.menuBarNeedsContent.bind(this)),this.get(this.currentUrl)};a.inherit(m,r),a.inherit(m,l),a.inherit(m,c,!0),m.prototype.enableGenreFiler=function(){this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children&&this.dispatchEvent(new h("genre-enabled",{detail:{}}))},m.prototype.showGenreFilter=function(){if(this.model.data&&this.model.data.pageData.categoryList&&this.model.data.pageData.categoryList.children){var t=[],e=this.model.data.pageData.categoryList;e.name=e.parentCategoryLabel,t.push(e),t.push.apply(t,this.model.data.pageData.categoryList.children),this.filterModal=new p({filters:t,selectedFilter:this.selectedFilter,selectCallback:this.handleFilterSelection.bind(this),cancelCallback:this.handleFilterCancellation.bind(this)}),modal.pushDocument(this.filterModal.el,{})}},m.prototype.handleFilterSelection=function(t){var e=t.target,n=e.getAttribute("data-link-url");this.currentUrl=n,this.selectedFilter=e.getAttribute("label");var i={selectedFilter:this.selectedFilter,url:n};modal.popDocument(),this.hasData=!1,this.model.data=!1;var a=0;for(a=0;a<this.menuItemDocumentControllers.length;a++){var r=this.menuItemDocumentControllers[a];r&&r.controller.clearViewData()}this.dispatchEvent(new h("genre-selected",{detail:i})),this.menuItemDocumentControllers=[],this.menuItems=[],this.get(n)},m.prototype.handleFilterCancellation=function(){modal.popDocument()},m.prototype.getIndexForMenuItem=function(t){var e,n=this.el.getElementsByTagName("menuItem");for(e=0;e<n.length&&n.item(e)!==t;e++);return e},m.prototype.processContent=function(t){var e=d.setArtworkForContent(t,this.artworkMap);return e.isExplicit=a.lockup.isExplicit(e),e},m.prototype.processData=function(t){var e=0,n=0,i=[],a=t.pageData&&t.pageData.topCharts||[];for(e=0;e<a.length;e++)for(i[e]={},i[e].content=[],this.menuItems[e]={},this.menuItems[e].title=t.pageData.topCharts[e].shortTitle,n=0;n<t.pageData.topCharts[e].adamIds.length;n++)i[e].content.push(this.model.lookupContent(t.pageData.topCharts[e].adamIds[n],this.processContent.bind(this)));return i},m.prototype.handleDataFetchSuccess=function(t){return this.errorTitle=null,this.errorMessage=null,this.model.data=t,this.enabledGenreFiler||(this.enableGenreFiler(),this.enabledGenreFiler=!0),this.processData(t)},m.prototype.handleDataReady=function(t){if(a.keypath(t,"detail.view")){var e=0,n={};for(e=0;e<this.model.data.pageData.topCharts.length;e++){n.index=e,n.data=t.detail.view[e];var i=this.createDocumentController(n);this.menuItemDocumentControllers[e]=i}}this.loading=!1,this.render()},m.prototype.setDataForDocumentControllers=function(t){var e=0;for(e=0;e<this.menuItemDocumentControllers.length;e++)this.menuItemDocumentControllers[e].handleDataReady(t)},m.prototype.handleFailedFetch=function(t,e,n){this.loading=!1,this.errorTitle=n,this.errorMessage=e||t.error||t.serviceError,this.handleDataReady()},m.prototype.get=function(t){this.model.fetchData({url:t,success:this.handleDataFetchSuccess.bind(this),failure:this.handleFailedFetch.bind(this)})},m.prototype.createDocumentController=function(t){var e=new o(t);return this.addEventDelegates(e,c.prototype.tabDelegatedEvents),e},m.prototype.menuBarNeedsContent=function(t){this.currentMenuItem=t.target;var e=this.getIndexForMenuItem(this.currentMenuItem);this.setDocumentForItem(this.menuItemDocumentControllers[e].el,this.currentMenuItem),this.dispatchEvent(new h("menuBarChangedContent",{detail:{index:e}}))},e.exports=m},{"../../../util":391,"../../common":133,"../../filter":243,"../segmented_chart":375,"./template.hbs":373,itml:435}],373:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.loading,"    ","loading",t,void 0,e,n,i),null!=a&&(r+=a),r},3:function(t,e,n,i){var a,r=e.helperMissing,l="    <menuItem>\n        <title>";return a=(e.escapeText||t&&t.escapeText||r).call(t,null!=t?t.title:t,{name:"escapeText",hash:{},data:i}),null!=a&&(l+=a),l+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=e["if"].call(t,null!=t?t.loading:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+="\n",a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],374:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=t("./template.hbs"),l=i.controller.MultiElementController,o=t("../../common").traits.TabComponent,s=t("../../common").traits.EventMap,c=t("../../base").style,u=t("../../common").traits.DataProvider,h=function(t,e){t=t||{},t.styles=t.styles||[],t.styles.push(new c),t.events=[],t.events.push("holdselect","disabledButSelectedEvent","select"),t.entityProviders=t.entityProviders||[],this.menuItemIndex=t.index,t.classes=t.classes||[],this.model=new u({data:t.data}),this.model.addEventListener("dataReady",this.handleDataReady.bind(this)),this.controllerName="top_charts",this.viewModel=this.model.data.content,l.call(this,t,e),s.call(this,t),a.extend(this.onSelect,{"play-button":this.playMedia}),o.call(this,t)};a.inherit(h,l),a.inherit(h,s,!0),a.inherit(h,o,!0),h.prototype.setViewData=function(t){this.loading=!1,this.viewModel=t.view[this.menuItemIndex]?t.view[this.menuItemIndex].content:null,this.model.data=t,this.render()},h.prototype.handleDataReady=function(t){this.viewModel=t.detail.view,this.model.data=t.detail,this.loading=!1,this.render()},h.prototype.clearViewData=function(){this.viewModel=null,this.loading=!0,this.render()},h.prototype.template=r,e.exports=h},{"../../../util":391,"../../base":97,"../../common":133,"./template.hbs":376,itml:435}],375:[function(t,e,n){var i=t("itml"),a=t("../../../util"),r=i.controller.DocumentController,l=t("./element"),o=t("../../common").traits.TabComponent,s=i.event.EventDelegate,c=function(t,e){t=t||{},t.controllers=[],this.documentType="stackTemplate",this.controller=new l(t),t.controllers.push(this.controller),s.call(this,t,e),r.call(this,t,e),o.call(this,t,e)};a.inherit(c,r),a.inherit(c,o,!0),c.prototype.handleDataReady=function(t){this.controller.setViewData(t)},e.exports=c},{"../../../util":391,"../../common":133,"./element":374,itml:435}],376:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r=e.helperMissing,l='    <grid class="track-list-ordered" ';return a=(e["data-metrics"]||t&&t["data-metrics"]||r).call(t,{name:"data-metrics",hash:{location:!0,targetType:"grid"},data:i}),null!=a&&(l+=a),l+="> \n",a=e.each.call(t,null!=t?t.viewModel:t,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(l+=a),l+"    </grid>\n"},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=e.helperMissing,s='            <lockup class="'+l(r(null!=t?t.kind:t,t))+' action-lockup chart-lockup" type="list" data-url="'+l(r(null!=t?t.url:t,t))+'" ';return a=e.unless.call(t,null!=t?t.radioStation:t,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=e["if"].call(t,null!=t?t.postUrl:t,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=' data-content-id="'+l(r(null!=t?t.id:t,t))+'" data-content-kind="'+l(r(null!=t?t.kind:t,t))+'" ',a=(e.shouldDisable||t&&t.shouldDisable||o).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+=" ",a=(e["data-metrics"]||t&&t["data-metrics"]||o).call(t,{name:"data-metrics",hash:{impressions:!0,click:!0,location:!0,targetType:"lockup"},data:i}),null!=a&&(s+=a),s+='>\n                <ordinal style="color: rgb(142,142,147); font-size: 15pt; font-weight: regular;">'+l((e.increment||t&&t.increment||o).call(t,i&&i.index,{name:"increment",hash:{},data:i}))+'</ordinal>\n                <img class="light-art play-button" width="'+l(r(null!=(a=null!=t?t.image:t)?a.width:a,t))+'" height="'+l(r(null!=(a=null!=t?t.image:t)?a.height:a,t))+'" data-content-id="'+l(r(null!=t?t.id:t,t))+'" src="'+l(r(null!=(a=null!=t?t.image:t)?a.url:a,t))+'" alt="'+l(r(null!=t?t.name:t,t))+'">\n                    <button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+l(r(null!=t?t.id:t,t))+"\" type='play'/>\n                </img>\n\n",a=e["if"].call(t,null!=t?t.isExplicit:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.program(12,i),data:i}),null!=a&&(s+=a),
s+="\n",a=e["if"].call(t,null!=t?t.collectionName:t,{name:"if",hash:{},fn:this.program(14,i),inverse:this.program(16,i),data:i}),null!=a&&(s+=a),s+'                <button type="image" class="action-button" data-content-id="'+l(r(null!=t?t.id:t,t))+'"><img src="resource://UniversalActionControl"/></button>\n            </lockup>\n'},3:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'data-preview-id="'+r(a(null!=t?t.id:t,t))+'"'},5:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'post-url="'+r(a(null!=t?t.postUrl:t,t))+'"'},7:function(t,e,n,i){return'disabled="true"'},9:function(t,e,n,i){var a,r=e.helperMissing,l=this.lambda,o=this.escapeExpression,s='                    <title class="top-charts-title title';return a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+='" maxLines="2">'+o(l(null!=t?t.name:t,t))+' <badge class="explict-badge',a=(e.shouldDisable||t&&t.shouldDisable||r).call(t,t,{name:"shouldDisable",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(s+=a),s+'" src="resource://explicit"/></title>\n'},10:function(t,e,n,i){return"-disabled"},12:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <title class="top-charts-title" maxLines="2">'+r(a(null!=t?t.name:t,t))+"</title>\n"},14:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="top-charts-one-line">\n                        <span>'+r(a(null!=t?t.artistName:t,t))+"  "+r(a(null!=t?t.collectionName:t,t))+"</span>\n                    </subtitle>\n"},16:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'                    <subtitle class="top-charts-one-line">\n                        <span>'+r(a(null!=t?t.artistName:t,t))+"</span>\n                    </subtitle>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r="";return a=this.invokePartial(n.commonStates,"","commonStates",t,void 0,e,n,i),null!=a&&(r+=a),r+="\n",a=e["if"].call(t,null!=t?t.viewModel:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r},usePartial:!0,useData:!0})},{"hbsfy/runtime":418}],377:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return".song {\n	itml-item-height: 60;\n}\n\n.album {\n	itml-item-height: 54;\n}\n\n.top-charts-lockup-column {\n    itml-item-height: 46;\n    itml-padding: 2pt 0 2pt 0;\n}\n\n.top-charts-ordinal {\n    color: rgb(142,142,147);\n    font-size: 15pt;\n    font-weight: regular;\n}\n\n.caption-title {\n    color: rgba(255, 255, 255, 1.0);\n    font-size: 13pt;\n    itml-padding: 0pt 16pt 0pt 16pt;\n}\n\n.chart-lockup {\n    itml-padding: 5pt 0pt 5pt 0pt;\n}\n\n.top-charts-title {\n    font-size: 14pt;\n}\n\n.top-charts-one-line {\n    font-size: 12pt;\n}"},useData:!0})},{"hbsfy/runtime":418}],378:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'<button type="imagetext" class="align-right" id="genre-selector">\n    <text id=\'genreName\'>'+r(a(null!=t?t.genreTitle:t,t))+"</text>\n</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c='<title id="name" class="align-center">'+s((r=null!=(r=e.name||(null!=t?t.name:t))?r:o,typeof r===l?r.call(t,{name:"name",hash:{},data:i}):r))+"</title>\n";return a=e["if"].call(t,null!=t?t.showGenres:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c},useData:!0})},{"hbsfy/runtime":418}],379:[function(t,e,n){var i=t("itml"),a=i.event.Event,r=t("./app/for_you/"),l=t("./app/new/"),o=t("./app/connect"),s=t("./app/radio/"),c=t("./app/loading"),u=i.controller.TabbedApplication,h=t("./app/account/migration"),d=t("./app/account/carrier_bundling/carrier_verification"),p=t("./app/account/carrier_bundling/sms_verification"),m=t("./app/account/carrier_bundling/account_linking"),f=t("./app/product/"),g=t("./app/profile/"),b=t("./app/search/"),v=t("./app/account/settings"),y=t("./app/permission_banner/"),k=t("./app/account/welcome"),w=t("./app/contextual_actions"),x=t("./app/preview"),S=t("./app/account/sonos/helpers"),D=t("./util"),C=D.loc,A=D.pubSub,T=t("./app/common/controller_helper"),M=t("./app/common"),E=M.traits.ControllerCache,I=function(t){itms.log("ITMLJS: Music init: "+UpdatableAssets.currentManifestVersion()),t=t||{},u.call(this,t),E.call(this),this.tabControllers={for_you:r,"new":l,connect:o,radio:s},this.didAskForTab=!1,this.addEventListener("ready",this.readyApp.bind(this)),this.addEventListener("resume",this.resumeApp.bind(this)),this.tabBar.addEventListener("needscontent",this.handleTabNeedsContent.bind(this)),this.addEventListener("pageResponse",T.onPageResponse.bind(T)),this.registerGlobalEventCallbacks(),this.setDeviceCookies()};D.inherit(I,u),D.inherit(I,E,!0),I.prototype.registerGlobalEventCallbacks=function(){itms.onPageResponse=this.onPageResponse.bind(this),itms.onAccountChange=this.onAccountChange.bind(this),itms.onBuy=this.onBuyHandler.bind(this),itms.onSubscriptionStatusDidChange=this.onSubscriptionStatusDidChange.bind(this),itms.onSubscriptionRequired=this.handleSubscriptionRequired.bind(this),itms.onXEvent=this.onXEvent.bind(this),TabBar.onUpdate=this.onTabBarUpdate.bind(this),this.addEventListener("error",this.handleError.bind(this)),A.subscribe("showModal",this.handleTabPush.bind(this)),A.subscribe("setSelectedTab",this.handleSetSelectedTab.bind(this)),Settings.onRestrictionsChange=this.handleRestrictionsChange.bind(this)},I.prototype.onXEvent=function(t){var e=t.sidePackData,n=D.keypath(t,"sidePackData.url"),i="string"==typeof n&&this.isTrustedUrl(n),a={data:{},navigationDocument:getActiveDocument().ownerDocument.navigationDocument};if(i&&e)switch(e.type){case"tabPush":a.data.url=decodeURIComponent(n),this.handleTabPush({detail:a})}},I.prototype.handleRestrictionsChange=function(){A.publish("RestrictionsChange"),this.setDeviceCookies()},I.prototype.setDeviceCookies=function(){D.enablers.allowsExplicit()?D.cookie.restrictExplicit(!1):D.cookie.restrictExplicit(!0),D.account.isEligibleForAppleMusic()||D.account.isAppleMusicEnabled()?D.cookie.hideSubscription(!1):D.cookie.hideSubscription(!0)},I.prototype.resumeApp=function(t){var e=D.keypath(t,"detail.options.url"),n=D.keypath(t,"detail.options.refApp");e&&this.isTrustedUrl(e)&&(this.updateAffiliateCookie(e),this.parseDeepLink(e,n)),this.setDeviceCookies(),D.loc.update()},I.prototype.parseDeepLink=function(t,e){TabBar.transientTab.navigationDocument.documents.length>0&&TabBar.transientTab.navigationDocument.clear();var n,i,r,l,o=TabBar.transientTab.navigationDocument,s=TabBar.transientTab,c=t.split("apple.com/")[1];if("undefined"==typeof c){var u=new RegExp("^https://|music://|http://");c=t.split(u)[1]}if(c.match("/MZStore.woa/")&&(c=c.split("WebObjects/MZStore.woa/wa/")[1]),c.match(/(^subscribe.*)?/)[1])return void this.showDeepLinkWelcomePage();switch(c){case c.match(/(^foryou.*)?/)[1]:return i={target:this.getTabForIdentifier("for_you")},this.handleSetSelectedTab("for_you"),void this.handleTabNeedsContent({detail:i});case c.match(/(^new.*)?/)[1]:return i={target:this.getTabForIdentifier("new")},this.handleSetSelectedTab("new"),void this.handleTabNeedsContent({detail:i});case c.match(/(^radio.*)?/)[1]:return i={target:this.getTabForIdentifier("radio")},this.handleSetSelectedTab("radio"),void this.handleTabNeedsContent({detail:i});case c.match(/(^sonosAuth.*)?/)[1]:return void S.handleSonosLink(t,e);case c.match(/(^beats1.*)?/)[1]:l="radio_live_station";break;case c.match(/(^festival.*)?/)[1]:l="festival";break;case c.match(/(^station.*)?/)[1]:case c.match(/(^[A-Za-z]{2}\/station.*)?/)[1]:case c.match(/(^[A-Za-z]{2}\/radio.*)?/)[1]:return i={target:this.getTabForIdentifier("radio"),url:t},this.handleSetSelectedTab("radio"),void this.handleTabNeedsContent({detail:i});case c.match(/(^connect.*)?/)[1]:case c.match(/(^[A-Za-z]{2}\/connect.*)?/)[1]:return i={target:this.getTabForIdentifier("connect")},this.handleSetSelectedTab("connect"),void this.handleTabNeedsContent({detail:i});case c.match(/(^post.*)?/)[1]:case c.match(/(^[A-Za-z]{2}\/post.*)?/)[1]:case c.match(/(^viewPost.*)?/)[1]:case c.match(/(^[A-Za-z]{2}\/viewPost.*)?/)[1]:l="connect_detail";break;case c.match(/(^musicrenew.*)?/)[1]:var p=D.tabs.getTab("for_you");if(p){var m={tab:p,switchToTab:D.account.isTabStateUndecided()};this.handlePrepareForTabPush({detail:m})}l="subscription_autorenew",o=modal,s=TabBar.selectedTab;break;case c.match(/(^mymusic.*)?/)[1]:return void(this.getTabForIdentifier("my_music")?this.handleSetSelectedTab("my_music"):this.handleSetSelectedTab("library"));case c.match(/(^beatsMigrationInfoSrv.*)?/)[1]:n=new h({deepLink:t}),r=!0;break;case c.match(/(^carrier.*)?/)[1]:this.hasCarrierBundlingDeepLinkOpened=!0,n=new d({},{reason:"deepLink",ignoreCache:!0}),r=!0}n&&r?(this.addEventDelegates(n,["tabPush"]),this.pushAccountModal(n)):(i={data:{url:t},dataType:l,navigationDocument:o},TabBar.selectedTab=s,this.handleTabPush(new a("tabPush",{detail:i})))},I.prototype.pushAccountModal=function(t){UserInterfaceStatusController.hasUserAcknowledgedWelcomeScreen()&&D.account.isIntroSheetOpen()===!1?D.account.isIntroSheetOpen()?A.publish("replaceNativeModal",{detail:{newDoc:t}}):(t.addEventListener("tabPush",this.handleTabPush.bind(this)),modal.pushDocument(t.el,{})):setTimeout(function(){D.account.isIntroSheetOpen()?A.publish("replaceNativeModal",{detail:{newDoc:t}}):(t.addEventListener("tabPush",this.handleTabPush.bind(this)),modal.pushDocument(t.el,{}))}.bind(this),500)},I.prototype.handleTabNeedsContent=function(t){var e=t.detail.target;if(!e.identifier.match(/my_music|library|playlists/)){this.didAskForTab=!0;var n=function(){var n=t.detail.url,i=e.identifier,a=this.tabControllers[i],r=this.getCachedControllerForKey(i);if(r)n&&r.handleDeepLink(n);else{if(!a)return;e.navigationDocument.clear(),r=new a({tab:e,name:e.title,url:n}),r.addEventListener("tabPush",this.handleTabPush.bind(this)),r.addEventListener("handleAskToBuy",this.handleAskToBuy.bind(this)),r.addEventListener("checkLocalManifestVersion",this.checkLocalManifestVersion.bind(this)),this.setCachedControllerForKey(i,r)}}.bind(this);this.versionCheckComplete?n():this.checkLocalManifestVersion({detail:{callback:n,showLoading:!0,tab:e}})}},I.prototype.handlePrepareForTabPush=function(t){var e=t.detail.tab;if(e){if(0===e.navigationDocument.documents.length){var n={target:e};this.handleTabNeedsContent({detail:n})}t.detail.switchToTab&&(TabBar.selectedTab=e)}},I.prototype.handleTabPush=function(t){var e=t.detail.options||{},n=T.getControllerDocument(t);n.addEventListener("tabPush",this.handleTabPush.bind(this)),n.addEventListener("handleAskToBuy",this.handleAskToBuy.bind(this)),n.addEventListener("checkLocalManifestVersion",this.checkLocalManifestVersion.bind(this));var i,a=D.keypath(t,"detail.navigationDocument"),r=modal.documents;a||(D.log.error("Trying to push from JavaScript without specifiying a navigation document to push onto. Falling back to the old and racy method for finding the navigation document. This is really bad, please file a radar. Originating tabPush event: ",t),r.length>0?(i=r[r.length-1],a=i.navigationDocument):a=TabBar.selectedTab.navigationDocument),0===r.length&&D.metrics.track(n,{tabIdentifier:TabBar.selectedTab.identifier,entityType:t.detail.entityType||t.detail.dataType}),n instanceof c&&D.keypath(t,"detail.data.url")&&(e={url:t.detail.data.url}),a.pushDocument(n.el,e)},I.prototype.getTabForIdentifier=function(t){for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return e},I.prototype.handleSetSelectedTab=function(t){if(t!==TabBar.selectedTab.identifier){var e=this.getTabForIdentifier(t);TabBar.selectedTab=e}},I.prototype.handleAskToBuy=function(t){var e=t.detail.buyInfo,n=e.document?e.document:t.detail.document,i=e.controller?e.controller:t.detail.controller,a=e.options&&e.options.offers?e.options.offers:{},r=D.doc.findNodeWithTagName(n,"template");if("undefined"!==r){var l=new y({document:r.ownerDocument,controller:i},{offers:a}),o=l.el,s=r.firstChild;"permission-banner"===s.getAttribute("id")&&r.removeChild(s),r.ownerDocument.adoptNode(o.document);var c=r;c.insertBefore(o,c.firstChild)}},I.prototype.onPageResponse=function(t,e){var n={callerDocument:t,response:e,pushFunction:this.handleTabPush};this.dispatchEvent(new a("pageResponse",{detail:n}))},I.prototype.onAccountChange=function(){D.account.notifyServiceChange({from:"onAccountChange"}),D.metrics.recordAccountChange(),this.setDeviceCookies()},I.prototype.onBuyHandler=function(t){(t.result||D.account.isEligibleForAppleMusic())&&D.account.notifyServiceChange({from:"onBuy"}),t.result?(A.publish("buyConfirmed",{buyInfo:t}),D.metrics.recordBuyConfirmed(t)):A.publish("buyFailed",{buyInfo:t})},I.prototype.onSubscriptionStatusDidChange=function(t){D.account.notifyServiceChange({from:"onSubscriptionStatusDidChange",eventData:t})},I.prototype.handleSubscriptionRequired=function(t){t&&"radio"===t.sourceType?setTimeout(function(){D.account.showPlayUpsell()},1200):D.account.showPlayUpsell()},I.prototype.onTabBarUpdate=function(){for(var t,e={},n=0;n<TabBar.tabs.length;n++)t=TabBar.tabs[n],e[t.identifier]=!0;for(var i in this.tabControllers)this.tabControllers.hasOwnProperty(i)&&(e[i]||this.bustCacheForKey(i))},I.prototype.handleError=function(t){D.log.error({message:"App.onError: type="+t.type+"; details="+JSON.stringify(t.detail.options)})};var F=function(t,e,n,i){var a=new t[e](i,n);itms.log("ITMLJS: init native view: "+a)},P=function(t,e){for(var n in t)t.hasOwnProperty(n)&&NativeViewEventRegistry.addNativeViewAppearanceListener(n,"load",F.bind(this,t,n,e))};I.prototype.readyApp=function(t){D.loc.update(),D.network.isOnline()&&0===Object.keys(D.bag()).length?A.subscribe("bagChange",this.onLaunch.bind(this,t)):this.onLaunch(t)},I.prototype.onLaunch=function(t){A.unsubscribe("bagChange");var e=UpdatableAssets.currentManifestVersion();D.string.compareNumerically(e,"1000000")<0?D.log.level=5:D.log.level=4;var n=D.keypath(t,"detail.options")||{},i={tabPush:this.handleTabPush.bind(this),prepareForTabPush:this.handlePrepareForTabPush.bind(this),checkLocalManifestVersion:this.checkLocalManifestVersion.bind(this)},a={"contextual-actions":w,product:f,profile:g,search:b,account:v,welcome:k,preview:x};P(a,i),D.metrics.init(this,n),n.url&&this.isTrustedUrl(n.url)&&(this.updateAffiliateCookie(n.url),this.parseDeepLink(n.url,n.refApp)),this.hasCarrierBundlingDeepLinkOpened||D.account.getSubscriptionStatus({partialResults:!0},this.handleServiceEligibility.bind(this)),localStorage.getItem("Music.AppStartDateMillis")||localStorage.setItem("Music.AppStartDateMillis",Date.now()),D.enablers.isExplicitDialogEnabled()&&itms.restrictions.presentExplicitRestrictionAlertIfNeededOfType("onLaunch",function(){})},I.prototype.showDeepLinkWelcomePage=function(){if(D.account.isEligibleForAppleMusic())return this.handleSetSelectedTab("for_you"),void this.handleTabNeedsContent({detail:{target:this.getTabForIdentifier("for_you")}});if(UserInterfaceStatusController.hasUserAcknowledgedWelcomeScreen()){var t={detail:{data:{mode:"intro",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!1}}};this.handleTabPush(t)}},I.prototype.handleServiceEligibility=function(t,e){D.log.warn("lib/index handleServiceEligibility",t,e);var n;if(!this.hasCarrierBundlingDeepLinkOpened&&!D.account.getAlreadySubscribedCheckInProgress()){if(1===t){if(e&&e.isFinal&&"unlinked"===e.carrierBundle&&"true"!==localStorage.getItem("Music.hasAccountLinkingSheetOpened"+Telephony.phoneNumber)){var i;i="true"===localStorage.getItem("Music.hasUserOpenedSubscriptionOffers")?C.locWithMarkupTokens("FUSE.CarrierBundling.AlreadySubscribed.Title",{carrierName:Telephony.providerName}):C.locWithMarkupTokens("FUSE.CarrierBundling.CarrierActivation.Title",{carrierName:Telephony.providerName}),n=new m({data:{header:i}})}}else e&&"needsVerification"===e.carrierBundle&&(n=new p({data:e}));n&&this.pushAccountModal(n)}},I.prototype.updateAffiliateCookie=function(t){var e=D.urls.affiliateCookie();if(!e)return void D.log.error("No util.bag().affiliateCookie: skipping trying to update affiliate cookie");var n=D.query.parse(t);if(n.at||n.itscg){n.appType=1;var i={url:e+D.query.build(n),method:"GET",success:function(t){var e=JSON.parse(t),n=Object.keys(e)[0],i=new Date;i.setDate(i.getDate()+30);var a=i.toUTCString();D.cookie.set({name:n,path:"/",value:e[n],expires:a,domain:".apple.com"})}.bind(this),failure:function(){itms.log("Failed to get affiliate cookie string. URL: "+t+" :: at:"+n.at+" :: ct:"+n.ct)}};D.xhr(i)}},I.prototype.checkLocalManifestVersion=function(t){var e=D.keypath(t,"detail.callback"),n=D.keypath(t,"detail.tab"),i=D.keypath(t,"detail.showLoading"),a=this,r="8.4.0.1.0.0",l=UpdatableAssets.currentManifestVersion(),o=function(){a.versionCheckComplete=!0,e.call(this,a.versionCheckComplete)},s=setTimeout(function(){o()},6e5);if(itms.log("ITMLJS: currentManifestVersion: "+l),itms.log("ITMLJS: releaseManifestVersion: "+r),D.string.compareNumerically(l,r)<0){if(itms.log("ITMLJS: we have a lower version"),i){var u=new c({title:C.loc("FUSE.Updating")}),h=n&&n.navigationDocument||TabBar.selectedTab.navigationDocument;h.pushDocument(u.el)}UpdatableAssets.refreshCachedManifest(function(){itms.log("ITMLJS: manifest was refreshed"),clearTimeout(s);try{var t=UpdatableAssets.newestCachedManifestVersion();itms.log("ITMLJS: currentManifestVersion: "+l),itms.log("ITMLJS: newestManifestVersion: "+t),D.string.compareNumerically(l,t)<0?(itms.log("ITMLJS: RESTART"),App.restart()):(itms.log("ITMLJS: ALL GOOD"),o())}catch(e){itms.log("ITMLJS: error trying to string compare compareNumerically:"+e),o()}})}else itms.log("ITMLJS: we are up to date"),clearTimeout(s),o()},I.prototype.isTrustedUrl=function(t){function e(t,e){return-1!==t.indexOf(e,t.length-e.length)}var n=t.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/)[1],i=D.bag().trustedDomains||[];i.push("beatsMigrationInfoSrv"),i.push("subscribe");for(var a=!1,r=0,l=i.length;l>r;r++){var o=i[r].replace("*","");if(o.match(/^\./)&&e(n,o)){a=!0;break}if(n===o){a=!0;break}}return a},e.exports=I},{"./app/account/carrier_bundling/account_linking":4,"./app/account/carrier_bundling/carrier_verification":9,"./app/account/carrier_bundling/sms_verification":19,"./app/account/migration":33,"./app/account/settings":55,"./app/account/sonos/helpers":68,"./app/account/welcome":89,"./app/common":133,"./app/common/controller_helper":129,"./app/connect":175,"./app/contextual_actions":206,"./app/for_you/":249,"./app/loading":281,"./app/new/":291,"./app/permission_banner/":293,"./app/preview":295,"./app/product/":297,"./app/profile/":321,"./app/radio/":326,"./app/search/":358,"./util":391,itml:435}],380:[function(t,e,n){var i,a,r,l=t("itml").utils.keypath,o=t("./urls"),s=t("./xhr"),c=t("./cookie"),u=t("./bag"),h=t("./pub_sub"),d=t("./client"),p=t("itml"),m=p.event.Event,f=!1,g=!1,b=[],v=!1,y=!1,y=!1,k=function(){return itms.accountInfo&&itms.accountInfo.DSID},w=function(t){t=t||{},t.options=t.options||{};var e=function(e){var n=itms.accountInfo.DSID;n&&e?t.success&&t.success.call(this,n):t.failure&&t.failure.call(this,n,t.options)};itms.authenticate(t.options,e.bind(this))},x=function(t){var e=o.profilePermissions(),n=itms.accountInfo.DSID;e&&n&&s({method:"GET",url:e+"?user="+n,success:function(e){var n=JSON.parse(e);b=[],b=n&&n.permissions||[],t.success&&t.success(b)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},S=function(t){var e=o.profile(),n=itms.accountInfo.DSID;e&&n&&s({method:"GET",url:e+"?user="+n,success:function(e){var n=JSON.parse(e);v={},v=n&&n.profile||{},t.success&&t.success(v)},failure:function(e){t.failure&&t.failure(JSON.parse(e))}})},D=function(){return v},C=function(){return b},A=function(){return g},T=function(){return f},M=function(){return itms.eligibilityForService({service:"AppleMusic"})},E=function(t){return t||(t=this.getCachedSubscriptionStatus()),t&&t.subscribed===!0&&t.familySubscription===!0},I=function(t){return t||(t=this.getCachedSubscriptionStatus()),t&&"unlinked"===t.carrierBundle||"eligible"===t.carrierBundle},F=function(){var t=M();return t?t.subscribed===!0||I(t):!1},P=function(){return i},L=function(t){i=t},R=function(t){var e=t.currentDoc,n=t.newDoc;P()?this.dispatchEvent(new m("replaceNativeModal",{detail:t})):modal.documents.length?e.navigationDocument.replaceDocument(n.el,e,{}):modal.pushDocument(n.el)},_=function(){modal.documents.length&&modal.popDocument(),P()&&this.dispatchEvent(new m("closeIntroPage"))},P=function(){return i},L=function(t){i=t},B=function(t,e){t=t||{service:"AppleMusic"};var n=[],i=function(t,n){e.call(this,t,n)},a=function(){var t=F()?1:0,n=M();e.call(this,t,n)};itms.getServiceEligibility(t,function(t,e){n=e&&e.permissions||[],g=n.indexOf("post")>-1,f=n.indexOf("admin")>-1,e&&"needsAuthentication"===l(e,"accountStatus")?w({success:function(){a()},failure:function(){i(t,e)}}):i(t,e)})},U=function(t){r=t},N=function(){return r},O=function(){return a},H=function(t){a=t},z=function(){var t=["Telstra"];return Telephony&&t.indexOf(Telephony.providerName)>-1&&"iPhone"===Device.model},V=function(){return UserInterfaceStatusController.hasUserRequestedSubscriptionHidden()},G=function(t){var e=V();e!==t&&UserInterfaceStatusController.setHasUserRequestedSubscriptionHidden(t)},j=function(t){c.hideSubscription(!t),G(!t)},q=function(){return!V()},W=function(){var t=u();return t&&"undefined"!=typeof t.musicSubscription?t.musicSubscription.isEnabled!==!1:!1},Y=function(){var t=u();return t&&"undefined"!=typeof t.musicConnect?t.musicConnect.isEnabled!==!1:!1},K=function(){return y},J=function(t){y=t},X=function(){J(!1),modal.popDocument()},Z=function(){if(!K()){J(!0);var t={data:{mode:"upsell",upsellIdentifier:"Generic",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!0}};h.publish("showModal",{detail:t})}},Q=function(t){t=t||{},t.options=t.options||{};var e=function(e,n){!t.successCallback||e&&!n?t.failureCallback&&t.failureCallback.call(this):t.successCallback.call(this)};itms.displayTermsAndConditions(e.bind(this))},$=function(){var t=localStorage.getItem("Music.hasShownFamilyWelcome."+k()),e=parseInt(c.getHasShownFamilyWelcomePage(),10);return 1===e||t},tt=function(t){localStorage.setItem("Music.hasShownFamilyWelcome."+k(),t),c.setHasShownFamilyWelcomePage(t)},et=function(t){t||(t=this.getCachedSubscriptionStatus());var e=!1;return t.isSubscriptionPurchaser===!1&&E(t)===!0&&(e=!0),e&&!$()},K=function(){return y},J=function(t){y=t},X=function(){J(!1),modal.popDocument()},Z=function(){if(!K()){J(!0);var t={data:{mode:"upsell",upsellIdentifier:"Generic",sheetType:"js"},dataType:"welcome_page",navigationDocument:modal,options:{animated:!0}};h.publish("showModal",{detail:t})}},nt=function(){var t;return t="function"==typeof UserInterfaceStatusController.tabState?UserInterfaceStatusController.tabState():UserInterfaceStatusController.tabState,"undecided"===t},it=function(t){t&&"onSubscriptionStatusDidChange"!==t.from&&d.hasSubscriptionStatusDidChangeEvent()||h.publish("serviceChange",{})};e.exports={auth:w,hasPostPermission:A,hasAdminPermission:T,getSubscriptionStatus:B,isIntroSheetOpen:P,setIsIntroSheetOpen:L,closeAccountModal:_,replaceAccountModal:R,isOnCarrierBundlingNetwork:z,getProfilePermissions:x,profilePermissions:C,getProfile:S,profile:D,getDSID:k,enableAppleMusic:j,setAlreadySubscribedCheckInProgress:U,getAlreadySubscribedCheckInProgress:N,isMigrationInProgress:O,setIsMigrationInProgress:H,isAppleMusicEnabled:q,getCachedSubscriptionStatus:M,isAppleMusicEnabledForStorefront:W,isConnectEnabledForStorefront:Y,isEligibleForAppleMusic:F,showPlayUpsell:Z,setShowingPlayUpsell:J,closePlayUpsell:X,showTermsIfRequired:Q,shouldShowFamilyWelcomePage:et,setShownFamilyWelcomePage:tt,hasShownFamilyWelcomePage:$,hasUserRequestedSubscriptionHidden:V,setHasUserRequestedSubscriptionHidden:G,isFamilySubscription:E,isCarrierBundleSubscription:I,isTabStateUndecided:nt,notifyServiceChange:it}},{"./bag":383,"./client":384,"./cookie":386,"./pub_sub":399,"./urls":409,"./xhr":410,itml:435}],381:[function(t,e,n){function i(t,e,n,i){n=n||o;var a,r=i||l.screen.sizeForScreenDimension(),s=n[t][r],c=n[t].crop||"sr";if(s){var u,h,d={width:s[0]*Device.pixelRatio,height:s[1]*Device.pixelRatio},p=l.clone(e);if(e instanceof Array){for(var m={width:1e4,height:1e4},f={width:0,height:0},g=!1,b=0;b<e.length;b++){var v=e[b];if(v.height===d.height&&v.width===d.width)return v.width=Math.round(v.width/Device.pixelRatio),v.height=Math.round(v.height/Device.pixelRatio),v.dpr=Device.pixelRatio+"x",v;v.height>d.height||v.width>d.width?(v.height<m.height||v.width<m.width)&&(m=v,g=!0):(v.height>f.height||v.width>f.width)&&(f=v)}p=g?m:f,u=p.width,h=p.height,"bb"===c&&(a=Math.min(d.width/u,d.height/h),u=Math.round(u*a),h=Math.round(h*a))}else p.url&&("bb"===c?(u=p.width,h=p.height,a=Math.min(d.width/u,d.height/h),u=Math.round(u*a),h=Math.round(h*a),p.url=p.url.replace("{w}",u).replace("{h}",h).replace("{c}",c).replace("{f}","jpeg")):("hero"===t?p.url=p.url.replace("{h}bb","{h}fa"):p.url=p.url.replace("{h}bb","{h}"+c),p.url=p.url.replace("{w}",d.width).replace("{h}",d.height).replace("{c}",c).replace("{f}","jpeg"),u=d.width,h=d.height));if(p.width=Math.round(u/Device.pixelRatio),p.height=Math.round(h/Device.pixelRatio),p.dpr=Device.pixelRatio+"x",p.bgColor){var y=new l.color(p.bgColor);"brick"===t?p.isDark=y.isDarkBrick():p.isDark=y.isDark(),p.bgColorComplement=p.isDark?y.lighten(.1):y.darken(.1)}return p}l.log.error("No size defined for type:",t)}function a(t,e,n,a){if(t){if(!t.artwork)return t;var r=l.clone(o),c=l.clone(s);l.extend(r,e),l.extend(c,n);for(var u=t.type||t.kind||"product",h=Object.keys(c),d="product",p=0;p<h.length;p++){var m=h[p];c[m].indexOf(u)>-1&&(d=m)}if(t.hasOwnProperty("artwork")&&(t.image=i(d,t.artwork,r,a)),t.hasOwnProperty("editorialArtwork")){if(t.editorialArtwork&&t.editorialArtwork.subscriptionHero){var f=t.editorialArtwork.subscriptionHero||t.editorialArtwork.subscriptionCover;t.hero=i("hero",f,null,a)}t.editorialArtwork&&t.editorialArtwork.brandLogo&&(t.logo=i(d,t.editorialArtwork.brandLogo,null,a))}else t.hasOwnProperty("uber")&&t.uber&&t.uber.masterArt&&(t.hero=i("hero",t.uber.masterArt,r,null,a));return t}}function r(t){var e=t.content;if(e&&(e.artwork||e.editorialArtwork||e.latestAlbumArtwork)){var n=t.params,a=l.clone(o),r=l.clone(s),c=t.screenSize;l.extend(a,t.artworkMap),l.extend(r,t.artworkKeys);var u=e.kind||"product";n&&n.type&&(u=n.type);for(var h=Object.keys(r),d=u,p=0;p<h.length;p++){var m=h[p];r[m].indexOf(u)>-1&&(d=m)}var f={},g=d||"hero";if(e.hasOwnProperty("artwork")?f.image=i(d,e.artwork,a,c):e.hasOwnProperty("latestAlbumArtwork")&&(f.image=i(d,e.latestAlbumArtwork,a,c)),e.hasOwnProperty("uber")&&e.uber&&e.uber.masterArt&&(f.legacyUber=i(g,e.uber.masterArt,a,c)),e.hasOwnProperty("editorialArtwork")){var b;e.editorialArtwork.subscriptionHero&&(b="brick"!==u?"hero":"brick",f.hero=i(b,e.editorialArtwork.subscriptionHero,a,c)),e.editorialArtwork.subscriptionCover&&(b="brick"!==u?"cover":"brick",f.image||(f.image=i(d,e.editorialArtwork.subscriptionCover,a,c)),f.cover=i(b,e.editorialArtwork.subscriptionCover,a,c)),e.editorialArtwork.brandLogo&&(f.logo=i(d,e.editorialArtwork.brandLogo,a,c)),e.editorialArtwork.bannerUber&&(f.uber=i(g,e.editorialArtwork.bannerUber,a,c))}return Object.keys(f).length>0?f:void 0}}var l=t("itml").utils;l.screen=t("./screen"),l.log=t("./logger");var o={hero:{crop:"fa",xs:[320,162],s:[375,192],m:[414,203],l:[768,288],xl:[1024,288],xxl:[1366,288]},cover:{crop:"sr",xs:[320,240],s:[375,240],m:[414,293],l:[768,305],xl:[1024,305],xxl:[1024,305]},social:{crop:"h",xs:[320,193],s:[375,184],m:[414,240],l:[320,193],xl:[578,289],xxl:[578,289]},heroChild:{xs:[88,88],s:[125,125],m:[125,125],l:[250,250],xl:[250,250],xxl:[250,250]},brick:{crop:"sr",xs:[320,82],s:[375,97],m:[414,107],l:[251,160],xl:[336,160],xxl:[336,160]},product:{xs:[105,105],s:[123,123],m:[137,137],l:[150,150],xl:[144,144],xxl:[144,144]},productChild:{crop:"sr",xs:[53,53],s:[62,62],m:[70,70],l:[75,75],xl:[80,80],xxl:[80,80]},video:{xs:[159,89],s:[185,105],m:[185,105],l:[148,84],xl:[164,93],xxl:[189,107]},profile:{xs:[88,88],s:[115,115],m:[125,125],l:[110,110],xl:[110,110],xxl:[110,110]},sharing:{xs:[100,100],s:[100,100],m:[100,100],l:[100,100],xl:[100,100],xxl:[100,100]},track:{xs:[56,56],s:[56,56],m:[56,56],l:[56,56],xl:[56,56],xxl:[56,56]},list:{crop:"sr",xs:[55,55],s:[55,55],m:[55,55],l:[120,120],xl:[120,120],xxl:[120,120]},listChild:{xs:[27,27],s:[27,27],m:[27,27],l:[60,60],xl:[60,60],xxl:[60,60]}},s={track:["song","uploadedAudio","UploadedAudio"],video:["video","musicVideo","uploadedVideo","UploadedVideo"],product:["album","playlist","radioStation"],profile:["artist","iTunesBrand","brand","activity"],social:["social","connect","post"],brick:["brick","link"],sharing:["sharing"],hero:["hero"]};e.exports={setArtworkForContent:a,getArtworkForContent:r,bestArtwork:i,artworkMap:o,typesForKey:s}},{"./logger":394,"./screen":401,itml:435}],382:[function(t,e,n){var i=t("./logger"),a=t("./account"),r=t("./pub_sub"),l=t("./lockup"),o=t("./enablers"),s=function(t,e){var n=(TabBar.selectedTab.identifier+"").replace(" ","-").toLowerCase();t.tabName&&(n=t.tabName);var i=t.selectedFilter?(t.selectedFilter+"").toLowerCase():"none",a=t.controllerName,r=n+":"+i+" / "+a,l=t.containerType,o={items:[],featureName:r,containerType:l};t.recoId&&(o.recommendationData=t.recoId),void 0!==t.shuffle&&(o.shuffle=t.shuffle);var s={};if(t.items){void 0!==t.selectedTrackIndex&&t.items.length>1&&(o.selectedTrackIndex=t.selectedTrackIndex);for(var c=0;c<t.items.length;c++){var u=t.items[c],h=u.productData;if(h){s={id:h.id,url:h.url,metadata:h};var d=h.kind||"song";"album"===d||"playlist"===d?h.childrenIds&&h.children?s.isFullMetadata=h.childrenIds.length===h.children.length:s.isFullMetadata=!1:s.isFullMetadata=!0,o.items.push(s)}}}e.call(this,o)},c=function(t){return t&&t.match(/radioStation|uploadedVideo|uploadedAudio/i)?!1:!0},u=function(t){t=t||{};var e=t.selectedTrackIndex,n=t.items[e];return n&&n.productData&&l.isExplicit(n.productData)&&!o.allowsExplicit()?!1:!0},h=function(t){if(t.items&&t.items.length>0){var e=t.items[0].productData.kind,n=c(e),l=u(t);n&&!a.isEligibleForAppleMusic()?a.showPlayUpsell():!l&&o.isExplicitDialogEnabled()?itms.restrictions.presentExplicitRestrictionAlertIfNeededOfType("onPlay",function(){}):s(t,function(t){t.items&&t.items.length>0&&itms.playMedia(t,function(e){e?(i.log("playback success",t),-1!==t.items[0].metadata.kind.indexOf("Video")&&NowPlayingController.presentNowPlayingView(),-1!==t.items[0].metadata.kind.indexOf("radio")&&r.publish("playRadioStation",{detail:t})):i.error("Error during playback",t)})})}},d={play:h,determineTrackInfo:s};e.exports=d},{"./account":380,"./enablers":389,"./lockup":393,"./logger":394,"./pub_sub":399}],383:[function(t,e,n){var i={},a=function(t){return Object.keys(i).length>0&&!t?i:i=itms.getBag()||{}};itms.onBagChange=function(){var e=t("./pub_sub");e.publish("bagChange")},e.exports=a},{"./pub_sub":399}],384:[function(t,e,n){function i(t){return t=t&&"function"==typeof t.split?t.split("."):[],t[0]=t[0]||"0",t[1]=t[1]||"0",t[2]=t[2]||"0",t.join(".")}var a=t("./string"),r={};r.version=function(){return i(Device.systemVersion)},r.versionGreaterOrEqualTo=function(t){return a.compareNumerically(r.version(),i(t))>=0},r.versionLessThan=function(t){return a.compareNumerically(r.version(),i(t))<0},r.hasSubscriptionStatusDidChangeEvent=function(){return r.versionGreaterOrEqualTo("9.1.0")},e.exports=r},{"./string":405}],385:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,l=100,o=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);
if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,l){return a=c(a),r=c(r),l=c(l),p(a)&&p(r)&&p(l)?(a=d(a,0,255),r=d(r,0,255),l=d(l,0,255),t=a/255,e=r/255,n=l/255):(t=d(a,0,1),e=d(r,0,1),n=d(l,0,1),a=Math.round(255*t),r=Math.round(255*e),l=Math.round(255*n)),i=[a,r,l],{r:a,g:r,b:l}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r,t.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var l=0;null!=i&&m(i,a,r);var o=Math.max(t,e,n),s=Math.min(t,e,n),c=o-s;switch(o){case t:l=(e-n)/c+(n>e?6:0);break;case e:l=(n-t)/c+2;break;case n:l=(t-e)/c+4;break;default:l=0}return l=60*l,0>l&&(l+=360),l},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var l=Math.max(t,e,n),o=Math.min(t,e,n),c=(l+o)/2,u=l-o;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var l=.5>=n?n*(1+e):n+e-n*e,o=n+n-l,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?o+6*(l-o)*t:.5>t?l:2>3*t?o+(l-o)*(2/3-t)*6:o};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var l=Math.max(t,e,n),o=Math.min(t,e,n),c=l-o,u=l;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var l=t/60,o=0|l,s=n*e,h=n-s,p=s*(1-Math.abs(l%2-1))+h;switch(s+=h,o){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var l=0,o=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),l=.412453*i+.35758*a+.180423*r,o=.212671*i+.71516*a+.072169*r,s=.019334*i+.119193*a+.950227*r,{x:l,y:o,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,l)/100,n=d(Math.abs(n),0,o)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/l,c=i.z/o,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=l,s*=o,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)},limitColorValuesHSV:function(t,e,n,i,a,r,l,o,s){null!=l&&m(l,o,s);var c=this.RGBtoHSV(),u=d(c.h,t,e),h=d(c.s,n,i),p=d(c.v,a,r);return u=d(u,0,360),h=d(h,0,1),p=d(p,0,1),this.HSVtoRGB(u,h,p,c.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.limitColorValuesHSV=function(t,e,n,r,l,o){var s=i.limitColorValuesHSV(t,e,n,r,l,o,this.rgb.r,this.rgb.g,this.rgb.b),c=new a(s,this.alpha);return c},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;var n,i;Math.pow(10,Number(e));switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},a.prototype.isDarkBrick=function(){var t=this.getLab();return t.L<80?!0:!1},a.prototype.getDarknessRange=function(){var t=this.getLab();return t.L>=0&&t.L<=39?"dark":t.L>=40&&t.L<=59?"mediumdark":t.L>=60&&t.L<=79?"mediumlight":t.L>=80&&t.L<=100?"light":!1},e.exports=a},{}],386:[function(t,e,n){var i=t("its-util"),a=i.cookie;a.restrictExplicit=function(t){var e=t?1:0;this.set({name:"itre",value:e,domain:".apple.com"})},a.hideSubscription=function(t){var e=t?1:0;this.set({name:"itst",value:e,domain:".apple.com"})},a.getHasShownFamilyWelcomePage=function(){var t="itfw_"+(itms.accountInfo&&itms.accountInfo.DSID||"");return this.get(t,itms)},a.setHasShownFamilyWelcomePage=function(t){var e=t?1:0,n="itfw_"+(itms.accountInfo&&itms.accountInfo.DSID||""),i=new Date;i.setDate(i.getDate()+365);var a=i.toUTCString();this.set({name:n,value:e,domain:".apple.com",expires:a})},e.exports=a},{"its-util":466}],387:[function(t,e,n){var i=function(t){var e,n,a;if(!t||"object"!=typeof t)return t;if(t instanceof Array){for(e=[],n=0,a=t.length;a>n;n++)e[n]=i(t[n]);return e}if(t instanceof Object){e=Object.create(t.constructor.prototype);for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(t[r]))}return e};e.exports=i},{}],388:[function(t,e,n){var i={findNodeWithTagName:function(t,e){for(var n=new RegExp(e,"i"),i=0;i<t.childNodes.length;i++){var a=t.childNodes.item(i),r=a.tagName;if("document"===a.tagName)return this.findNodeWithTagName(a,e);if(r.match(n))return a}},parsePlistXML:function(t){var e,n,i,a,r,l,o,s=function(t){return t&&(3===t.nodeType||8===t.nodeType||4===t.nodeType)};if(!t)return null;if("plist"===t.nodeName){for(r=[],e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||r.push(this.parsePlistXML(t.childNodes.item(e)));return r}if("dict"===t.nodeName){for(i={},a=null,e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||(null===a?a=this.parsePlistXML(t.childNodes.item(e)):(i[a]=this.parsePlistXML(t.childNodes.item(e)),a=null));return i}if("array"===t.nodeName){for(r=[],e=0,n=t.childNodes.length;n>e;e++)s(t.childNodes.item(e))||(l=this.parsePlistXML(t.childNodes.item(e)),null!=l&&r.push(l));return r}if("#text"===t.nodeName);else{if("key"===t.nodeName)return t.childNodes.item(0).nodeValue;if("string"===t.nodeName){for(l="",o=0,n=t.childNodes.length;n>o;o++)l+=t.childNodes.item(o).nodeValue;return l}if("integer"===t.nodeName)return parseInt(t.childNodes.item(0).nodeValue,10);if("real"===t.nodeName){for(l="",o=0,n=t.childNodes.length;n>o;o++)3===t.childNodes.item(o).nodeType&&(l+=t.childNodes.item(o).nodeValue);return parseFloat(l)}if("data"===t.nodeName);else{if("date"===t.nodeName)return new Date(t.childNodes.item(0).nodeValue);if("true"===t.nodeName)return!0;if("false"===t.nodeName)return!1}}}};e.exports=i},{}],389:[function(t,e,n){var i=t("./bag"),a=i().musicCommon||{},r=i().musicConnect||{},l={reportAConcern:a.isReportAConcernEnabled,hasConnectRestrictions:r.hasRestrictions,allowsExplicit:function(){return!Settings.Restrictions.allowsExplicit||i.isExplicitMusicDisallowed?!1:!0},isExplicitDialogEnabled:function(){return itms.restrictions&&itms.restrictions.presentExplicitRestrictionAlertIfNeededOfType}};e.exports=l},{"./bag":383}],390:[function(t,e,n){var i=t("./screen"),a=t("./on_demand"),r={},l=function(){var t=Device.pixelRatio;return t>1?"@"+t+"x":""};r.getDevicePixelRatioString=l;var o=function(t){var e={};if("string"!=typeof t)throw new TypeError('Incorrect input type: "'+typeof t+'". imageSrc must be a String');t=t.replace(/@[0-9]+x/,"");var n=new RegExp("^"+t.replace(/(\.[a-z]+)$/,"(@([0-9]+x))?$1"));return Object.keys(a.getResourceManifest()).forEach(function(t){var i=t.match(n);i&&(i[2]?e[i[2]]=a.getResourceUrl(t):e["1x"]=a.getResourceUrl(t))}),e};r.getImageSrcSet=o;var s=function(t){var e=r.getImageSrcSet(t),n=Object.keys(e).sort().map(function(t){return e[t]+" "+t});return n.join(", ")};r.getImageSrcSetAttribute=s;var c=function(t,e){e=e||{};var n;if(e.remote!==!0?(e.srcset=!1,n=t):n="images/"+t+"/background",e.height!==!1){var l,o=i.getCurrentOrientation();l="landscape"===o?i.getScreenDimensions().width:i.getScreenDimensions().height,n+="-"+l+"h"}return e.srcset===!1&&e.remote===!0&&(n+=r.getDevicePixelRatioString()),n+="."+(e.extension||"jpg"),n=e.remote!==!0?"resource://"+n:e.srcset===!1?a.getResourceUrl(n):s(n)};r.getBackgroundImageResource=c;var u=function(t){var e="40",n=t&&t.isLight?"Light-":"";return"resource://AppleMusic-"+n+e+"h.png"};r.getAppleMusicLogoImageResource=u;var h=function(t){var e,n;if(t&&t.isInOverlay)e=620,n=.3;else{var a=i.getScreenDimensions(),r=i.getAspectRatioFromScreenSize(a);switch(e=a.height,r){case i.AspectRatio._16_9:n=568>=e?.3:.35;break;case i.AspectRatio._4_3:e=a.width>a.height?a.height:a.width,n=.4;break;case i.AspectRatio._3_2:n=.3;break;default:n=.39}}var l=parseInt(e*n)-20;return t&&t.hasNavBar&&(l-=44),l};r.getBgImageSafeZoneYOffset=h,e.exports=r},{"./on_demand":398,"./screen":401}],391:[function(t,e,n){function i(t){var e=!1,n=function(){};return"function"!=typeof t?void o.error("once must be passed a function"):function(){return e||(n=t.apply(this,arguments),e=!0),n}}function a(t,e){for(var n={},i=0;i<t.length;i++){var a=e?e(t[i]):t[i];n[a]?t.splice(i--,1):n[a]=!0}return t}function r(t){var e={data:{type:"error",title:t||"!!!",buttons:[{title:"OK",className:"cancel-button"}]},dataType:"dialog",navigationDocument:modal,options:{type:"dialog"}};h.publish("showModal",{detail:e})}var l=t("itml"),o=t("./logger"),s=t("./loc"),c=t("./lockup"),u=t("./metrics"),h=t("./pub_sub"),d=t("./audio"),p=t("./xhr"),m=t("./native"),f=t("./bag"),g=t("./network"),b=t("./string"),v=t("./account"),y=t("./screen"),k=t("./artwork"),w=t("./color"),x=t("./query_string"),S=t("./cookie"),D=t("./urls"),C=t("./tabs"),A=t("./doc"),T=t("./deepclone"),M=t("./enablers"),E=t("./image"),I=t("./on_demand"),F=t("./server_constants"),P=t("./client"),L=t("./template_helpers"),R=t("./template_partials"),_=l.utils;L(_.Handlebars),R(_.Handlebars);var B={bag:f,color:w,cookie:S,log:o,loc:s,lockup:c,metrics:u,"native":m,network:g,query:x,pubSub:h,audio:d,xhr:p,once:i,account:v,screen:y,string:b,artwork:k,prune:a,alert:r,urls:D,tabs:C,doc:A,deepClone:T,enablers:M,image:E,onDemand:I,client:P,serverConstants:F};_.extend(_,B),e.exports=_},{"./account":380,"./artwork":381,"./audio":382,"./bag":383,"./client":384,"./color":385,"./cookie":386,"./deepclone":387,"./doc":388,"./enablers":389,"./image":390,"./loc":392,"./lockup":393,"./logger":394,"./metrics":395,"./native":396,"./network":397,"./on_demand":398,"./pub_sub":399,"./query_string":400,"./screen":401,"./server_constants":402,"./string":405,"./tabs":406,"./template_helpers":407,"./template_partials":408,"./urls":409,"./xhr":410,itml:435}],392:[function(t,e,n){var i,a=t("itml").utils,r=t("./logger"),l=t("./urls"),o=t("its-localization").its,s=t("moment"),c="en",u=t("./pub_sub"),h={ca:"ca-es",cs:"cs-cz",da:"da-dk",de:"de-de",el:"el-gr",en:"en-us","en-au":"en-au","en-ca":"en-ca","en-gb":"en-gb","en-uk":"en-uk",es:"es-es","es-mx":"es-mx",fi:"fi-fi",fr:"fr-fr","fr-ca":"fr-ca",id:"id-id",it:"it-it",hu:"hu-hu",ja:"ja-jp",ms:"ms-my",nl:"nl-nl",nb:"no-no",pl:"pl-pl",pt:"pt-br","pt-pt":"pt-pt",ro:"ro-ro",ru:"ru-ru",sk:"sk-sk",sv:"sv-se",th:"th-th",tr:"tr-tr",uk:"uk-ua","uk-ua":"uk-ua",vi:"vi-vi","zh-cn":"zh-cn","zh-hk":"zh-tw","zh-ma":"zh-tw","zh-sg":"zh-cn","zh-tw":"zh-tw","zh-hans":"zh-cn","zh-hant":"zh-tw"},d=function(t){return t=h[t]||t,UpdatableAssets.loadResource(t+".json")?!0:!1};o.update=function(){var e=itms.getBag(),n=this,s="en-uk",c=e&&e.language.toLowerCase(),p=h[Settings.language.toLowerCase()];c?s=h[c]||c:p&&d(p)&&(s=p);var m=UpdatableAssets.loadResource(s+".json"),f={};m&&(f=JSON.parse(m),o.updateLocale(f)),n.date.update();var g=t("../app/common/traits/data_provider"),b=new g;b.fetchData({url:l.loc(),success:function(t){var e=t.loc;i=t.timestamp,a.extend(f,e),o.updateLocale(f),n.date.update(),u.publish("locUpdate")},failure:function(t){r.error("failed to update localization, even after 1 retry",t)},retries:1})},o.date={timeSince:function(t){return s(t).fromNow(!0)},update:function(){var t={en:{relativeTime:{future:"in %s",past:"%s",s:o.loc("FUSE.Dates.FromNow.OneSecond"),ss:o.loc("FUSE.Dates.FromNow.MultipleSeconds",{timeUnit:"%d"}),m:o.loc("FUSE.Dates.FromNow.OneMinute"),mm:o.loc("FUSE.Dates.FromNow.MultipleMinutes",{timeUnit:"%d"}),h:o.loc("FUSE.Dates.FromNow.OneHour"),hh:o.loc("FUSE.Dates.FromNow.MultipleHours",{timeUnit:"%d"}),d:o.loc("FUSE.Dates.FromNow.OneDay"),dd:o.loc("FUSE.Dates.FromNow.MultipleDays",{timeUnit:"%d"}),M:o.loc("FUSE.Dates.FromNow.OneMonth"),MM:o.loc("FUSE.Dates.FromNow.MultipleMonths",{timeUnit:"%d"}),y:o.loc("FUSE.Dates.FromNow.OneYear"),yy:o.loc("FUSE.Dates.FromNow.MultipleYears",{timeUnit:"%d"})}}};s.locale(c,t[c])}},o.locWithButtonSubstitution=function(t,e){if(e){var n,i,a,r,l;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],null===n&&(r=t+"."+s+".Url",l=t+"."+s+".Name",i=o.loc(r),a=o.loc(l),i!==r&&a!==l?e[s]='<button class="open-url embedded-link" data-link-url="'+i+'">'+a+"</button>":delete e[s]))}return o.loc(t,e)},e.exports=o},{"../app/common/traits/data_provider":149,"./logger":394,"./pub_sub":399,"./urls":409,itml:435,"its-localization":461,moment:470}],393:[function(t,e,n){var i=t("./artwork"),a=t("itml").utils,r=t("./loc");e.exports={line1:function(t){var e="";switch(t.kind){case"playlist":var n=t.curatorName||"Apple Music";e=r.loc("FUSE.New.ByCuratorName",{curatorName:n});break;case"song":e=t.artistName+" - "+t.collectionName;break;case"radioStation":e=this.getItunesNotes(t);break;default:e=t.artistName}return e},getDescription:function(t){var e=a.keypath(t,"description.short")||a.keypath(t,"description.standard");return e},getItunesNotes:function(t){var e=a.keypath(t,"itunesNotes.short")||a.keypath(t,"itunesNotes.standard");return e},isExplicit:function(t){return t.isExplicit||"Explicit"===a.keypath(t,"contentRatingsBySystem.riaa.name")?!0:!1},formatDuration:function(t,e){var n,i;try{n=t.offers[0].assets[0].duration}catch(a){}if(n){var l={},o=parseInt(n,10);l.h=Math.floor(o/3600),l.m=Math.floor((o-3600*l.h)/60),l.s=o-3600*l.h-60*l.m,i=r.loc(e,l)}return i},playlistProcessCard:function(t){t.description=this.getDescription(t);var e=t.curatorName||t.artistName||"APPLE MUSIC";t.artistName=e?r.loc("FUSE.ForYou.PlaylistBy",{artistName:e}):null;var n="D9D9D9",i=!1,l=t.artworkTracks||t.children,o=l&&Object.keys(l).length>0;if(t.hero=t.hero||t.cover,t.hero)n=t.hero.bgColor||n,i=t.hero.isDark;else if(l&&o){var s,c=t.artworkTrackIds||[],u=c.length;if(u>0)for(var h=0;u>h;h++){var d=l[c[h]];if(d){n=d.artwork.bgColor||n,s=new a.color(n),i=s.isDark();break}}else{var p=Object.keys(l);p.length>0&&l[p[0]].artwork.bgColor&&(n=l[p[0]].artwork.bgColor||n,s=new a.color(n),i=s.isDark())}}return t.cardColor={bgColor:n,isDark:i},t},setArtworks:function(t,e,n,r,l){r=r||"product";var o=a.clone(i.artworkMap);if(a.extend(o,n),t.kind&&(t[t.kind]=!0),t.name=t.shortName||t.name,e)t.image=e.image,t.hero=e.hero,t.cover=e.cover,t.logo=e.logo,t.uber=e.uber,"hero"!==r||t.hero||(t.hero=t.cover);else{if(t.artworkTracks)for(var s=Object.keys(t.artworkTracks),c=0;c<s.length;c++){var u=t.artworkTracks[s[c]],h=r?r+"Child":"productChild";o[h]||(h=r);var d=i.getArtworkForContent({content:u,artworkMap:o,params:{type:h},screenSize:l});t.artworkTracks[s[c]].image=d.image}var p=o[r]&&o[r][l];p&&(t.image={width:p[0],height:p[1]})}return t}}},{"./artwork":381,"./loc":392,itml:435}],394:[function(t,e,n){var i=t("lager");e.exports=i},{lager:469}],395:[function(t,e,n){var i=t("../bag"),a=t("itml").utils.keypath,r=t("mt-metricskit"),l=t("mt-metricskit-delegates-itml"),o=t("../logger");r.system.environment.setDelegate(l.environment),r.system.eventRecorder.setDelegate(l.eventRecorder),r.system.configSources.setDelegate({sources:function(){return[i().metrics,i()]}}),r.system.logger.setDelegate(o);var s="",c={},u="xp_its_music_main",h=function(t){if(t)for(var e=0;e<t.length;e++)if(!t[e].metricsIgnoreController)return t[e]},d=function(t){var e,n="";if(t){e=t.toLowerCase().split("_");for(var i=0;i<e.length;i++)n+=e[i][0].toUpperCase()+e[i].slice(1)+""}else o.warn("Fuse-Metrics: No source provided to to UpperCamelCase");return n},p=function(t,e){var n=h(a(t,"controllers"))||t||{},i=a(n,"data.pageData")||a(n,"data.metrics")||a(n,"model.metrics.pageData")||a(n,"metricsPageData")||a(t,"metricsPageData"),r=a(i,"metricsBase")||{},l=a(n,"pageUrl")||a(n,"model.config.url");return r.pageId=r.pageId?r.pageId:a(i,"pageId"),r.pageType=r.pageType?r.pageType:a(i,"pageType"),r.pageContext=d(TabBar.selectedTab.identifier)||TabBar.selectedTab.identifier,r.pageUrl=r.pageUrl?r.pageUrl:l,a(t,"pageMetricsHelpers.pageContextOverride")&&(r.pageContext=t.pageMetricsHelpers.pageContextOverride),"page"===e?s=r.pageContext:"impressions"===e&&(r.pageContext=s),r},m=function(t){var e=r.eventHandlers.buyConfirmed.createClientBuyId();return r.eventHandlers.buyConfirmed.cacheMetricsBuyData(e,p(t)),r.eventHandlers.buyConfirmed.clientBuyIdQueryParamString(e)},f=function(t){var e,n,i,l,o={};a(t,"options")&&(e=a(t,"options.clientBuyId"),n=a(t,"options.pageInfo")),a(t,"metrics")&&(e=a(t,"metrics.clientBuyId")),t&&e&&(n||(o.detoured=!0)),a(t,"metrics")&&n&&(t.metrics.pageUrl=n.url),e&&(o.clientBuyId=e,i=r.eventHandlers.buyConfirmed.uncacheMetricsBuyData(e)),l=r.eventHandlers.buyConfirmed.metricsData(void 0,void 0,void 0,o,a(t,"metrics"),a(n,"metricsBase"),i),r.system.eventRecorder.recordEvent(u,l)},g=function(t,e){var n,i,a=[],r=[],l=Object.keys(t),o={type:"section",timestamps:[e.pageLoadTime],index:0,children:[]};if(r.push(o),Array.isArray(t))a=t.slice(0,e.artistIndexCap);else if("object"==typeof t)for(var s=0;s<l.length;++s)a.push(t[l[s]]);for(var c=0;c<a.length;++c){n={},i=Object.keys(a[c]);for(var u=0;u<i.length;++u){var h=i[u];n[h]=a[c][h]}n.type="circle",n.kind=e.kind,n.timestamps=[e.pageLoadTime],n.index=c,o.children.push(n)}return r},b=function(t){var e,n=a(t,"controller.model");return a(n,"data.genres")?e=g(n.data.genres,{pageLoadTime:a(n,"pageLoadTime"),kind:"genre"}):a(n,"data.artists")&&(e=g(n.data.artists,{artistIndexCap:a(n,"data.artistsDisplayIndexEnd")||0,pageLoadTime:a(n,"pageLoadTime"),kind:"artist"})),e},v=function(t,e,n){var i=function(){var e=a(t,"controller.model");e&&(e.pageLoadTime=Date.now())},l=function(i){var l,o=a(i,"target.tagName"),s={};"physicalCirclesTemplate"===o?s.impressions=b(t):o&&o.search(/template/i)>=0&&(s.impressions=e.recordedImpressions()),s.impressions&&(l=r.eventHandlers.impressions.metricsData(void 0,void 0,void 0,p(t,"impressions"),s,n),r.system.eventRecorder.recordEvent(u,l))};a(t,"el.addEventListener")&&(t.el.addEventListener("appear",i),t.el.addEventListener("disappear",l))},y=function(t){var e,n;a(t,"playActionType")&&(n=a(t,"playMetadata")||{},n.actionType=t.playActionType,e=r.eventHandlers.click.metricsData(void 0,void 0,void 0,void 0,p({controllers:[this]}),n),r.system.eventRecorder.recordEvent(u,e))},k=function(t){var e=function(e){var n,i=a(e,"target"),l=h(a(t,"controllers")),o=a(l,"model"),s=a(l,"model.data.offersById"),c=i.getAttribute("data-content-index"),d=Array.isArray(s)&&a(s[c],"buyParams"),m={},f=t.el.snapshotImpressions();f=f.length?f:b(t),m.impressions=f,"moreArtists"===i.getAttribute("id")&&o&&(o.pageLoadTime=Date.now()),d&&(m.actionDetails={buyParams:d}),n=r.eventHandlers.click.metricsData(void 0,void 0,void 0,i,p(t),m),r.system.eventRecorder.recordEvent(u,n)}.bind(this);t.el.addEventListener("select",e)},w=function(t){var e=a(t,"controllers"),n=h(e)||a(t,"controller"),i=a(n,"model"),l=function(e){var l,o,s,h=a(e,"type"),d=a(e,"target.tagName"),m=a(i,"data")||a(i,"viewModel"),f=a(n,"data.pageData")||a(n,"data.metrics")||a(n,"model.metrics.pageData")||a(n,"metricsPageData")||a(t,"metricsPageData"),g=a(i,"metrics.xhrMetrics")||a(n,"data.xhrMetrics");t.pageMetricsHelpers=t.pageMetricsHelpers?t.pageMetricsHelpers:{},"appear"===h?(o=d&&d.search(/template/i)>=0&&(!i||t.pageMetricsHelpers.dataLoaded||m&&Object.keys(m)&&Object.keys(m).length),t.pageMetricsHelpers.metricsPageAppeared=!0):"dataReady"===h&&(o=t.pageMetricsHelpers.metricsPageAppeared&&getActiveDocument()===t.el&&!t.pageMetricsHelpers.dataLoaded,t.pageMetricsHelpers.dataLoaded=!0),o&&(s={pageLoadTime:Date.now()},l=r.eventHandlers.page.metricsData(void 0,void 0,void 0,s,p(t,"page"),g,c,a(f,"metrics.fields")),r.system.eventRecorder.recordEvent(u,l))};a(t,"el.addEventListener")&&t.el.addEventListener("appear",l),a(i,"addEventListener")&&i.addEventListener("dataReady",l)},x=function(t){var e,n=JSON.parse(JSON.stringify(t));a(n,"type")&&(n.actionType=n.type,delete n.type),a(t,"searchHintOriginalTerm")&&(n.actionType="hint",n.actionDetails=t.searchHintOriginalTerm,n.location=[{locationPosition:t.searchHintIndex,locationType:"listItem"},{locationPosition:0,locationType:"hintList"}],n.targetType="listItem",n.targetId=t.searchHintIndex),e=r.eventHandlers.search.metricsData(void 0,void 0,void 0,p(this),n),r.system.eventRecorder.recordEvent(u,e)},S=function(){var t=a(itms,"accountInfo.DSID")?"signedIn":"signedOut",e={type:t},n=r.eventHandlers.account.metricsData(void 0,void 0,void 0,p(this),e);r.system.eventRecorder.recordEvent(u,n)},D=function(){var t=r.eventHandlers.exit.metricsData(void 0,void 0,void 0);r.system.eventRecorder.recordEvent(u,t),itms.flushUnreportedEvents()},C=function(t){var e=r.eventHandlers.enter.metricsData(void 0,void 0,void 0,{type:"taskSwitch"},a(t,"detail.options"));r.system.eventRecorder.recordEvent(u,e)},A=function(t,e){t.pageMetricsHelpers=t.pageMetricsHelpers?t.pageMetricsHelpers:{},a(e,"pageContextOverride")&&(t.pageMetricsHelpers.pageContextOverride=e.pageContextOverride),"loadingTemplate"!==a(t,"documentType")&&(k(t),w(t),v(t,t.el))},T=function(t,e){var n=r.eventHandlers.enter.metricsData(void 0,void 0,void 0,{type:"launch"},e);r.system.eventRecorder.recordEvent(u,n),c=e,t.addEventListener("suspend",D),t.addEventListener("resume",C)},M={init:T,addClickEvent:k,addImpressionsEvent:v,addPageEvent:w,track:A,recordAccountChange:S,recordExit:D,recordResume:C,recordBuyConfirmed:f,createBuyParams:m,handleNativeAction:y,recordSearchEvent:x};e.exports=M},{"../bag":383,"../logger":394,itml:435,"mt-metricskit":507,"mt-metricskit-delegates-itml":471}],396:[function(t,e,n){var i=t("itml"),a=t("native-ios"),r=i.utils,l={itms:void 0};"undefined"!=typeof itms&&(l.itms=itms),r.extend(a,l),e.exports=a},{itml:435,"native-ios":535}],397:[function(t,e,n){var i=t("./bag"),a=t("./pub_sub"),r=itms.networkConnectionType,l={isOnline:function(){return""!==itms.networkConnectionType},isOffline:function(){return""===itms.networkConnectionType},handleNetworkChange:function(){if((""===r||""===itms.networkConnectionType)&&a.publish("networkChange"),r=itms.networkConnectionType,""!==itms.networkConnectionType&&0===Object.keys(i()).length){if(a.publish("appRefresh"),modal.documents&&modal.documents.length>0)for(;modal.documents.length;)modal.popDocument();App.reload()}}};Device.onNetworkChange=function(){l.handleNetworkChange()},e.exports=l},{"./bag":383,"./pub_sub":399}],398:[function(t,e,n){var i=t("./bag"),a=t("./logger"),r={},l="",o=function(){if(!l){var t=i()["itml-app-url"];t&&(l=t.replace(/manifest\.json(.*)$/,""))}return l};r.getBaseUrl=o;var s,c=function(){try{s=t("../../build/on-demand/index.json")}catch(e){a.error(e),s={}}return s};r.getResourceManifest=c;var u=function(t){t=t.replace(/^\.?\/?/,"");var e=r.getResourceManifest()[t];return e?r.getBaseUrl()+e:void a.warn('onDemandResourceManifest: "'+t+'" not found.')};r.getResourceUrl=u,e.exports=r},{"../../build/on-demand/index.json":1,"./bag":383,"./logger":394}],399:[function(t,e,n){var i=t("itml").utils.PubSub;e.exports=new i},{itml:435}],400:[function(t,e,n){var i={build:function(t,e){t=t||{};var n,i=[],a="";if(Object.keys(t).length){for(var r in t)t[r]&&(n=e?t[r]:encodeURIComponent(t[r]),i.push(r+"="+n));a="?"+i.join("&")}return a},parse:function(t,e){var n={},i=t||"",a=i.indexOf("?")>-1?i.split("?")[1]:i,r=a.split("&");if(t&&""!==i.trim())for(var l=0;l<r.length;l++){var o=r[l].split("=");e?n[o[0]]=o[1]:n[o[0]]=decodeURIComponent(o[1]||"")}return n}};e.exports=i},{}],401:[function(t,e,n){function i(t){t&&t.height&&t.width&&(s=t)}function a(){return Settings.Screen}function r(t){return t||(t=a()),t.width>=1366?"xxl":t.width>=1024?"xl":t.width>=736?"l":t.width>=414?"m":t.width>=375?"s":"xs"}function l(t){t||(t=a());var e=t.height/t.width;return e>1.76&&1.78>e?c._16_9:e>1.32&&1.34>e?c._4_3:1.5===e?c._3_2:1===e?c._1_1:c._16_9}function o(t){return t||(t=a()),t.width>t.height?"landscape":"portrait"}var s=Settings.Screen,c={_16_9:0,_4_3:1,_3_2:2};e.exports={getScreenDimensions:a,setScreenDimensions:i,sizeForScreenDimension:r,getCurrentOrientation:o,getAspectRatioFromScreenSize:l,AspectRatio:c}},{}],402:[function(t,e,n){var i=t("./bag"),a=function(){return i().musicCommon||{}},r={defaultCommentFetchCount:function(){return a().defaultCommentFetchCount||24}};e.exports=r},{"./bag":383}],403:[function(t,e,n){var i=t("./isInteger");e.exports=function(t,e){e="number"==typeof e?e:0;for(var n=e;n<t.length&&i(t[n]);n++);return t.substring(e,n)}},{"./isInteger":404}],404:[function(t,e,n){var i="0123456789";e.exports=function(t){if(!t||"string"!=typeof t||t.length>1)throw new TypeError("util.string._isInteger: Expected a single character");return i.indexOf(t)>=0}},{}],405:[function(t,e,n){function i(t){return t.length>0?t.charAt(0).toUpperCase()+t.slice(1):t}function a(e,n){var i=t("./compareNumerically/isInteger"),a=t("./compareNumerically/getNumberFromBeginningOfString");if(!e&&!n)return 0;if(!e)return-1;if(!n)return 1;for(var r=0,l=0;r<e.length||l<n.length;){var o=e[r],s=n[l];if(!s)return 1;if(!o)return-1;if(i(o)&&i(s)){var c=a(e,r),u=a(n,l);if(parseInt(c,10)<parseInt(u,10))return-1;if(parseInt(c,10)>parseInt(u,10))return 1;r+=c.length,l+=u.length}else{if(s>o)return-1;if(o>s)return 1;r++,l++}}return 0}e.exports={capitalizeString:i,compareNumerically:a}},{"./compareNumerically/getNumberFromBeginningOfString":403,"./compareNumerically/isInteger":404}],406:[function(t,e,n){var i=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;for(var e,n=0;n<TabBar.tabs.length;n++)if(e=TabBar.tabs[n],e.identifier===t)return e},a=function(t){if(t===TabBar.selectedTab.identifier)return TabBar.selectedTab;var e=i(t);return e?(TabBar.selectedTab=e,e):void 0};e.exports={setSelectedTab:a,getTab:i}},{}],407:[function(t,e,n){var i=t("./string"),a=t("./bag"),r=t("./loc"),l=t("./logger"),o=t("./image"),s=t("./artwork"),c=t("./screen"),u=t("./client"),h=t("./color"),d=t("./enablers"),p=t("mt-metricskit").utils,m="rgb(217,217,217)",f=t("itml").utils.keypath,g=function(t,e){e="object"!=typeof e?e:null;var n="",i="rgb";if(!t)return n;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),r=a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null;return e&&(r.push(e),i="rgba"),r&&(n=i+"("+r.join(",")+")"),n},b=function(t,e,n){var i;return e&&"object"!=typeof e?e+="":e="1.0",i=n?t?e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)":e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":t?e?"rgba(255,255,255,"+e+")":"rgb(255,255,255)":e?"rgba(0,0,0,"+e+")":"rgb(0,0,0)"},v=function(t){var e;if(t&&t.length){var n,i,a=t.length||0;for(e=0;a>e;e++)if(i=t[e].artwork,i&&i.bgColor){n=i;break}return n||l.warn("No color object in array: ",t),n}},y=function(t,e,n,i,a,r,l){var o=new h(t),s=o.limitColorValuesHSV(e,n,i,a,r,l);return s?s.getHEX():t},k=function(t){var e=new h(t),n=e.isDark();return n},w=function(t,e){
var n=new RegExp(/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g);return t.replace(n,function(t){return'<button data-url="'+t+'" class="open-url tint-color" style="color:'+b(e)+'">'+t+"</button>"})},x=function(t,e){var n=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return n.length&&(t='<button class="view-mention tint-color" style="color:'+b(e)+'" data-mention-type="'+n[0]+'" data-content-id="'+n[1]+'">'+n[2]+"</button>"),t},S=function(t){var e=t.split("{")[1].split("}")[0].replace(/&quot;/g,"").split(":")||[];return e.length&&(t="@"+e[2]),t},D=function(t,e){return t.replace(/@{(.*?)}/g,function(t){return x(t,e)})},C=function(t){return t.replace(/@{(.*?)}/g,function(t){return S(t)})},A=function(t){var e=[];switch(t){case"iTunesBrand":e.push("artist-art");break;case"artist":e.push("light-art"),e.push("artist-artwork");break;case"caption":e.push("no-light-art");break;default:e.push("light-art")}return e},T=function(t){var e="";return t.kind&&t.id?e="song"===t.kind||"album"===t.kind||"playlist"===t.kind||"video"===t.kind||"musicVideo"===t.kind||"uploadedAudio"===t.kind||"radioStation"===t.kind||"uploadedVideo"===t.kind?'<button data-content-id="'+t.id+'" type="play" class="play-button cover-button"></button>':'<button show-on-demand="true" data-content-id="'+t.id+'" type="play" class="cover-button"></button>':t.id&&(e='<button data-content-id="'+t.id+'" type="play" class="play-button cover-button"></button>'),e},M=function(t,e){if(t.image||t.logo){var n,i,a=e&&e.type?e.type:null,r=e&&e.className?e.className:null,l=e&&e.playlistId?e.playlistId:t.id,o=[],s=t.logo||t.image,c=s.bgColor?g(s.bgColor):m,u=r?r:t.kind,h=s.width,d=s.height;if(s&&s.url)n=s.url;else{var p=["artist","album","playlist","radioStation"];p.indexOf(u)>-1&&(n="resource://Missing"+u.charAt(0).toUpperCase()+u.slice(1)+"CellArtworkProxyiPhoneSearch",i=!0)}var f="<img ";return l&&(f+='data-content-id="'+l+'" '),f+='style="itml-img-placeholder-background-color:'+c+';" class="play-button '+A(u)+" "+r+'" width="'+h+'" height="'+d+'" ',f+=i?'src="'+n+'"':'srcset="'+n+" "+s.dpr+'"',f+=">",o.push(f),"play"===a&&"artist"!==u?o.push(T(t)):o.push('<button show-on-demand="true" class="play-button cover-button middle" data-content-id="'+l+'" type="play"/>'),o.push("</img>"),o.join("")}},E=function(t){if(t instanceof Array?t=t.join(""):t&&"string"==typeof t||(t=""),t&&""!==t){t=t.replace(/&quot;/g,'"').replace(/&mdash;/g,"").replace(/&apos;/g,"'").replace(/&#[0-9]+;/g,"").replace("&amp;","&").replace(/&/g,"&amp;").replace("<br>","<br/>");var e=t.match(/(<([^>]+)>)/gi);if(e&&e.length>0)for(var n=0;n<e.length;n++)-1===e[n].search(/<b>|<i>|<\/b>|<\/i>/gi)&&(t=t.replace(e[n],""))}return t};e.exports=function(t){t.registerHelper("data-metrics",function(e){var n,i,a,r=!this.recoId&&this.content&&this.content[0]||"object"==typeof this.artist&&this.artist||this,l="";return f(e,"hash.click")===!0&&(i=p.eventFields.applyFieldsMap(r,"single"),i.targetId||(i.targetId=e.hash.targetId),i.targetType||(i.targetType=e.hash.targetType),i.actionType||(i.actionType=e.hash.actionType),i.actionContext||(i.actionContext=e.hash.actionContext),f(e,"hash.actionSubtype")&&(i.actionDetails?i.actionDetails.actionSubtype=e.hash.actionSubtype:i.actionDetails={actionSubtype:e.hash.actionSubtype}),i=JSON.stringify(i),l+=" data-metrics-click='"+t.Utils.escapeExpression(i)+"'"),f(e,"hash.impressions")===!0&&(n=p.eventFields.applyFieldsMap(r,"impressions"),n.id||(n.id=e.hash.targetId),n.impressionType||(n.impressionType=e.hash.targetType),n=JSON.stringify(n),l+=" data-metrics='"+t.Utils.escapeExpression(n)+"'"),f(e,"hash.location")===!0&&(a=p.eventFields.applyFieldsMap(r,"location"),a.id||(a.id=e.hash.targetId),a.targetType||(a.locationType=e.hash.targetType),a=JSON.stringify(a),l+=" data-metrics-location='"+t.Utils.escapeExpression(a)+"'"),l}),t.registerHelper("click-metrics",function(e){var n=a(),i=p.getFieldMappedData(e.hash,n,"single");return i=JSON.stringify(i),i=t.Utils.escapeExpression(i),new t.SafeString("data-metrics-click='"+i+"'")}),t.registerHelper("capitalize",function(t){return t&&"string"==typeof str?i.capitalizeString(t):t}),t.registerHelper("toUpperCase",function(t){var e=a();return e&&e.language&&e.language.toLowerCase().match(/tr\-tr|el\-gr/i)?t:t&&"string"==typeof t?t.toUpperCase():t}),t.registerHelper("encode",function(t){return encodeURIComponent(t)}),t.registerHelper("debug",function(t){l.log("HB DEBUG: ",t)}),t.registerHelper("equal",function(t,e,n){return t!=e?n.inverse(this):n.fn(this)}),t.registerHelper("increment",function(t){return parseInt(t,10)+1}),t.registerHelper("first",function(t){return t[0]}),t.registerHelper("multiply",function(t,e){return t*e}),t.registerHelper("getYearFromDate",function(t){return t=t||"",t.split("-")[0]}),t.registerHelper("getGenreName",function(t){var e=t.length>0?t[0].name+"  ":"";return e}),t.registerHelper("shouldDisable",function(t,e){return t.isExplicit&&!d.allowsExplicit()?e.fn(this):e.inverse(this)}),t.registerHelper("addPaddingtoHeight",function(t,e){var n=0;return e=e||c.sizeForScreenDimension(),t?(("xs"===e||"s"===e||"m"===e)&&(n=56),("l"===e||"xl"===e||"xxl"===e)&&(n=10),t+n):void 0}),t.registerHelper("arrayPrettify",function(t,e){var n,i=e.count?e.count:2,a="",r=e.append?e.append:", & more";for(n=0;i>n;n++)a+=t[n],n!==i-1&&(a+=", ");return a+=r}),t.registerHelper("numberWithCommas",function(t){return t=t||0,t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}),t.registerHelper("hexToRgb",function(t,e){return g(t,e)}),t.registerHelper("getHighContrastColor",function(t,e){return b(t,e)}),t.registerHelper("colorAuthorName",function(t,e,n){return t&&(t=E(t),t='<span style="color:'+b(e,n)+'">'+t,t=t.replace("<b>","</span> <b>")),t}),t.registerHelper("getColorGridStyle",function(t,e){var n,i,a,r,l="top",o="rgb(255,255,255)",s="",c=v(t),u=c&&c.bgColor?c.bgColor:s;return u||(u="ffffff"),u=y(u,0,360,0,1,.1,.9),r=e&&"boolean"==typeof e?!0:k(u),i=r?g(u,"0.15"):g(u,"0.65"),a=g(u,"0"),n="background-color: linear-gradient("+l+", "+o+", "+i+", "+a+");"}),t.registerHelper("playButton",function(t){return T(t)}),t.registerHelper("heroArtwork",function(e,n,i){var a=[],r=m,l=e.cardColor?g(e.cardColor.bgColor):r,o=4,c=e.artworkTracks;if(e.hero)a.push("<background>"),a.push('<img class="gradient" style="background-color:'+g(e.hero.bgColor)+'" width="'+e.hero.width+'" height="'+e.hero.height+'" srcset="'+e.hero.url+" "+e.hero.dpr+'" />'),a.push("</background>");else if(e.cover)a.push("<background>"),a.push('<img class="gradient" style="background-color:'+g(e.cover.bgColor)+'" width="'+e.cover.width+'" height="'+e.cover.height+'" srcset="'+e.cover.url+" "+e.cover.dpr+'" />'),a.push("</background>");else if(c){var u=Object.keys(c).length>0,h=e.artworkTrackIds,d=h.length;if(u){for(var p=!1,f=0;o>f;){for(var b=!1,v=0;d>v;v++){var y=c[h[v]];if(y){var k={content:y,params:{type:"heroChild"}};i&&(k.artworkMap=i);var w=s.getArtworkForContent(k);n&&(w=y),w.image&&(p||(a.push("<background></background><imageDeck>"),p=!0),a.push('<img style="itml-img-placeholder-background-color: '+l+';" class="light-art 4up-grid" width="'+w.image.width+'" height="'+w.image.height+'" srcset="'+w.image.url+" "+w.image.dpr+'" />'),b=!0,f++)}if(f===o)break}if(b===!1)break}p&&a.push("</imageDeck>")}}var x=a.join("");return new t.SafeString(x)}),t.registerHelper("topChartsGetFirstBgColor",function(t,e){return e?"rgba(0,0,0,.1)":"transparent"}),t.registerHelper("productArtwork",function(e,n,i){var a,r={};if(n&&(r.type=n),i&&(r.className=i),!e.artwork&&e.artworkTracks&&e.artworkTrackIds){var l,o,s=[],c=0,u=Object.keys(e.artworkTracks).length>0,h=e.artworkTrackIds,d=h.length,p=0,m=4;if(u&&d>0){for(r.className=r.className+" img-fill",e.image&&(l=e.image.width,o=e.image.height),s.push('<imageGrid width="'+l+'" height="'+o+'" class="four-up-grid">');m>c;){var f=e.artworkTracks[h[p]];f&&("play"===n&&c===m-1?(r.playlistId=e.id,r.type=n,s.push(M(f,r))):(r.type="",s.push(M(f,r))),c++),p++,p===d&&(p=0)}s.push("</imageGrid>"),a=s.join("")}}else a=M(e,r);return new t.SafeString(a)}),t.registerHelper("getColumnClass",function(){var t,e=c.sizeForScreenDimension();switch(e){case"xxl":t="edge-7col-grid";break;case"xl":t="edge-6col-grid";break;case"l":t="edge-5col-grid";break;default:t="edge-3col-grid"}return t}),t.registerHelper("getLikeImageByLikesData",function(e,n){var i=e&&e[n]?"resource://LoveHateControlLoved":"resource://LoveHateControlNeutral";return new t.SafeString(i)}),t.registerHelper("formatUrls",function(e,n){var i=t.Utils.escapeExpression(e);return new t.SafeString(w(i,n))}),t.registerHelper("formatMentionsAndUrls",function(e,n){var i=t.Utils.escapeExpression(e),a=w(D(i,n),n);return a}),t.registerHelper("formatPlainTextMentions",function(e){var n=t.Utils.escapeExpression(e),i=C(n);return new t.SafeString(i)}),t.registerHelper("loc",function(t,e){var n=e.hash.params?JSON.parse(e.hash.params):{},i=r.loc(t);return n.toUpperCase&&(i=i.toUpperCase()),i}),t.registerHelper("versionGreaterOrEqualTo",function(e,n){var i="";return u.versionGreaterOrEqualTo(e)?"function"==typeof n.fn&&(i=n.fn(this)):"function"==typeof n.inverse&&(i=n.inverse(this)),new t.SafeString(i)}),t.registerHelper("versionLessThan",function(e,n){var i="";return u.versionLessThan(e)?"function"==typeof n.fn&&(i=n.fn(this)):"function"==typeof n.inverse&&(i=n.inverse(this)),new t.SafeString(i)}),t.registerHelper("on-demand-srcset",function(t){return o.getImageSrcSetAttribute(t)}),t.registerHelper("background-image",function(t,e){return e.hash=e.hash||{},o.getBackgroundImageResource(t,e.hash)}),t.registerHelper("classesForKind",function(e){var n=A(e);return new t.SafeString(n.join(" "))}),t.registerHelper("margin",function(t){var e=t?t:"1pt",n='<divider class="margin-helper" style="itml-divider-type:borderless; itml-item-height:'+e+';"/>';return n}),t.registerHelper("escapeText",function(t){return E(t)}),t.registerHelper("replaceHtmlEntities",function(t){return String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&mdash;/g,"").replace(/&apos;/g,"'")}),t.registerHelper("selectorLockupItem",function(t,e){var n,i=[],a=t.label?t.label:t.name;a=a.replace(/&/g,"&amp;");var r=encodeURI(t.url)||"";r=r.replace(/&/g,"&amp;"),e=e.replace(/&/g,"&amp;");var l=a===e?!0:!1;return i.push('<lockup class="filter-lockup" data-link-url="'+r+'" label="'+a+'">'),i.push('<title class="filter-title'),l&&i.push(" filter-selected"),i.push('">'+a+"</title>"),l&&i.push('<decorationImage src="resource://checkmark"/>'),i.push("</lockup>"),n=i.join("")})}},{"./artwork":381,"./bag":383,"./client":384,"./color":385,"./enablers":389,"./image":390,"./loc":392,"./logger":394,"./screen":401,"./string":405,itml:435,"mt-metricskit":507}],408:[function(t,e,n){var i={loading:t("../app/common/partials/loading.hbs"),errorMessage:t("../app/common/partials/error_message.hbs"),commonStates:t("../app/common/partials/common_states.hbs"),listLockup:t("../app/common/partials/list_lockup.hbs"),shelfLockup:t("../app/common/partials/shelf_lockup.hbs"),playlistCard:t("../app/common/partials/playlistCard.hbs")};e.exports=function(t){for(var e in i)i[e]&&t.registerPartial(e,i[e])}},{"../app/common/partials/common_states.hbs":137,"../app/common/partials/error_message.hbs":138,"../app/common/partials/list_lockup.hbs":139,"../app/common/partials/loading.hbs":140,"../app/common/partials/playlistCard.hbs":141,"../app/common/partials/shelf_lockup.hbs":142}],409:[function(t,e,n){var i=t("./query_string"),a=t("./bag"),r={common:function(){return a().musicCommon||{}},subscription:function(){return a().musicSubscription||{}},connect:function(){return a().musicConnect||{}},radioTab:function(){return a().radioTab||{}},reportConcern:function(){return this.common().reportConcern&&this.common().reportConcern.url},album:function(){return a().viewAlbum},artist:function(){return a().viewArtist},affiliateCookie:function(){return a().affiliateCookie},enableAutoFollow:function(){return a().subscription&&a().subscription.enableAutoFollow},userProfile:function(){return a().subscription&&a().subscription.userProfile},getSubscriptionOffersSrv:function(){return a().getSubscriptionOffersSrv},getSubscriptionInfoSrv:function(){return a().getSubscriptionInfoSrv},getSubscriptionStatusSrv:function(){return a().getSubscriptionStatusSrv},updateAutoRenewStateSrv:function(){return a().updateAutoRenewStateSrv},updateTastePreference:function(){return this.subscription().updateTastePreference},tastePreferenceLabels:function(){return this.subscription().tastePreferenceLabels},tastePreferenceArtists:function(){return this.subscription().tastePreferenceArtists},profile:function(){return this.common().profile},profilePermissions:function(){return this.connect().profilePermissions},likesData:function(){return this.connect().likesData},justForYou:function(){return this.subscription().justForYou},browse:function(){return this.subscription().browse},radio:function(){return this.radioTab().grouping},radioFeatured:function(){return this.radioTab().featured},comment:function(){return this.connect().comment},comments:function(){return this.connect().comments},deleteComment:function(){return this.connect().deleteComment},fuseSendSmsCode:function(){return a().fuseSendSmsCode},fuseVerifySmsCode:function(){return a().fuseVerifySmsCode},follow:function(){return this.connect().follow},unfollow:function(){return this.connect().unfollow},like:function(){return this.connect().like},unlike:function(){return this.connect().unlike},activityFeed:function(){return this.connect().activityFeed},activities:function(){return this.connect().activities},socialActivitiesData:function(){return this.connect().socialActivitiesData},incrementShareCount:function(){return this.connect().incrementShareCount},carrierLinkSrv:function(){return a().carrierLinkSrv},deleteSocialPost:function(){return this.connect().deleteSocialPost},modifyAccount:function(){return a().modifyAccount},signup:function(){return a().signup},tpToken:function(){return a().tpToken},setRecommendationPref:function(t){return a().musicSubscription.setRecommendationPref+"?pref="+t},brand:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBrand"},activity:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewActivity"},followerCount:function(){return this.connect().followerCount},followingCount:function(){return this.connect().followingCount},recommendedEntities:function(){return this.connect().recommendedEntities},follows:function(){return this.connect().follows},migration:function(){return"https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/beatsMigrationStatusSrv"},loc:function(){return a().appLoc},grouping:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewGrouping"},search:function(){return a().search},trendingSearches:function(){return"https://search.itunes.apple.com/WebObjects/MZSearchHints.woa/wa/trends"},iforgot:function(){return"https://iforgot.apple.com"},post:function(){return"https://itunes.apple.com/post/idsa."},playlist:function(){return"https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPlaylist"},redeem:function(){return"https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/freeProductCodeWizard?app=music"},build:function(t,e){var n=this[t].call(this);if(n){var a=e;if(n.indexOf("?")>-1){var r=i.parse(n);for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);var o=n.slice(n.indexOf("?"),n.length);n=n.replace(o,"")}return n+=i.build(a)}}};e.exports=r},{"./bag":383,"./query_string":400}],410:[function(t,e,n){var i=t("./network"),a=t("./loc"),r=t("./logger"),l=0,o=0,s=20,c=1e4,u=function(t){var e,n=this,u=itms.makeStoreXMLHttpRequest(),h=new Date;if(!t.url||i.isOffline()){var d=i.isOnline()?400:418;return void t.failure.apply(n,[d,a.loc("FUSE.Error.AnErrorOccurred")])}l>0&&Date.now()-o>c&&(l=0,o=Date.now()),l>s&&(r.level=5,r.splunk("XHR threshold exceeded for request: "+t.url),l=0,o=Date.now()),l++,u.timeout=3e4,u.onreadystatechange=function(){4===u.readyState&&200===u.status?"function"==typeof t.success&&t.success.apply(n,[u.response,u.metrics]):4===u.readyState&&"function"==typeof t.failure&&t.failure.apply(n,[u.status,u.response])},u.open(t.method,t.url,!0),u.setRequestHeader("X-Time-Zone-Offset",-1*h.getTimezoneOffset()),t.headers&&Object.keys(t.headers).forEach(function(e){u.setRequestHeader(e,t.headers[e])}),t.data&&(e=JSON.stringify(t.data)),t.params&&(e=t.params),u.send(e)};e.exports=u},{"./loc":392,"./logger":394,"./network":397}],411:[function(t,e,n){"use strict";var i=t("./handlebars/base"),a=t("./handlebars/safe-string")["default"],r=t("./handlebars/exception")["default"],l=t("./handlebars/utils"),o=t("./handlebars/runtime"),s=function(){var t=new i.HandlebarsEnvironment;return l.extend(t,i),t.SafeString=a,t.Exception=r,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=o,t.template=function(e){return o.template(e,t)},t},c=s();c.create=s,c["default"]=c,n["default"]=c},{"./handlebars/base":412,"./handlebars/exception":413,"./handlebars/runtime":414,"./handlebars/safe-string":415,"./handlebars/utils":416}],412:[function(t,e,n){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},a(this)}function a(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new l("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,a=n.fn;if(e===!0)return a(this);if(e===!1||null==e)return i(this);if(u(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var l=g(n.data);l.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:l}}return a(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new l("Must pass iterator to #each");var n,i,a=e.fn,o=e.inverse,s=0,c="";if(e.data&&e.ids&&(i=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),h(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(u(t))for(var d=t.length;d>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===t.length-1,i&&(n.contextPath=i+s)),c+=a(t[s],{data:n});else for(var p in t)t.hasOwnProperty(p)&&(n&&(n.key=p,n.index=s,n.first=0===s,i&&(n.contextPath=i+p)),c+=a(t[p],{data:n}),s++);return 0===s&&(c=o(this)),c}),t.registerHelper("if",function(t,e){return h(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){h(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=g(e.data);i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var r=t("./utils"),l=t("./exception")["default"],o="2.0.0";n.VERSION=o;var s=6;n.COMPILER_REVISION=s;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=c;var u=r.isArray,h=r.isFunction,d=r.toString,p="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:f,registerHelper:function(t,e){if(d.call(t)===p){if(e)throw new l("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){d.call(t)===p?r.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};n.logger=m;var f=m.log;n.log=f;var g=function(t){var e=r.extend({},t);return e._parent=t,e};n.createFrame=g},{"./exception":413,"./utils":416}],413:[function(t,e,n){"use strict";function i(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var i=Error.prototype.constructor.call(this,t),r=0;r<a.length;r++)this[a[r]]=i[a[r]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var a=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i},{}],414:[function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(n>e){var i=d[n],a=d[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function a(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,a,r,l,o,s,h,d){l&&(r=c.extend({},r,l));var p=e.VM.invokePartial.call(this,n,a,r,o,s,h,d);if(null==p&&e.compile){var m={helpers:o,partials:s,data:h,depths:d};s[a]=e.compile(n,{data:void 0!==h,compat:t.compat},e),p=s[a](r,m)}if(null!=p){if(i){for(var f=p.split("\n"),g=0,b=f.length;b>g&&(f[g]||g+1!==b);g++)f[g]=i+f[g];p=f.join("\n")}return p}throw new u("The partial "+a+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],a=this.fn(t);return e||n?i=r(this,t,a,e,n):i||(i=this.programs[t]=r(this,t,a)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=c.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},a=function(e,n){n=n||{};var r=n.data;a._setup(n),!n.partial&&t.useData&&(r=s(e,r));var l;return t.useDepths&&(l=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,r,l)};return a.isTop=!0,a._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},a._child=function(e,n,a){if(t.useDepths&&!a)throw new u("must pass parent depths");return r(i,e,t[e],n,a)},a}function r(t,e,n,i,a){var r=function(e,r){return r=r||{},n.call(t,e,t.helpers,t.partials,r.data||i,a&&[e].concat(a))};return r.program=e,r.depth=a?a.length:0,r}function l(t,e,n,i,a,r,l){var o={partial:!0,helpers:i,partials:a,data:r,depths:l};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(n,o):void 0}function o(){return""}function s(t,e){return e&&"root"in e||(e=e?p(e):{},e.root=t),e}var c=t("./utils"),u=t("./exception")["default"],h=t("./base").COMPILER_REVISION,d=t("./base").REVISION_CHANGES,p=t("./base").createFrame;n.checkRevision=i,n.template=a,n.program=r,n.invokePartial=l,n.noop=o},{"./base":412,"./exception":413,"./utils":416}],415:[function(t,e,n){"use strict";function i(t){this.string=t}i.prototype.toString=function(){return""+this.string},n["default"]=i},{}],416:[function(t,e,n){"use strict";function i(t){return c[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function r(t){return t instanceof s?t.toString():null==t?"":t?(t=""+t,h.test(t)?t.replace(u,i):t):t+""}function l(t){return t||0===t?m(t)&&0===t.length?!0:!1:!0}function o(t,e){return(t?t+".":"")+e}var s=t("./safe-string")["default"],c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,h=/[&<>"'`]/;n.extend=a;var d=Object.prototype.toString;n.toString=d;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)});var p;n.isFunction=p;var m=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};n.isArray=m,n.escapeExpression=r,n.isEmpty=l,n.appendContextPath=o},{"./safe-string":415}],417:[function(t,e,n){e.exports=t("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":411}],418:[function(t,e,n){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":417}],419:[function(t,e,n){function i(t,e){this.dispatchEvent(new l(t,{detail:{options:e}}))}function a(t,e,n){i.call(this,"error",{msg:t,url:e,line:n})}var r=t("native"),l=t("dom-events").Event,o=t("./base"),s=t("../utils"),c=function(t,e){t=t||{},this.application=t.application||r.application,o.call(this,t,e),this.application.onLaunch=i.bind(this,"ready"),this.application.onExit=i.bind(this,"exit"),this.application.onSuspend=i.bind(this,"suspend"),this.application.onResume=i.bind(this,"resume"),this.application.onError=a.bind(this)};s.inherit(c,o),e.exports=c},{"../utils":446,"./base":420,"dom-events":450,"native":455}],420:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":446,"dom-events":450}],421:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=l(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,l=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||l).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,l=this.escapeExpression;return" "+l(r(t,t))+'="'+l(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l=this.lambda,o=this.escapeExpression,s="<head>\n</head>\n<"+o(l(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(s+=r),s+"></"+o(l(null!=(r=null!=t?t.self:t)?r.documentType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],422:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s='<?xml version="1.0" encoding="UTF-8"?>\n<document>\n';return r=null!=(r=e.content||(null!=t?t.content:t))?r:o,a=typeof r===l?r.call(t,{name:"content",hash:{},data:i}):r,null!=a&&(s+=a),s+"\n</document>"},useData:!0})},{"hbsfy/runtime":418}],423:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return"<title>"+o((a=null!=(a=e.name||(null!=t?t.name:t))?a:l,typeof a===r?a.call(t,{name:"name",hash:{},data:i}):a))+"</title>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],424:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s=this.escapeExpression,c="    <"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:o,typeof r===l?r.call(t,{name:"providerType",hash:{},data:i}):r))+' id="'+s((r=null!=(r=e.id||(null!=t?t.id:t))?r:o,typeof r===l?r.call(t,{name:"id",hash:{},data:i}):r))+'"';return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.prefetchedProperties:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+=">\n",a=e["if"].call(t,null!=t?t.predicateList:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=a&&(c+=a),a=e["if"].call(t,null!=t?t.limitList:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=a&&(c+=a),c+"    </"+s((r=null!=(r=e.providerType||(null!=t?t.providerType:t))?r:o,typeof r===l?r.call(t,{name:"providerType",hash:{},data:i}):r))+">\n"},2:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return' entityType="'+o((a=null!=(a=e.entityType||(null!=t?t.entityType:t))?a:l,typeof a===r?a.call(t,{name:"entityType",hash:{},data:i}):a))+'"'},4:function(t,e,n,i){var a,r="function",l=e.helperMissing,o=this.escapeExpression;return' prefetchedProperties="'+o((a=null!=(a=e.prefetchedProperties||(null!=t?t.prefetchedProperties:t))?a:l,typeof a===r?a.call(t,{name:"prefetchedProperties",hash:{},data:i}):a))+'"'},6:function(t,e,n,i){var a,r="        <predicateList>\n";return a=e.each.call(t,null!=t?t.predicateList:t,{name:"each",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </predicateList>\n"},7:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return'            <propertyPredicate property="'+r(a(null!=t?t.property:t,t))+'" value="'+r(a(null!=t?t.value:t,t))+'"/>\n'},9:function(t,e,n,i){var a,r="        <limitList>\n";return a=e.each.call(t,null!=t?t.limitList:t,{name:"each",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+"        </limitList>\n"},10:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o="            <"+l(r(null!=t?t.limitType:t,t));return a=e["if"].call(t,null!=t?t.entityType:t,{name:"if",hash:{},fn:this.program(11,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o+' value="'+l(r(null!=t?t.value:t,t))+'"/>\n'},11:function(t,e,n,i){var a=this.lambda,r=this.escapeExpression;return' entityType="'+r(a(null!=t?t.entityType:t,t))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.entityProviders:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],425:[function(t,e,n){var i=t("../render"),a=t("../element"),r=t("../../utils"),l=t("parser"),o=t("dom-events").Event,s=t("../../mixins").ArrayPropertyFactory,c=new s(["controller"]),u=function(e,n){e=e||{},e.titleTemplate&&(this.titleTemplate=e.titleTemplate),e.documentType&&(this.documentType=e.documentType),this.name=e.name,this.suppressNavigationController=e.suppressNavigationController;var r=new a({elementType:"style",template:function(){return this.styles.map(function(t){return t.style}).join("\n")},styles:e.styles}),l=new a({elementType:"entityProviderList",template:t("./entity_provider.hbs"),entityProviders:e.entityProviders}),o=new a({elementType:"navigationBar",template:this.titleTemplate});o.name=this.name,this.stylesController=r,this.entityProviderListController=l,this.navigationBarController=o,c.createProperties(this),e.controllers&&e.controllers.forEach(function(t){this.addController(t),t.styles.forEach(function(t){this.stylesController.addStyle(t)},this),t.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)},this),i.call(this,e,n),r.addEventListener("addStyle",function(){r.render()}),r.addEventListener("removeStyle",function(){r.render()}),l.addEventListener("addEntityProvider",function(){l.render()}),l.addEventListener("removeEntityProvider",function(){l.render()}),this.addEventListener("addController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){
this.stylesController.addStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.addEntityProvider(t)},this)}.bind(this)),this.addEventListener("removeController",function(t){var e=t.detail.controller;e.styles.forEach(function(t){this.stylesController.removeStyle(t)},this),e.entityProviders.forEach(function(t){this.entityProviderListController.removeEntityProvider(t)},this)}.bind(this)),this.addEventListener("addStyle",function(t){this.stylesController.addStyle(t.detail.style)}.bind(this)),this.addEventListener("removeStyle",function(t){this.stylesController.removeStyle(t.detail.style)}.bind(this)),this.addEventListener("addEntityProvider",function(t){this.entityProviderListController.addEntityProvider(t.detail.entityProvider)}.bind(this)),this.addEventListener("removeEntityProvider",function(t){this.entityProviderListController.removeEntityProvider(t.detail.entityProvider)}.bind(this))};r.inherit(u,i),c.mixin(u.prototype),u.prototype.delegateEvents=["load","unload","appear","disappear","update","didupdate"].concat(i.prototype.delegateEvents),u.prototype.tagTemplate=t("./document_tag.hbs"),u.prototype.titleTemplate=t("./document_title.hbs"),u.prototype.template=t("./document.hbs"),u.prototype.render=function(t){var e=l.parse(this.tagTemplate({content:this.template({self:this})}),this.el),n=this.el||e,i=e.documentElement||e,a=e.getElementsByTagName("head").item(0),r=e.getElementsByTagName(this.documentType).item(0);this.stylesController.render(n),this.entityProviderListController.render(n),this.navigationBarController.render(n),this.stylesController.insertInto(a),this.entityProviderListController.insertInto(a),this.suppressNavigationController||this.navigationBarController.insertInto(i,r),this.controllers.forEach(function(e){t&&e.render(n),e.insertInto(r)}),this.el?this.el.replaceChild(e,this.el.documentElement):this.el=e,this.dispatchEvent(new o("render"))},e.exports=u},{"../../mixins":437,"../../utils":446,"../element":426,"../render":432,"./document.hbs":421,"./document_tag.hbs":422,"./document_title.hbs":423,"./entity_provider.hbs":424,"dom-events":450,parser:456}],426:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=a.parser,l=t("dom-events").Event,o=function(t,e){t=t||{},t.elementType&&(this.elementType=t.elementType),i.call(this,t,e)};a.inherit(o,i),o.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({self:this,content:this.template(this)}),t);this.el&&this.container&&this.container.replaceChild(e,this.el),this.el=t?e:e.documentElement,this.dispatchEvent(new l("render"))},o.prototype.insertInto=function(t,e){var n=this.el;t.ownerDocument!==n.ownerDocument&&(n=t.ownerDocument.adoptNode(n),this.el=n),t.insertBefore(this.el,e),this.container=t},e.exports=o},{"../utils":446,"./render":432,"dom-events":450}],427:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r='class="';return a=e.each.call(t,null!=(a=null!=t?t.self:t)?a.classes:a,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=a&&(r+=a),r+'"'},2:function(t,e,n,i){var a,r=this.lambda,l=this.escapeExpression,o=l(r(t,t));return a=e.unless.call(t,i&&i.last,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=a&&(o+=a),o},3:function(t,e,n,i){return" "},5:function(t,e,n,i,a){var r,l=e.helperMissing;return r=(e.ifValidAttribute||t&&t.ifValidAttribute||l).call(t,e.lookup.call(t,null!=a[1]?a[1].self:a[1],t,{name:"lookup",hash:{},data:i}),{name:"ifValidAttribute",hash:{},fn:this.program(6,i,a),inverse:this.noop,data:i}),null!=r?r:""},6:function(t,e,n,i,a){var r=this.lambda,l=this.escapeExpression;return" "+l(r(t,t))+'="'+l(e.lookup.call(t,null!=a[2]?a[2].self:a[2],t,{name:"lookup",hash:{},data:i}))+'" '},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,a){var r,l,o=this.lambda,s=this.escapeExpression,c="function",u=e.helperMissing,h="<"+s(o(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+" ";return r=e["if"].call(t,null!=(r=null!=t?t.self:t)?r.classes:r,{name:"if",hash:{},fn:this.program(1,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=" ",r=e.each.call(t,null!=(r=null!=t?t.self:t)?r.watchedAttributes:r,{name:"each",hash:{},fn:this.program(5,i,a),inverse:this.noop,data:i}),null!=r&&(h+=r),h+=">",l=null!=(l=e.content||(null!=t?t.content:t))?l:u,r=typeof l===c?l.call(t,{name:"content",hash:{},data:i}):l,null!=r&&(h+=r),h+"</"+s(o(null!=(r=null!=t?t.self:t)?r.elementType:r,t))+">"},useData:!0,useDepths:!0})},{"hbsfy/runtime":418}],428:[function(t,e,n){e.exports={BaseController:t("./base"),RenderableController:t("./render"),DocumentController:t("./document"),ElementController:t("./element"),MultiElementController:t("./multielement"),MenuBarController:t("./menu_bar"),Application:t("./application"),TabbedApplication:t("./tab_application")}},{"./application":419,"./base":420,"./document":425,"./element":426,"./menu_bar":429,"./multielement":431,"./render":432,"./tab_application":433}],429:[function(t,e,n){var i=t("../element"),a=t("../../utils"),r=function(t,e){t=t||{},this.menuItems=t.menuItems||[],i.call(this,t,e)};a.inherit(r,i),r.prototype.elementType="menuBar",r.prototype.template=t("./menu_bar.hbs"),r.prototype.delegateEvents=["needscontent","select"].concat(i.prototype.delegateEvents),r.prototype.setDocumentForItem=function(t,e){this.el.getFeature("MenuBarDocument").setDocument(t,e)},r.prototype.getDocumentForItem=function(t){this.el.getFeature("MenuBarDocument").getDocument(t)},r.prototype.getSelectedItem=function(){this.el.getFeature("MenuBarDocument").getActiveElement()},r.prototype.setSelectedItem=function(t){this.el.getFeature("MenuBarDocument").setSelectedItem(t)},e.exports=r},{"../../utils":446,"../element":426,"./menu_bar.hbs":430}],430:[function(t,e,n){var i=t("hbsfy/runtime");e.exports=i.template({1:function(t,e,n,i){var a,r,l="function",o=e.helperMissing,s="    <menuItem>\n        <title>";return r=null!=(r=e.title||(null!=t?t.title:t))?r:o,a=typeof r===l?r.call(t,{name:"title",hash:{},data:i}):r,null!=a&&(s+=a),s+"</title>\n    </menuItem>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var a;return a=e.each.call(t,null!=t?t.menuItems:t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=a?a:""},useData:!0})},{"hbsfy/runtime":418}],431:[function(t,e,n){var i=t("./render"),a=t("../utils"),r=t("parser"),l=t("dom-events").Event,o=function(t,e){i.call(this,t,e)};a.inherit(o,i),o.prototype.tagTemplate=function(t){return"<stackTemplate>"+t.content+"</stackTemplate>"},o.prototype.render=function(t){!t&&this.el&&(t=this.el.ownerDocument);var e=r.parse(this.tagTemplate({content:this.template(this)}),t);e=t?e:e.documentElement;var n,i,a,o,s=e.childNodes,c=s.length,u=this.container;if(this.el&&this.container){if(n=this.elementArray.reduce(function(t,e){return s.length>0?(a=s.item(0),u.replaceChild(a,e),t.push(a)):u.removeChild(e),t},[]),n.length<c)for(o=n[n.length-1],i=n.length;c>i;i++)a=s.item(0),n.push(a),u.insertBefore(a,o.nextSibling),o=a}else for(n=[],i=0;c>i;i++)n.push(s.item(i));this.el=e,this.elementArray=n,this.dispatchEvent(new l("render"))},o.prototype.insertInto=function(t,e){this.elementArray=this.elementArray.reduce(function(n,i){var a=i;return a.ownerDocument!==t.ownerDocument&&(a=t.ownerDocument.adoptNode(a)),t.insertBefore(a,e),n.push(a),n},[]),this.el.ownerDocument!==t.ownerDocument&&(this.el=t.ownerDocument.adoptNode(this.el)),this.container=t},e.exports=o},{"../utils":446,"./render":432,"dom-events":450,parser:456}],432:[function(t,e,n){var i=t("./base"),a=t("dom-events").EventDelegate,r=t("dom-events").Event,l=t("../utils"),o=t("../mixins").ArrayPropertyFactory,s=t("../mixins").SetPropertyFactory,c=new o(["style","entityProvider"]),u=new s([{property:"class",plural:"classes"}]),h=function(t){i.call(this),a.call(this),t=t||{};var e;Object.defineProperty(this,"el",{get:function(){return e},set:function(t){var n=e;e=t,this.delegateEvents.length&&(n&&this.removeEventDelegates(n,this.delegateEvents),this.addEventDelegates(t,this.delegateEvents))},enumerable:!0,configurable:!0}),c.createProperties(this),u.createProperties(this),t.styles&&t.styles.forEach(function(t){this.addStyle(t)},this),t.entityProviders&&t.entityProviders.forEach(function(t){this.addEntityProvider(t)},this),t.classes&&t.classes.forEach(function(t){this.addClass(t)},this);var n=function(){this.render()}.bind(this);this.addEventListener("addClass",n),this.addEventListener("removeClass",n),t.template&&(this.template=t.template);var l=this.watchedAttributes;t.watchedAttributes||(t.watchedAttributes=[]),l=l.concat(t.watchedAttributes),this.watchedAttributes=l;var o=l.reduce(function(e,n){return e[n]=t[n],e},{});this.addEventListener("change",n),Object.defineProperties(this,l.reduce(function(t,e){return t[e]={enumerable:!0,get:function(){return o[e]},set:function(t){var n=o[e];o[e]=t,this.dispatchEvent(new r("change",{detail:{oldValue:n,newValue:t,name:e}}))}},t},{})),t&&t.el?this.el=t.el:this.render()};l.inherit(h,i),c.mixin(h.prototype),u.mixin(h.prototype),h.prototype.delegateEvents=[],h.prototype.tagTemplate=t("./element_tag.hbs"),h.prototype.watchedAttributes=["selected","disabled","accessibilityText"],h.prototype.template=function(){return""},h.prototype.render=function(){},e.exports=h},{"../mixins":437,"../utils":446,"./base":420,"./element_tag.hbs":427,"dom-events":450}],433:[function(t,e,n){var i=t("native-ios"),a=t("./application"),r=t("./tab_bar"),l=t("dom-events").EventDelegate,o=t("../utils"),s=function(t,e){t=t||{},t.tabBar=t.tabBar||i.tabBar,a.call(this,t,e),l.call(this),this.tabBar=new r({tabBar:t.tabBar}),this.addEventDelegates(this.tabBar,this.tabBar.delegatedEvents)};o.inherit(s,a),e.exports=s},{"../utils":446,"./application":419,"./tab_bar":434,"dom-events":450,"native-ios":452}],434:[function(t,e,n){function i(t){t||(t=new s("select",{detail:{target:this.tabBar.selectedTab}})),this.dispatchEvent(t)}function a(t){t||(t=new s("reload",{detail:{target:this.tabBar}})),this.dispatchEvent(t)}function r(t){var e=new s("needscontent",{detail:{target:t.detail.tab}});this.dispatchEvent(e)}var l=t("native-ios"),o=t("./base"),s=t("dom-events").Event,c=t("../utils"),u=function(t){o.call(this),t=t||{},t.tabBar=t.tabBar||l.tabBar,this.tabBar=t.tabBar,this.tabBar.onSelect=i.bind(this),this.tabBar.onReload=a.bind(this),this.tabBar.onNeedsContent=r.bind(this)};c.inherit(u,o),u.prototype.delegatedEvents=["select","reload","needscontent"],e.exports=u},{"../utils":446,"./base":420,"dom-events":450,"native-ios":452}],435:[function(t,e,n){e.exports={controller:t("./controllers"),event:t("dom-events"),traits:t("./traits"),utils:t("./utils"),model:t("./models")}},{"./controllers":428,"./models":441,"./traits":443,"./utils":446,"dom-events":450}],436:[function(t,e,n){function i(t){return t+"s"}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t,e,n){if(this.dispatchEvent){var i={};i[e.property]=n,this.dispatchEvent(new l(t+e.capitalized,{detail:i}))}}var l=t("dom-events").Event,o=function(t){this.propertyNames=t.map(function(t){return"string"==typeof t&&(t={property:t}),t.plural||(t.plural=i(t.property)),t.capitalized||(t.capitalized=a(t.property)),t})};o.prototype.createProperties=function(t){Object.defineProperties(t,this.propertyNames.reduce(function(t,e){return t[e.plural]={value:[]},t},{}))},o.prototype.dispatchPropertyEvent=r,o.prototype.addGenerator=function(t){return function(e){this[t.plural].push(e),r.call(this,"add",t,e)}},o.prototype.removeGenerator=function(t){return function(e){var n=this[t.plural].reduceRight(function(t,n,i){return n===e&&t.push(i),t},[]);n.forEach(function(e){this[t.plural].splice(e,1)},this),r.call(this,"remove",t,e)}},o.prototype.mixin=function(t){this.propertyNames.forEach(function(e){t["add"+e.capitalized]=this.addGenerator(e),t["remove"+e.capitalized]=this.removeGenerator(e)},this)},e.exports=o},{"dom-events":450}],437:[function(t,e,n){e.exports={ArrayPropertyFactory:t("./array"),SetPropertyFactory:t("./set")}},{"./array":436,"./set":438}],438:[function(t,e,n){var i=t("./array"),a=t("../utils"),r=function(){i.apply(this,arguments)};a.inherit(r,i);var l=r.prototype.dispatchPropertyEvent;r.prototype.addGenerator=function(t){return function(e){-1===this[t.plural].indexOf(e)&&(this[t.plural].push(e),l.call(this,"add",t,e))}},e.exports=r},{"../utils":446,"./array":436}],439:[function(t,e,n){var i=t("dom-events").EventTarget,a=t("../utils"),r=function(){i.call(this)};a.inherit(r,i),e.exports=r},{"../utils":446,"dom-events":450}],440:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.providerType=t.providerType,this.entityType=t.entityType,this.id=t.id,t.predicateList&&(this.predicateList=t.predicateList),t.limitList&&(this.limitList=t.limitList),t.prefetchedProperties&&(this.prefetchedProperties=t.prefetchedProperties)};a.inherit(r,i),e.exports=r},{"../utils":446,"./base":439}],441:[function(t,e,n){e.exports={BaseModel:t("./base"),Style:t("./style"),EntityProvider:t("./entity_provider")}},{"./base":439,"./entity_provider":440,"./style":442}],442:[function(t,e,n){var i=t("./base"),a=t("../utils"),r=function(t){i.call(this),this.style=t.style};a.inherit(r,i),e.exports=r},{"../utils":446,"./base":439}],443:[function(t,e,n){e.exports={SelectMap:t("./select_map")}},{"./select_map":444}],444:[function(t,e,n){function i(t){t.addEventListener("select",this.handleSelect.bind(this))}var a=t("../controllers").MultiElementController,r=function(){var t;t=this instanceof a?function(){this.elementArray.forEach(function(t){i.call(this,t)},this)}:function(){i.call(this,this.el)},this.addEventListener("render",t.bind(this)),t.call(this),this.onSelect={}};r.prototype.handleSelect=function(t){var e=t.target.getAttribute("class").split(" "),n=this.onSelect;e.forEach(function(e){var i=n[e];"function"==typeof i&&i.call(this,t)}.bind(this))},e.exports=r},{"../controllers":428}],445:[function(t,e,n){var i=t("hbsfy/runtime");i.registerHelper("ifValidAttribute",function(t,e){return t||t===!1||0===t?e.fn(this):e.inverse(this)}),e.exports=i},{"hbsfy/runtime":418}],446:[function(t,e,n){var i=t("utils"),a=t("parser"),r=t("pubsub"),l=t("./handlebars"),o={parser:a,PubSub:r,Handlebars:l};i.extend(i,o),e.exports=i},{"./handlebars":445,parser:456,pubsub:458,utils:459}],447:[function(t,e,n){var i=t("./event-target"),a=t("utils"),r=function(){function t(t){this.dispatchEvent(t)}this.hasOwnProperty("dispatchEvent")||i.call(this);var e=t.bind(this);this.addEventDelegates=function(t,n){n.forEach(function(n){t.addEventListener(n,e)},this)},this.removeEventDelegates=function(t,n){n.forEach(function(n){t.removeEventListener(n,e)},this)}};a.inherit(r,i),e.exports=r},{"./event-target":448,utils:451}],448:[function(t,e,n){var i=function(){var t={};this.addEventListener=function(e,n){t[e]=t[e]||[],t[e].push(n)},this.removeEventListener=function(e,n){var i,a=t[e];a&&(i=a.indexOf(n),i>-1&&a.splice(i,1))},this.dispatchEvent=function(e){var n=t[e.type];n&&n.forEach(function(t){t.call(this,e)},this)}};e.exports=i},{}],449:[function(t,e,n){var i=t("utils"),a=function(t,e){if(this.type=t,!t)throw new TypeError("Failed to construct Event: An event name must be provided.");e&&e.detail&&(this.detail=i.clone(e.detail))};a.prototype.initEvent=function(){},a.prototype.preventDefault=function(){},a.prototype.stopImmediatePropagation=function(){},a.prototype.stopPropagation=function(){},e.exports=a},{utils:451}],450:[function(t,e,n){e.exports={Event:t("./event"),EventDelegate:t("./event-delegate"),EventTarget:t("./event-target")}},{"./event":449,"./event-delegate":447,"./event-target":448}],451:[function(t,e,n){function i(t,e){var n;if("undefined"==typeof t)return t;for(n in e)t[n]=e[n];return t}function a(t){return i({},t)}function r(t,e,n){n?i(t.prototype,e.prototype):t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writeable:!0,configurable:!0}})}function l(t,e){if(!e)return t;for(var n=e.split("."),i=t,a=0,r=n.length;r>a&&"undefined"!=typeof i;a++)i=i[n[a]];return i}function o(t){setTimeout(t,1)}e.exports={clone:a,extend:i,inherit:r,keypath:l,nextTick:o}},{}],452:[function(t,e,n){var i=t("utils"),a=t("native"),r={modal:void 0,tabBar:void 0};"undefined"!=typeof modal&&(r.modal=modal),"undefined"!=typeof TabBar&&(r.tabBar=TabBar),i.extend(a,r),e.exports=a},{"native":453,utils:454}],453:[function(t,e,n){var i,a={application:void 0,DOMParser:void 0,XMLSerializer:void 0};"undefined"!=typeof DOMImplementationRegistry&&(i=function(){},i.prototype.serializer=DOMImplementationRegistry.getDOMImplementation(null).createLSSerializer(),i.prototype.serializeToString=function(t){return this.serializer.writeToString(t)},a.XMLSerializer=i),"undefined"!=typeof DOMParser&&(a.DOMParser=DOMParser),"undefined"!=typeof App&&(a.application=App),e.exports=a},{}],454:[function(t,e,n){e.exports=t(451)},{}],455:[function(t,e,n){e.exports=t(453)},{}],456:[function(t,e,n){var i=t("native"),a=new i.DOMParser,r=new i.XMLSerializer;e.exports={parse:function(t,e){var n=a.parseFromString(t,"text/xml");return e?e.adoptNode(n.documentElement):n},stringify:function(t){return r.serializeToString(t)}}},{"native":457}],457:[function(t,e,n){e.exports=t(453)},{}],458:[function(t,e,n){function i(){return"uuid_"+ ++a}var a=-1,r=function(){this.topics={}};r.prototype.publish=function(t,e){var n=this.topics[t];if(n){var i=Object.keys(n);i.forEach(function(t){n[t](e)})}},r.prototype.subscribe=function(t,e){this.topics[t]||(this.topics[t]={});var n=i();return this.topics[t][n]=e,n},r.prototype.unsubscribe=function(t){if(this.topics[t])return void delete this.topics[t];for(var e,n,i=Object.keys(this.topics),a=0,r=i.length;r>a;a++){if(e=this.topics[i[a]],e[t]){delete e[t];break}for(n in e)e.hasOwnProperty(n)&&e[n]===t&&delete e[n]}},e.exports=r},{}],459:[function(t,e,n){e.exports=t(451)},{}],460:[function(t,e,n){e.exports=function(e,n){return t("./util").its.loc(e,n)},"undefined"!=typeof Handlebars&&Handlebars.registerHelper("loc",helper)},{"./util":465}],461:[function(t,e,n){e.exports=t("./its"),e.exports.hbsHelper=t("./hbs-helper")},{"./hbs-helper":460,"./its":462}],462:[function(t,e,n){e.exports.its={},t("./util")(e.exports),t("./loc")(e.exports)},{"./loc":463,"./util":464}],463:[function(t,e,n){e.exports=function(t){var e=t.its,n=t.iTSLocalization={};n._strings={},n.hasLocalizedValue=function(t){var i=n._strings[t];return e.isDefined(i)},e.loc=function(t,e){var i=n._strings[t];return"undefined"==typeof i&&(i=t),e&&(i=n.replaceTokens(i,e)),"undefined"==typeof itms&&(i=n.replaceMarkupTokens(i,e)),i},e.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},e.locWithMarkupTokens=function(t,i){return n.replaceMarkupTokens(e.loc(t,i),i)},n._strings._showLocKeys&&(e.loc=function(t){return"+"+t+"+"}),e.locWithCount=function(t,i,a){var r,l,o=null;return 0==i&&(r=t+".zero",n.hasLocalizedValue(r)&&(o=r)),null===o&&(o=t,l=n.pluralCategory(i),"other"!==l&&(r=t+"."+l,n.hasLocalizedValue(r)&&(o=r))),a||(a={}),e.isDefined(a.count)||(a.count=e.formatNumber(i)),e.loc(o,a)},n.replaceTokens=function(t,n){if(n)for(var i in n)if(n.hasOwnProperty(i)){var a="@@"+i+"@@";t=e.string.replace(t,a,n[i])}return t},n.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},n.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var i in e)n.markupParams[i.toString()]=e[i];for(var a in n.markupParams){var r="##"+a+"##";t=t.replace(new RegExp(r,"gi"),n.markupParams[a])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},n.localizedResourceUrlForPathKey=function(t,n){void 0===n&&(n=/https:/.test(window.location.protocol));var i=n?"https://s.mzstatic.com":"http://r.mzstatic.com";return i+e.loc(t)},"undefined"!=typeof itms&&"undefined"!=typeof formatNumber?e.formatNumber=function(t){return formatNumber(Number(t))}:e.formatNumber=function(t){if("undefined"==typeof n.decimalSeparator){var e=n._strings._decimalSeparator;"undefined"==typeof e&&(e="."),n.decimalSeparator=e,e=n._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),n.thousandsSeparator=e}for(var i=parseFloat(t).toString().split("."),a=n.thousandsSeparator,r=i[0].split(""),l=r.length-3;l>0;l-=3)r.splice(l,0,a);i[0]=r.join("");var o=i.join(n.decimalSeparator);return o},n._pluralCategoryDefault=function(t){return"other"},n._pluralCategoryOne=function(t){return 1==t?"one":"other"},n._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},n._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},n._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},n._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},n._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},n._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},n._pluralCategoryFnByLanguage={zh:n._pluralCategoryDefault,id:n._pluralCategoryDefault,ja:n._pluralCategoryDefault,ko:n._pluralCategoryDefault,ms:n._pluralCategoryDefault,th:n._pluralCategoryDefault,vi:n._pluralCategoryDefault,en:n._pluralCategoryOne,ca:n._pluralCategoryOne,da:n._pluralCategoryOne,nl:n._pluralCategoryOne,de:n._pluralCategoryOne,el:n._pluralCategoryOne,fi:n._pluralCategoryOne,hu:n._pluralCategoryOne,it:n._pluralCategoryOne,nb:n._pluralCategoryOne,no:n._pluralCategoryOne,pt:n._pluralCategoryOne,es:n._pluralCategoryOne,sv:n._pluralCategoryOne,tr:n._pluralCategoryOne,ar:n._pluralCategoryArabic,fr:n._pluralCategoryFrench,iw:n._pluralCategoryHebrew,pl:n._pluralCategoryPolish,ro:n._pluralCategoryRomanian,ru:n._pluralCategoryRussian},n.pluralCategory=function(t){if(e.serverData&&e.serverData.constants){var i=n._pluralCategoryFnByLanguage[e.serverData.constants.languageCode];if(i)return i(t);throw new Error("missing plural category function for: "+e.serverData.constants.languageCode)}return"other"},e.updateLocale=function(t){n._strings=t}}},{}],464:[function(t,e,n){e.exports=function(t){var e=t.its;e.isDefined=function(t){return"undefined"!=typeof t},"undefined"==typeof e.string&&(e.string={}),e.string.replace=function(t,e,n){return t?("string"!=typeof t&&(t+=""),t.split(e).join(n)):t}}},{}],465:[function(t,e,n){window.iTSLocalization||(iTSLocalization={}),window.iTSLocalization._strings||(iTSLocalization._strings={}),iTSLocalization.hasLocalizedValue=function(t){var e=iTSLocalization._strings[t];return its.isDefined(e)},its.loc=function(t,e){var n=iTSLocalization._strings[t];return"undefined"==typeof n&&(n=t),e&&(n=iTSLocalization.replaceTokens(n,e)),"undefined"==typeof itms&&(n=iTSLocalization.replaceMarkupTokens(n,e)),n},its.locDate=function(t){if(!t)return"";var e,n=t.length;if(n>10)e=new Date(t);else{var i=n>=4?t.slice(0,4):0,a=n>=7?t.slice(5,7):1,r=n>=10?t.slice(8,10):1;e=new Date(i,a-1,r)}return formatDate(e)},its.locWithMarkupTokens=function(t,e){return iTSLocalization.replaceMarkupTokens(its.loc(t,e),e)},iTSLocalization._strings._showLocKeys&&(its.loc=function(t){return"+"+t+"+"}),its.locWithCount=function(t,e,n){var i,a,r=null;return 0==e&&(i=t+".zero",iTSLocalization.hasLocalizedValue(i)&&(r=i)),null===r&&(r=t,a=iTSLocalization.pluralCategory(e),"other"!==a&&(i=t+"."+a,iTSLocalization.hasLocalizedValue(i)&&(r=i))),n||(n={}),its.isDefined(n.count)||(n.count=its.formatNumber(e)),its.loc(r,n)},iTSLocalization.replaceTokens=function(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i="@@"+n+"@@";t=its.string.replace(t,i,e[n])}return t},iTSLocalization.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:""},iTSLocalization.replaceMarkupTokens=function(t,e){if(t.indexOf("##")>-1){if(e)for(var n in e)iTSLocalization.markupParams[n.toString()]=e[n];for(var i in iTSLocalization.markupParams){var a="##"+i+"##";t=t.replace(new RegExp(a,"gi"),iTSLocalization.markupParams[i])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},iTSLocalization.localizedResourceUrlForPathKey=function(t,e){void 0===e&&(e=/https:/.test(window.location.protocol));var n=e?"https://s.mzstatic.com":"http://r.mzstatic.com";return n+its.loc(t)},"undefined"!=typeof itms&&"undefined"!=typeof formatNumber?its.formatNumber=function(t){return formatNumber(Number(t))}:its.formatNumber=function(t){if("undefined"==typeof iTSLocalization.decimalSeparator){var e=iTSLocalization._strings._decimalSeparator;"undefined"==typeof e&&(e="."),iTSLocalization.decimalSeparator=e,e=iTSLocalization._strings._thousandsSeparator,"undefined"==typeof e&&(e=","),iTSLocalization.thousandsSeparator=e}for(var n=parseFloat(t).toString().split("."),i=iTSLocalization.thousandsSeparator,a=n[0].split(""),r=a.length-3;r>0;r-=3)a.splice(r,0,i);n[0]=a.join("");var l=n.join(iTSLocalization.decimalSeparator);return l},iTSLocalization._pluralCategoryDefault=function(t){return"other"},iTSLocalization._pluralCategoryOne=function(t){return 1==t?"one":"other"},iTSLocalization._pluralCategoryArabic=function(t){var e=t>>0;if(e!=t)return"other";if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";var n=e%100;return n>=11?"many":n>=3?"few":"other"},iTSLocalization._pluralCategoryFrench=function(t){return 2>t&&t>=0?"one":"other"},iTSLocalization._pluralCategoryHebrew=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";if(2===e)return"two";var n=e%10;return 0==n&&e>10?"many":"other"},iTSLocalization._pluralCategoryPolish=function(t){var e=t>>0;if(e!=t)return"other";if(1===e)return"one";var n=e%10;if(4>=n&&n>=2){var i=e%100;if(i>14||12>i)return"few"}return"many"},iTSLocalization._pluralCategoryRomanian=function(t){var e=t>>0;if(e!=t)return"few";if(0===e)return"few";if(1===e)return"one";var n=t%100;return 19>=n&&n>=1?"few":"other"},iTSLocalization._pluralCategoryRussian=function(t){var e=t>>0;if(e!=t)return"other";var n=e%10;if(n>=5||0==n)return"many";var i=e%100;return 14>=i&&i>=11?"many":1==n?"one":"few"},iTSLocalization._pluralCategoryFnByLanguage={zh:iTSLocalization._pluralCategoryDefault,id:iTSLocalization._pluralCategoryDefault,ja:iTSLocalization._pluralCategoryDefault,ko:iTSLocalization._pluralCategoryDefault,ms:iTSLocalization._pluralCategoryDefault,th:iTSLocalization._pluralCategoryDefault,vi:iTSLocalization._pluralCategoryDefault,en:iTSLocalization._pluralCategoryOne,ca:iTSLocalization._pluralCategoryOne,da:iTSLocalization._pluralCategoryOne,nl:iTSLocalization._pluralCategoryOne,de:iTSLocalization._pluralCategoryOne,el:iTSLocalization._pluralCategoryOne,fi:iTSLocalization._pluralCategoryOne,hu:iTSLocalization._pluralCategoryOne,it:iTSLocalization._pluralCategoryOne,nb:iTSLocalization._pluralCategoryOne,no:iTSLocalization._pluralCategoryOne,pt:iTSLocalization._pluralCategoryOne,es:iTSLocalization._pluralCategoryOne,sv:iTSLocalization._pluralCategoryOne,tr:iTSLocalization._pluralCategoryOne,ar:iTSLocalization._pluralCategoryArabic,fr:iTSLocalization._pluralCategoryFrench,iw:iTSLocalization._pluralCategoryHebrew,pl:iTSLocalization._pluralCategoryPolish,ro:iTSLocalization._pluralCategoryRomanian,ru:iTSLocalization._pluralCategoryRussian},iTSLocalization.pluralCategory=function(t){if(its.serverData&&its.serverData.constants){var e=iTSLocalization._pluralCategoryFnByLanguage[its.serverData.constants.languageCode];if(e)return e(t);if(its.Logger){var n=its.Logger.named("its-base-util");n.error("missing plural category function for: "+its.serverData.constants.languageCode,!0)}}return"other"}},{}],466:[function(t,e,n){e.exports={color:t("./lib/color"),cookie:t("./lib/cookie")}},{"./lib/color":467,"./lib/cookie":468}],467:[function(t,e,n){var i=function(){var t,e,n,i=[],r=95.0456,l=100,o=108.9058,c=function(t){if("string"==typeof t)return t.indexOf("%")>0?parseFloat(t)/100:parseFloat(t);if("number"==typeof t)return t;throw{error:"InvalidFormat",message:"Argument "+t+" is not a number."}},u=function(t){return t=c(t),t>1||-1>t?t/100:t},d=function(t,e,n){return Math.max(Math.min(c(t),c(n)),c(e))},p=function(t){return t===+t&&t===(0|t)},m=function(a,r,l){return a=c(a),r=c(r),l=c(l),p(a)&&p(r)&&p(l)?(a=d(a,0,255),r=d(r,0,255),l=d(l,0,255),t=a/255,e=r/255,n=l/255):(t=d(a,0,1),e=d(r,0,1),n=d(l,0,1),a=Math.round(255*t),r=Math.round(255*e),l=Math.round(255*n)),i=[a,r,l],{r:a,g:r,b:l}},f=function(t){return"undefined"==typeof t||null==t||""===t?t=1:(t=u(t),t=d(t,0,1)),t},g=function(t){return/(^#?[0-9A-F]{6}$)|(^#?[0-9A-F]{3}$)/i.test(t)},b=function(t){return t.match(/[\d.]{1,3}/gi)};return{parseColor:function(t,e){var n,i;return null==t?(n=m(0,0,0),i=f(e)):t instanceof a?(n=m(t.rgb.r.color.rgb.g,t.rgb.b),i=f(t.alpha)):null!=t.r?(n=m(t.r,t.g,t.b),i=f(t.alpha||1)):Array.isArray(t)&&t.length>=3?(n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):!g(t)&&(t.indexOf("rgb")>-1||null!=t.match(/[\d.]{1,3}/gi)&&t.match(/[\d.]{1,3}/gi).length>=3)?(t=t.match(/[\d.]{1,3}/gi),n=m(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsv")>-1?(t=t.match(/[\d.%]{1,3}/gi),n=this.HSVtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):t.indexOf("hsl")>-1?(t=b(t),n=this.HSLtoRGB(t[0],t[1],t[2]),i=f(t.length>3&&"undefined"==typeof e?t[3]:e)):g(t)&&(n=this.HEXtoRGB(t),i=f(e)),{rgb:n,alpha:i}},setOpacity:function(t){return f(t)},getHue:function(i,a,r){var l=0;null!=i&&m(i,a,r);var o=Math.max(t,e,n),s=Math.min(t,e,n),c=o-s;switch(o){case t:l=(e-n)/c+(n>e?6:0);break;case e:l=(n-t)/c+2;break;case n:l=(t-e)/c+4;break;default:l=0}return l=60*l,0>l&&(l+=360),l},RGBtoHEX:function(t,e,n){null!=t&&m(t,e,n);var a=i.map(function(t){return t=t.toString(16),1===t.length?"0"+t:t}).join("");return a},HEXtoRGB:function(t){if(g(t)){0===t.indexOf("#")&&(t=t.substr(1));var e=0,n=0,i=0;return 3===t.length?(t=t.split("").map(function(t){return parseInt(t+t,16)}),e=t[0],n=t[1],i=t[2],rgb=m(e,n,i)):t.length>=6&&(e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),rgb=m(e,n,i)),{r:e,g:n,b:i}}throw{error:"InvalidFormat",message:t+" is not a valid hex value."}},RGBtoHSL:function(i,a,r){null!=i&&m(i,a,r);var l=Math.max(t,e,n),o=Math.min(t,e,n),c=(l+o)/2,u=l-o;return 0===u?h=s=0:(s=c>0?u/(1-Math.abs(2*c-1)):0,h=this.getHue()),{h:h,s:s,l:c}},HSLtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(t,0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0!==e||0!==n){var l=.5>=n?n*(1+e):n+e-n*e,o=n+n-l,s=function(t){t=0>t?t+1:t>1?t-1:t;var e;return e=1>6*t?o+6*(l-o)*t:.5>t?l:2>3*t?o+(l-o)*(2/3-t)*6:o};i=s(t+1/3),a=s(t),r=s(t-1/3)}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoHSV:function(i,a,r){null!=i&&m(i,a,r);var l=Math.max(t,e,n),o=Math.min(t,e,n),c=l-o,u=l;return 0===c?h=s=0:(s=c/u,h=this.getHue()),{h:h,s:s,v:u}},HSVtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){"string"==typeof t&&t.indexOf("%")>0&&(t=360*c(t)),t=d(c(t),0,360),e=u(Math.abs(e)),n=u(Math.abs(n));var i=0,a=0,r=0;if(0===e&&0!==n)i=a=r=Math.round(255*n);else if(0!==e&&0!==n){var l=t/60,o=0|l,s=n*e,h=n-s,p=s*(1-Math.abs(l%2-1))+h;switch(s+=h,o){case 0:i=s,a=p,r=h;break;case 1:i=p,a=s,r=h;break;case 2:i=h,a=s,r=p;break;case 3:i=h,a=p,r=s;break;case 4:i=p,a=h,r=s;break;case 5:i=s,a=h,r=p;break;default:i=0,a=0,r=0}}return m(i,a,r)}throw{error:"InvalidFormat",message:"NULL is not a valid argument."}},RGBtoXYZ:function(i,a,r){null!=i&&m(i,a,r);var l=0,o=0,s=0;return i=100*(t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92),a=100*(e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92),r=100*(n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92),l=.412453*i+.35758*a+.180423*r,o=.212671*i+.71516*a+.072169*r,
s=.019334*i+.119193*a+.950227*r,{x:l,y:o,z:s}},XYZtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(Math.abs(t),0,r)/100,e=d(Math.abs(e),0,l)/100,n=d(Math.abs(n),0,o)/100;var i=3.240479*t+-1.53715*e+n*-.498535,a=t*-.969256+1.875992*e+.041556*n,s=.055648*t+e*-.204043+1.057311*n,c=function(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t};return i=c(i),a=c(a),s=c(s),m(i,a,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},RGBtoLab:function(t,e,n){null!=t&&m(t,e,n);var i=this.RGBtoXYZ(),a=i.x/r,s=i.y/l,c=i.z/o,u=0,h=0,d=0,p=7.787037037037035,f=function(t){return t>.008856?Math.pow(t,1/3):p*t+.13793103448275862};return a=f(a),s=f(s),c=f(c),u=116*s-16,h=500*(a-s),d=200*(s-c),{L:u,a:h,b:d}},LABtoRGB:function(t,e,n){if(null!=t&&null!=e&&null!=n){t=d(t,0,100),e=d(e,-128,128),n=d(n,-128,128);var i=(t+16)/116,a=e/500+i,s=i-n/200,c=7.787037037037035,u=function(t){var e=Math.pow(t,3);return e>.008856?e:(t-.13793103448275862)/c};return a=u(a),i=u(i),s=u(s),a*=r,i*=l,s*=o,this.XYZtoRGB(a,i,s)}throw{error:"InvalidFormat",message:"NULL is not a valid argument"}},changeHue:function(t,e,n,i){if("string"==typeof t&&t.indexOf("%")>0&&(t=3.6*parseFloat(t)),null!=e&&m(e,n,i),t=d(t,0,360),0===t)return this;t%=360;var a=this.RGBtoHSL(),r=(a.h+t)%360;return 0>r&&(r+=360),this.HSLtoRGB(r,a.s,a.l)},changeBrightness:function(t,e,n,i){null!=e&&m(e,n,i),t=this.number(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.v+t;return r=d(r,0,1),this.HSVtoRGB(a.h,a.s,r,a.a)},changeLightness:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=.99>=t&&t>=-.99?100*t:t;var a=this.RGBtoLab(),r=a.L+t;return r=d(r,0,100),this.LABtoRGB(r,a.a,a.b)},changeSaturation:function(t,e,n,i){null!=e&&m(e,n,i),t=c(t),t=t>1||-1>t?t/100:t;var a=this.RGBtoHSV(),r=a.s+t;return r=d(r,0,1),this.HSVtoRGB(a.h,r,a.v,a.a)}}}(),a=function(t,e){this.rgb={},this.alpha=1,this.init(t,e)};a.prototype.init=function(t,e){var n=i.parseColor(t,e);this.rgb=n.rgb,this.alpha=n.alpha},a.prototype.getAlpha=function(){return this.alpha},a.prototype.setAlpha=function(t){return t>=0&&1>=t&&(this.alpha=t),this},a.prototype.getRGB=function(){return this.rgb},a.prototype.getHEX=function(){return this.hex||(this.hex=i.RGBtoHEX(this.rgb.r,this.rgb.g,this.rgb.b)),this.hex},a.prototype.getHSL=function(){return this.hsl||(this.hsl=i.RGBtoHSL(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsl},a.prototype.getHSV=function(){return this.hsv||(this.hsv=i.RGBtoHSV(this.rgb.r,this.rgb.g,this.rgb.b)),this.hsv},a.prototype.getXYZ=function(){return this.xyz||(this.xyz=i.RGBtoXYZ(this.rgb.r,this.rgb.g,this.rgb.b)),this.xyz},a.prototype.getLab=function(){return this.lab||(this.lab=i.RGBtoLab(this.rgb.r,this.rgb.g,this.rgb.b)),this.lab},a.prototype.getHue=function(){return this.hue||(this.hue=i.getHue(this.rgb.r,this.rgb.g,this.rgb.b)),this.hue},a.prototype.lighten=function(t){var e=i.changeLightness(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.darken=function(t){var e=i.changeLightness(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.saturate=function(t){var e=i.changeSaturation(t,this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.desaturate=function(t){var e=i.changeSaturation(-1*Math.abs(t),this.rgb.r,this.rgb.g,this.rgb.b),n=new a(e,this.alpha);return n},a.prototype.greyscale=function(){var t=i.changeSaturation(-1,this.rgb.r,this.rgb.g,this.rgb.b),e=new a(t,this.alpha);return e},a.prototype.toString=function(t,e){"undefined"!=typeof t&&(t=t.toLowerCase()),e="undefined"!=typeof e?e+2:2;var n,i;Math.pow(10,Number(e));switch(t){case"rgb":case"rgba":var a=this.rgb.r+","+this.rgb.g+","+this.rgb.b;n=this.alpha<1?"rgba("+a+","+this.alpha+")":"rgb("+a+")";break;case"hex":n="#"+this.getHEX();break;case"hsl":case"hsla":i=this.getHSL(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.l).toFixed(e-2)+"%",n=i.a<1?"hsla("+n+", "+i.a+")":"hsl("+n+")";break;case"hsv":case"hsva":i=this.getHSV(),n=i.h.toFixed(e-2)+", "+(100*i.s).toFixed(e-2)+"%, "+(100*i.v).toFixed(e-2)+"%",n=i.a<1?"hsva("+n+", "+i.a+")":"hsv("+n+")";break;default:n=this.alpha<1?"rgba("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+", "+this.alpha+")":"#"+this.getHEX()}return n},a.prototype.isDark=function(){var t=this.getLab();return t.L<50?!0:!1},e.exports=a},{}],468:[function(t,e,n){var i="	\n\x0B\f\r \u2028\u2029",a=new RegExp("^["+i+"]+"),r=new RegExp("["+i+"]+$"),l=function(t){var e=null;return e=t.trim?t.trim():t.replace(a,"").replace(r,"")},o=function(t,e){var n,i,a,r,o,s=null,c=e&&e.cookie;if(c&&t){n=c.split(";");for(var u=n.length-1;!s&&u>=0;u--)r=n[u],o=r.indexOf("="),o>0&&(i=l(r.substring(0,o)),a=r,i===t&&(('"'===a[0]||'"'===a[a.length-1])&&(a=a.substring(1,a.length-1)),s=l(a.substring(o+1))))}return s},s=function(t,e){var n=o(t,e);return n&&(n=unescape(n)),n},c=function(t){var e=new Date;e.setDate(e.getDate()+365);var n=t.namespace||itms,i=t.domain||"apple.com",a=t.expires||e.toUTCString(),r=t.path||"/",l={name:t.name,path:r,value:t.value+"",domain:i,expires:a};n.cookie=l};e.exports={get:s,set:c,getUnescaped:o}},{}],469:[function(t,e,n){e.exports=function(){function t(){for(var t,i=1;i<l.length;i++)t=l[i],r.level>=i?c.enabled?r[t]=n(t):r[t]=e(t):r[t]=function(){return!1},r.log=r.info}function e(t){return console[t]?Function.prototype.bind.call(console[t],console):Function.prototype.bind.call(console.log,console)}function n(t){var n=Error;return n.prototype.log=function(){var n=e(t),i=this.stack.split("\n",19).splice(c.offset,c.lines);n.apply(console,arguments);for(var a=0;a<i.length;a++){var r=i[a];console.log(r)}},Function.prototype.bind.call(n().log,n())}function i(e){var n=r.level;"string"==typeof e&&o.hasOwnProperty(e)?(e.toLowerCase(),s=o[e]):"number"==typeof e&&e>=0&&4>=e&&(s=e),s!==n&&t()}function a(e){if((e===!0||e===!1)&&(c.enabled=e),"object"==typeof e){e=e||{};for(var n in e)c[n]=e[n]}t()}var r=Object.create(Object.prototype),l=["silent","error","warn","info","debug"],o={silent:0,error:1,warn:2,info:3,debug:4},s=0,c={enabled:!1,lines:1,offset:0};return Object.defineProperties(r,{level:{set:i,get:function(){return s}},trace:{set:a,get:function(){return c.enabled}}}),r.setDefaults=function(){s=3,t()},r.silent=function(){s=0,t()},r.setDefaults(),r}()},{}],470:[function(t,e,n){!function(t,i){"object"==typeof n&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&define.amd?define(i):t.moment=i()}(this,function(){"use strict";function n(){return En.apply(null,arguments)}function i(t){En=t}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function o(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,n,i){return At(t,e,n,i,!0).utc()}function h(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function d(t){var e=u(NaN);return null!=t?c(e._pf,t):e._pf.userInvalidated=!0,e}function p(t,e){var n,i,a;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Fn.length>0)for(n in Fn)i=Fn[n],a=e[i],"undefined"!=typeof a&&(t[i]=a);return t}function m(t){p(this,t),this._d=new Date(+t._d),Pn===!1&&(Pn=!0,n.updateOffset(this),Pn=!1)}function f(t){return t instanceof m||null!=t&&s(t,"_isAMomentObject")}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function b(t,e,n){var i,a=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),l=0;for(i=0;a>i;i++)(n&&t[i]!==e[i]||!n&&g(t[i])!==g(e[i]))&&l++;return l+r}function v(){}function y(t){return t?t.toLowerCase().replace("_","-"):t}function k(t){for(var e,n,i,a,r=0;r<t.length;){for(a=y(t[r]).split("-"),e=a.length,n=y(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=w(a.slice(0,e).join("-")))return i;if(n&&n.length>=e&&b(a,n,!0)>=e-1)break;e--}r++}return null}function w(n){var i=null;if(!Ln[n]&&"undefined"!=typeof e&&e&&e.exports)try{i=In._abbr,t("./locale/"+n),x(i)}catch(a){}return Ln[n]}function x(t,e){var n;return t&&(n="undefined"==typeof e?D(t):S(t,e),n&&(In=n)),In._abbr}function S(t,e){return null!==e?(e.abbr=t,Ln[t]||(Ln[t]=new v),Ln[t].set(e),x(t),Ln[t]):(delete Ln[t],null)}function D(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return In;if(!r(t)){if(e=w(t))return e;t=[t]}return k(t)}function C(t,e){var n=t.toLowerCase();Rn[n]=Rn[n+"s"]=Rn[e]=t}function A(t){return"string"==typeof t?Rn[t]||Rn[t.toLowerCase()]:void 0}function T(t){var e,n,i={};for(n in t)s(t,n)&&(e=A(n),e&&(i[e]=t[n]));return i}function M(t,e){return function(i){return null!=i?(I(this,t,i),n.updateOffset(this,e),this):E(this,t)}}function E(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function I(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function F(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=A(t),"function"==typeof this[t])return this[t](e);return this}function P(t,e,n){for(var i=""+Math.abs(t),a=t>=0;i.length<e;)i="0"+i;return(a?n?"+":"":"-")+i}function L(t,e,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),t&&(Nn[t]=a),e&&(Nn[e[0]]=function(){return P(a.apply(this,arguments),e[1],e[2])}),n&&(Nn[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function R(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function _(t){var e,n,i=t.match(_n);for(e=0,n=i.length;n>e;e++)Nn[i[e]]?i[e]=Nn[i[e]]:i[e]=R(i[e]);return function(a){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(a,t):i[e];return r}}function B(t,e){return t.isValid()?(e=U(e,t.localeData()),Un[e]||(Un[e]=_(e)),Un[e](t)):t.localeData().invalidDate()}function U(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Bn.lastIndex=0;i>=0&&Bn.test(t);)t=t.replace(Bn,n),Bn.lastIndex=0,i-=1;return t}function N(t,e,n){$n[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function O(t,e){return s($n,t)?$n[t](e._strict,e._locale):new RegExp(H(t))}function H(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,a){return e||n||i||a}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=g(t)}),n=0;n<t.length;n++)ti[t[n]]=i}function V(t,e){z(t,function(t,n,i,a){i._w=i._w||{},e(t,i._w,i,a)})}function G(t,e,n){null!=e&&s(ti,t)&&ti[t](e,n._a,n,t)}function j(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function q(t){return this._months[t.month()]}function W(t){return this._monthsShort[t.month()]}function Y(t,e,n){var i,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=u([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function K(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),j(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function J(t){return null!=t?(K(this,t),n.updateOffset(this,!0),this):E(this,"Month")}function X(){return j(this.year(),this.month())}function Z(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[ni]<0||n[ni]>11?ni:n[ii]<1||n[ii]>j(n[ei],n[ni])?ii:n[ai]<0||n[ai]>24||24===n[ai]&&(0!==n[ri]||0!==n[li]||0!==n[oi])?ai:n[ri]<0||n[ri]>59?ri:n[li]<0||n[li]>59?li:n[oi]<0||n[oi]>999?oi:-1,t._pf._overflowDayOfYear&&(ei>e||e>ii)&&(e=ii),t._pf.overflow=e),t}function Q(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function $(t,e){var n=!0;return c(function(){return n&&(Q(t),n=!1),e.apply(this,arguments)},e)}function tt(t,e){ui[t]||(Q(e),ui[t]=!0)}function et(t){var e,n,i=t._i,a=hi.exec(i);if(a){for(t._pf.iso=!0,e=0,n=di.length;n>e;e++)if(di[e][1].exec(i)){t._f=di[e][0]+(a[6]||" ");break}for(e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f+=pi[e][0];break}i.match(Xn)&&(t._f+="Z"),kt(t)}else t._isValid=!1}function nt(t){var e=mi.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(et(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function it(t,e,n,i,a,r,l){var o=new Date(t,e,n,i,a,r,l);return 1970>t&&o.setFullYear(t),o}function at(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function rt(t){return lt(t)?366:365}function lt(t){return t%4===0&&t%100!==0||t%400===0}function ot(){return lt(this.year())}function st(t,e,n){var i,a=n-e,r=n-t.day();return r>a&&(r-=7),a-7>r&&(r+=7),i=Tt(t).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ct(t){return st(t,this._week.dow,this._week.doy).week}function ut(){return this._week.dow}function ht(){return this._week.doy}function dt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function pt(t){var e=st(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function mt(t,e,n,i,a){var r,l,o=at(t,0,1).getUTCDay();return o=0===o?7:o,n=null!=n?n:a,r=a-o+(o>i?7:0)-(a>o?7:0),l=7*(e-1)+(n-a)+r+1,{year:l>0?t:t-1,dayOfYear:l>0?l:rt(t-1)+l}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function gt(t,e,n){return null!=t?t:null!=e?e:n}function bt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vt(t){var e,n,i,a,r=[];if(!t._d){for(i=bt(t),t._w&&null==t._a[ii]&&null==t._a[ni]&&yt(t),t._dayOfYear&&(a=gt(t._a[ei],i[ei]),t._dayOfYear>rt(a)&&(t._pf._overflowDayOfYear=!0),n=at(a,0,t._dayOfYear),t._a[ni]=n.getUTCMonth(),t._a[ii]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ai]&&0===t._a[ri]&&0===t._a[li]&&0===t._a[oi]&&(t._nextDay=!0,t._a[ai]=0),t._d=(t._useUTC?at:it).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ai]=24)}}function yt(t){var e,n,i,a,r,l,o;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,l=4,n=gt(e.GG,t._a[ei],st(Tt(),1,4).year),i=gt(e.W,1),a=gt(e.E,1)):(r=t._locale._week.dow,l=t._locale._week.doy,n=gt(e.gg,t._a[ei],st(Tt(),r,l).year),i=gt(e.w,1),null!=e.d?(a=e.d,r>a&&++i):a=null!=e.e?e.e+r:r),o=mt(n,i,a,l,r),t._a[ei]=o.year,t._dayOfYear=o.dayOfYear}function kt(t){if(t._f===n.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var e,i,a,r,l,o=""+t._i,s=o.length,c=0;for(a=U(t._f,t._locale).match(_n)||[],e=0;e<a.length;e++)r=a[e],i=(o.match(O(r,t))||[])[0],i&&(l=o.substr(0,o.indexOf(i)),l.length>0&&t._pf.unusedInput.push(l),o=o.slice(o.indexOf(i)+i.length),c+=i.length),Nn[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),G(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=s-c,o.length>0&&t._pf.unusedInput.push(o),t._pf.bigHour===!0&&t._a[ai]<=12&&(t._pf.bigHour=void 0),t._a[ai]=wt(t._locale,t._a[ai],t._meridiem),vt(t),Z(t)}function wt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function xt(t){var e,n,i,r,l;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)l=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=a(),e._f=t._f[r],kt(e),h(e)&&(l+=e._pf.charsLeftOver,l+=10*e._pf.unusedTokens.length,e._pf.score=l,(null==i||i>l)&&(i=l,n=e));c(t,n||e)}function St(t){if(!t._d){var e=T(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],vt(t)}}function Dt(t){var e,n=t._i,i=t._f;return t._locale=t._locale||D(t._l),null===n||void 0===i&&""===n?d({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),f(n)?new m(Z(n)):(r(i)?xt(t):i?kt(t):Ct(t),e=new m(Z(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function Ct(t){var e=t._i;void 0===e?t._d=new Date:l(e)?t._d=new Date(+e):"string"==typeof e?nt(t):r(e)?(t._a=o(e.slice(0),function(t){return parseInt(t,10)}),vt(t)):"object"==typeof e?St(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function At(t,e,n,i,r){var l={};return"boolean"==typeof n&&(i=n,n=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=n,l._i=t,l._f=e,l._strict=i,l._pf=a(),Dt(l)}function Tt(t,e,n,i){return At(t,e,n,i,!1)}function Mt(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Tt();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function Et(){var t=[].slice.call(arguments,0);return Mt("isBefore",t)}function It(){var t=[].slice.call(arguments,0);return Mt("isAfter",t)}function Ft(t){var e=T(t),n=e.year||0,i=e.quarter||0,a=e.month||0,r=e.week||0,l=e.day||0,o=e.hour||0,s=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*s+36e5*o,this._days=+l+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=D(),this._bubble()}function Pt(t){return t instanceof Ft}function Lt(t,e){L(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)})}function Rt(t){var e=(t||"").match(Xn)||[],n=e[e.length-1]||[],i=(n+"").match(yi)||["-",0,0],a=+(60*i[1])+g(i[2]);return"+"===i[0]?a:-a}function _t(t,e){var i,a;return e._isUTC?(i=e.clone(),a=(f(t)||l(t)?+t:+Tt(t))-+i,i._d.setTime(+i._d+a),n.updateOffset(i,!1),i):Tt(t).local()}function Bt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ut(t,e){var i,a=this._offset||0;return null!=t?("string"==typeof t&&(t=Rt(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=Bt(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?$t(this,Kt(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:Bt(this)}function Nt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ot(t){return this.utcOffset(0,t)}function Ht(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Bt(this),"m")),this}function zt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Rt(this._i)),this}function Vt(t){return t=t?Tt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Gt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jt(){if(this._a){var t=this._isUTC?u(this._a):Tt(this._a);return this.isValid()&&b(this._a,t.toArray())>0}return!1}function qt(){return!this._isUTC}function Wt(){return this._isUTC}function Yt(){return this._isUTC&&0===this._offset}function Kt(t,e){var n,i,a,r=t,l=null;return Pt(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(l=ki.exec(t))?(n="-"===l[1]?-1:1,r={y:0,d:g(l[ii])*n,h:g(l[ai])*n,m:g(l[ri])*n,s:g(l[li])*n,ms:g(l[oi])*n}):(l=wi.exec(t))?(n="-"===l[1]?-1:1,r={y:Jt(l[2],n),M:Jt(l[3],n),d:Jt(l[4],n),h:Jt(l[5],n),m:Jt(l[6],n),s:Jt(l[7],n),w:Jt(l[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(a=Zt(Tt(r.from),Tt(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),i=new Ft(r),Pt(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Jt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Zt(t,e){var n;return e=_t(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qt(t,e){return function(n,i){var a,r;return null===i||isNaN(+i)||(tt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=Kt(n,i),$t(this,a,t),this}}function $t(t,e,i,a){var r=e._milliseconds,l=e._days,o=e._months;a=null==a?!0:a,r&&t._d.setTime(+t._d+r*i),l&&I(t,"Date",E(t,"Date")+l*i),o&&K(t,E(t,"Month")+o*i),a&&n.updateOffset(t,l||o)}function te(t){var e=t||Tt(),n=_t(e,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,Tt(e)))}function ee(){return new m(this)}function ne(t,e){var n;return e=A("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Tt(t),+this>+t):(n=f(t)?+t:+Tt(t),n<+this.clone().startOf(e))}function ie(t,e){var n;return e=A("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Tt(t),+t>+this):(n=f(t)?+t:+Tt(t),+this.clone().endOf(e)<n)}function ae(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function re(t,e){var n;return e=A(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Tt(t),+this===+t):(n=+Tt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function le(t){return 0>t?Math.ceil(t):Math.floor(t)}function oe(t,e,n){var i,a,r=_t(t,this),l=6e4*(r.utcOffset()-this.utcOffset());return e=A(e),"year"===e||"month"===e||"quarter"===e?(a=se(this,r),"quarter"===e?a/=3:"year"===e&&(a/=12)):(i=this-r,a="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-l)/864e5:"week"===e?(i-l)/6048e5:i),n?a:le(a)}function se(t,e){var n,i,a=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(a,"months");return 0>e-r?(n=t.clone().add(a-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(a+1,"months"),i=(e-r)/(n-r)),-(a+i)}function ce(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ue(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function he(t){var e=B(this,t||n.defaultFormat);return this.localeData().postformat(e)}function de(t,e){return Kt({to:this,from:t}).locale(this.locale()).humanize(!e)}function pe(t){return this.from(Tt(),t)}function me(t){var e;return void 0===t?this._locale._abbr:(e=D(t),null!=e&&(this._locale=e),this)}function fe(){return this._locale}function ge(t){switch(t=A(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function be(t){return t=A(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function ve(){return+this._d-6e4*(this._offset||0)}function ye(){return Math.floor(+this/1e3)}function ke(){return this._offset?new Date(+this):this._d}function we(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function xe(){return h(this)}function Se(){return c({},this._pf)}function De(){return this._pf.overflow}function Ce(t,e){L(0,[t,t.length],0,e)}function Ae(t,e,n){return st(Tt([t,11,31+e-n]),e,n).week}function Te(t){var e=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Me(t){var e=st(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ee(){return Ae(this.year(),1,4)}function Ie(){var t=this.localeData()._week;return Ae(this.year(),t.dow,t.doy)}function Fe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Pe(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Le(t){return this._weekdays[t.day()]}function Re(t){return this._weekdaysShort[t.day()]}function _e(t){return this._weekdaysMin[t.day()]}function Be(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Tt([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ue(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pe(t,this.localeData()),this.add(t-e,"d")):e}function Ne(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Oe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function He(t,e){L(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function ze(t,e){return e._meridiemParse}function Ve(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ge(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function je(t){L(0,[t,3],0,"millisecond")}function qe(){return this._isUTC?"UTC":""}function We(){return this._isUTC?"Coordinated Universal Time":""}function Ye(t){return Tt(1e3*t)}function Ke(){return Tt.apply(null,arguments).parseZone()}function Je(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function Xe(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Ze(){return this._invalidDate}function Qe(t){return this._ordinal.replace("%d",t)}function $e(t){return t}function tn(t,e,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(t,e,n,i):a.replace(/%d/i,t)}function en(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function nn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function an(t,e,n,i){var a=D(),r=u().set(i,e);return a[n](r,t)}function rn(t,e,n,i,a){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return an(t,e,n,a);var r,l=[];for(r=0;i>r;r++)l[r]=an(t,r,n,a);return l}function ln(t,e){return rn(t,e,"months",12,"month")}function on(t,e){return rn(t,e,"monthsShort",12,"month")}function sn(t,e){return rn(t,e,"weekdays",7,"day")}function cn(t,e){return rn(t,e,"weekdaysShort",7,"day")}function un(t,e){return rn(t,e,"weekdaysMin",7,"day")}function hn(){var t=this._data;return this._milliseconds=Gi(this._milliseconds),this._days=Gi(this._days),this._months=Gi(this._months),t.milliseconds=Gi(t.milliseconds),t.seconds=Gi(t.seconds),t.minutes=Gi(t.minutes),t.hours=Gi(t.hours),t.months=Gi(t.months),t.years=Gi(t.years),this}function dn(t,e,n,i){var a=Kt(e,n);return t._milliseconds+=i*a._milliseconds,t._days+=i*a._days,t._months+=i*a._months,t._bubble()}function pn(t,e){return dn(this,t,e,1)}function mn(t,e){return dn(this,t,e,-1)}function fn(){var t,e,n,i=this._milliseconds,a=this._days,r=this._months,l=this._data,o=0;return l.milliseconds=i%1e3,t=le(i/1e3),l.seconds=t%60,e=le(t/60),l.minutes=e%60,n=le(e/60),l.hours=n%24,a+=le(n/24),o=le(gn(a)),a-=le(bn(o)),r+=le(a/30),a%=30,o+=le(r/12),r%=12,l.days=a,l.months=r,l.years=o,this}function gn(t){return 400*t/146097}function bn(t){return 146097*t/400}function vn(t){var e,n,i=this._milliseconds;if(t=A(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*gn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(bn(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function yn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function kn(t){return function(){return this.as(t)}}function wn(t){return t=A(t),this[t+"s"]()}function xn(t){return function(){return this._data[t]}}function Sn(){return le(this.days()/7)}function Dn(t,e,n,i,a){return a.relativeTime(e||1,!!n,t,i)}function Cn(t,e,n){var i=Kt(t).abs(),a=ra(i.as("s")),r=ra(i.as("m")),l=ra(i.as("h")),o=ra(i.as("d")),s=ra(i.as("M")),c=ra(i.as("y")),u=a<la.s&&["s",a]||1===r&&["m"]||r<la.m&&["mm",r]||1===l&&["h"]||l<la.h&&["hh",l]||1===o&&["d"]||o<la.d&&["dd",o]||1===s&&["M"]||s<la.M&&["MM",s]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,Dn.apply(null,u)}function An(t,e){return void 0===la[t]?!1:void 0===e?la[t]:(la[t]=e,!0)}function Tn(t){var e=this.localeData(),n=Cn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Mn(){var t=oa(this.years()),e=oa(this.months()),n=oa(this.days()),i=oa(this.hours()),a=oa(this.minutes()),r=oa(this.seconds()+this.milliseconds()/1e3),l=this.asSeconds();return l?(0>l?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||a||r?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(r?r+"S":""):"P0D"}var En,In,Fn=n.momentProperties=[],Pn=!1,Ln={},Rn={},_n=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Bn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Un={},Nn={},On=/\d/,Hn=/\d\d/,zn=/\d{3}/,Vn=/\d{4}/,Gn=/[+-]?\d{6}/,jn=/\d\d?/,qn=/\d{1,3}/,Wn=/\d{1,4}/,Yn=/[+-]?\d{1,6}/,Kn=/\d+/,Jn=/[+-]?\d+/,Xn=/Z|[+-]\d\d:?\d\d/gi,Zn=/[+-]?\d+(\.\d{1,3})?/,Qn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$n={},ti={},ei=0,ni=1,ii=2,ai=3,ri=4,li=5,oi=6;L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),L("MMMM",0,0,function(t){return this.localeData().months(this,t)}),C("month","M"),N("M",jn),N("MM",jn,Hn),N("MMM",Qn),N("MMMM",Qn),z(["M","MM"],function(t,e){e[ni]=g(t)-1}),z(["MMM","MMMM"],function(t,e,n,i){var a=n._locale.monthsParse(t,i,n._strict);null!=a?e[ni]=a:n._pf.invalidMonth=t});var si="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ci="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ui={};n.suppressDeprecationWarnings=!1;var hi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mi=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),L(0,["YY",2],0,function(){
return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),C("year","y"),N("Y",Jn),N("YY",jn,Hn),N("YYYY",Wn,Vn),N("YYYYY",Yn,Gn),N("YYYYYY",Yn,Gn),z(["YYYY","YYYYY","YYYYYY"],ei),z("YY",function(t,e){e[ei]=n.parseTwoDigitYear(t)}),n.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var fi=M("FullYear",!1);L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),N("w",jn),N("ww",jn,Hn),N("W",jn),N("WW",jn,Hn),V(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=g(t)});var gi={dow:0,doy:6};L("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),N("DDD",qn),N("DDDD",zn),z(["DDD","DDDD"],function(t,e,n){n._dayOfYear=g(t)}),n.ISO_8601=function(){};var bi=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Tt.apply(null,arguments);return this>t?this:t}),vi=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Tt.apply(null,arguments);return t>this?this:t});Lt("Z",":"),Lt("ZZ",""),N("Z",Xn),N("ZZ",Xn),z(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Rt(t)});var yi=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var ki=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Kt.fn=Ft.prototype;var xi=Qt(1,"add"),Si=Qt(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Di=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ce("gggg","weekYear"),Ce("ggggg","weekYear"),Ce("GGGG","isoWeekYear"),Ce("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),N("G",Jn),N("g",Jn),N("GG",jn,Hn),N("gg",jn,Hn),N("GGGG",Wn,Vn),N("gggg",Wn,Vn),N("GGGGG",Yn,Gn),N("ggggg",Yn,Gn),V(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=g(t)}),V(["gg","GG"],function(t,e,i,a){e[a]=n.parseTwoDigitYear(t)}),L("Q",0,0,"quarter"),C("quarter","Q"),N("Q",On),z("Q",function(t,e){e[ni]=3*(g(t)-1)}),L("D",["DD",2],"Do","date"),C("date","D"),N("D",jn),N("DD",jn,Hn),N("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),z(["D","DD"],ii),z("Do",function(t,e){e[ii]=g(t.match(jn)[0],10)});var Ci=M("Date",!0);L("d",0,"do","day"),L("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),L("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),L("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),N("d",jn),N("e",jn),N("E",jn),N("dd",Qn),N("ddd",Qn),N("dddd",Qn),V(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),V(["d","e","E"],function(t,e,n,i){e[i]=g(t)});var Ai="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");L("H",["HH",2],0,"hour"),L("h",["hh",2],0,function(){return this.hours()%12||12}),He("a",!0),He("A",!1),C("hour","h"),N("a",ze),N("A",ze),N("H",jn),N("h",jn),N("HH",jn,Hn),N("hh",jn,Hn),z(["H","HH"],ai),z(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),z(["h","hh"],function(t,e,n){e[ai]=g(t),n._pf.bigHour=!0});var Ei=/[ap]\.?m?\.?/i,Ii=M("Hours",!0);L("m",["mm",2],0,"minute"),C("minute","m"),N("m",jn),N("mm",jn,Hn),z(["m","mm"],ri);var Fi=M("Minutes",!1);L("s",["ss",2],0,"second"),C("second","s"),N("s",jn),N("ss",jn,Hn),z(["s","ss"],li);var Pi=M("Seconds",!1);L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),je("SSS"),je("SSSS"),C("millisecond","ms"),N("S",qn,On),N("SS",qn,Hn),N("SSS",qn,zn),N("SSSS",Kn),z(["S","SS","SSS","SSSS"],function(t,e){e[oi]=g(1e3*("0."+t))});var Li=M("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var Ri=m.prototype;Ri.add=xi,Ri.calendar=te,Ri.clone=ee,Ri.diff=oe,Ri.endOf=be,Ri.format=he,Ri.from=de,Ri.fromNow=pe,Ri.get=F,Ri.invalidAt=De,Ri.isAfter=ne,Ri.isBefore=ie,Ri.isBetween=ae,Ri.isSame=re,Ri.isValid=xe,Ri.lang=Di,Ri.locale=me,Ri.localeData=fe,Ri.max=vi,Ri.min=bi,Ri.parsingFlags=Se,Ri.set=F,Ri.startOf=ge,Ri.subtract=Si,Ri.toArray=we,Ri.toDate=ke,Ri.toISOString=ue,Ri.toJSON=ue,Ri.toString=ce,Ri.unix=ye,Ri.valueOf=ve,Ri.year=fi,Ri.isLeapYear=ot,Ri.weekYear=Te,Ri.isoWeekYear=Me,Ri.quarter=Ri.quarters=Fe,Ri.month=J,Ri.daysInMonth=X,Ri.week=Ri.weeks=dt,Ri.isoWeek=Ri.isoWeeks=pt,Ri.weeksInYear=Ie,Ri.isoWeeksInYear=Ee,Ri.date=Ci,Ri.day=Ri.days=Ue,Ri.weekday=Ne,Ri.isoWeekday=Oe,Ri.dayOfYear=ft,Ri.hour=Ri.hours=Ii,Ri.minute=Ri.minutes=Fi,Ri.second=Ri.seconds=Pi,Ri.millisecond=Ri.milliseconds=Li,Ri.utcOffset=Ut,Ri.utc=Ot,Ri.local=Ht,Ri.parseZone=zt,Ri.hasAlignedHourOffset=Vt,Ri.isDST=Gt,Ri.isDSTShifted=jt,Ri.isLocal=qt,Ri.isUtcOffset=Wt,Ri.isUtc=Yt,Ri.isUTC=Yt,Ri.zoneAbbr=qe,Ri.zoneName=We,Ri.dates=$("dates accessor is deprecated. Use date instead.",Ci),Ri.months=$("months accessor is deprecated. Use month instead",J),Ri.years=$("years accessor is deprecated. Use year instead",fi),Ri.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Nt);var _i=Ri,Bi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ui={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Ni="Invalid date",Oi="%d",Hi=/\d{1,2}/,zi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vi=v.prototype;Vi._calendar=Bi,Vi.calendar=Je,Vi._longDateFormat=Ui,Vi.longDateFormat=Xe,Vi._invalidDate=Ni,Vi.invalidDate=Ze,Vi._ordinal=Oi,Vi.ordinal=Qe,Vi._ordinalParse=Hi,Vi.preparse=$e,Vi.postformat=$e,Vi._relativeTime=zi,Vi.relativeTime=tn,Vi.pastFuture=en,Vi.set=nn,Vi.months=q,Vi._months=si,Vi.monthsShort=W,Vi._monthsShort=ci,Vi.monthsParse=Y,Vi.week=ct,Vi._week=gi,Vi.firstDayOfYear=ht,Vi.firstDayOfWeek=ut,Vi.weekdays=Le,Vi._weekdays=Ai,Vi.weekdaysMin=_e,Vi._weekdaysMin=Mi,Vi.weekdaysShort=Re,Vi._weekdaysShort=Ti,Vi.weekdaysParse=Be,Vi.isPM=Ve,Vi._meridiemParse=Ei,Vi.meridiem=Ge,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=$("moment.lang is deprecated. Use moment.locale instead.",x),n.langData=$("moment.langData is deprecated. Use moment.localeData instead.",D);var Gi=Math.abs,ji=kn("ms"),qi=kn("s"),Wi=kn("m"),Yi=kn("h"),Ki=kn("d"),Ji=kn("w"),Xi=kn("M"),Zi=kn("y"),Qi=xn("milliseconds"),$i=xn("seconds"),ta=xn("minutes"),ea=xn("hours"),na=xn("days"),ia=xn("months"),aa=xn("years"),ra=Math.round,la={s:45,m:45,h:22,d:26,M:11},oa=Math.abs,sa=Ft.prototype;sa.abs=hn,sa.add=pn,sa.subtract=mn,sa.as=vn,sa.asMilliseconds=ji,sa.asSeconds=qi,sa.asMinutes=Wi,sa.asHours=Yi,sa.asDays=Ki,sa.asWeeks=Ji,sa.asMonths=Xi,sa.asYears=Zi,sa.valueOf=yn,sa._bubble=fn,sa.get=wn,sa.milliseconds=Qi,sa.seconds=$i,sa.minutes=ta,sa.hours=ea,sa.days=na,sa.weeks=Sn,sa.months=ia,sa.years=aa,sa.humanize=Tn,sa.toISOString=Mn,sa.toString=Mn,sa.toJSON=Mn,sa.locale=me,sa.localeData=fe,sa.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),sa.lang=Di,L("X",0,0,"unix"),L("x",0,0,"valueOf"),N("x",Jn),N("X",Zn),z("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),z("x",function(t,e,n){n._d=new Date(g(t))}),n.version="2.10.2",i(Tt),n.fn=_i,n.min=Et,n.max=It,n.utc=u,n.unix=Ye,n.months=ln,n.isDate=l,n.locale=x,n.invalid=d,n.duration=Kt,n.isMoment=f,n.weekdays=sn,n.parseZone=Ke,n.localeData=D,n.isDuration=Pt,n.monthsShort=on,n.weekdaysMin=un,n.defineLocale=S,n.weekdaysShort=cn,n.normalizeUnits=A,n.relativeTimeThreshold=An;var ca=n;return ca})},{}],471:[function(t,e,n){e.exports=t("./src")},{"./src":506}],472:[function(t,e,n){e.exports=t("./src")},{"./src":474}],473:[function(t,e,n){var i=t("./string.js"),a=t("./reflect.js"),r={EXPIRE_NOW:-1,EXPIRE_SESSION:null,EXPIRE_ONE_SECOND:1,EXPIRE_ONE_MINUTE:60*this.EXPIRE_ONE_SECOND,EXPIRE_ONE_HOUR:60*this.EXPIRE_ONE_MINUTE,EXPIRE_ONE_DAY:24*this.EXPIRE_ONE_HOUR,EXPIRE_ONE_WEEK:7*this.EXPIRE_ONE_DAY,EXPIRE_ONE_MONTH:31*this.EXPIRE_ONE_DAY,EXPIRE_SIX_MONTHS:6*this.EXPIRE_ONE_MONTH-5,EXPIRE_ONE_YEAR:365*this.EXPIRE_ONE_DAY,EXPIRE_ONE_SIDEREAL_YEAR:365.25*this.EXPIRE_ONE_DAY,EXPIRE_SIX_MONTHS:180*this.EXPIRE_ONE_DAY,setDelegate:function(t){return a.attachDelegate(this,t)},cookieOwnerObject:function(){if("undefined"!=typeof window&&"iTunes"in window&&"cookie"in iTunes)return iTunes;if("undefined"!=typeof itms&&"undefined"!=typeof itms.cookie)return itms;if("undefined"!=typeof document)return document;throw"cookies.cookieOwnerObject: No owning object"},set:function(t,e,n,i,a){return e&&(e=escape(e)),this.setUnescaped(t,e,n,i,a)},get:function(t){var e=this.getUnescaped(t);return e&&(e=unescape(e)),e},getUnescaped:function(t){var e=null,n=this._getRaw();if(n&&t)for(var a=n.split(";"),r=a.length-1;!e&&r>=0;r--){var l=a[r],o=l.indexOf("=");if(o>0)if(o+1==l.length)e="";else{var s=i.trim(l.substring(0,o));s==t&&(e=i.trim(l.substring(o+1)))}}return e},remove:function(t,e){return this.setUnescaped(t,".",this.EXPIRE_NOW,null,e)},_setRaw:function(t){return this.cookieOwnerObject().cookie=t},_getRaw:function(){return this.cookieOwnerObject().cookie||""}};e.exports=r},{"./reflect.js":475,"./string.js":476}],474:[function(t,e,n){var i={};i.reflect=t("./reflect"),i.string=t("./string"),i.cookies=t("./cookies"),i.optionValueFromStoreFrontHeader=function(t,e){for(var n=null,a="string"==typeof t?t.split(" "):[],r=i.string.endsWith(e,":")?e:e+":",l=0;!n&&l<a.length;++l)0===a[l].search(r)&&(n=a[l].slice(r.length));return n},e.exports=i},{"./cookies":473,"./reflect":475,"./string":476}],475:[function(t,e,n){var i={functionName:function a(){return a.caller.name},shallowClone:function(t){var e={};for(var n in t){var i=t.__lookupGetter__(n),a=t.__lookupSetter__(n);i||a?(i&&e.__defineGetter__(n,i),a&&e.__defineSetter__(n,a)):e[n]=t[n]}return e},isDefined:function(t){return"undefined"!=typeof t},isDefinedNonNull:function(t){return this.isDefined(t)&&null!==t},isDefinedNonNullNonEmpty:function(t){return this.isDefined(t)&&null!=t&&""!=t},isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t||t instanceof String},isElement:function(t){return t&&1==t.nodeType},isArray:function(t){return t&&t.constructor===Array},isObject:function(t){return t&&t.constructor===Object},values:function r(t){var r=[];for(var e in t){var n=t[e];t.hasOwnProperty(e)&&!its.isFunction(n)&&r.push(n)}return r},keys:function l(t){var l=[];for(var e in t)t.hasOwnProperty(e)&&!its.isFunction(t[e])&&l.push(e);return l},hasAnyKeys:function(t){for(var e in t)if(t.hasOwnProperty(e))return!0},hasAnyNonNullKeys:function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!0},methods:function o(t){var o=[];for(var e in t){var n=t[e];t.hasOwnProperty(e)&&its.isFunction(n)&&o.push(n)}return o},invert:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&!its.isFunction(t[n])&&(e[t[n]]=n);return e},extend:function(t){argumentsArray=[!0,!0,!0].concat(arguments),this.copyKeysAndValues.apply(this,argumentsArray)},copyKeysAndValues:function(t,e,n,i){for(var a=n?i||{}:{},r=3;r<arguments.length;r++){var l=arguments[r];for(var o in l){var s=l.__lookupGetter__(o),c=l.__lookupSetter__(o);if(s||c)s&&a.__defineGetter__(o,s),c&&a.__defineSetter__(o,c);else if(Object.prototype.hasOwnProperty.call(l,o)){var u=l[o];(t||u)&&(e||"function"!=typeof u)&&(a[o]=u)}}}return a},attachDelegate:function(t,e){var n=!1;if(t&&e){var i=function(t,e,n){var i=function(){return[].push.call(arguments,e),n.apply(t,arguments)};return i.origFunction=e,i};for(var a in e){var r=e[a];if(r&&"function"==typeof r){var l=t[a];l&&"function"==typeof l&&(t[a]=i(e,l,r),n=!0)}}}return n}};e.exports=i},{}],476:[function(t,e,n){var i={startsWith:function(t,e,n){var i=!1;return t&&e&&(t=t.substr(0,e.length),n&&(t=t.toLowerCase(),e=e.toLowerCase()),i=0===t.indexOf(e)),i},endsWith:function(t,e,n){var i=!1;if(t&&e){n&&(t=t.toLowerCase(),e=e.toLowerCase());var a=t.length-e.length;i=a>=0&&t.lastIndexOf(e)===a}return i},trim:function(t,e,n){var i=null,a="	\n\x0B\f\r \u2028\u2029",r=new RegExp("^["+a+"]+"),l=new RegExp("["+a+"]+$");if(t)if(n||e&&e!=a||!t.trim){var o=null,s=null,c=null;e&&"undefined"!=typeof e?(e=e.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1"),o="["+e+"]",s=new RegExp("^"+o+"+"),c=new RegExp(o+"+$")):(o=a,s=r,c=l);var u=t.replace(s,"");i=u.replace(c,"")}else i=t.trim();return i},snakeCaseToUpperCamelCase:function(t){var e="";if(t)for(var n=t.toLowerCase().split("_"),i=0;i<n.length;i++)e+=n[i][0].toUpperCase()+n[i].slice(1)+"";return e}};e.exports=i},{}],477:[function(t,e,n){e.exports=t("./src/metrics")},{"./src/metrics":495}],478:[function(t,e,n){e.exports=t(472)},{"./src":480}],479:[function(t,e,n){e.exports=t(473)},{"./reflect.js":481,"./string.js":482}],480:[function(t,e,n){e.exports=t(474)},{"./cookies":479,"./reflect":481,"./string":482}],481:[function(t,e,n){e.exports=t(475)},{}],482:[function(t,e,n){e.exports=t(476)},{}],483:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=t("./utils"),r=t("./system"),l=!1,o=null,s={value:function(t){var e=r.configSources.sources(),n=s.debugConfigSource();return i.reflect.isArray(e)||(e=[e]),n&&(l||(l=!0,r.logger.warn('"debugConfigSource" found.\nThis will override any same-named client-supplied configSource fields.\nThis setting "sticks" across session, use "setDebugConfigSource(null)" to clear')),e.push(n)),a.keyValue.valueForKeyPath(t,e)},disabled:function(){return s.value("disabled")?!0:!1},blacklistedEvents:function(){var t=s.value("blacklistedEvents");return t||[]},blacklistedFields:function(){var t=s.value("blacklistedFields");return t||[]},removeBlacklistedFields:function(t){if(t)for(var e=s.blacklistedFields(),n=0;n<e.length;n++){var i=e[n];i&&t[i]&&delete t[i]}return t},metricsDisabledOrBlacklistedEvent:function(t){var e=s.disabled()||s.blacklistedEvents().indexOf(t)>-1;return e},setDebugConfigSource:function(t){return o=t||null,"undefined"!=typeof localStorage&&localStorage.setItem&&localStorage.removeItem&&(o?localStorage.setItem("mtMetricsKit_debugConfigSource",JSON.stringify(debugConfigSource)):localStorage.removeItem("mtMetricsKit_debugConfigSource")),o},debugConfigSource:function(){if(o);else if("undefined"!=typeof localStorage&&localStorage.getItem){var t=localStorage.getItem("mtMetricsKit_debugConfigSource");t&&(o=JSON.parse(t))}return o}};e.exports=s},{"./system":499,"./utils":502,"mt-metricskit-utils-private":478}],484:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=t("../utils"),r=t("../system"),l=r.environment,o=t("../config"),s={setDelegate:function(t){return i.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var i=null;if(!o.disabled()){var l=Array.prototype.slice.call(arguments,3),s=r.configSources.sources(),c=a.keyValue.valueForKeyPath("metrics.metricsBase",s);c&&l.push(c),i=a.eventFields.processMetricsData(this,this.knownFields(),t,e,n,l)}return i},knownFields:function c(){var c=["app","appVersion","baseVersion","capacityData","capacityDataAvailable","capacityDisk","capacitySystem","capacitySystemAvailable","connection","clientId","cookies","dsId","environmentBuild","environmentDataCenter","environmentInstance","eventTime","experimentId","isSignedIn","osVersion","page","pageContext","pageDetails","pageId","pageType","pageUrl","pixelRatio","resourceRevNum","screenHeight","screenWidth","storeFrontHeader","timezoneOffset","userAgent","userType","windowInnerHeight","windowInnerWidth","windowOuterHeight","windowOuterWidth","xpPostFrequency","xpSendMethod"];return c},app:function(t){return t&&t.app||l.app()},appVersion:function(t){return t&&t.appVersion||l.appVersion()},baseVersion:function(t){return 1},capacityData:function(t){return t&&t.capacityData||l.capacityData()},capacityDataAvailable:function(t){return t&&t.capacityDataAvailable||l.capacityDataAvailable()},capacityDisk:function(t){return t&&t.capacityDisk||l.capacityDisk()},capacitySystem:function(t){return t&&t.capacitySystem||l.capacitySystem()},capacitySystemAvailable:function(t){return t&&t.capacitySystemAvailable||l.capacitySystemAvailable()},connection:function(t){return t&&t.connection||l.connectionType()},clientId:function(t){return t&&t.clientId||i.cookies.get("xp_ci")},cookies:function(t){var e=null;if(t.cookies)e=t.cookies;else{var n=o.value("fieldsMap.cookies");if(n&&n)for(var a=0;a<n.length;a++){var r=n[a],l=i.cookies.get(r);l&&(e||(e={}),e[r]=l)}}return e},dsId:function(t){return t&&t.dsId||l.dsId()},isSignedIn:function(){return!!this.dsId()},eventTime:function(t){return t&&t.eventTime||Date.now()},experimentId:function(t){return t&&t.experimentId||i.optionValueFromStoreFrontHeader(this.storeFrontHeader(t),"ab")},osVersion:function(t){return t&&t.osVersion||l.osVersion()},page:function(t){if(!t)throw"No data provided to event_handlers/base page function";return t.page?t.page:this.pageType(t)&&this.pageId(t)?this.pageType(t)+o.value("compoundSeparator")+this.pageId(t):void 0},pageContext:function(t){return t&&t.pageContext},pageDetails:function(t){return t&&t.pageDetails},pageId:function(t){return t&&t.pageId},pageType:function(t){return t&&t.pageType},pageUrl:function(t){return t&&t.pageUr||"undefined"!=typeof window&&window.location&&window.location.href},pixelRatio:function(t){return t&&t.pixelRatio||l.pixelRatio()},resourceRevNum:function(t){return t&&t.resourceRevNum||l.resourceRevNum()},screenHeight:function(t){return t&&t.screenHeight||l.screenHeight()},screenWidth:function(t){return t&&t.screenWidth||l.screenWidth()},storeFrontHeader:function(t){return t&&t.storeFrontHeader||l.storeFrontHeader()},timezoneOffset:function(t){return t&&t.timezoneOffset||(new Date).getTimezoneOffset()},userAgent:function(t){return t&&t.userAgent||l.userAgent()},userType:function(t){return t&&t.userType||l.userType()},windowInnerHeight:function(t){return t&&t.windowInnerHeight||"undefined"!=typeof window&&window.innerHeight},windowInnerWidth:function(t){return t&&t.windowInnerWidth||"undefined"!=typeof window&&window.innerWidth},windowOuterHeight:function(t){return t&&t.windowOuterHeight||"undefined"!=typeof window&&window.outerHeight},windowOuterWidth:function(t){return t&&t.windowOuterWidth||"undefined"!=typeof window&&window.outerWidth},xpPostFrequency:function(t){return t&&t.xpPostFrequency||o.value("postFrequency")},xpSendMethod:function(t){return t&&t.xpSendMethod||r.eventRecorder.sendMethod()}};e.exports=s},{"../config":483,"../system":499,"../utils":502,"mt-metricskit-utils-private":478}],485:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["eventType","eventVersion"];return o},eventType:function(t){return"buyConfirmed"},eventVersion:function(t){return 1},createClientBuyId:function(){var t=null,e=i.keyValue.sessionStorageObject().getItem("mtMetricsKit_previousClientBuyId");return t=e&&""!=e?e+1:1,i.keyValue.sessionStorageObject().setItem("mtMetricsKit_previousClientBuyId",t),t},clientBuyIdQueryParamString:function(t){return"&clientBuyId="+t},cacheMetricsBuyData:function(t,e){if(2!=arguments.length)logger.error("buyConfirmed.cacheMetricsBuyData(): function invoked with incorrect number of parameters. Perhaps you meant to retrieve cached data instead of setting it, which would be a call to uncacheMetricsBuyData(clientBuyId)?");else{var n=JSON.stringify(e);i.keyValue.sessionStorageObject().setItem("mtMetricsKit_metricsBuyData_for_clientBuyId_"+t,n)}},uncacheMetricsBuyData:function(t){var e=null;if(1!=arguments.length)logger.error("buyConfirmed.uncacheMetricsBuyData(): function invoked with incorrect number of parameters. Perhaps you meant to set cached data instead of retrieving it, which would be a call to cacheMetricsBuyData(clientBuyId, metricsBuyData)?");else{var n=i.keyValue.sessionStorageObject().getItem("mtMetricsKit_metricsBuyData_for_clientBuyId_"+t);n&&(e=JSON.parse(n),i.keyValue.sessionStorageObject().removeItem("mtMetricsKit_metricsBuyData_for_clientBuyId_"+t))}return e},buyFailureOccurred:function(t){var e=this.uncacheMetricsBuyData(t);e&&(e.detoured=!0,this.cacheMetricsBuyData(t,e))}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],486:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n,l){var o=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var s=Array.prototype.slice.call(arguments,4),c=a.metricsData.apply(a,[t,e,n].concat(s)),u=[c].concat(s);l&&l.hasAttribute&&l.hasAttribute("data-metrics-click")&&u.push(JSON.parse(l.getAttribute("data-metrics-click"))),o=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,u),o.impressions&&(o.impressions=i.eventFields.flattenImpressions(o.impressions)),o.location=i.eventFields.buildLocationStructure(l)}return r.removeBlacklistedFields(o),o},knownFields:function o(){var o=["actionContext","actionDetails","actionType","actionUrl","eventType","eventVersion","impressions","location","targetId","targetType","positionX","positionY"];return o},eventType:function(t){return"click"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],487:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["buttons","code","details","message","type","eventType","eventVersion","type"];return o},eventType:function(t){return"dialog"},eventVersion:function(t){return 2}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],488:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["eventType","eventVersion","extRefUrl","refApp","type"];return o},eventType:function(t){return"enter"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],489:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["destinationUrl","eventType","eventVersion","type"];return o},eventType:function(t){return"exit"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],490:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c),l.impressions&&(l.impressions=i.eventFields.flattenImpressions(l.impressions))}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["eventType","eventVersion","impressions"];return o},eventType:function(t){return"impressions"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],491:[function(t,e,n){var i={};i.base=t("./base"),i.buyConfirmed=t("./buy_confirmed"),i.click=t("./click"),i.dialog=t("./dialog"),i.enter=t("./enter"),i.exit=t("./exit"),i.impressions=t("./impressions"),i.media=t("./media"),i.page=t("./page"),i.search=t("./search"),e.exports=i},{"./base":484,"./buy_confirmed":485,"./click":486,"./dialog":487,"./enter":488,"./exit":489,"./impressions":490,"./media":492,"./page":493,"./search":494}],492:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,3),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["eventType","id","idType","type","typeDetails","actionType","actionDetails","url","duration","position"];return o},eventType:function(t){return"media"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],493:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l=[],o={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,3),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function s(){var s=["eventType","eventVersion","extRefUrl","hostApp","refApp","refUrl","requestStartTime","responseStartTime","responseEndTime","pageHistory","pageLoadTime","pageRenderTime","searchFilters","searchTerm"];return s},eventType:function(t){return"page"},eventVersion:function(t){return 1},pageHistory:function(t){if(t.pageHistory)e=t.pageHistory;else{var e=l.slice(0),n=t.page;n&&(l.length>=5&&l.shift(),l.push(n))}return e}};e.exports=o},{"../config":483,"../utils":502,"./base":484}],494:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,3),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["actionDetails","actionType","actionUrl","eventType","eventVersion","filters","location","targetId","targetType","term"];return o},eventType:function(t){return"search"},eventVersion:function(t){return 1}};e.exports=l},{"../config":483,"../utils":502,"./base":484}],495:[function(t,e,n){var i=(t("mt-metricskit-utils-private"),t("./utils")),a=t("./system"),r=t("./config"),l=t("./event_handlers");metrics={system:a,config:r,eventHandlers:l,utils:i,version:function(){return"2.5.2"}},e.exports=metrics},{"./config":483,"./event_handlers":491,"./system":499,"./utils":502,"mt-metricskit-utils-private":478}],496:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a={setDelegate:function(t){return i.reflect.attachDelegate(this,t)},sources:function(){logger.error("configSources.sources(): No delegate implementation provided")}};e.exports=a},{"mt-metricskit-utils-private":478}],497:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=["The function metrics.system.environment.","placeholder","() must be overridden with a platform-specific delegate function. If you have no data for this field, have your delegate return null or undefined (no 'return')"],r={setDelegate:function(t){return i.cookies.setDelegate(t),i.reflect.attachDelegate(this,t)},app:function(){throw a[1]=i.reflect.functionName(),a.join("")},appVersion:function(){throw a[1]=i.reflect.functionName(),a.join("")},capacityData:function(){throw a[1]=i.reflect.functionName(),a.join("")},capacityDataAvailable:function(){throw a[1]=i.reflect.functionName(),a.join("")},capacityDisk:function(){throw a[1]=i.reflect.functionName(),a.join("")},capacitySystem:function(){throw a[1]=i.reflect.functionName(),a.join("")},capacitySystemAvailable:function(){throw a[1]=i.reflect.functionName(),a.join("")},connectionType:function(){throw a[1]=i.reflect.functionName(),a.join("")},cookieOwnerObject:function(){throw a[1]=i.reflect.functionName(),a.join("")},dsId:function(){throw a[1]=i.reflect.functionName(),a.join("")},environmentBuild:function(){},environmentDataCenter:function(){},environmentInstance:function(){},osVersion:function(){throw a[1]=i.reflect.functionName(),a.join("")},pixelRatio:function(){throw a[1]=i.reflect.functionName(),a.join("")},resourceRevNum:function(){throw a[1]=i.reflect.functionName(),a.join("")},screenHeight:function(){throw a[1]=i.reflect.functionName(),a.join("")},screenWidth:function(){throw a[1]=i.reflect.functionName(),a.join("")},storeFrontHeader:function(){throw a[1]=i.reflect.functionName(),a.join("")},userAgent:function(){throw a[1]=i.reflect.functionName(),a.join("")},userType:function(){throw a[1]=i.reflect.functionName(),a.join("")},windowInnerHeight:function(){throw a[1]=i.reflect.functionName(),a.join("")},windowInnerWidth:function(){throw a[1]=i.reflect.functionName(),a.join("")},windowOuterHeight:function(){throw a[1]=i.reflect.functionName(),a.join("")},windowOuterWidth:function(){throw a[1]=i.reflect.functionName(),a.join("")}};e.exports=r},{"mt-metricskit-utils-private":478}],498:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=(t("./logger"),["The function metrics.system.eventRecorder.","placeholder","() must be overridden with a platform-specific delegate function. If you have no data for this field, have your delegate return null or undefined (no 'return')"]),r={setDelegate:function(t){return i.reflect.attachDelegate(this,t)},recordEvent:function(t,e){throw a[1]=i.reflect.functionName(),a.join("")},sendMethod:function(){throw a[1]=i.reflect.functionName(),a.join("")}};e.exports=r},{"./logger":500,"mt-metricskit-utils-private":478}],499:[function(t,e,n){var i={};i.configSources=t("./config_sources"),i.environment=t("./environment"),i.eventRecorder=t("./event_recorder"),i.logger=t("./logger"),e.exports=i},{"./config_sources":496,"./environment":497,"./event_recorder":498,"./logger":500}],500:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=function(t,e){var n=logger.levelStringToInt[t];if(logger.level()<=n){var i=Array.prototype.slice.call(e).toString()||"";if(logger[t]._lastLog=i,logger._throwLevel<=n)throw new Error("logger set to throw instead of log for log level: '"+t+"' - log arguments were: "+i);console[t].apply(console,e)}};logger={MIN_VALUE:-1,NONE:-1,SILENT:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,MAX_VALUE:4,levelIntToString:{NONE:"none",SILENT:"silent",DEBUG:"debug",INFO:"info",
WARN:"warn",ERROR:"error"},levelStringToInt:{none:-1,silent:0,debug:1,info:2,warn:3,error:4},setDelegate:function(t){return i.reflect.attachDelegate(this,t)},setThrowLevel:function(t){l=t},setLevel:function(t){var e=null;"string"==typeof t?e=logger.levelStringToInt[t.toLowerCase()]:"number"==typeof t&&t>=logger.MIN_LEVEL&&t<=logger.MAX_LEVEL&&(e=t),null!=e&&(r=e)},level:function(){return r},levelString:function(){return logger.levelIntToString[this.level()]},debug:function(){a("debug",arguments)},info:function(){a("info",arguments)},warn:function(){a("warn",arguments)},error:function(){a("error",arguments)}};var r=logger.INFO,l=logger.NONE;e.exports=logger},{"mt-metricskit-utils-private":478}],501:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=t("./key_value"),r=t("../system/config_sources"),l=t("../system/logger"),o=function(t,e){var n="its",i="",r=t.indexOf("."),l=a.valueForKeyPath("metrics.compoundSeparator",e)||i,o=-1!==r?t.substring(0,r):n;return o+l+"id"},s=function(t){var e,n={},i=[];if(t&&t[0]&&void 0!==t[0].index)for(var a=0;a<t.length;++a)e=t[a].index,n[e]||(n[e]=!0,i.push(t[a]));return i},c={mergeAndCleanEventFields:function(t){for(var e=[!1,!1,!1].concat(Array.prototype.slice.call(arguments)),n=[],a=0;a<e.length;a++){var r=e[a];if(r.constructor===Array)for(var l=0;l<r.length;l++)n.push(r[l]);else n.push(r)}return i.reflect.copyKeysAndValues.apply(this,n)},processMetricsData:function(t,e,n,i,a,r){var l={},o={pageId:n,pageType:i,pageContext:a};if(r.length){var s=[o],c=s.concat(r);o=this.mergeAndCleanEventFields(c)}if(l=o,e&&e.length)for(var u=0;u<e.length;u++){var h=e[u],d=t[h];"function"==typeof d&&(l[h]=d.call(t,o))}return l},applyFieldsMap:function(t,e){var n,i,o,e,s=r.sources;if(t&&e)if(o={},n=a.valueForKeyPath("metrics.fieldsMap",s())||a.valueForKeyPath("fieldsMap",s())||{},i=a.valueForKeyPath(e,n,n.custom))if(Array.isArray(i))for(var c=0;c<i.length;++c)t[i[c]]&&(o[i[c]]=t[i[c]]);else if("object"==typeof i)for(var u in i)for(var c=0;c<i[u].length;++c){var h=a.valueForKeyPath(i[u][c],t);if(h){o[u]=h;break}}else l.error("mt-metricskit: incorrect data type provided to applyFieldsMap (only accepts objects and Arrays)");else l.error("mt-metricskit: unable to get fieldsMap from config-source");else t||l.error("mt-metricskit: No data provided to applyFieldsMap"),e||l.error("mt-metricskit: No sectionName provided to applyFieldsMap");return o},flattenImpressions:function(t,e){var n,i,c,u,h=[],d=e||1,p=r.sources;if(t){t=s(t);for(var m=0;m<t.length;m++){if(n=t[m],"string"==typeof n.data)try{i=JSON.parse(n.data)}catch(f){u=decodeURIComponent(n.data);try{i=JSON.parse(u)}catch(g){l.error("mt-metricskit: non-JSON serialized data found on impression object. Cannot parse.",f)}}else i=n;i.impressionTimes=n.timestamps,i.impressionIndex=n.index,i.id&&("genre"===n.kind?i.idType="label"+a.valueForKeyPath("metrics.compoundSeparator",p())+"id":i.idType=o(i.id.toString(),p())),n.parent&&void 0!==n.parent.impressionId&&(i.impressionParentId=n.parent.impressionId),i.impressionId=d,n.impressionId=d,++d,h.push(i),a.valueForKeyPath("children.length",n)>0&&(c=this.flattenImpressions(n.children,d),h=h.concat(c),d+=c.length)}}else l.warn("Fuse-Metrics: No impressions provided to to flattenImpressions");return h},buildLocationStructure:function(t){for(var e,n,i,a,r,l,o=t,s=[];o;){if(n={},l=0,e=o.parentNode,o.hasAttribute&&o.hasAttribute("data-metrics-location")&&(n=JSON.parse(o.getAttribute("data-metrics-location")),n.locationType)){if(e){i=e.childNodes;for(var c=0;c<i.length;c++)if(a="function"==typeof i.item&&i.item(c)||i[c],r=a.hasAttribute&&a.hasAttribute("data-metrics-location")?JSON.parse(a.getAttribute("data-metrics-location")).locationType:void 0){if(a===o)break;r===n.locationType&&l++}}n.locationPosition=l,s.push(n)}o=e}return s}};e.exports=c},{"../system/config_sources":496,"../system/logger":500,"./key_value":503,"mt-metricskit-utils-private":478}],502:[function(t,e,n){var i={};i.keyValue=t("./key_value"),i.eventFields=t("./event_fields"),e.exports=i},{"./event_fields":501,"./key_value":503}],503:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a=t("../system/logger"),r={_valueForKeyPath:function(t,e,n){var i=e;if(t&&e)for(var a=t.split("."),r=0;i&&r<a.length;r++){var l=a[r];!i[l]&&n&&(i[l]={}),i=i[l]?i[l]:null}return i},valueForKeyPath:function(t,e){var n=null;if(t&&e)for(var i=this.sourcesArray(Array.prototype.slice.call(arguments,1)),a=i.length-1;a>=0;a--){var r=i[a];if(n=this._valueForKeyPath(t,r))break}return n},createObjectAtKeyPath:function(t,e){return this._valueForKeyPath(t,e,!0)},sourcesArray:function(t){var e=[];for(e=e.concat(t),arguments&&arguments.length>1&&(e=e.concat(arguments.slice[1])),ii=e.length-1;ii>=0;ii--){var n=e[ii];i.reflect.isArray(n)&&(e.splice(ii,1),e=e.concat(n))}return e},sessionStorageObject:function(){var t=null;return function(){return"undefined"==typeof sessionStorage?(a.error("mt-metricskit.utils.sessionStorageObject: 'sessionStorage' object not found. Override this function if there is a platform-specific implementation"),t||(t={getItem:function(t){return this[t]},setItem:function(t,e){this[t]=e},removeItem:function(t){delete this[t]}})):t=sessionStorage,t}}()};e.exports=r},{"../system/logger":500,"mt-metricskit-utils-private":478}],504:[function(t,e,n){var i=t("mt-metricskit-utils-private"),a={_device:function(){if("undefined"!=typeof Device)return Device;throw"system.environment ITML delegate 'Device' object not found"},_itms:function(){if("undefined"!=typeof itms)return itms;throw"system.environment ITML delegate 'itms' object not found"},_settings:function(){if("undefined"!=typeof Settings)return Settings;throw"system.environment ITML delegate 'Settings' object not found"},_tabBar:function(){if("undefined"!=typeof TabBar)return TabBar;throw"system.environment ITML delegate 'TabBar' object not found"},_updatableAssets:function(){if("undefined"!=typeof UpdatableAssets)return UpdatableAssets;throw"system.environment ITML delegate 'UpdatableAssets' object not found"},setDelegate:function(t){return i.reflect.attachDelegate(this,t)},app:function(){return a._device().appIdentifier},appVersion:function(){return a._device().appVersion},capacityData:function(){var t=a._device().capacity("totalDataCapacity");return a._deResNumber(t)},capacityDataAvailable:function(){var t=a._device().capacity("totalDataAvailable");return a._deResNumber(t)},capacitySystem:function(){var t=a._device().capacity("totalSystemCapacity");return a._deResNumber(t)},capacitySystemAvailable:function(){var t=a._device().capacity("totalSystemAvailable");return a._deResNumber(t)},capacityDisk:function(){var t=a._device().capacity("totalDiskCapacity");return a._deResNumber(t)},_deResNumber:function(t){return"undefined"!=typeof t?100*Math.floor(Math.floor(t/1024/1024)/100):void 0},connectionType:function(){return a._itms().networkConnectionType},cookieOwnerObject:function(){if("undefined"!=typeof window&&"iTunes"in window&&"cookie"in iTunes)return iTunes;if("undefined"!=typeof itms&&"undefined"!=typeof itms.cookie)return itms;if("undefined"!=typeof document)return document;if(a._itms&&"undefined"!=typeof a._itms().cookie)return a._itms();throw"system.environment ITML delegate 'cookieOwnerObject' object not found"},dsId:function(){return a._itms().accountInfo.DSID},osVersion:function(){return a._device().systemVersion},pixelRatio:function(){return a._device().pixelRatio},resourceRevNum:function(){return a._updatableAssets().currentManifestVersion()},screenHeight:function(){return a._settings().Screen.height},screenWidth:function(){return a._settings().Screen.width},storeFrontHeader:function(){return a._itms().storefront},userAgent:function(){return a._itms().userAgent},userType:function r(){var r=a._itms().eligibilityForService(),t=r.accountStatus||r;return t.subscriptionExpirationDate&&(t.subscriptionExpirationDate="invalid"),t},windowInnerHeight:function(){},windowInnerWidth:function(){},windowOuterHeight:function(){},windowOuterWidth:function(){}};e.exports=a},{"mt-metricskit-utils-private":472}],505:[function(t,e,n){var i=t("mt-metricskit"),a=t("mt-metricskit-utils-private"),r={_itms:function(){if("undefined"!=typeof itms)return itms;throw"system.environtment ITML delegate 'itms' object not found"},setDelegate:function(t){return a.reflect.attachDelegate(this,t)},recordEvent:function(t,e){var n=null;return e&&!i.config.metricsDisabledOrBlacklistedEvent(e.eventType)&&(i.config.removeBlacklistedFields(e),r._itms().recordEvent(t,e),n=e),n},sendMethod:function(){return"itms"}};e.exports=r},{"mt-metricskit":477,"mt-metricskit-utils-private":472}],506:[function(t,e,n){var i=t("./environment"),a=t("./event_recorder");itml={environment:i,eventRecorder:a,version:function(){return"1.2.0"}},e.exports=itml},{"./environment":504,"./event_recorder":505}],507:[function(t,e,n){arguments[4][477][0].apply(n,arguments)},{"./src/metrics":526}],508:[function(t,e,n){arguments[4][472][0].apply(n,arguments)},{"./src":510}],509:[function(t,e,n){arguments[4][473][0].apply(n,arguments)},{"./reflect.js":511,"./string.js":512}],510:[function(t,e,n){arguments[4][474][0].apply(n,arguments)},{"./cookies":509,"./reflect":511,"./string":512}],511:[function(t,e,n){var i={functionName:function a(){return a.caller.name},shallowClone:function(t){var e={};for(var n in t){var i=t.__lookupGetter__(n),a=t.__lookupSetter__(n);i||a?(i&&e.__defineGetter__(n,i),a&&e.__defineSetter__(n,a)):e[n]=t[n]}return e},isDefined:function(t){return"undefined"!=typeof t},isDefinedNonNull:function(t){return this.isDefined(t)&&null!==t},isDefinedNonNullNonEmpty:function(t){return this.isDefined(t)&&null!=t&&""!=t},isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t||t instanceof String},isElement:function(t){return t&&1==t.nodeType},isArray:function(t){return t&&t.constructor===Array},isObject:function(t){return t&&t.constructor===Object},values:function r(t){var r=[];for(var e in t){var n=t[e];t.hasOwnProperty(e)&&!its.isFunction(n)&&r.push(n)}return r},keys:function l(t){var l=[];for(var e in t)t.hasOwnProperty(e)&&!its.isFunction(t[e])&&l.push(e);return l},hasAnyKeys:function(t){for(var e in t)if(t.hasOwnProperty(e))return!0},hasAnyNonNullKeys:function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!0},methods:function o(t){var o=[];for(var e in t){var n=t[e];t.hasOwnProperty(e)&&its.isFunction(n)&&o.push(n)}return o},invert:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&!its.isFunction(t[n])&&(e[t[n]]=n);return e},extend:function(t){argumentsArray=[!0,!0,!0].concat(arguments),this.copyKeysAndValues.apply(this,argumentsArray)},copyKeysAndValues:function(t,e,n,i){for(var a=n?i||{}:{},r=3;r<arguments.length;r++){var l=arguments[r];for(var o in l){var s=l.__lookupGetter__(o),c=l.__lookupSetter__(o);if(s||c)s&&a.__defineGetter__(o,s),c&&a.__defineSetter__(o,c);else if(Object.prototype.hasOwnProperty.call(l,o)){var u=l[o];(t||null!==u&&void 0!==u)&&(e||"function"!=typeof u)&&(a[o]=u)}}}return a},attachDelegate:function(t,e){var n=!1;if(t&&e){var i=function(t,e,n){var i=function(){return[].push.call(arguments,e),n.apply(t,arguments)};return i.origFunction=e,i};for(var a in e){var r=e[a];if(r&&"function"==typeof r){var l=t[a];l&&"function"==typeof l&&(t[a]=i(e,l,r),n=!0)}}}return n}};e.exports=i},{}],512:[function(t,e,n){e.exports=t(476)},{}],513:[function(t,e,n){e.exports=t(483)},{"./system":530,"./utils":533,"mt-metricskit-utils-private":508}],514:[function(t,e,n){var i=t("../utils"),a=t("./base"),r=t("../config"),l={setDelegate:function(t){return _utils.reflect.attachDelegate(this,t)},metricsData:function(t,e,n){var l=null;if(!r.metricsDisabledOrBlacklistedEvent(this.eventType())){var o=a.metricsData.apply(a,arguments),s=Array.prototype.slice.call(arguments,4),c=[o].concat(s);l=i.eventFields.processMetricsData(this,this.knownFields(),t,e,n,c)}return r.removeBlacklistedFields(l),l},knownFields:function o(){var o=["eventType","eventVersion","type"];return o},eventType:function(t){return"account"},eventVersion:function(t){return 1}};e.exports=l},{"../config":513,"../utils":533,"./base":515}],515:[function(t,e,n){e.exports=t(484)},{"../config":513,"../system":530,"../utils":533,"mt-metricskit-utils-private":508}],516:[function(t,e,n){e.exports=t(485)},{"../config":513,"../utils":533,"./base":515}],517:[function(t,e,n){e.exports=t(486)},{"../config":513,"../utils":533,"./base":515}],518:[function(t,e,n){e.exports=t(487)},{"../config":513,"../utils":533,"./base":515}],519:[function(t,e,n){e.exports=t(488)},{"../config":513,"../utils":533,"./base":515}],520:[function(t,e,n){e.exports=t(489)},{"../config":513,"../utils":533,"./base":515}],521:[function(t,e,n){e.exports=t(490)},{"../config":513,"../utils":533,"./base":515}],522:[function(t,e,n){var i={};i.account=t("./account"),i.base=t("./base"),i.buyConfirmed=t("./buy_confirmed"),i.click=t("./click"),i.dialog=t("./dialog"),i.enter=t("./enter"),i.exit=t("./exit"),i.impressions=t("./impressions"),i.media=t("./media"),i.page=t("./page"),i.search=t("./search"),e.exports=i},{"./account":514,"./base":515,"./buy_confirmed":516,"./click":517,"./dialog":518,"./enter":519,"./exit":520,"./impressions":521,"./media":523,"./page":524,"./search":525}],523:[function(t,e,n){e.exports=t(492)},{"../config":513,"../utils":533,"./base":515}],524:[function(t,e,n){e.exports=t(493)},{"../config":513,"../utils":533,"./base":515}],525:[function(t,e,n){e.exports=t(494)},{"../config":513,"../utils":533,"./base":515}],526:[function(t,e,n){arguments[4][495][0].apply(n,arguments)},{"./config":513,"./event_handlers":522,"./system":530,"./utils":533,"mt-metricskit-utils-private":508}],527:[function(t,e,n){e.exports=t(496)},{"mt-metricskit-utils-private":508}],528:[function(t,e,n){e.exports=t(497)},{"mt-metricskit-utils-private":508}],529:[function(t,e,n){e.exports=t(498)},{"./logger":531,"mt-metricskit-utils-private":508}],530:[function(t,e,n){e.exports=t(499)},{"./config_sources":527,"./environment":528,"./event_recorder":529,"./logger":531}],531:[function(t,e,n){e.exports=t(500)},{"mt-metricskit-utils-private":508}],532:[function(t,e,n){e.exports=t(501)},{"../system/config_sources":527,"../system/logger":531,"./key_value":534,"mt-metricskit-utils-private":508}],533:[function(t,e,n){e.exports=t(502)},{"./event_fields":532,"./key_value":534}],534:[function(t,e,n){e.exports=t(503)},{"../system/logger":531,"mt-metricskit-utils-private":508}],535:[function(t,e,n){e.exports=t(452)},{"native":536,utils:537}],536:[function(t,e,n){e.exports=t(453)},{}],537:[function(t,e,n){e.exports=t(451)},{}],538:[function(t,e,n){var i=t("lager"),a=function(t){t=t||{},this._caller=t.caller||"P6",this._maxContentSize=t.maxContentSize||200,this._requiresSubscription=t.requireSubscription||!1};a.prototype._cache={},a.prototype._profiles={},a.prototype.fetch=function(t){for(var e=t.profile,n=t.artworkProfile,i=t.contentIds,a=t.onSuccess,r=t.onFailure,l=[],o={},s=0;s<i.length;s++){var c=this._cache[i[s]]&&this._cache[i[s]][e]?this._cache[i[s]][e]:null;c?o[i[s]]=c:l.push(i[s])}if(0===l.length)a.call(this,o);else{var u={idsToFetch:l,contentMap:o,profile:e,artworkProfile:n,onSuccess:a,onFailure:r};this._makeStorePlatformRequest(u)}},a.prototype._makeStorePlatformRequest=function(t){var e=t.idsToFetch;if(t.profile){this._cache[t.profile]||(this._cache[t.profile]={});var n=[],i=0;if(e.length>this._maxContentSize){var a=Math.floor(e.length/this._maxContentSize),r=0,l=0;for(i=0;a>i;i++)r=this._maxContentSize*i,l=this._maxContentSize*(i+1),n.push(e.slice(r,l));this._maxContentSize*i!==e.length&&n.push(e.slice(this._maxContentSize*i,e.length))}else n.push(e);var o=0,s={},c=t.contentMap&&Object.keys(t.contentMap).length>0,u=!1,h=t.onSuccess,d=t.onFailure,p=function(e){o++,c=!0,this._copy(e,s),t.iterativeCallback&&t.iterativeCallback.call(this,s),o===n.length&&h.call(this,s,u)},m=function(t){o++,u=!0,o===n.length&&(c?h.call(this,s,u):d.call(this,t))},f={p:t.profile,caller:this._caller,requestParameters:{},version:"2"};t.artworkProfile&&(f.artwork=t.artworkProfile);var g=function(e,n){var i=n||!e||!(e instanceof Object)||!Object.keys(e).length||!e.results;if(i)m.call(this,n);else{this.cacheData(e,t.profile);for(var a=Object.keys(e.results),r=0;r<a.length;r++)t.contentMap[a[r]]=e.results[a[r]];p.call(this,t.contentMap)}}.bind(this);for(i=0;i<n.length;i++)e=n[i],f.id=e.join(","),itms.loadStoreContent(f,g)}else t.onFailure.call(this,"missing profile from config")},a.prototype._hasSubscriptionPricing=function(t){var e=t.offers,n=!0;if(e&&e.length>0){n=!1;for(var i=0;i<e.length;i++)if(e[i].type&&"subscription"===e[i].type){n=!0;break}}return n},a.prototype.cacheData=function(t,e){var n=t.results;if(n)for(var a=Object.keys(n),r=0;r<a.length;r++){var l=n[a[r]];(!this._requiresSubscription||this._hasSubscriptionPricing(l))&&(this._cache[a[r]]||(this._cache[a[r]]={}),this._cache[a[r]][e]=l)}else i.warn("No results for store platform profile:",e,t)},a.prototype.lookup=function(t,e){var n;if(this._cache[t]){var i=Object.keys(this._cache[t]);e&&i.indexOf(e)>-1?n=this._cache[t][e]:e||(n=this._cache[t][i[0]])}return this._copy(n)},a.prototype._copy=function(t,e){if(t){var n={};e&&(n=e);for(var i in t)n[i]=t[i];return n}},e.exports=a},{lager:539}],539:[function(t,e,n){e.exports=t(469)},{}]},{},[2]);